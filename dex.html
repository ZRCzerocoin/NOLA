<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>NOLA Exchange — Centered Section</title>
<style>
/* ===== RESET & THEME ===== */
* {margin:0; padding:0; box-sizing:border-box; font-family:'Arial',sans-serif;}
body {overflow-x:hidden; background: radial-gradient(circle at center, #0c0014, #1a002b 80%); color:#fff; scroll-behavior:smooth; min-height:100vh;}
:root{
  --bg-1:#0c0014; --bg-2:#1a002b;
  --accent-1:#b445ff; --accent-2:#7013ff;
  --glass:rgba(255,255,255,0.05); --glass-2:rgba(255,255,255,0.03);
  --suggest-bg:rgba(25,0,50,0.98);
  --shadow:0 0 25px rgba(180,0,255,0.3);
  --container-max:480px;
}

/* ===== NEBULA LAYER + PARTICLES (unchanged) ===== */
body::before{content:'';position:fixed;left:-50%;top:-50%;width:200%;height:200%;background: radial-gradient(circle, rgba(150,0,255,0.12), transparent 60%);animation:nebulaMove 20s infinite alternate ease-in-out;z-index:-2}
@keyframes nebulaMove{0%{transform:translate(-10%,-10%)}100%{transform:translate(5%,5%)}}
.particle{position:absolute;width:2px;height:2px;background:#b445ff;border-radius:50%;opacity:0.8;animation:floatParticle linear infinite;z-index:-1}
@keyframes floatParticle{0%{transform:translateY(0) translateX(0);opacity:0.8}50%{transform:translateY(-50px) translateX(20px);opacity:0.4}100%{transform:translateY(0) translateX(0);opacity:0.8}}

/* ===== TOP LOGO (untouched) ===== */
.logo{width:88px;height:auto;display:block;margin:18px auto;pointer-events:none;animation:logoGlow 5s ease-in-out infinite alternate,logoRotate 30s linear infinite;z-index:998;position:fixed;left:50%;top:8px;transform:translateX(-50%)}
@keyframes logoGlow{0%{filter:drop-shadow(0 0 12px #9c00ff)}50%{filter:drop-shadow(0 0 30px #d15fff)}100%{filter:drop-shadow(0 0 12px #9c00ff)}}
@keyframes logoRotate{0%{transform:translateX(-50%) rotateY(0deg)}100%{transform:translateX(-50%) rotateY(360deg)}}

/* ===== SECTION WRAPPER: CENTER THE WHOLE SECTION ===== */
.section-wrapper{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:18px; /* space between swap control and card */
  padding:28px;
  position:relative;
  z-index:1;
}

/* ===== CARD ===== */
.container{
  width:90%;
  max-width:var(--container-max);
  margin:0;
  background:var(--glass);
  border:1px solid rgba(255,255,255,0.08);
  border-radius:25px;
  padding:22px;
  backdrop-filter:blur(18px);
  box-shadow:var(--shadow);
  animation:cardIn 800ms ease;
  position:relative;
}
@keyframes cardIn{from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:translateY(0)}}
h2{text-align:center;font-size:26px;font-weight:600;margin-bottom:14px;color:#e0b3ff;text-shadow:0 0 8px #b445ff;}

/* ===== INPUT ROWS (UNIFIED) ===== */
.input-box{
  margin-top:14px;padding:12px;background:rgba(255,255,255,0.04);border-radius:14px;border:1px solid rgba(255,255,255,0.07);
  display:flex;align-items:center;gap:12px;position:relative;box-shadow:0 6px 16px rgba(150,0,255,0.06);
}
.input-box .left{display:flex;align-items:center;gap:10px;min-width:0;flex:1}
.token-icon{width:44px;height:44px;border-radius:12px;background:rgba(255,255,255,0.02);display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0}
.token-icon img{width:100%;height:100%;object-fit:cover;display:block}
.token-symbol{font-weight:800;font-size:16px;color:#fff;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:160px}

/* token chip (selected appearance) */
.input-box.has-token .token-symbol{
  display:inline-flex;align-items:center;padding:6px 10px;border-radius:999px;background:linear-gradient(90deg,var(--accent-1),var(--accent-2));
  box-shadow:0 8px 26px rgba(180,68,255,0.12), inset 0 -6px 12px rgba(0,0,0,0.08);font-size:14px;
}
.input-box.has-token .token-symbol::before{
  content:'';display:inline-block;width:18px;height:18px;margin-right:8px;border-radius:6px;background:#fff;opacity:0.08;vertical-align:middle;
  background-image:var(--token-icon-bg); background-size:cover; background-position:center;
}

/* input amount area */
.input-amount{margin-left:8px;min-width:120px}
.input-amount input{width:100%;padding:10px 12px;border-radius:10px;border:none;background:rgba(255,255,255,0.03);color:#fff;font-size:15px;outline:none}

/* usd on the right */
.usd-right{position:absolute;right:12px;top:50%;transform:translateY(-50%);font-size:13px;color:rgba(255,255,255,0.9);font-weight:700;text-align:right}

/* ===== SUGGESTIONS: compact & stylish ===== */
.suggestions{position:absolute;top:72px;left:12px;right:12px;background:var(--suggest-bg);border-radius:12px;padding:6px;max-height:240px;overflow:auto;display:none;z-index:220;box-shadow:0 10px 30px rgba(120,0,255,0.08)}
.suggestion-item{display:flex;align-items:center;gap:10px;padding:8px;border-radius:10px;cursor:pointer;justify-content:space-between}
.suggestion-item:hover{background:linear-gradient(90deg, rgba(180,68,255,0.06), rgba(112,19,255,0.04))}
.suggestion-left{display:flex;align-items:center;gap:10px;min-width:0}
.suggestion-left img{width:28px;height:28px;border-radius:8px;object-fit:cover}
.suggestion-main{display:flex;flex-direction:column;min-width:0}
.suggestion-symbol{font-weight:700;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.suggestion-name{font-size:12px;opacity:0.8;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.suggestion-price-pill{min-width:70px;text-align:right;padding:6px 8px;border-radius:8px;background:rgba(255,255,255,0.03);font-weight:700;font-size:12px;}

/* swap outside control (moved out of card) */
.swap-outside{
  width:56px;height:56px;border-radius:14px;display:flex;align-items:center;justify-content:center;
  background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));border:1px solid rgba(255,255,255,0.06);
  box-shadow:0 10px 30px rgba(120,0,255,0.08), 0 2px 8px rgba(0,0,0,0.35);
  cursor:pointer;font-size:22px;color:#fff;transition:transform 160ms ease, box-shadow 160ms ease;
  backdrop-filter: blur(6px);
}
.swap-outside:hover{ transform: translateY(-6px) rotate(-10deg); box-shadow:0 18px 36px rgba(120,0,255,0.14) }
.swap-outside:active{ transform: translateY(-2px) rotate(-6deg) scale(0.98) }

/* top-right wallet connect (untouched) */
.top-right-connect{position:fixed;right:18px;top:18px;z-index:70;display:flex;gap:10px;align-items:center}
.addr-chip{padding:8px 12px;border-radius:12px;background:rgba(255,255,255,0.03);font-weight:700;display:none}
.connect-floating{background:linear-gradient(90deg,var(--accent-1),var(--accent-2));color:#fff;padding:10px 14px;border-radius:12px;border:none;cursor:pointer;font-weight:800;box-shadow:0 10px 30px rgba(106,0,255,0.12)}

/* footer */
.footer{position:fixed;left:0;right:0;bottom:12px;display:flex;flex-direction:column;gap:6px;align-items:center;justify-content:center;z-index:40;color:rgba(255,255,255,0.75);font-size:13px}
.footer a{color:rgba(215,165,255,0.95);text-decoration:none;font-weight:700;margin-left:8px}

@media(max-width:720px){
  .section-wrapper{padding:18px;gap:12px;flex-direction:column-reverse}
  .swap-outside{transform:none}
  .container{width:100%;max-width:520px}
  .input-box .token-symbol{max-width:120px}
}
</style>
</head>
<body>

<!-- particles -->
<script>
for(let i=0;i<60;i++){ const p=document.createElement('div'); p.className='particle'; p.style.top=Math.random()*100+'%'; p.style.left=Math.random()*100+'%'; p.style.width=(Math.random()*3+1)+'px'; p.style.height=(Math.random()*3+1)+'px'; p.style.animationDuration=(Math.random()*10+5)+'s'; document.body.appendChild(p); }
</script>

<!-- logo (unchanged) -->
<img id="logoFloat" class="logo" src="logo.gif" alt="NOLA Logo">

<!-- top-right connect (unchanged) -->
<div class="top-right-connect">
  <div id="addrChip" class="addr-chip"></div>
  <button id="connectFloating" class="connect-floating">Connect Wallet</button>
</div>

<!-- ===== SECTION WRAPPER (centers the whole exchange on page) ===== -->
<div class="section-wrapper">

  <!-- enhanced swap control placed OUTSIDE the card (left of it on wide screens; stacked on small screens) -->
  <div id="swapOutside" class="swap-outside" title="Swap From ↔ To">⇅</div>

  <!-- MAIN CARD (unchanged internals, but minor class/ID names kept consistent) -->
  <div class="container">
    <h2>NOLA Exchange</h2>

    <!-- FROM -->
    <div class="input-box" id="fromBox" style="position:relative;">
      <div class="left">
        <div class="token-icon" id="fromIcon"><img id="fromLogo" src="" alt="" style="display:none;"></div>
        <div style="display:flex;flex-direction:column;min-width:0;">
          <div class="token-symbol" id="fromSymbol">From</div>
          <div style="margin-top:6px;">
            <input id="fromToken" placeholder="Token symbol or contract" style="padding:8px 10px;border-radius:10px;border:none;background:transparent;color:#fff;width:100%;">
          </div>
        </div>
        <div class="input-amount" style="min-width:120px;">
          <input id="fromAmount" placeholder="Amount" type="number" step="any">
        </div>
      </div>
      <div class="usd-right" id="fromUsd" style="display:none;">≈ $—</div>
      <div class="suggestions" id="fromSuggestions" data-side="from"></div>
    </div>

    <!-- TO -->
    <div class="input-box" id="toBox" style="position:relative; margin-top:12px;">
      <div class="left">
        <div class="token-icon" id="toIcon"><img id="toLogo" src="" alt="" style="display:none;"></div>
        <div style="display:flex;flex-direction:column;min-width:0">
          <div class="token-symbol" id="toSymbol">To</div>
          <div style="margin-top:6px;">
            <input id="toToken" placeholder="Token symbol or contract" style="padding:8px 10px;border-radius:10px;border:none;background:transparent;color:#fff;width:100%;">
          </div>
        </div>
        <div class="input-amount" style="min-width:120px;">
          <input id="toAmount" placeholder="Estimate" readonly>
        </div>
      </div>
      <div class="usd-right" id="toUsd" style="display:none;">≈ $—</div>
      <div class="suggestions" id="toSuggestions" data-side="to"></div>
    </div>

    <!-- controls -->
    <div class="controls" style="margin-top:14px;">
      <select id="slippage" class="slippage" title="Select slippage">
        <option value="0.1">0.1%</option><option value="0.5">0.5%</option><option value="1" selected>1%</option><option value="2">2%</option><option value="custom">Custom</option>
      </select>
      <input id="customSlippage" placeholder="Custom %" style="padding:8px 10px;border-radius:10px;border:none;background:rgba(255,255,255,0.03);color:#fff;display:none;width:90px">
    </div>

    <div class="swap-row">
      <button id="swapBtn" class="btn" style="flex:1">Swap</button>
    </div>
  </div>
</div>

<!-- footer unchanged -->
<div class="footer">
  <div>© 2025 NOLA — All rights reserved</div>
  <div><a href="PrivacyTerms.html" id="privacyTerms">Privacy & Terms</a> • <a href="#" id="xLink">X</a> <a href="#" id="tgLink">Telegram</a> <a href="#" id="siteLink">Website</a></div>
</div>

<!-- libs unchanged -->
<script src="https://cdn.jsdelivr.net/npm/ethers/dist/ethers.min.js"></script>

<script>
/* ===== NOTE =====
  This script keeps the same logic you had.
  I only updated DOM selectors and appearance toggles:
  - swapOutside replaced swapTokensBtn id
  - when a token is chosen, the input-box gets class 'has-token' to apply the chip style
  - suggestion list CSS changed to compact layout (no JS logic change)
*/

/* tiny helpers & re-using previous logic definitions (kept intact) */
const $ = id => document.getElementById(id);
const fromTokenInput = $('fromToken'), toTokenInput = $('toToken');
const fromAmountEl = $('fromAmount'), toAmountEl = $('toAmount');
const fromUsd = $('fromUsd'), toUsd = $('toUsd');
const fromLogo = $('fromLogo'), toLogo = $('toLogo');
const fromSymbol = $('fromSymbol'), toSymbol = $('toSymbol');
const fromSuggestions = $('fromSuggestions'), toSuggestions = $('toSuggestions');
const swapOutside = $('swapOutside');
const swapBtn = $('swapBtn');
const fromBox = $('fromBox'), toBox = $('toBox');

function low(s){return (s||'').toLowerCase();}
function isAddress(v){return /^0x[a-fA-F0-9]{40}$/.test((v||'').trim());}

/* apply token selection: add 'has-token' class and set CSS variable for token icon used in ::before */
function applyTokenSelection(side, tokenObj){
  if (!tokenObj) return;
  const input = (side === 'from') ? fromTokenInput : toTokenInput;
  const logo = (side === 'from') ? fromLogo : toLogo;
  const symbolEl = (side === 'from') ? fromSymbol : toSymbol;
  const box = (side === 'from') ? fromBox : toBox;

  input.value = tokenObj.symbol || tokenObj.name || '';
  if (tokenObj.address) input.dataset.address = low(tokenObj.address);
  input.dataset.decimals = tokenObj.decimals || 18;

  symbolEl.textContent = tokenObj.symbol || tokenObj.name || 'Token';
  if (tokenObj.logoURI){ logo.src = tokenObj.logoURI; logo.style.display = 'block'; } else { logo.src=''; logo.style.display='none'; }

  // add class to show chip appearance
  box.classList.add('has-token');

  // set CSS --token-icon-bg so the ::before can show token miniature (fallback safe)
  const imgUrl = tokenObj.logoURI ? `url('${tokenObj.logoURI}')` : 'none';
  box.style.setProperty('--token-icon-bg', imgUrl);
}
/* remove token selection (if needed) */
function clearTokenSelection(side){
  const box = (side === 'from') ? fromBox : toBox;
  box.classList.remove('has-token');
  box.style.removeProperty('--token-icon-bg');
}

/* move swap outside click binds to same behavior as old swap button */
swapOutside.addEventListener('click', ()=>{
  swapOutside.classList.add('pressed');
  setTimeout(()=> swapOutside.classList.remove('pressed'), 300);

  // swap values exactly as before
  const fVal = fromTokenInput.value, tVal = toTokenInput.value;
  const fAddr = fromTokenInput.dataset.address, tAddr = toTokenInput.dataset.address;
  const fDec = fromTokenInput.dataset.decimals, tDec = toTokenInput.dataset.decimals;
  const fLogo = fromLogo.src, tLogoSrc = toLogo.src;
  const aFrom = fromAmountEl.value, aTo = toAmountEl.value;

  fromTokenInput.value = tVal; toTokenInput.value = fVal;
  if (tAddr) fromTokenInput.dataset.address = tAddr; else delete fromTokenInput.dataset.address;
  if (fAddr) toTokenInput.dataset.address = fAddr; else delete toTokenInput.dataset.address;
  if (tDec) fromTokenInput.dataset.decimals = tDec; else delete fromTokenInput.dataset.decimals;
  if (fDec) toTokenInput.dataset.decimals = fDec; else delete toTokenInput.dataset.decimals;

  fromLogo.src = tLogoSrc || ''; fromLogo.style.display = tLogoSrc ? 'block' : 'none';
  toLogo.src = fLogo || ''; toLogo.style.display = fLogo ? 'block' : 'none';

  fromAmountEl.value = aTo; toAmountEl.value = aFrom;

  // toggle has-token classes based on whether dataset is present
  if (fromTokenInput.dataset.address) fromBox.classList.add('has-token'); else fromBox.classList.remove('has-token');
  if (toTokenInput.dataset.address) toBox.classList.add('has-token'); else toBox.classList.remove('has-token');

  // re-run quote / price refresh (existing logic kept separate)
  try{ typeof updateQuoteDebounced === 'function' && updateQuoteDebounced(); }catch(e){}
  try{ typeof fetchBothPrices === 'function' && fetchBothPrices(); }catch(e){}
  try{ typeof updateEstimate === 'function' && updateEstimate(); }catch(e){}
});

/* make suggestions vanish when clicking outside (keeps previous behavior) */
document.addEventListener('click', (ev)=>{
  const inInputOrSuggest = ev.target.closest('.input-box') || ev.target.closest('.suggestions') || ev.target.closest('#fromToken') || ev.target.closest('#toToken');
  if (!inInputOrSuggest){
    fromSuggestions.style.display = 'none';
    toSuggestions.style.display = 'none';
  }
});
document.addEventListener('keydown', (ev)=>{ if (ev.key === 'Escape'){ fromSuggestions.style.display='none'; toSuggestions.style.display='none'; } });

/* keep the rest of your logic untouched (price fetching, suggestions generation, intervals, etc.)
   The earlier script you provided already declared functions like:
     - loadTokensAndMarkets()
     - getTokenPriceUSD()
     - fetchBothPrices()
     - updateQuoteDebounced()
     - updateEstimate()
     - setupAutocomplete()
   Those functions are still present and will operate normally because this update only adjusted DOM structure
   and added the small style toggles above.
*/

/* If the previous script didn't re-bind autocomplete to the new IDs, re-run setup:
   (The original logic defines setupAutocomplete(fromId, suggestionsId, 'from') etc.)
   So we try to call them if they exist (no error if they don't).
*/
try{
  if (typeof setupAutocomplete === 'function'){
    setupAutocomplete('fromToken','fromSuggestions','from');
    setupAutocomplete('toToken','toSuggestions','to');
  }
}catch(e){
  console.warn('setupAutocomplete rebind skipped', e);
}

/* Rebind applyTokenSelection to the global function used by your suggestion click handlers:
   (if your suggestion code calls applyTokenSelection(side, tokenObj) it will use the new styling above)
*/
window.applyTokenSelection = applyTokenSelection;
window.clearTokenSelection = clearTokenSelection;

/* End of appearance-only script changes. The original fetch/refresh/quote scripts remain in place below or above this file. */
</script>

<!-- NOTE: include the rest of your original logic/script (fetching, 1inch/coingecko/dexscreener functions, refresh loops, etc.)
     below this point exactly as before — unchanged. If you already have them earlier in the page they will continue to work.
-->

</body>
</html>
