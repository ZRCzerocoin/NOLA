const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-TaK5JcCx.js","assets/parseSignature-DBwhxGTu.js","assets/hashTypedData-BUKK_tW4.js","assets/embedded-wallet-DmRikogm.js","assets/index-C5hH9_XP.js","assets/index-BaXqhSqh.js","assets/if-defined-u2NVIaVh.js","assets/ref-AlzbhzMZ.js","assets/index-HAaF3nTx.js","assets/HelpersUtil-BWDSMcfh.js","assets/index-BQma-zo4.js","assets/index-_-XboyW-.js","assets/index-BFuHrqV_.js","assets/index-jKRyOQeh.js","assets/index-BSey1FYM.js","assets/NavigationUtil-DmfK5sOV.js","assets/email-BHg8Pujn.js","assets/index-CprizlXN.js","assets/index-Cgk_w8Km.js","assets/socials-BFZDXFbI.js","assets/index-Bkn9yj5y.js","assets/index-L1NBZr38.js","assets/index-niy0Stok.js","assets/index-B90QKSKo.js","assets/index-cRJS1pub.js","assets/swaps-6QQFDFsa.js","assets/index-DnXQ_UaZ.js","assets/index-r5J2eDJy.js","assets/SwapController-CDyBdwaL.js","assets/index-BRqGpT2u.js","assets/send-SFZdfGLw.js","assets/index-Lav--vea.js","assets/index-BQiCXqDD.js","assets/index-Dt4aWdwS.js","assets/index-gnSwOnrm.js","assets/receive-dPTgUkIl.js","assets/onramp-DrzJlRNO.js","assets/index-CkaorizP.js","assets/index-ByBpndrm.js","assets/index-DdoEd9CL.js","assets/pay-with-exchange-Fgu96CqD.js","assets/ExchangeController-Ce47L59_.js","assets/transactions-DBOZ9t_v.js","assets/index-CKx7tcQB.js","assets/index-BvX4TwJr.js","assets/index-B92LWmLU.js","assets/index-CsdCbpDG.js","assets/index-D596GLxC.js","assets/data-capture-B7nJcNd5.js","assets/features--lcXKnQa.js","assets/index-F2cybof2.js","assets/index-BxncobDl.js","assets/w3m-modal-BvMKYkzZ.js","assets/index-e3Vx0u7D.js","assets/index-BS2PzT61.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();const lH=Symbol(),IT=Object.getPrototypeOf,h2=new WeakMap,dH=t=>t&&(h2.has(t)?h2.get(t):IT(t)===Object.prototype||IT(t)===Array.prototype),fH=t=>dH(t)&&t[lH]||null,ST=(t,e=!0)=>{h2.set(t,e)},v1={},GC=t=>typeof t=="object"&&t!==null,hH=t=>GC(t)&&!Xp.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),Lj=(t,e)=>{const r=p2.get(t);if(r?.[0]===e)return r[1];const n=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return ST(n,!0),p2.set(t,[e,n]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(n,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(Xp.has(i))ST(i,!1);else if(Za.has(i)){const[c,u]=Za.get(i);a.value=Lj(c,u())}Object.defineProperty(n,s,a)}),Object.preventExtensions(n)},pH=(t,e,r,n)=>({deleteProperty(s,i){const o=Reflect.get(s,i);r(i);const a=Reflect.deleteProperty(s,i);return a&&n(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),u=Reflect.get(s,i,a);if(c&&(TT(u,o)||Qh.has(o)&&TT(u,Qh.get(o))))return!0;r(i),GC(o)&&(o=fH(o)||o);const l=!Za.has(o)&&mH(o)?Kt(o):o;return e(i,l),Reflect.set(s,i,l,a),n(["set",[i],o,u]),!0}}),Za=new WeakMap,Xp=new WeakSet,p2=new WeakMap,n1=[1],Qh=new WeakMap;let TT=Object.is,gH=(t,e)=>new Proxy(t,e),mH=hH,yH=Lj,bH=pH;function Kt(t={}){if(!GC(t))throw new Error("object required");const e=Qh.get(t);if(e)return e;let r=n1[0];const n=new Set,s=(y,b=++n1[0])=>{r!==b&&(i=r=b,n.forEach(E=>E(y,b)))};let i=r;const o=(y=n1[0])=>(i!==y&&(i=y,c.forEach(([b])=>{const E=b[1](y);E>r&&(r=E)})),r),a=y=>(b,E)=>{const w=[...b];w[1]=[y,...w[1]],s(w,E)},c=new Map,u=(y,b)=>{const E=!Xp.has(b)&&Za.get(b);if(E){if((v1?"production":void 0)!=="production"&&c.has(y))throw new Error("prop listener already exists");if(n.size){const w=E[2](a(y));c.set(y,[E,w])}else c.set(y,[E])}},l=y=>{var b;const E=c.get(y);E&&(c.delete(y),(b=E[1])==null||b.call(E))},d=y=>(n.add(y),n.size===1&&c.forEach(([E,w],m)=>{if((v1?"production":void 0)!=="production"&&w)throw new Error("remove already exists");const _=E[2](a(m));c.set(m,[E,_])}),()=>{n.delete(y),n.size===0&&c.forEach(([E,w],m)=>{w&&(w(),c.set(m,[E]))})});let f=!0;const g=bH(()=>f,u,l,s),p=gH(t,g);Qh.set(t,p);const h=[t,o,d];return Za.set(p,h),Reflect.ownKeys(t).forEach(y=>{const b=Object.getOwnPropertyDescriptor(t,y);"value"in b&&b.writable&&(p[y]=t[y])}),f=!1,p}function Wr(t,e,r){const n=Za.get(t);(v1?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");let s;const i=[],o=n[2];let a=!1;const u=o(l=>{i.push(l),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,u()}}function Xh(t){const e=Za.get(t);(v1?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[r,n]=e;return yH(r,n())}function ep(t){return Xp.add(t),t}function wH(){return{proxyStateMap:Za,refSet:Xp,snapCache:p2,versionHolder:n1,proxyCache:Qh}}function Kr(t,e,r,n){let s=t[e];return Wr(t,()=>{const i=t[e];Object.is(s,i)||r(s=i)})}const{proxyStateMap:EH,snapCache:vH}=wH(),tg=t=>EH.has(t);function _H(t){const e=[];let r=0;const n=new Map,s=new WeakMap,i=()=>{const u=vH.get(a),l=u?.[1];if(l&&!s.has(l)){const d=new Map(n);s.set(l,d)}},o=u=>s.get(u)||n,a={data:e,index:r,epoch:0,get size(){return tg(this)||i(),o(this).size},get(u){const d=o(this).get(u);if(d===void 0){this.epoch;return}return this.data[d]},has(u){const l=o(this);return this.epoch,l.has(u)},set(u,l){if(!tg(this))throw new Error("Cannot perform mutations on a snapshot");const d=n.get(u);return d===void 0?(n.set(u,this.index),this.data[this.index++]=l):this.data[d]=l,this.epoch++,this},delete(u){if(!tg(this))throw new Error("Cannot perform mutations on a snapshot");const l=n.get(u);return l===void 0?!1:(delete this.data[l],n.delete(u),this.epoch++,!0)},clear(){if(!tg(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,n.clear()},forEach(u){this.epoch,o(this).forEach((d,f)=>{u(this.data[d],f,this)})},*entries(){this.epoch;const u=o(this);for(const[l,d]of u)yield[l,this.data[d]]},*keys(){this.epoch;const u=o(this);for(const l of u.keys())yield l},*values(){this.epoch;const u=o(this);for(const l of u.values())yield this.data[l]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=Kt(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var Mi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function WC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Fj(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){var s=!1;try{s=this instanceof n}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var PT={};const Q={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",BASE_ACCOUNT:"baseAccount",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122",TON:"ton"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks",ton:"TON"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",TON:"ton"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],SOLANA_SPL_TOKEN_ADDRESSES:{SOL:"So11111111111111111111111111111111111111112"},HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof PT<"u"?PT.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}},IS_DEVELOPMENT:typeof process<"u"&&!1,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},qj={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return t?.filter(r=>r.chainNamespace===e)||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){if(!e)return;const r=t.find(s=>s.caipNetworkId===e);if(r)return r.name;const[n]=e.split(":");return Q.CHAIN_NAME_MAP?.[n]||void 0}},Hj=["eip155","solana","polkadot","bip122","cosmos","sui","stacks"];var AH=20,CH=1,Ru=1e6,NT=1e6,IH=-7,SH=21,TH=!1,e0="[big.js] ",Vu=e0+"Invalid ",hE=Vu+"decimal places",PH=Vu+"rounding mode",zj=e0+"Division by zero",Rt={},Gi=void 0,NH=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function $j(){function t(e){var r=this;if(!(r instanceof t))return e===Gi?$j():new t(e);if(e instanceof t)r.s=e.s,r.e=e.e,r.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Vu+"value");e=e===0&&1/e<0?"-0":String(e)}OH(r,e)}r.constructor=t}return t.prototype=Rt,t.DP=AH,t.RM=CH,t.NE=IH,t.PE=SH,t.strict=TH,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function OH(t,e){var r,n,s;if(!NH.test(e))throw Error(Vu+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),s=e.length,n=0;n<s&&e.charAt(n)=="0";)++n;if(n==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=r-n-1,t.c=[],r=0;n<=s;)t.c[r++]=+e.charAt(n++)}return t}function Gu(t,e,r,n){var s=t.c;if(r===Gi&&(r=t.constructor.RM),r!==0&&r!==1&&r!==2&&r!==3)throw Error(PH);if(e<1)n=r===3&&(n||!!s[0])||e===0&&(r===1&&s[0]>=5||r===2&&(s[0]>5||s[0]===5&&(n||s[1]!==Gi))),s.length=1,n?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(n=r===1&&s[e]>=5||r===2&&(s[e]>5||s[e]===5&&(n||s[e+1]!==Gi||s[e-1]&1))||r===3&&(n||!!s[0]),s.length=e,n){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function Wu(t,e,r){var n=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)s="0"+s;s="0."+s}else if(n>0)if(++n>i)for(n-=i;n--;)s+="0";else n<i&&(s=s.slice(0,n)+"."+s.slice(n));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&r?"-"+s:s}Rt.abs=function(){var t=new this.constructor(this);return t.s=1,t};Rt.cmp=function(t){var e,r=this,n=r.c,s=(t=new r.constructor(t)).c,i=r.s,o=t.s,a=r.e,c=t.e;if(!n[0]||!s[0])return n[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=n.length)<(c=s.length)?a:c,i=-1;++i<o;)if(n[i]!=s[i])return n[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};Rt.div=function(t){var e=this,r=e.constructor,n=e.c,s=(t=new r(t)).c,i=e.s==t.s?1:-1,o=r.DP;if(o!==~~o||o<0||o>Ru)throw Error(hE);if(!s[0])throw Error(zj);if(!n[0])return t.s=i,t.c=[t.e=0],t;var a,c,u,l,d,f=s.slice(),g=a=s.length,p=n.length,h=n.slice(0,a),y=h.length,b=t,E=b.c=[],w=0,m=o+(b.e=e.e-t.e)+1;for(b.s=i,i=m<0?0:m,f.unshift(0);y++<a;)h.push(0);do{for(u=0;u<10;u++){if(a!=(y=h.length))l=a>y?1:-1;else for(d=-1,l=0;++d<a;)if(s[d]!=h[d]){l=s[d]>h[d]?1:-1;break}if(l<0){for(c=y==a?s:f;y;){if(h[--y]<c[y]){for(d=y;d&&!h[--d];)h[d]=9;--h[d],h[y]+=10}h[y]-=c[y]}for(;!h[0];)h.shift()}else break}E[w++]=l?u:++u,h[0]&&l?h[y]=n[g]||0:h=[n[g]]}while((g++<p||h[0]!==Gi)&&i--);return!E[0]&&w!=1&&(E.shift(),b.e--,m--),w>m&&Gu(b,m,r.RM,h[0]!==Gi),b};Rt.eq=function(t){return this.cmp(t)===0};Rt.gt=function(t){return this.cmp(t)>0};Rt.gte=function(t){return this.cmp(t)>-1};Rt.lt=function(t){return this.cmp(t)<0};Rt.lte=function(t){return this.cmp(t)<1};Rt.minus=Rt.sub=function(t){var e,r,n,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var u=i.c.slice(),l=i.e,d=t.c,f=t.e;if(!u[0]||!d[0])return d[0]?t.s=-c:u[0]?t=new o(i):t.s=1,t;if(a=l-f){for((s=a<0)?(a=-a,n=u):(f=l,n=d),n.reverse(),c=a;c--;)n.push(0);n.reverse()}else for(r=((s=u.length<d.length)?u:d).length,a=c=0;c<r;c++)if(u[c]!=d[c]){s=u[c]<d[c];break}if(s&&(n=u,u=d,d=n,t.s=-t.s),(c=(r=d.length)-(e=u.length))>0)for(;c--;)u[e++]=0;for(c=e;r>a;){if(u[--r]<d[r]){for(e=r;e&&!u[--e];)u[e]=9;--u[e],u[r]+=10}u[r]-=d[r]}for(;u[--c]===0;)u.pop();for(;u[0]===0;)u.shift(),--f;return u[0]||(t.s=1,u=[f=0]),t.c=u,t.e=f,t};Rt.mod=function(t){var e,r=this,n=r.constructor,s=r.s,i=(t=new n(t)).s;if(!t.c[0])throw Error(zj);return r.s=t.s=1,e=t.cmp(r)==1,r.s=s,t.s=i,e?new n(r):(s=n.DP,i=n.RM,n.DP=n.RM=0,r=r.div(t),n.DP=s,n.RM=i,this.minus(r.times(t)))};Rt.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Rt.plus=Rt.add=function(t){var e,r,n,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,u=t.c;if(!a[0]||!u[0])return u[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,n=u):(e=-e,n=a),n.reverse();e--;)n.push(0);n.reverse()}for(a.length-u.length<0&&(n=u,u=a,a=n),e=u.length,r=0;e;a[e]%=10)r=(a[--e]=a[e]+u[e]+r)/10|0;for(r&&(a.unshift(r),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};Rt.pow=function(t){var e=this,r=new e.constructor("1"),n=r,s=t<0;if(t!==~~t||t<-NT||t>NT)throw Error(Vu+"exponent");for(s&&(t=-t);t&1&&(n=n.times(e)),t>>=1,!!t;)e=e.times(e);return s?r.div(n):n};Rt.prec=function(t,e){if(t!==~~t||t<1||t>Ru)throw Error(Vu+"precision");return Gu(new this.constructor(this),t,e)};Rt.round=function(t,e){if(t===Gi)t=0;else if(t!==~~t||t<-Ru||t>Ru)throw Error(hE);return Gu(new this.constructor(this),t+this.e+1,e)};Rt.sqrt=function(){var t,e,r,n=this,s=n.constructor,i=n.s,o=n.e,a=new s("0.5");if(!n.c[0])return new s(n);if(i<0)throw Error(e0+"No square root");i=Math.sqrt(+Wu(n,!0,!0)),i===0||i===1/0?(e=n.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do r=t,t=a.times(r.plus(n.div(r)));while(r.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return Gu(t,(s.DP-=4)+t.e+1,s.RM)};Rt.times=Rt.mul=function(t){var e,r=this,n=r.constructor,s=r.c,i=(t=new n(t)).c,o=s.length,a=i.length,c=r.e,u=t.e;if(t.s=r.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+u,o<a&&(e=s,s=i,i=e,u=o,o=a,a=u),e=new Array(u=o+a);u--;)e[u]=0;for(c=a;c--;){for(a=0,u=o+c;u>c;)a=e[u]+i[c]*s[u-c-1]+a,e[u--]=a%10,a=a/10|0;e[u]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};Rt.toExponential=function(t,e){var r=this,n=r.c[0];if(t!==Gi){if(t!==~~t||t<0||t>Ru)throw Error(hE);for(r=Gu(new r.constructor(r),++t,e);r.c.length<t;)r.c.push(0)}return Wu(r,!0,!!n)};Rt.toFixed=function(t,e){var r=this,n=r.c[0];if(t!==Gi){if(t!==~~t||t<0||t>Ru)throw Error(hE);for(r=Gu(new r.constructor(r),t+r.e+1,e),t=t+r.e+1;r.c.length<t;)r.c.push(0)}return Wu(r,!1,!!n)};Rt[Symbol.for("nodejs.util.inspect.custom")]=Rt.toJSON=Rt.toString=function(){var t=this,e=t.constructor;return Wu(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Rt.toNumber=function(){var t=+Wu(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(e0+"Imprecise conversion");return t};Rt.toPrecision=function(t,e){var r=this,n=r.constructor,s=r.c[0];if(t!==Gi){if(t!==~~t||t<1||t>Ru)throw Error(Vu+"precision");for(r=Gu(new n(r),t,e);r.c.length<t;)r.c.push(0)}return Wu(r,t<=r.e||r.e<=n.NE||r.e>=n.PE,!!s)};Rt.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(e0+"valueOf disallowed");return Wu(t,t.e<=e.NE||t.e>=e.PE,!0)};var fa=$j();const RH={bigNumber(t){return t?new fa(t):new fa(0)},multiply(t,e){if(t===void 0||e===void 0)return new fa(0);const r=new fa(t),n=new fa(e);return r.times(n)},toFixed(t,e=2){return t===void 0||t===""?new fa(0).toFixed(e):new fa(t).toFixed(e)},formatNumberToLocalString(t,e=2){return t===void 0||t===""?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"})},parseLocalStringToNumber(t){if(t===void 0||t==="")return 0;const e=t.replace(/,/gu,"");return new fa(e).toNumber()}},xH=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],kH=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],BH=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],jH={getERC20Abi:t=>Q.USDT_CONTRACT_ADDRESSES.includes(t)?BH:xH,getSwapAbi:()=>kH},_r={validateCaipAddress(t){if(t.split(":")?.length!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[r,n,s]=e;if(!r||!n||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:r,chainId:n,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[r,n]=e;if(!r||!n)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:r,chainId:n}}},Fi={RPC_ERROR_CODE:{USER_REJECTED_REQUEST:4001,USER_REJECTED_METHODS:5002,USER_REJECTED:5e3},PROVIDER_RPC_ERROR_NAME:{PROVIDER_RPC:"ProviderRpcError",USER_REJECTED_REQUEST:"UserRejectedRequestError"},isRpcProviderError(t){try{if(typeof t=="object"&&t!==null){const e=t,r=typeof e.message=="string",n=typeof e.code=="number";return r&&n}return!1}catch{return!1}},isUserRejectedMessage(t){return t.toLowerCase().includes("user rejected")||t.toLowerCase().includes("user cancelled")||t.toLowerCase().includes("user canceled")},isUserRejectedRequestError(t){if(Fi.isRpcProviderError(t)){const e=t.code===Fi.RPC_ERROR_CODE.USER_REJECTED_REQUEST,r=t.code===Fi.RPC_ERROR_CODE.USER_REJECTED_METHODS;return e||r||Fi.isUserRejectedMessage(t.message)}return t instanceof Error?Fi.isUserRejectedMessage(t.message):!1}};let DH=class extends Error{constructor(e,r){super(r.message,{cause:e}),this.name=Fi.PROVIDER_RPC_ERROR_NAME.PROVIDER_RPC,this.code=r.code}},KC=class extends DH{constructor(e){super(e,{code:Fi.RPC_ERROR_CODE.USER_REJECTED_REQUEST,message:"User rejected the request"}),this.name=Fi.PROVIDER_RPC_ERROR_NAME.USER_REJECTED_REQUEST}};const Be={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",RECENT_WALLET:"@appkit/recent_wallet",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails",LATEST_APPKIT_VERSION:"@appkit/latest_version",TON_WALLETS_CACHE:"@appkit/ton_wallets_cache"};function Yv(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const xe={setItem(t,e){Rh()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Rh())return localStorage.getItem(t)||void 0},removeItem(t){Rh()&&localStorage.removeItem(t)},clear(){Rh()&&localStorage.clear()}};function Rh(){return typeof window<"u"&&typeof localStorage<"u"}function tp(t,e){const r=t?.["--apkt-accent"]??t?.["--w3m-accent"];return e==="light"?{"--w3m-accent":r||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":r||"hsla(230, 100%, 67%, 1)","--w3m-background":"#202020"}}var OT={};const Jv=(typeof process<"u"&&typeof OT<"u"?OT.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",Vj=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],UH="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",ft={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:Jv,SECURE_SITE_DASHBOARD:`${Jv}/dashboard`,SECURE_SITE_FAVICON:`${Jv}/images/favicon.png`,SOLANA_NATIVE_TOKEN_ADDRESS:"So11111111111111111111111111111111111111111",RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],SUGGESTED_TOKENS_BY_CHAIN:{"eip155:42161":["USDâ‚®0"]},BALANCE_SUPPORTED_CHAINS:[Q.CHAIN.EVM,Q.CHAIN.SOLANA],SEND_PARAMS_SUPPORTED_CHAINS:[Q.CHAIN.EVM],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[Q.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[Q.CHAIN.EVM,Q.CHAIN.SOLANA],PAY_WITH_EXCHANGE_SUPPORTED_CHAIN_NAMESPACES:[Q.CHAIN.EVM,Q.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[Q.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x",ton:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[Q.CHAIN.EVM,Q.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1,payWithExchange:!1,payments:!1,reownAuthentication:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1,reownAuthentication:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1,reownAuthentication:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa",ton:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},ie={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3,latestAppKitVersion:6048e5,tonWallets:864e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=ie.getActiveNamespace(),e=ie.getActiveCaipNetworkId(),r=e?e.split(":")[1]:void 0,n=r?isNaN(Number(r))?r:Number(r):void 0;return{namespace:t,caipNetworkId:e,chainId:n}},setWalletConnectDeepLink({name:t,href:e}){try{xe.setItem(Be.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=xe.getItem(Be.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{xe.removeItem(Be.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{xe.setItem(Be.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{xe.setItem(Be.ACTIVE_CAIP_NETWORK_ID,t),ie.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return xe.getItem(Be.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{xe.removeItem(Be.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=Yv(t);xe.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=ie.getRecentWallets();e.find(n=>n.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),xe.setItem(Be.RECENT_WALLETS,JSON.stringify(e)),xe.setItem(Be.RECENT_WALLET,JSON.stringify(t)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=xe.getItem(Be.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},getRecentWallet(){try{const t=xe.getItem(Be.RECENT_WALLET);return t?JSON.parse(t):null}catch{console.info("Unable to get AppKit recent")}return null},deleteRecentWallet(){try{xe.removeItem(Be.RECENT_WALLET)}catch{console.info("Unable to delete AppKit recent")}},setConnectedConnectorId(t,e){try{const r=Yv(t);xe.setItem(r,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return xe.getItem(Be.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=Yv(t);return xe.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{xe.setItem(Be.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return xe.getItem(Be.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{xe.removeItem(Be.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return xe.getItem(Be.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){return xe.getItem(Be.ACTIVE_CAIP_NETWORK_ID)?.split(":")?.[1]},setConnectionStatus(t){try{xe.setItem(Be.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return xe.getItem(Be.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=xe.getItem(Be.CONNECTED_NAMESPACES);return t?.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));xe.setItem(Be.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=ie.getConnectedNamespaces();e.includes(t)||(e.push(t),ie.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=ie.getConnectedNamespaces(),r=e.indexOf(t);r>-1&&(e.splice(r,1),ie.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return xe.getItem(Be.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{xe.setItem(Be.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{xe.removeItem(Be.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=xe.getItem(Be.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=ie.getBalanceCache();xe.setItem(Be.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const r=ie.getBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.portfolio))return r.balance;ie.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=ie.getBalanceCache();e[t.caipAddress]=t,xe.setItem(Be.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=xe.getItem(Be.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=ie.getBalanceCache();xe.setItem(Be.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const r=ie.getNativeBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.nativeBalance))return r;console.info("Discarding cache for address",t),ie.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=ie.getNativeBalanceCache();e[t.caipAddress]=t,xe.setItem(Be.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=xe.getItem(Be.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const r=ie.getEnsCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.ens))return r.ens;ie.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=ie.getEnsCache();e[t.address]=t,xe.setItem(Be.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=ie.getEnsCache();xe.setItem(Be.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=xe.getItem(Be.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const r=ie.getIdentityCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.identity))return r.identity;ie.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=ie.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},xe.setItem(Be.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=ie.getIdentityCache();xe.setItem(Be.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},getTonWalletsCache(){try{const t=xe.getItem(Be.TON_WALLETS_CACHE),e=t?JSON.parse(t):void 0;if(e&&!this.isCacheExpired(e.timestamp,this.cacheExpiry.tonWallets))return e;ie.removeTonWalletsCache()}catch{console.info("Unable to get ton wallets cache")}},updateTonWalletsCache(t){try{const e=ie.getTonWalletsCache()||{timestamp:0,wallets:[]};e.timestamp=new Date().getTime(),e.wallets=t,xe.setItem(Be.TON_WALLETS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ton wallets cache",t)}},removeTonWalletsCache(){try{xe.removeItem(Be.TON_WALLETS_CACHE)}catch{console.info("Unable to remove ton wallets cache")}},clearAddressCache(){try{xe.removeItem(Be.PORTFOLIO_CACHE),xe.removeItem(Be.NATIVE_BALANCE_CACHE),xe.removeItem(Be.ENS_CACHE),xe.removeItem(Be.IDENTITY_CACHE),xe.removeItem(Be.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{xe.setItem(Be.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=xe.getItem(Be.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const r=ie.getConnections(),n=r[e]??[],s=new Map;for(const o of n)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===Q.CONNECTOR_ID.AUTH;if(a&&!c){const u=new Set(a.accounts.map(d=>d.address.toLowerCase())),l=o.accounts.filter(d=>!u.has(d.address.toLowerCase()));a.accounts.push(...l)}else s.set(o.connectorId,{...o})}const i={...r,[e]:Array.from(s.values())};xe.setItem(Be.CONNECTIONS,JSON.stringify(i))}catch(r){console.error("Unable to sync connections to storage",r)}},getConnections(){try{const t=xe.getItem(Be.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:r}){try{const n=ie.getConnections(),s=n[r]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),xe.setItem(Be.CONNECTIONS,JSON.stringify({...n,[r]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${r}"`)}},getDisconnectedConnectorIds(){try{const t=xe.getItem(Be.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const r=ie.getDisconnectedConnectorIds(),n=r[e]??[];n.push(t),xe.setItem(Be.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...r,[e]:Array.from(new Set(n))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const r=ie.getDisconnectedConnectorIds();let n=r[e]??[];n=n.filter(s=>s.toLowerCase()!==t.toLowerCase()),xe.setItem(Be.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...r,[e]:Array.from(new Set(n))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(ie.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1},getTransactionsCache(){try{const t=xe.getItem(Be.HISTORY_TRANSACTIONS_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:t,chainId:e=""}){try{const n=ie.getTransactionsCache()[t]?.[e];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.transactionsHistory))return n.transactions;ie.removeTransactionsCache({address:t,chainId:e})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:t,chainId:e="",timestamp:r,transactions:n}){try{const s=ie.getTransactionsCache();s[t]={...s[t],[e]:{timestamp:r,transactions:n}},xe.setItem(Be.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(s))}catch{console.info("Unable to update transactions cache",{address:t,chainId:e,timestamp:r,transactions:n})}},removeTransactionsCache({address:t,chainId:e}){try{const r=ie.getTransactionsCache(),n=r?.[t]||{},{[e]:s,...i}=n;xe.setItem(Be.HISTORY_TRANSACTIONS_CACHE,JSON.stringify({...r,[t]:i}))}catch{console.info("Unable to remove transactions cache",{address:t,chainId:e})}},getTokenPriceCache(){try{const t=xe.getItem(Be.TOKEN_PRICE_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(t){try{const r=ie.getTokenPriceCache()[t.join(",")];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.tokenPrice))return r.tokenPrice;ie.removeTokenPriceCache(t)}catch{console.info("Unable to get token price cache for addresses",t)}},updateTokenPriceCache(t){try{const e=ie.getTokenPriceCache();e[t.addresses.join(",")]={timestamp:t.timestamp,tokenPrice:t.tokenPrice},xe.setItem(Be.TOKEN_PRICE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update token price cache",t)}},removeTokenPriceCache(t){try{const e=ie.getTokenPriceCache();xe.setItem(Be.TOKEN_PRICE_CACHE,JSON.stringify({...e,[t.join(",")]:void 0}))}catch{console.info("Unable to remove token price cache",t)}},getLatestAppKitVersion(){try{const t=this.getLatestAppKitVersionCache(),e=t?.version;return e&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.latestAppKitVersion)?e:void 0}catch{console.info("Unable to get latest AppKit version")}},getLatestAppKitVersionCache(){try{const t=xe.getItem(Be.LATEST_APPKIT_VERSION);return t?JSON.parse(t):{}}catch{console.info("Unable to get latest AppKit version cache")}return{}},updateLatestAppKitVersion(t){try{const e=ie.getLatestAppKitVersionCache();e.timestamp=t.timestamp,e.version=t.version,xe.setItem(Be.LATEST_APPKIT_VERSION,JSON.stringify(e))}catch{console.info("Unable to update latest AppKit version on local storage",t)}}},be={getWindow(){if(!(typeof window>"u"))return window},isMobile(){return this.isClient()?!!(window?.matchMedia&&typeof window.matchMedia=="function"&&window.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t?.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return be.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window?.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window?.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=ft.TEN_SEC_MS:!0},isAllowedRetry(t,e=ft.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return window?.self!==window?.top}catch{return!1}},isSafeApp(){if(be.isClient()&&window.self!==window.top)try{const t=window?.location?.ancestorOrigins?.[0],e="https://app.safe.global";if(t){const r=new URL(t),n=new URL(e);return r.hostname===n.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+ft.FOUR_MINUTES_MS},getNetworkId(t){return t?.split(":")[1]},getPlainAddress(t){return t?.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let r;return(...n)=>{function s(){t(...n)}r&&clearTimeout(r),r=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,r=null){if(be.isHttpUrl(t))return this.formatUniversalUrl(t,e);let n=t,s=r;n.includes("://")||(n=t.replaceAll("/","").replaceAll(":",""),n=`${n}://`),n.endsWith("/")||(n=`${n}/`),s&&!s?.endsWith("/")&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${n}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:n}},formatUniversalUrl(t,e){if(!be.isHttpUrl(t))return this.formatNativeUrl(t,e);let r=t;r.endsWith("/")||(r=`${r}/`);const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?ie.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,r){window?.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},returnOpenHref(t,e,r){return window?.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){if(typeof window>"u")return!1;const t=window?.matchMedia&&typeof window.matchMedia=="function"?window.matchMedia("(display-mode: standalone)")?.matches:!1,e=window?.navigator?.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((r,n)=>{const s=new Image;s.onload=r,s.onerror=n,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,be.wait(2e3)])},parseBalance(t,e){let r="0.000";if(typeof t=="string"){const c=Number(t);if(!isNaN(c)){const u=(Math.floor(c*1e3)/1e3).toFixed(3);u&&(r=u)}}const[n,s]=r.split("."),i=n||"0",o=s||"000";return{formattedText:`${i}.${o}${e?` ${e}`:""}`,value:i,decimals:o,symbol:e}},getApiUrl(){return Q.W3M_API_URL},getBlockchainApiUrl(){return Q.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return Q.PULSE_API_URL},getUUID(){return crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){return typeof t=="string"?t:typeof t?.issues?.[0]?.message=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const r={};return e&&t&&(t.forEach((n,s)=>{r[n]=s}),e.sort((n,s)=>{const i=r[n.id],o=r[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const r of t)e+=r.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[r,n]=e.split(".");return{dollars:r,pennies:n}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const r=new Set;return t.filter(n=>{const s=n[e];return r.has(s)?!1:(r.add(s),!0)})},generateSdkVersion(t,e,r){const s=t.length===0?ft.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${r}`},createAccount(t,e,r,n,s){return{namespace:t,address:e,type:r,publicKey:n,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),r=e[0];return e.filter(Boolean).length===3&&r in Q.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window?.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window?.location.href)}`,r="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),r,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,r,e)},injectIntoUrl(t,e,r){const n=t.indexOf(e);if(n===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",n),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,n+i),c=t.substring(n+i,o),u=t.substring(s),l=c+r;return a+l+u}};var yd={};const MH="https://secure.walletconnect.org/sdk",LH=(typeof process<"u"&&typeof yd<"u"?yd.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||MH,FH=(typeof process<"u"&&typeof yd<"u"?yd.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",qH=(typeof process<"u"&&typeof yd<"u"?yd.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Pe={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},yr={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},RT={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Tr={set(t,e){ys.isClient&&localStorage.setItem(`${Pe.STORAGE_KEY}${t}`,e)},get(t){return ys.isClient?localStorage.getItem(`${Pe.STORAGE_KEY}${t}`):null},delete(t,e){ys.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Pe.STORAGE_KEY}${t}`))}},rg=30*1e3,ys={checkIfAllowedToTriggerEmail(){const t=Tr.get(Pe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<rg){const r=Math.ceil((rg-e)/1e3);throw new Error(`Please try again after ${r} seconds`)}}},getTimeToNextEmailLogin(){const t=Tr.get(Pe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<rg)return Math.ceil((rg-e)/1e3)}return 0},checkIfRequestExists(t){return yr.NOT_SAFE_RPC_METHODS.includes(t.method)||yr.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&(t?.match(RT.transactionHash)||t?.match(RT.signedMessage))?Pe.RPC_RESPONSE_TYPE_TX:Pe.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return yr.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var At;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(At||(At={}));var g2;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(g2||(g2={}));const _e=At.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),La=t=>{switch(typeof t){case"undefined":return _e.undefined;case"string":return _e.string;case"number":return isNaN(t)?_e.nan:_e.number;case"boolean":return _e.boolean;case"function":return _e.function;case"bigint":return _e.bigint;case"symbol":return _e.symbol;case"object":return Array.isArray(t)?_e.array:t===null?_e.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?_e.promise:typeof Map<"u"&&t instanceof Map?_e.map:typeof Set<"u"&&t instanceof Set?_e.set:typeof Date<"u"&&t instanceof Date?_e.date:_e.object;default:return _e.unknown}},he=At.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),HH=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class pi extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,At.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}pi.create=t=>new pi(t);const rp=(t,e)=>{let r;switch(t.code){case he.invalid_type:t.received===_e.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case he.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,At.jsonStringifyReplacer)}`;break;case he.unrecognized_keys:r=`Unrecognized key(s) in object: ${At.joinValues(t.keys,", ")}`;break;case he.invalid_union:r="Invalid input";break;case he.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${At.joinValues(t.options)}`;break;case he.invalid_enum_value:r=`Invalid enum value. Expected ${At.joinValues(t.options)}, received '${t.received}'`;break;case he.invalid_arguments:r="Invalid function arguments";break;case he.invalid_return_type:r="Invalid function return type";break;case he.invalid_date:r="Invalid date";break;case he.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:At.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case he.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case he.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case he.custom:r="Invalid input";break;case he.invalid_intersection_types:r="Intersection results could not be merged";break;case he.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case he.not_finite:r="Number must be finite";break;default:r=e.defaultError,At.assertNever(t)}return{message:r}};let Gj=rp;function zH(t){Gj=t}function _1(){return Gj}const A1=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],o={...s,path:i};let a="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},$H=[];function Se(t,e){const r=A1({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,_1(),rp].filter(n=>!!n)});t.common.issues.push(r)}class dn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return We;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r)n.push({key:await s.key,value:await s.value});return dn.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return We;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}}const We=Object.freeze({status:"aborted"}),Wj=t=>({status:"dirty",value:t}),Tn=t=>({status:"valid",value:t}),m2=t=>t.status==="aborted",y2=t=>t.status==="dirty",np=t=>t.status==="valid",C1=t=>typeof Promise<"u"&&t instanceof Promise;var qe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(qe||(qe={}));class Ji{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const xT=(t,e)=>{if(np(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new pi(t.common.issues);return this._error=r,this._error}}};function Qe(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:n??a.defaultError}:{message:r??a.defaultError},description:s}}class st{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return La(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:La(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new dn,ctx:{common:e.parent.common,data:e.data,parsedType:La(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(C1(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const s={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:La(e)},i=this._parseSync({data:e,path:s.path,parent:s});return xT(s,i)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:La(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(C1(s)?s:Promise.resolve(s));return xT(n,i)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:he.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new yi({schema:this,typeName:$e.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Wo.create(this,this._def)}nullable(){return Bu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return gi.create(this,this._def)}promise(){return wd.create(this,this._def)}or(e){return ap.create([this,e],this._def)}and(e){return cp.create(this,e,this._def)}transform(e){return new yi({...Qe(this._def),schema:this,typeName:$e.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new hp({...Qe(this._def),innerType:this,defaultValue:r,typeName:$e.ZodDefault})}brand(){return new Zj({typeName:$e.ZodBranded,type:this,...Qe(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new P1({...Qe(this._def),innerType:this,catchValue:r,typeName:$e.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return t0.create(this,e)}readonly(){return O1.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const VH=/^c[^\s-]{8,}$/i,GH=/^[a-z][a-z0-9]*$/,WH=/^[0-9A-HJKMNP-TV-Z]{26}$/,KH=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ZH=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,YH="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Qv;const JH=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,QH=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,XH=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function ez(t,e){return!!((e==="v4"||!e)&&JH.test(t)||(e==="v6"||!e)&&QH.test(t))}class di extends st{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==_e.string){const i=this._getOrReturnCtx(e);return Se(i,{code:he.invalid_type,expected:_e.string,received:i.parsedType}),We}const n=new dn;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Se(s,{code:he.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Se(s,{code:he.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Se(s,{code:he.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Se(s,{code:he.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")ZH.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"email",code:he.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Qv||(Qv=new RegExp(YH,"u")),Qv.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"emoji",code:he.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")KH.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"uuid",code:he.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")VH.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"cuid",code:he.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")GH.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"cuid2",code:he.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")WH.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"ulid",code:he.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Se(s,{validation:"url",code:he.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"regex",code:he.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Se(s,{code:he.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Se(s,{code:he.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Se(s,{code:he.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?XH(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Se(s,{code:he.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="ip"?ez(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Se(s,{validation:"ip",code:he.invalid_string,message:i.message}),n.dirty()):At.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:he.invalid_string,...qe.errToObj(n)})}_addCheck(e){return new di({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...qe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...qe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...qe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...qe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...qe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...qe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...qe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...qe.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...qe.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...qe.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...qe.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...qe.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...qe.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...qe.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...qe.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...qe.errToObj(r)})}nonempty(e){return this.min(1,qe.errToObj(e))}trim(){return new di({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new di({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new di({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}di.create=t=>{var e;return new di({checks:[],typeName:$e.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Qe(t)})};function tz(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Ya extends st{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==_e.number){const i=this._getOrReturnCtx(e);return Se(i,{code:he.invalid_type,expected:_e.number,received:i.parsedType}),We}let n;const s=new dn;for(const i of this._def.checks)i.kind==="int"?At.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Se(n,{code:he.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),Se(n,{code:he.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),Se(n,{code:he.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?tz(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),Se(n,{code:he.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Se(n,{code:he.not_finite,message:i.message}),s.dirty()):At.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,qe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,qe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,qe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,qe.toString(r))}setLimit(e,r,n,s){return new Ya({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:qe.toString(s)}]})}_addCheck(e){return new Ya({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:qe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:qe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:qe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:qe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:qe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:qe.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:qe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:qe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:qe.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&At.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}Ya.create=t=>new Ya({checks:[],typeName:$e.ZodNumber,coerce:t?.coerce||!1,...Qe(t)});class Ja extends st{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==_e.bigint){const i=this._getOrReturnCtx(e);return Se(i,{code:he.invalid_type,expected:_e.bigint,received:i.parsedType}),We}let n;const s=new dn;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),Se(n,{code:he.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),Se(n,{code:he.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Se(n,{code:he.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):At.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,qe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,qe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,qe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,qe.toString(r))}setLimit(e,r,n,s){return new Ja({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:qe.toString(s)}]})}_addCheck(e){return new Ja({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:qe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:qe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:qe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:qe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:qe.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Ja.create=t=>{var e;return new Ja({checks:[],typeName:$e.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Qe(t)})};class sp extends st{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==_e.boolean){const n=this._getOrReturnCtx(e);return Se(n,{code:he.invalid_type,expected:_e.boolean,received:n.parsedType}),We}return Tn(e.data)}}sp.create=t=>new sp({typeName:$e.ZodBoolean,coerce:t?.coerce||!1,...Qe(t)});class xu extends st{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==_e.date){const i=this._getOrReturnCtx(e);return Se(i,{code:he.invalid_type,expected:_e.date,received:i.parsedType}),We}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Se(i,{code:he.invalid_date}),We}const n=new dn;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Se(s,{code:he.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Se(s,{code:he.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):At.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new xu({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:qe.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:qe.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}xu.create=t=>new xu({checks:[],coerce:t?.coerce||!1,typeName:$e.ZodDate,...Qe(t)});class I1 extends st{_parse(e){if(this._getType(e)!==_e.symbol){const n=this._getOrReturnCtx(e);return Se(n,{code:he.invalid_type,expected:_e.symbol,received:n.parsedType}),We}return Tn(e.data)}}I1.create=t=>new I1({typeName:$e.ZodSymbol,...Qe(t)});class ip extends st{_parse(e){if(this._getType(e)!==_e.undefined){const n=this._getOrReturnCtx(e);return Se(n,{code:he.invalid_type,expected:_e.undefined,received:n.parsedType}),We}return Tn(e.data)}}ip.create=t=>new ip({typeName:$e.ZodUndefined,...Qe(t)});class op extends st{_parse(e){if(this._getType(e)!==_e.null){const n=this._getOrReturnCtx(e);return Se(n,{code:he.invalid_type,expected:_e.null,received:n.parsedType}),We}return Tn(e.data)}}op.create=t=>new op({typeName:$e.ZodNull,...Qe(t)});class bd extends st{constructor(){super(...arguments),this._any=!0}_parse(e){return Tn(e.data)}}bd.create=t=>new bd({typeName:$e.ZodAny,...Qe(t)});class Iu extends st{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Tn(e.data)}}Iu.create=t=>new Iu({typeName:$e.ZodUnknown,...Qe(t)});class Xo extends st{_parse(e){const r=this._getOrReturnCtx(e);return Se(r,{code:he.invalid_type,expected:_e.never,received:r.parsedType}),We}}Xo.create=t=>new Xo({typeName:$e.ZodNever,...Qe(t)});class S1 extends st{_parse(e){if(this._getType(e)!==_e.undefined){const n=this._getOrReturnCtx(e);return Se(n,{code:he.invalid_type,expected:_e.void,received:n.parsedType}),We}return Tn(e.data)}}S1.create=t=>new S1({typeName:$e.ZodVoid,...Qe(t)});class gi extends st{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==_e.array)return Se(r,{code:he.invalid_type,expected:_e.array,received:r.parsedType}),We;if(s.exactLength!==null){const o=r.data.length>s.exactLength.value,a=r.data.length<s.exactLength.value;(o||a)&&(Se(r,{code:o?he.too_big:he.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(Se(r,{code:he.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(Se(r,{code:he.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>s.type._parseAsync(new Ji(r,o,r.path,a)))).then(o=>dn.mergeArray(n,o));const i=[...r.data].map((o,a)=>s.type._parseSync(new Ji(r,o,r.path,a)));return dn.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new gi({...this._def,minLength:{value:e,message:qe.toString(r)}})}max(e,r){return new gi({...this._def,maxLength:{value:e,message:qe.toString(r)}})}length(e,r){return new gi({...this._def,exactLength:{value:e,message:qe.toString(r)}})}nonempty(e){return this.min(1,e)}}gi.create=(t,e)=>new gi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:$e.ZodArray,...Qe(e)});function $l(t){if(t instanceof sr){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=Wo.create($l(n))}return new sr({...t._def,shape:()=>e})}else return t instanceof gi?new gi({...t._def,type:$l(t.element)}):t instanceof Wo?Wo.create($l(t.unwrap())):t instanceof Bu?Bu.create($l(t.unwrap())):t instanceof Qi?Qi.create(t.items.map(e=>$l(e))):t}class sr extends st{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=At.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==_e.object){const u=this._getOrReturnCtx(e);return Se(u,{code:he.invalid_type,expected:_e.object,received:u.parsedType}),We}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Xo&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const l=i[u],d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Ji(s,d,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof Xo){const u=this._def.unknownKeys;if(u==="passthrough")for(const l of a)c.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(u==="strict")a.length>0&&(Se(s,{code:he.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const l of a){const d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Ji(s,d,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const l of c){const d=await l.key;u.push({key:d,value:await l.value,alwaysSet:l.alwaysSet})}return u}).then(u=>dn.mergeObjectSync(n,u)):dn.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return qe.errToObj,new sr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=qe.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new sr({...this._def,unknownKeys:"strip"})}passthrough(){return new sr({...this._def,unknownKeys:"passthrough"})}extend(e){return new sr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new sr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:$e.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new sr({...this._def,catchall:e})}pick(e){const r={};return At.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new sr({...this._def,shape:()=>r})}omit(e){const r={};return At.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new sr({...this._def,shape:()=>r})}deepPartial(){return $l(this)}partial(e){const r={};return At.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new sr({...this._def,shape:()=>r})}required(e){const r={};return At.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Wo;)i=i._def.innerType;r[n]=i}}),new sr({...this._def,shape:()=>r})}keyof(){return Kj(At.objectKeys(this.shape))}}sr.create=(t,e)=>new sr({shape:()=>t,unknownKeys:"strip",catchall:Xo.create(),typeName:$e.ZodObject,...Qe(e)});sr.strictCreate=(t,e)=>new sr({shape:()=>t,unknownKeys:"strict",catchall:Xo.create(),typeName:$e.ZodObject,...Qe(e)});sr.lazycreate=(t,e)=>new sr({shape:t,unknownKeys:"strip",catchall:Xo.create(),typeName:$e.ZodObject,...Qe(e)});class ap extends st{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new pi(a.ctx.common.issues));return Se(r,{code:he.invalid_union,unionErrors:o}),We}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},l=c._parseSync({data:r.data,path:r.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new pi(c));return Se(r,{code:he.invalid_union,unionErrors:a}),We}}get options(){return this._def.options}}ap.create=(t,e)=>new ap({options:t,typeName:$e.ZodUnion,...Qe(e)});const s1=t=>t instanceof lp?s1(t.schema):t instanceof yi?s1(t.innerType()):t instanceof dp?[t.value]:t instanceof Qa?t.options:t instanceof fp?Object.keys(t.enum):t instanceof hp?s1(t._def.innerType):t instanceof ip?[void 0]:t instanceof op?[null]:null;class pE extends st{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==_e.object)return Se(r,{code:he.invalid_type,expected:_e.object,received:r.parsedType}),We;const n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(Se(r,{code:he.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),We)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const s=new Map;for(const i of r){const o=s1(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new pE({typeName:$e.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...Qe(n)})}}function b2(t,e){const r=La(t),n=La(e);if(t===e)return{valid:!0,data:t};if(r===_e.object&&n===_e.object){const s=At.objectKeys(e),i=At.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=b2(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===_e.array&&n===_e.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=b2(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===_e.date&&n===_e.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class cp extends st{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(m2(i)||m2(o))return We;const a=b2(i.value,o.value);return a.valid?((y2(i)||y2(o))&&r.dirty(),{status:r.value,value:a.data}):(Se(n,{code:he.invalid_intersection_types}),We)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}cp.create=(t,e,r)=>new cp({left:t,right:e,typeName:$e.ZodIntersection,...Qe(r)});class Qi extends st{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==_e.array)return Se(n,{code:he.invalid_type,expected:_e.array,received:n.parsedType}),We;if(n.data.length<this._def.items.length)return Se(n,{code:he.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),We;!this._def.rest&&n.data.length>this._def.items.length&&(Se(n,{code:he.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Ji(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>dn.mergeArray(r,o)):dn.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new Qi({...this._def,rest:e})}}Qi.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Qi({items:t,typeName:$e.ZodTuple,rest:null,...Qe(e)})};class up extends st{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==_e.object)return Se(n,{code:he.invalid_type,expected:_e.object,received:n.parsedType}),We;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in n.data)s.push({key:i._parse(new Ji(n,a,n.path,a)),value:o._parse(new Ji(n,n.data[a],n.path,a))});return n.common.async?dn.mergeObjectAsync(r,s):dn.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof st?new up({keyType:e,valueType:r,typeName:$e.ZodRecord,...Qe(n)}):new up({keyType:di.create(),valueType:e,typeName:$e.ZodRecord,...Qe(r)})}}class T1 extends st{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==_e.map)return Se(n,{code:he.invalid_type,expected:_e.map,received:n.parsedType}),We;const s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,c],u)=>({key:s._parse(new Ji(n,a,n.path,[u,"key"])),value:i._parse(new Ji(n,c,n.path,[u,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return We;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return We;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}}}}T1.create=(t,e,r)=>new T1({valueType:e,keyType:t,typeName:$e.ZodMap,...Qe(r)});class ku extends st{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==_e.set)return Se(n,{code:he.invalid_type,expected:_e.set,received:n.parsedType}),We;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(Se(n,{code:he.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(Se(n,{code:he.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const l of c){if(l.status==="aborted")return We;l.status==="dirty"&&r.dirty(),u.add(l.value)}return{status:r.value,value:u}}const a=[...n.data.values()].map((c,u)=>i._parse(new Ji(n,c,n.path,u)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new ku({...this._def,minSize:{value:e,message:qe.toString(r)}})}max(e,r){return new ku({...this._def,maxSize:{value:e,message:qe.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}ku.create=(t,e)=>new ku({valueType:t,minSize:null,maxSize:null,typeName:$e.ZodSet,...Qe(e)});class rd extends st{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==_e.function)return Se(r,{code:he.invalid_type,expected:_e.function,received:r.parsedType}),We;function n(a,c){return A1({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,_1(),rp].filter(u=>!!u),issueData:{code:he.invalid_arguments,argumentsError:c}})}function s(a,c){return A1({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,_1(),rp].filter(u=>!!u),issueData:{code:he.invalid_return_type,returnTypeError:c}})}const i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof wd){const a=this;return Tn(async function(...c){const u=new pi([]),l=await a._def.args.parseAsync(c,i).catch(g=>{throw u.addIssue(n(c,g)),u}),d=await Reflect.apply(o,this,l);return await a._def.returns._def.type.parseAsync(d,i).catch(g=>{throw u.addIssue(s(d,g)),u})})}else{const a=this;return Tn(function(...c){const u=a._def.args.safeParse(c,i);if(!u.success)throw new pi([n(c,u.error)]);const l=Reflect.apply(o,this,u.data),d=a._def.returns.safeParse(l,i);if(!d.success)throw new pi([s(l,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new rd({...this._def,args:Qi.create(e).rest(Iu.create())})}returns(e){return new rd({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new rd({args:e||Qi.create([]).rest(Iu.create()),returns:r||Iu.create(),typeName:$e.ZodFunction,...Qe(n)})}}class lp extends st{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}lp.create=(t,e)=>new lp({getter:t,typeName:$e.ZodLazy,...Qe(e)});class dp extends st{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return Se(r,{received:r.data,code:he.invalid_literal,expected:this._def.value}),We}return{status:"valid",value:e.data}}get value(){return this._def.value}}dp.create=(t,e)=>new dp({value:t,typeName:$e.ZodLiteral,...Qe(e)});function Kj(t,e){return new Qa({values:t,typeName:$e.ZodEnum,...Qe(e)})}class Qa extends st{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return Se(r,{expected:At.joinValues(n),received:r.parsedType,code:he.invalid_type}),We}if(this._def.values.indexOf(e.data)===-1){const r=this._getOrReturnCtx(e),n=this._def.values;return Se(r,{received:r.data,code:he.invalid_enum_value,options:n}),We}return Tn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e){return Qa.create(e)}exclude(e){return Qa.create(this.options.filter(r=>!e.includes(r)))}}Qa.create=Kj;class fp extends st{_parse(e){const r=At.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==_e.string&&n.parsedType!==_e.number){const s=At.objectValues(r);return Se(n,{expected:At.joinValues(s),received:n.parsedType,code:he.invalid_type}),We}if(r.indexOf(e.data)===-1){const s=At.objectValues(r);return Se(n,{received:n.data,code:he.invalid_enum_value,options:s}),We}return Tn(e.data)}get enum(){return this._def.values}}fp.create=(t,e)=>new fp({values:t,typeName:$e.ZodNativeEnum,...Qe(e)});class wd extends st{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==_e.promise&&r.common.async===!1)return Se(r,{code:he.invalid_type,expected:_e.promise,received:r.parsedType}),We;const n=r.parsedType===_e.promise?r.data:Promise.resolve(r.data);return Tn(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}wd.create=(t,e)=>new wd({type:t,typeName:$e.ZodPromise,...Qe(e)});class yi extends st{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===$e.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Se(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(n.data,i);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:n.path,parent:n})):this._def.schema._parseSync({data:o,path:n.path,parent:n})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?We:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?We:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!np(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>np(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:r.value,value:a})):o);At.assertNever(s)}}yi.create=(t,e,r)=>new yi({schema:t,typeName:$e.ZodEffects,effect:e,...Qe(r)});yi.createWithPreprocess=(t,e,r)=>new yi({schema:e,effect:{type:"preprocess",transform:t},typeName:$e.ZodEffects,...Qe(r)});class Wo extends st{_parse(e){return this._getType(e)===_e.undefined?Tn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Wo.create=(t,e)=>new Wo({innerType:t,typeName:$e.ZodOptional,...Qe(e)});class Bu extends st{_parse(e){return this._getType(e)===_e.null?Tn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Bu.create=(t,e)=>new Bu({innerType:t,typeName:$e.ZodNullable,...Qe(e)});class hp extends st{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===_e.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}hp.create=(t,e)=>new hp({innerType:t,typeName:$e.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Qe(e)});class P1 extends st{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return C1(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new pi(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new pi(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}P1.create=(t,e)=>new P1({innerType:t,typeName:$e.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Qe(e)});class N1 extends st{_parse(e){if(this._getType(e)!==_e.nan){const n=this._getOrReturnCtx(e);return Se(n,{code:he.invalid_type,expected:_e.nan,received:n.parsedType}),We}return{status:"valid",value:e.data}}}N1.create=t=>new N1({typeName:$e.ZodNaN,...Qe(t)});const rz=Symbol("zod_brand");class Zj extends st{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class t0 extends st{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?We:i.status==="dirty"?(r.dirty(),Wj(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?We:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new t0({in:e,out:r,typeName:$e.ZodPipeline})}}class O1 extends st{_parse(e){const r=this._def.innerType._parse(e);return np(r)&&(r.value=Object.freeze(r.value)),r}}O1.create=(t,e)=>new O1({innerType:t,typeName:$e.ZodReadonly,...Qe(e)});const Yj=(t,e={},r)=>t?bd.create().superRefine((n,s)=>{var i,o;if(!t(n)){const a=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:r)!==null&&o!==void 0?o:!0,u=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...u,fatal:c})}}):bd.create(),nz={object:sr.lazycreate};var $e;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})($e||($e={}));const sz=(t,e={message:`Input not instance of ${t.name}`})=>Yj(r=>r instanceof t,e),Jj=di.create,Qj=Ya.create,iz=N1.create,oz=Ja.create,Xj=sp.create,az=xu.create,cz=I1.create,uz=ip.create,lz=op.create,dz=bd.create,fz=Iu.create,hz=Xo.create,pz=S1.create,gz=gi.create,mz=sr.create,yz=sr.strictCreate,bz=ap.create,wz=pE.create,Ez=cp.create,vz=Qi.create,_z=up.create,Az=T1.create,Cz=ku.create,Iz=rd.create,Sz=lp.create,Tz=dp.create,Pz=Qa.create,Nz=fp.create,Oz=wd.create,kT=yi.create,Rz=Wo.create,xz=Bu.create,kz=yi.createWithPreprocess,Bz=t0.create,jz=()=>Jj().optional(),Dz=()=>Qj().optional(),Uz=()=>Xj().optional(),Mz={string:(t=>di.create({...t,coerce:!0})),number:(t=>Ya.create({...t,coerce:!0})),boolean:(t=>sp.create({...t,coerce:!0})),bigint:(t=>Ja.create({...t,coerce:!0})),date:(t=>xu.create({...t,coerce:!0}))},Lz=We;var H=Object.freeze({__proto__:null,defaultErrorMap:rp,setErrorMap:zH,getErrorMap:_1,makeIssue:A1,EMPTY_PATH:$H,addIssueToContext:Se,ParseStatus:dn,INVALID:We,DIRTY:Wj,OK:Tn,isAborted:m2,isDirty:y2,isValid:np,isAsync:C1,get util(){return At},get objectUtil(){return g2},ZodParsedType:_e,getParsedType:La,ZodType:st,ZodString:di,ZodNumber:Ya,ZodBigInt:Ja,ZodBoolean:sp,ZodDate:xu,ZodSymbol:I1,ZodUndefined:ip,ZodNull:op,ZodAny:bd,ZodUnknown:Iu,ZodNever:Xo,ZodVoid:S1,ZodArray:gi,ZodObject:sr,ZodUnion:ap,ZodDiscriminatedUnion:pE,ZodIntersection:cp,ZodTuple:Qi,ZodRecord:up,ZodMap:T1,ZodSet:ku,ZodFunction:rd,ZodLazy:lp,ZodLiteral:dp,ZodEnum:Qa,ZodNativeEnum:fp,ZodPromise:wd,ZodEffects:yi,ZodTransformer:yi,ZodOptional:Wo,ZodNullable:Bu,ZodDefault:hp,ZodCatch:P1,ZodNaN:N1,BRAND:rz,ZodBranded:Zj,ZodPipeline:t0,ZodReadonly:O1,custom:Yj,Schema:st,ZodSchema:st,late:nz,get ZodFirstPartyTypeKind(){return $e},coerce:Mz,any:dz,array:gz,bigint:oz,boolean:Xj,date:az,discriminatedUnion:wz,effect:kT,enum:Pz,function:Iz,instanceof:sz,intersection:Ez,lazy:Sz,literal:Tz,map:Az,nan:iz,nativeEnum:Nz,never:hz,null:lz,nullable:xz,number:Qj,object:mz,oboolean:Uz,onumber:Dz,optional:Rz,ostring:jz,pipeline:Bz,preprocess:kz,promise:Oz,record:_z,set:Cz,strictObject:yz,string:Jj,symbol:cz,transformer:kT,tuple:vz,undefined:uz,union:bz,unknown:fz,void:pz,NEVER:Lz,ZodIssueCode:he,quotelessJson:HH,ZodError:pi});const ar=H.object({message:H.string()});function Ce(t){return H.literal(Pe[t])}const gE=H.object({serializedMessage:H.string().optional(),accountAddress:H.string(),chainId:H.string(),notBefore:H.string().optional(),domain:H.string(),uri:H.string(),version:H.string(),nonce:H.string(),statement:H.string().optional(),resources:H.array(H.string()).optional(),requestId:H.string().optional(),issuedAt:H.string().optional(),expirationTime:H.string().optional()});H.object({accessList:H.array(H.string()),blockHash:H.string().nullable(),blockNumber:H.string().nullable(),chainId:H.string().or(H.number()),from:H.string(),gas:H.string(),hash:H.string(),input:H.string().nullable(),maxFeePerGas:H.string(),maxPriorityFeePerGas:H.string(),nonce:H.string(),r:H.string(),s:H.string(),to:H.string(),transactionIndex:H.string().nullable(),type:H.string(),v:H.string(),value:H.string()});const Fz=H.object({chainId:H.string().or(H.number()),rpcUrl:H.optional(H.string())}),qz=H.object({email:H.string().email()}),Hz=H.object({otp:H.string()}),zz=H.object({uri:H.string(),preferredAccountType:H.optional(H.string()),chainId:H.optional(H.string().or(H.number())),siwxMessage:H.optional(gE),rpcUrl:H.optional(H.string())}),$z=H.object({chainId:H.optional(H.string().or(H.number())),preferredAccountType:H.optional(H.string()),socialUri:H.optional(H.string()),siwxMessage:H.optional(gE),rpcUrl:H.optional(H.string())}),Vz=H.object({provider:H.enum(["google","github","apple","facebook","x","discord"])}),Gz=H.object({email:H.string().email()}),Wz=H.object({otp:H.string()}),Kz=H.object({otp:H.string()}),Zz=H.object({themeMode:H.optional(H.enum(["light","dark"])),themeVariables:H.optional(H.record(H.string(),H.string().or(H.number()))),w3mThemeVariables:H.optional(H.record(H.string(),H.string()))}),Yz=H.object({metadata:H.object({name:H.string(),description:H.string(),url:H.string(),icons:H.array(H.string())}).optional(),sdkVersion:H.string().optional(),sdkType:H.string().optional(),projectId:H.string()}),Jz=H.object({type:H.string()}),Qz=H.object({action:H.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),Xz=H.object({url:H.string()}),e$=H.object({userName:H.string()}),t$=H.object({email:H.string().optional().nullable(),address:H.string(),chainId:H.string().or(H.number()),accounts:H.array(H.object({address:H.string(),type:H.enum([yr.ACCOUNT_TYPES.EOA,yr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:H.string().optional().nullable(),preferredAccountType:H.optional(H.string()),signature:H.string().optional(),message:H.string().optional(),siwxMessage:H.optional(gE)}),r$=H.object({action:H.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),n$=H.object({email:H.string().email().optional().nullable(),address:H.string(),chainId:H.string().or(H.number()),smartAccountDeployed:H.optional(H.boolean()),accounts:H.array(H.object({address:H.string(),type:H.enum([yr.ACCOUNT_TYPES.EOA,yr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:H.optional(H.string()),signature:H.string().optional(),message:H.string().optional(),siwxMessage:H.optional(gE)}),s$=H.object({uri:H.string()}),i$=H.object({isConnected:H.boolean()}),o$=H.object({chainId:H.string().or(H.number())}),a$=H.object({chainId:H.string().or(H.number())}),c$=H.object({newEmail:H.string().email()}),u$=H.object({smartAccountEnabledNetworks:H.array(H.number())});H.object({address:H.string(),isDeployed:H.boolean()});const l$=H.object({version:H.string().optional()}),d$=H.object({type:H.string(),address:H.string()}),f$=H.any(),h$=H.object({method:H.literal("eth_accounts")}),p$=H.object({method:H.literal("eth_blockNumber")}),g$=H.object({method:H.literal("eth_call"),params:H.array(H.any())}),m$=H.object({method:H.literal("eth_chainId")}),y$=H.object({method:H.literal("eth_estimateGas"),params:H.array(H.any())}),b$=H.object({method:H.literal("eth_feeHistory"),params:H.array(H.any())}),w$=H.object({method:H.literal("eth_gasPrice")}),E$=H.object({method:H.literal("eth_getAccount"),params:H.array(H.any())}),v$=H.object({method:H.literal("eth_getBalance"),params:H.array(H.any())}),_$=H.object({method:H.literal("eth_getBlockByHash"),params:H.array(H.any())}),A$=H.object({method:H.literal("eth_getBlockByNumber"),params:H.array(H.any())}),C$=H.object({method:H.literal("eth_getBlockReceipts"),params:H.array(H.any())}),I$=H.object({method:H.literal("eth_getBlockTransactionCountByHash"),params:H.array(H.any())}),S$=H.object({method:H.literal("eth_getBlockTransactionCountByNumber"),params:H.array(H.any())}),T$=H.object({method:H.literal("eth_getCode"),params:H.array(H.any())}),P$=H.object({method:H.literal("eth_getFilterChanges"),params:H.array(H.any())}),N$=H.object({method:H.literal("eth_getFilterLogs"),params:H.array(H.any())}),O$=H.object({method:H.literal("eth_getLogs"),params:H.array(H.any())}),R$=H.object({method:H.literal("eth_getProof"),params:H.array(H.any())}),x$=H.object({method:H.literal("eth_getStorageAt"),params:H.array(H.any())}),k$=H.object({method:H.literal("eth_getTransactionByBlockHashAndIndex"),params:H.array(H.any())}),B$=H.object({method:H.literal("eth_getTransactionByBlockNumberAndIndex"),params:H.array(H.any())}),j$=H.object({method:H.literal("eth_getTransactionByHash"),params:H.array(H.any())}),D$=H.object({method:H.literal("eth_getTransactionCount"),params:H.array(H.any())}),U$=H.object({method:H.literal("eth_getTransactionReceipt"),params:H.array(H.any())}),M$=H.object({method:H.literal("eth_getUncleCountByBlockHash"),params:H.array(H.any())}),L$=H.object({method:H.literal("eth_getUncleCountByBlockNumber"),params:H.array(H.any())}),F$=H.object({method:H.literal("eth_maxPriorityFeePerGas")}),q$=H.object({method:H.literal("eth_newBlockFilter")}),H$=H.object({method:H.literal("eth_newFilter"),params:H.array(H.any())}),z$=H.object({method:H.literal("eth_newPendingTransactionFilter")}),$$=H.object({method:H.literal("eth_sendRawTransaction"),params:H.array(H.any())}),V$=H.object({method:H.literal("eth_syncing"),params:H.array(H.any())}),G$=H.object({method:H.literal("eth_uninstallFilter"),params:H.array(H.any())}),BT=H.object({method:H.literal("personal_sign"),params:H.array(H.any())}),W$=H.object({method:H.literal("eth_signTypedData_v4"),params:H.array(H.any())}),K$=H.object({method:H.literal("eth_sendTransaction"),params:H.array(H.any())}),Z$=H.object({method:H.literal("solana_signMessage"),params:H.object({message:H.string(),pubkey:H.string()})}),Y$=H.object({method:H.literal("solana_signTransaction"),params:H.object({transaction:H.string()})}),J$=H.object({method:H.literal("solana_signAllTransactions"),params:H.object({transactions:H.array(H.string())})}),Q$=H.object({method:H.literal("solana_signAndSendTransaction"),params:H.object({transaction:H.string(),options:H.object({skipPreflight:H.boolean().optional(),preflightCommitment:H.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:H.number().optional(),minContextSlot:H.number().optional()}).optional()})}),X$=H.object({method:H.literal("wallet_sendCalls"),params:H.array(H.object({chainId:H.string().or(H.number()).optional(),from:H.string().optional(),version:H.string().optional(),capabilities:H.any().optional(),calls:H.array(H.object({to:H.string().startsWith("0x"),data:H.string().startsWith("0x").optional(),value:H.string().optional()}))}))}),eV=H.object({method:H.literal("wallet_getCallsStatus"),params:H.array(H.string())}),tV=H.object({method:H.literal("wallet_getCapabilities"),params:H.array(H.string().or(H.number()).optional()).optional()}),rV=H.object({method:H.literal("wallet_grantPermissions"),params:H.array(H.any())}),nV=H.object({method:H.literal("wallet_revokePermissions"),params:H.any()}),sV=H.object({method:H.literal("wallet_getAssets"),params:H.any()}),jT=H.object({token:H.string()}),Ie=H.object({id:H.string().optional()}),Xv={appEvent:Ie.extend({type:Ce("APP_SWITCH_NETWORK"),payload:Fz}).or(Ie.extend({type:Ce("APP_CONNECT_EMAIL"),payload:qz})).or(Ie.extend({type:Ce("APP_CONNECT_DEVICE")})).or(Ie.extend({type:Ce("APP_CONNECT_OTP"),payload:Hz})).or(Ie.extend({type:Ce("APP_CONNECT_SOCIAL"),payload:zz})).or(Ie.extend({type:Ce("APP_GET_FARCASTER_URI")})).or(Ie.extend({type:Ce("APP_CONNECT_FARCASTER")})).or(Ie.extend({type:Ce("APP_GET_USER"),payload:H.optional($z)})).or(Ie.extend({type:Ce("APP_GET_SOCIAL_REDIRECT_URI"),payload:Vz})).or(Ie.extend({type:Ce("APP_SIGN_OUT")})).or(Ie.extend({type:Ce("APP_IS_CONNECTED"),payload:H.optional(jT)})).or(Ie.extend({type:Ce("APP_GET_CHAIN_ID")})).or(Ie.extend({type:Ce("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Ie.extend({type:Ce("APP_INIT_SMART_ACCOUNT")})).or(Ie.extend({type:Ce("APP_SET_PREFERRED_ACCOUNT"),payload:Jz})).or(Ie.extend({type:Ce("APP_RPC_REQUEST"),payload:BT.or(sV).or(h$).or(p$).or(g$).or(m$).or(y$).or(b$).or(w$).or(E$).or(v$).or(_$).or(A$).or(C$).or(I$).or(S$).or(T$).or(P$).or(N$).or(O$).or(R$).or(x$).or(k$).or(B$).or(j$).or(D$).or(U$).or(M$).or(L$).or(F$).or(q$).or(H$).or(z$).or($$).or(V$).or(G$).or(BT).or(W$).or(K$).or(Z$).or(Y$).or(J$).or(Q$).or(eV).or(X$).or(tV).or(rV).or(nV).and(H.object({chainId:H.string().or(H.number()).optional(),chainNamespace:H.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:H.string().optional()}))})).or(Ie.extend({type:Ce("APP_UPDATE_EMAIL"),payload:Gz})).or(Ie.extend({type:Ce("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:Wz})).or(Ie.extend({type:Ce("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:Kz})).or(Ie.extend({type:Ce("APP_SYNC_THEME"),payload:Zz})).or(Ie.extend({type:Ce("APP_SYNC_DAPP_DATA"),payload:Yz})).or(Ie.extend({type:Ce("APP_RELOAD")})).or(Ie.extend({type:Ce("APP_RPC_ABORT")})),frameEvent:Ie.extend({type:Ce("FRAME_SWITCH_NETWORK_ERROR"),payload:ar}).or(Ie.extend({type:Ce("FRAME_SWITCH_NETWORK_SUCCESS"),payload:a$})).or(Ie.extend({type:Ce("FRAME_CONNECT_EMAIL_SUCCESS"),payload:Qz})).or(Ie.extend({type:Ce("FRAME_CONNECT_EMAIL_ERROR"),payload:ar})).or(Ie.extend({type:Ce("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:Xz})).or(Ie.extend({type:Ce("FRAME_GET_FARCASTER_URI_ERROR"),payload:ar})).or(Ie.extend({type:Ce("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:e$})).or(Ie.extend({type:Ce("FRAME_CONNECT_FARCASTER_ERROR"),payload:ar})).or(Ie.extend({type:Ce("FRAME_CONNECT_OTP_ERROR"),payload:ar})).or(Ie.extend({type:Ce("FRAME_CONNECT_OTP_SUCCESS")})).or(Ie.extend({type:Ce("FRAME_CONNECT_DEVICE_ERROR"),payload:ar})).or(Ie.extend({type:Ce("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Ie.extend({type:Ce("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:t$})).or(Ie.extend({type:Ce("FRAME_CONNECT_SOCIAL_ERROR"),payload:ar})).or(Ie.extend({type:Ce("FRAME_GET_USER_ERROR"),payload:ar})).or(Ie.extend({type:Ce("FRAME_GET_USER_SUCCESS"),payload:n$})).or(Ie.extend({type:Ce("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:ar})).or(Ie.extend({type:Ce("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:s$})).or(Ie.extend({type:Ce("FRAME_SIGN_OUT_ERROR"),payload:ar})).or(Ie.extend({type:Ce("FRAME_SIGN_OUT_SUCCESS")})).or(Ie.extend({type:Ce("FRAME_IS_CONNECTED_ERROR"),payload:ar})).or(Ie.extend({type:Ce("FRAME_IS_CONNECTED_SUCCESS"),payload:i$})).or(Ie.extend({type:Ce("FRAME_GET_CHAIN_ID_ERROR"),payload:ar})).or(Ie.extend({type:Ce("FRAME_GET_CHAIN_ID_SUCCESS"),payload:o$})).or(Ie.extend({type:Ce("FRAME_RPC_REQUEST_ERROR"),payload:ar})).or(Ie.extend({type:Ce("FRAME_RPC_REQUEST_SUCCESS"),payload:f$})).or(Ie.extend({type:Ce("FRAME_SESSION_UPDATE"),payload:jT})).or(Ie.extend({type:Ce("FRAME_UPDATE_EMAIL_ERROR"),payload:ar})).or(Ie.extend({type:Ce("FRAME_UPDATE_EMAIL_SUCCESS"),payload:r$})).or(Ie.extend({type:Ce("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:ar})).or(Ie.extend({type:Ce("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Ie.extend({type:Ce("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:ar})).or(Ie.extend({type:Ce("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:c$})).or(Ie.extend({type:Ce("FRAME_SYNC_THEME_ERROR"),payload:ar})).or(Ie.extend({type:Ce("FRAME_SYNC_THEME_SUCCESS")})).or(Ie.extend({type:Ce("FRAME_SYNC_DAPP_DATA_ERROR"),payload:ar})).or(Ie.extend({type:Ce("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Ie.extend({type:Ce("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:u$})).or(Ie.extend({type:Ce("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:ar})).or(Ie.extend({type:Ce("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:ar})).or(Ie.extend({type:Ce("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:d$})).or(Ie.extend({type:Ce("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:ar})).or(Ie.extend({type:Ce("FRAME_READY"),payload:l$})).or(Ie.extend({type:Ce("FRAME_RELOAD_ERROR"),payload:ar})).or(Ie.extend({type:Ce("FRAME_RELOAD_SUCCESS")}))};function e_(t,e={}){return typeof e?.type=="string"&&e?.type?.includes(t)}function iV({projectId:t,chainId:e,enableLogger:r,rpcUrl:n=Q.BLOCKCHAIN_API_RPC_URL,enableCloudAuthAccount:s=!1}){const i=new URL(LH);i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",qH),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",n);const o=Tr.get("dapp_smart_account_version");return o&&(o==="v6"||o==="v7")&&(console.warn(">> AppKit - Forcing smart account version",o),i.searchParams.set("smartAccountVersion",o)),s&&i.searchParams.set("enableCloudAuthAccount","true"),i.toString()}class oV{constructor({projectId:e,isAppClient:r=!1,chainId:n="eip155:1",enableLogger:s=!0,enableCloudAuthAccount:i=!1,rpcUrl:o=Q.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const a=document.getElementById("w3m-iframe");this.iframe&&!a&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(a,c,u)=>{function l({data:d}){if(!e_(Pe.FRAME_EVENT_KEY,d))return;const f=Xv.frameEvent.safeParse(d);if(!f.success){console.warn("W3mFrame: invalid frame event",f.error.message);return}f.data?.id===a&&(c(f.data),window.removeEventListener("message",l))}ys.isClient&&(window.addEventListener("message",l),u.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:a=>{ys.isClient&&window.addEventListener("message",({data:c})=>{if(!e_(Pe.FRAME_EVENT_KEY,c))return;const u=Xv.frameEvent.safeParse(c);u.success?a(u.data):console.warn("W3mFrame: invalid frame event",u.error.message)})},onAppEvent:a=>{ys.isClient&&window.addEventListener("message",({data:c})=>{if(!e_(Pe.APP_EVENT_KEY,c))return;const u=Xv.appEvent.safeParse(c);u.success||console.warn("W3mFrame: invalid app event",u.error.message),a(c)})},postAppEvent:a=>{if(ys.isClient){if(!this.iframe?.contentWindow)throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(a,"*")}},postFrameEvent:a=>{if(ys.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(a,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),this.rpcUrl=o,r&&(this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),ys.isClient)){const a=document.createElement("iframe");a.id="w3m-iframe",a.src=iV({projectId:e,chainId:n,enableLogger:s,rpcUrl:this.rpcUrl,enableCloudAuthAccount:i}),a.name="w3m-secure-iframe",a.style.position="fixed",a.style.zIndex="999999",a.style.display="none",a.style.border="none",a.style.animationDelay="0s, 50ms",a.style.borderBottomLeftRadius="clamp(0px, var(--apkt-borderRadius-8), 44px)",a.style.borderBottomRightRadius="clamp(0px, var(--apkt-borderRadius-8), 44px)",this.iframe=a,this.iframe.onerror=()=>{this.frameLoadPromiseResolver?.reject("Unable to load email login dependency")},this.events.onFrameEvent(c=>{c.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,this.frameLoadPromiseResolver?.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(r=>({[r]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${r}&projectId=${this.projectId}`,chainId:r}}));return Object.assign({},...e)}}var sf={exports:{}},t_,DT;function aV(){if(DT)return t_;DT=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}t_=e;function e(r,n,s){var i=s&&s.stringify||t,o=1;if(typeof r=="object"&&r!==null){var a=n.length+o;if(a===1)return r;var c=new Array(a);c[0]=i(r);for(var u=1;u<a;u++)c[u]=i(n[u]);return c.join(" ")}if(typeof r!="string")return r;var l=n.length;if(l===0)return r;for(var d="",f=1-o,g=-1,p=r&&r.length||0,h=0;h<p;){if(r.charCodeAt(h)===37&&h+1<p){switch(g=g>-1?g:0,r.charCodeAt(h+1)){case 100:case 102:if(f>=l||n[f]==null)break;g<h&&(d+=r.slice(g,h)),d+=Number(n[f]),g=h+2,h++;break;case 105:if(f>=l||n[f]==null)break;g<h&&(d+=r.slice(g,h)),d+=Math.floor(Number(n[f])),g=h+2,h++;break;case 79:case 111:case 106:if(f>=l||n[f]===void 0)break;g<h&&(d+=r.slice(g,h));var y=typeof n[f];if(y==="string"){d+="'"+n[f]+"'",g=h+2,h++;break}if(y==="function"){d+=n[f].name||"<anonymous>",g=h+2,h++;break}d+=i(n[f]),g=h+2,h++;break;case 115:if(f>=l)break;g<h&&(d+=r.slice(g,h)),d+=String(n[f]),g=h+2,h++;break;case 37:g<h&&(d+=r.slice(g,h)),d+="%",g=h+2,h++,f--;break}++f}++h}return g===-1?r:(g<p&&(d+=r.slice(g)),d)}return t_}var UT;function cV(){if(UT)return sf.exports;UT=1;const t=aV();sf.exports=l;const e=B().console||{},r={mapHttpRequest:I,mapHttpResponse:I,wrapRequestSerializer:P,wrapResponseSerializer:P,wrapErrorSerializer:P,req:I,res:I,err:_,errWithCause:_};function n(v,A){return v==="silent"?1/0:A.levels.values[v]}const s=Symbol("pino.logFuncs"),i=Symbol("pino.hierarchy"),o={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function a(v,A){const S={logger:A,parent:v[i]};A[i]=S}function c(v,A,S){const j={};A.forEach(N=>{j[N]=S[N]?S[N]:e[N]||e[o[N]||"log"]||T}),v[s]=j}function u(v,A){return Array.isArray(v)?v.filter(function(j){return j!=="!stdSerializers.err"}):v===!0?Object.keys(A):!1}function l(v){v=v||{},v.browser=v.browser||{};const A=v.browser.transmit;if(A&&typeof A.send!="function")throw Error("pino: transmit option must have a send function");const S=v.browser.write||e;v.browser.write&&(v.browser.asObject=!0);const j=v.serializers||{},N=u(v.browser.serialize,j);let x=v.browser.serialize;Array.isArray(v.browser.serialize)&&v.browser.serialize.indexOf("!stdSerializers.err")>-1&&(x=!1);const D=Object.keys(v.customLevels||{}),M=["error","fatal","warn","info","debug","trace"].concat(D);typeof S=="function"&&M.forEach(function(Z){S[Z]=S}),(v.enabled===!1||v.browser.disabled)&&(v.level="silent");const L=v.level||"info",F=Object.create(S);F.log||(F.log=T),c(F,M,S),a({},F),Object.defineProperty(F,"levelVal",{get:$}),Object.defineProperty(F,"level",{get:V,set:J});const q={transmit:A,serialize:N,asObject:v.browser.asObject,asObjectBindingsOnly:v.browser.asObjectBindingsOnly,formatters:v.browser.formatters,levels:M,timestamp:C(v),messageKey:v.messageKey||"msg",onChild:v.onChild||T};F.levels=d(v),F.level=L,F.isLevelEnabled=function(Z){return this.levels.values[Z]?this.levels.values[Z]>=this.levels.values[this.level]:!1},F.setMaxListeners=F.getMaxListeners=F.emit=F.addListener=F.on=F.prependListener=F.once=F.prependOnceListener=F.removeListener=F.removeAllListeners=F.listeners=F.listenerCount=F.eventNames=F.write=F.flush=T,F.serializers=j,F._serialize=N,F._stdErrSerialize=x,F.child=function(...Z){return Y.call(this,q,...Z)},A&&(F._logEvent=m());function $(){return n(this.level,this)}function V(){return this._level}function J(Z){if(Z!=="silent"&&!this.levels.values[Z])throw Error("unknown level "+Z);this._level=Z,p(this,q,F,"error"),p(this,q,F,"fatal"),p(this,q,F,"warn"),p(this,q,F,"info"),p(this,q,F,"debug"),p(this,q,F,"trace"),D.forEach(ee=>{p(this,q,F,ee)})}function Y(Z,ee,le){if(!ee)throw new Error("missing bindings for child Pino");le=le||{},N&&ee.serializers&&(le.serializers=ee.serializers);const X=le.serializers;if(N&&X){var se=Object.assign({},j,X),fe=v.browser.serialize===!0?Object.keys(se):N;delete ee.serializers,E([ee],fe,se,this._stdErrSerialize)}function Oe(Me){this._childLevel=(Me._childLevel|0)+1,this.bindings=ee,se&&(this.serializers=se,this._serialize=fe),A&&(this._logEvent=m([].concat(Me._logEvent.bindings,ee)))}Oe.prototype=this;const Re=new Oe(this);return a(this,Re),Re.child=function(...Me){return Y.call(this,Z,...Me)},Re.level=le.level||this.level,Z.onChild(Re),Re}return F}function d(v){const A=v.customLevels||{},S=Object.assign({},l.levels.values,A),j=Object.assign({},l.levels.labels,f(A));return{values:S,labels:j}}function f(v){const A={};return Object.keys(v).forEach(function(S){A[v[S]]=S}),A}l.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},l.stdSerializers=r,l.stdTimeFunctions=Object.assign({},{nullTime:R,epochTime:U,unixTime:k,isoTime:O});function g(v){const A=[];v.bindings&&A.push(v.bindings);let S=v[i];for(;S.parent;)S=S.parent,S.logger.bindings&&A.push(S.logger.bindings);return A.reverse()}function p(v,A,S,j){if(Object.defineProperty(v,j,{value:n(v.level,S)>n(j,S)?T:S[s][j],writable:!0,enumerable:!0,configurable:!0}),v[j]===T){if(!A.transmit)return;const x=A.transmit.level||v.level,D=n(x,S);if(n(j,S)<D)return}v[j]=y(v,A,S,j);const N=g(v);N.length!==0&&(v[j]=h(N,v[j]))}function h(v,A){return function(){return A.apply(this,[...v,...arguments])}}function y(v,A,S,j){return(function(N){return function(){const D=A.timestamp(),M=new Array(arguments.length),L=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var F=0;F<M.length;F++)M[F]=arguments[F];var q=!1;if(A.serialize&&(E(M,this._serialize,this.serializers,this._stdErrSerialize),q=!0),A.asObject||A.formatters?N.call(L,...b(this,j,M,D,A)):N.apply(L,M),A.transmit){const $=A.transmit.level||v._level,V=n($,S),J=n(j,S);if(J<V)return;w(this,{ts:D,methodLevel:j,methodValue:J,transmitValue:S.levels.values[A.transmit.level||v._level],send:A.transmit.send,val:n(v._level,S)},M,q)}}})(v[s][j])}function b(v,A,S,j,N){const{level:x,log:D=$=>$}=N.formatters||{},M=S.slice();let L=M[0];const F={};let q=(v._childLevel|0)+1;if(q<1&&(q=1),j&&(F.time=j),x){const $=x(A,v.levels.values[A]);Object.assign(F,$)}else F.level=v.levels.values[A];if(N.asObjectBindingsOnly){if(L!==null&&typeof L=="object")for(;q--&&typeof M[0]=="object";)Object.assign(F,M.shift());return[D(F),...M]}else{if(L!==null&&typeof L=="object"){for(;q--&&typeof M[0]=="object";)Object.assign(F,M.shift());L=M.length?t(M.shift(),M):void 0}else typeof L=="string"&&(L=t(M.shift(),M));return L!==void 0&&(F[N.messageKey]=L),[D(F)]}}function E(v,A,S,j){for(const N in v)if(j&&v[N]instanceof Error)v[N]=l.stdSerializers.err(v[N]);else if(typeof v[N]=="object"&&!Array.isArray(v[N])&&A)for(const x in v[N])A.indexOf(x)>-1&&x in S&&(v[N][x]=S[x](v[N][x]))}function w(v,A,S,j=!1){const N=A.send,x=A.ts,D=A.methodLevel,M=A.methodValue,L=A.val,F=v._logEvent.bindings;j||E(S,v._serialize||Object.keys(v.serializers),v.serializers,v._stdErrSerialize===void 0?!0:v._stdErrSerialize),v._logEvent.ts=x,v._logEvent.messages=S.filter(function(q){return F.indexOf(q)===-1}),v._logEvent.level.label=D,v._logEvent.level.value=M,N(D,v._logEvent,L),v._logEvent=m(F)}function m(v){return{ts:0,messages:[],bindings:v||[],level:{label:"",value:0}}}function _(v){const A={type:v.constructor.name,msg:v.message,stack:v.stack};for(const S in v)A[S]===void 0&&(A[S]=v[S]);return A}function C(v){return typeof v.timestamp=="function"?v.timestamp:v.timestamp===!1?R:U}function I(){return{}}function P(v){return v}function T(){}function R(){return!1}function U(){return Date.now()}function k(){return Math.round(Date.now()/1e3)}function O(){return new Date(Date.now()).toISOString()}function B(){function v(A){return typeof A<"u"&&A}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return v(self)||v(window)||v(this)||{}}}return sf.exports.default=l,sf.exports.pino=l,sf.exports}var Vl=cV();const eD=WC(Vl),uV=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),lV=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function ju(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return lV(t)}catch{return t}}function ea(t){return typeof t=="string"?t:uV(t)||""}const dV={level:"info"},mE="custom_context",ZC=1e3*1024;var fV=Object.defineProperty,hV=(t,e,r)=>e in t?fV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fa=(t,e,r)=>hV(t,typeof e!="symbol"?e+"":e,r);let pV=class{constructor(e){Fa(this,"nodeValue"),Fa(this,"sizeInBytes"),Fa(this,"next"),this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},MT=class{constructor(e){Fa(this,"lengthInNodes"),Fa(this,"sizeInBytes"),Fa(this,"head"),Fa(this,"tail"),Fa(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new pV(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}};var gV=Object.defineProperty,mV=(t,e,r)=>e in t?gV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ng=(t,e,r)=>mV(t,typeof e!="symbol"?e+"":e,r);let tD=class{constructor(e,r=ZC){ng(this,"logs"),ng(this,"level"),ng(this,"levelValue"),ng(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=e??"error",this.levelValue=Vl.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new MT(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===Vl.levels.values.error?console.error(e):r===Vl.levels.values.warn?console.warn(e):r===Vl.levels.values.debug?console.debug(e):r===Vl.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(ea({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new MT(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(ea({extraMetadata:e})),new Blob(r,{type:"application/json"})}};var yV=Object.defineProperty,bV=(t,e,r)=>e in t?yV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wV=(t,e,r)=>bV(t,e+"",r);let EV=class{constructor(e,r=ZC){wV(this,"baseChunkLogger"),this.baseChunkLogger=new tD(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}};var vV=Object.defineProperty,_V=(t,e,r)=>e in t?vV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,AV=(t,e,r)=>_V(t,e+"",r);let CV=class{constructor(e,r=ZC){AV(this,"baseChunkLogger"),this.baseChunkLogger=new tD(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var IV=Object.defineProperty,SV=Object.defineProperties,TV=Object.getOwnPropertyDescriptors,LT=Object.getOwnPropertySymbols,PV=Object.prototype.hasOwnProperty,NV=Object.prototype.propertyIsEnumerable,FT=(t,e,r)=>e in t?IV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,R1=(t,e)=>{for(var r in e||(e={}))PV.call(e,r)&&FT(t,r,e[r]);if(LT)for(var r of LT(e))NV.call(e,r)&&FT(t,r,e[r]);return t},x1=(t,e)=>SV(t,TV(e));function YC(t){return x1(R1({},t),{level:t?.level||dV.level})}function OV(t,e,r=mE){return t[r]=e,t}function Kn(t,e=mE){return t[e]||""}function RV(t,e,r=mE){const n=Kn(t,r);return n.trim()?`${n}/${e}`:e}function Zn(t,e,r=mE){const n=RV(t,e,r),s=t.child({context:n});return OV(s,n,r)}function xV(t){var e,r;const n=new EV((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:eD(x1(R1({},t.opts),{level:"trace",browser:x1(R1({},(r=t.opts)==null?void 0:r.browser),{write:s=>n.write(s)})})),chunkLoggerController:n}}function kV(t){var e;const r=new CV((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:eD(x1(R1({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function yE(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?xV(t):kV(t)}class BV{constructor(e){const r=YC({level:FH}),{logger:n,chunkLoggerController:s}=yE({opts:r});this.logger=Zn(n,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&this.chunkLoggerController?.downloadLogsBlobInBrowser&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{this.chunkLoggerController?.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class jV{constructor({projectId:e,chainId:r,enableLogger:n=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:c,metadata:u,sdkVersion:l,sdkType:d}){this.openRpcRequests=new Map,this.isInitialized=!1,n&&(this.w3mLogger=new BV(e)),this.abortController=i,this.getActiveCaipNetwork=o,this.getCaipNetworks=a;const f=this.getRpcUrl(r);this.projectId=e,this.sdkVersion=l,this.sdkType=d,this.metadata=u,this.w3mFrame=new oV({projectId:e,isAppClient:!0,chainId:r,enableLogger:n,rpcUrl:f,enableCloudAuthAccount:c}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(r=>{r.type===Pe.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,await this.syncDappData({metadata:this.metadata,projectId:this.projectId,sdkVersion:this.sdkVersion,sdkType:this.sdkType}),await this.getSmartAccountEnabledNetworks(),this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Tr.get(Pe.EMAIL_LOGIN_USED_KEY)}getEmail(){return Tr.get(Pe.EMAIL)}getUsername(){return Tr.get(Pe.SOCIAL_USERNAME)}async reload(){try{await this.appEvent({type:Pe.APP_RELOAD})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error reloading iframe"),e}}async connectEmail(e){try{ys.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Pe.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){try{return this.appEvent({type:Pe.APP_CONNECT_DEVICE})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting device"),e}}async connectOtp(e){try{return this.appEvent({type:Pe.APP_CONNECT_OTP,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){try{if(!this.getLoginEmailUsed())return{isConnected:!1};const e=await this.appEvent({type:Pe.APP_IS_CONNECTED});return e?.isConnected||this.deleteAuthLoginCache(),e}catch(e){throw this.deleteAuthLoginCache(),this.w3mLogger?.logger.error({error:e},"Error checking connection"),e}}async getChainId(){try{const e=await this.appEvent({type:Pe.APP_GET_CHAIN_ID});return this.setLastUsedChainId(e.chainId),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting chain id"),e}}async getSocialRedirectUri(e){try{return await this.init(),this.appEvent({type:Pe.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){try{const r=await this.appEvent({type:Pe.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){try{return this.appEvent({type:Pe.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){try{const r=await this.appEvent({type:Pe.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){try{return this.appEvent({type:Pe.APP_SYNC_THEME,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){try{return this.appEvent({type:Pe.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){try{const e=await this.appEvent({type:Pe.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(e.smartAccountEnabledNetworks),e}catch(e){throw this.persistSmartAccountEnabledNetworks([]),this.w3mLogger?.logger.error({error:e},"Error getting smart account enabled networks"),e}}async setPreferredAccount(e){try{return this.appEvent({type:Pe.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){if(e?.socialUri)try{await this.init();const r=this.getRpcUrl(e.chainId),n=await this.appEvent({type:Pe.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:r}});return n.userName&&this.setSocialLoginSuccess(n.userName),this.setLoginSuccess(n.email),this.setLastUsedChainId(n.chainId),this.user=n,n}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting social"),r}else try{const r=e?.chainId||this.getLastUsedChainId()||1,n=await this.getUser({chainId:r,preferredAccountType:e?.preferredAccountType,siwxMessage:e?.siwxMessage,rpcUrl:this.getRpcUrl(r)});return this.setLoginSuccess(n.email),this.setLastUsedChainId(n.chainId),this.user=n,n}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting"),r}}async getUser(e){try{await this.init();const r=e?.chainId||this.getLastUsedChainId()||1,n=await this.appEvent({type:Pe.APP_GET_USER,payload:{...e,chainId:r,rpcUrl:this.getRpcUrl(r)}});return this.user=n,n}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:r,preferredAccountType:n}){try{await this.init();const s=this.getRpcUrl(r),i=await this.appEvent({type:Pe.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:r,rpcUrl:s,preferredAccountType:n}});return i.userName&&this.setSocialLoginSuccess(i.userName),i}catch(s){throw this.w3mLogger?.logger.error({error:s},"Error connecting social"),s}}async getFarcasterUri(){try{return await this.init(),await this.appEvent({type:Pe.APP_GET_FARCASTER_URI})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting farcaster uri"),e}}async connectFarcaster(){try{const e=await this.appEvent({type:Pe.APP_CONNECT_FARCASTER});return e.userName&&this.setSocialLoginSuccess(e.userName),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting farcaster"),e}}async switchNetwork({chainId:e}){try{const r=this.getRpcUrl(e),n=await this.appEvent({type:Pe.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(n.chainId),n}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error switching network"),r}}async disconnect(){try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const n=setTimeout(()=>{r()},3e3);await this.appEvent({type:Pe.APP_SIGN_OUT}),clearTimeout(n),r()})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error disconnecting"),e}}async request(e){const r=e;try{if(yr.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const n=e.chainNamespace||"eip155",s=this.getActiveCaipNetwork(n)?.id;r.chainNamespace=n,r.chainId=s,r.rpcUrl=this.getRpcUrl(s),this.rpcRequestHandler?.(e);const i=await this.appEvent({type:Pe.APP_RPC_REQUEST,payload:r});return this.rpcSuccessHandler?.(i,r),i}catch(n){throw this.rpcErrorHandler?.(n,r),this.w3mLogger?.logger.error({error:n},"Error requesting"),n}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Pe.FRAME_IS_CONNECTED_SUCCESS&&r.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Pe.FRAME_IS_CONNECTED_ERROR&&e(),r.type===Pe.FRAME_IS_CONNECTED_SUCCESS&&!r.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Pe.FRAME_GET_USER_SUCCESS&&e(r.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Pe.FRAME_CONNECT_SOCIAL_SUCCESS&&e(r.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(r=>{r.type===Pe.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(r.payload):r.type===Pe.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:yr.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){try{await Promise.all(Array.from(this.openRpcRequests.values()).map(async({abortController:e,method:r})=>{yr.SAFE_RPC_METHODS.includes(r)||e.abort(),await this.appEvent({type:Pe.APP_RPC_ABORT})})),this.openRpcRequests.clear()}catch(e){this.w3mLogger?.logger.error({error:e},"Error aborting RPC request")}}async appEvent(e){let r,n;function s(c){return c.replace("@w3m-app/","")}const i=[Pe.APP_SYNC_DAPP_DATA,Pe.APP_SYNC_THEME,Pe.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(n=setTimeout(()=>{this.onTimeout?.("iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(n),[Pe.APP_CONNECT_EMAIL,Pe.APP_CONNECT_DEVICE,Pe.APP_CONNECT_OTP,Pe.APP_CONNECT_SOCIAL,Pe.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(r=setTimeout(()=>{this.onTimeout?.("iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,u)=>{const l=Math.random().toString(36).substring(7);this.w3mLogger?.logger.info?.({event:e,id:l},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:l});const d=new AbortController;if(o==="RPC_REQUEST"){const g=e;this.openRpcRequests.set(l,{...g.payload,abortController:d})}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?u(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&u(new Error("Something went wrong"))});const f=(g,p)=>{g.id===l&&(p?.logger.info?.({framEvent:g,id:l},"Received frame response"),this.openRpcRequests.delete(g.id),g.type===`@w3m-frame/${o}_SUCCESS`?(r&&clearTimeout(r),n&&clearTimeout(n),"payload"in g&&c(g.payload),c(void 0)):g.type===`@w3m-frame/${o}_ERROR`&&(r&&clearTimeout(r),n&&clearTimeout(n),"payload"in g&&u(new Error(g.payload?.message||"An error occurred")),u(new Error("An error occurred"))))};this.w3mFrame.events.registerFrameEventHandler(l,g=>f(g,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Tr.set(Pe.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Tr.set(Pe.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Tr.set(Pe.EMAIL,e),Tr.set(Pe.EMAIL_LOGIN_USED_KEY,"true"),Tr.delete(Pe.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Tr.delete(Pe.EMAIL_LOGIN_USED_KEY),Tr.delete(Pe.EMAIL),Tr.delete(Pe.LAST_USED_CHAIN_KEY),Tr.delete(Pe.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Tr.set(Pe.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Tr.get(Pe.LAST_USED_CHAIN_KEY)??void 0,r=Number(e);return isNaN(r)?e:r}persistSmartAccountEnabledNetworks(e){Tr.set(Pe.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){let r=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?r=_r.parseCaipNetworkId(e)?.chainNamespace:Number.isInteger(Number(e))?r="eip155":r="solana");const n=this.getCaipNetworks(r);return(e?n.find(i=>String(i.id)===String(e)||i.caipNetworkId===e):n[0])?.rpcUrls.default.http?.[0]}}function rD(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function qT(t){return rD(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const nD="2.41.2";let r_={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${nD}`},Vt=class w2 extends Error{constructor(e,r={}){const n=r.cause instanceof w2?r.cause.details:r.cause?.message?r.cause.message:r.details,s=r.cause instanceof w2&&r.cause.docsPath||r.docsPath,i=r_.getDocsUrl?.({...r,docsPath:s}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...n?[`Details: ${n}`]:[],...r_.version?[`Version: ${r_.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=s,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=nD}walk(e){return sD(this,e)}};function sD(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?sD(t.cause,e):e?null:t}let F1e=class extends Vt{constructor({offset:e,position:r,size:n}){super(`Slice ${r==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`,{name:"SliceOffsetOutOfBoundsError"})}},iD=class extends Vt{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}};class z1e extends Vt{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} is expected to be ${r} ${n} long, but is ${e} ${n} long.`,{name:"InvalidBytesLengthError"})}}function Md(t,{dir:e,size:r=32}={}){return typeof t=="string"?DV(t,{dir:e,size:r}):UV(t,{dir:e,size:r})}function DV(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new iD({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function UV(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new iD({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let s=0;s<r;s++){const i=e==="right";n[i?s:r-s-1]=t[i?s:t.length-s-1]}return n}let MV=class extends Vt{constructor({max:e,min:r,signed:n,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}};class V1e extends Vt{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class LV extends Vt{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let FV=class extends Vt{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function i1(t,{dir:e="left"}={}){let r=typeof t=="string"?t.replace("0x",""):t,n=0;for(let s=0;s<r.length-1&&r[e==="left"?s:r.length-s-1].toString()==="0";s++)n++;return r=e==="left"?r.slice(n):r.slice(0,r.length-n),typeof t=="string"?(r.length===1&&e==="right"&&(r=`${r}0`),`0x${r.length%2===1?`0${r}`:r}`):r}function rc(t,{size:e}){if(qT(t)>e)throw new FV({givenSize:qT(t),maxSize:e})}function qV(t,e={}){const{signed:r}=e;e.size&&rc(t,{size:e.size});const n=BigInt(t);if(!r)return n;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return n<=i?n:n-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function W1e(t,e={}){let r=t;if(e.size&&(rc(r,{size:e.size}),r=i1(r)),i1(r)==="0x00")return!1;if(i1(r)==="0x01")return!0;throw new LV(r)}function K1e(t,e={}){return Number(qV(t,e))}function Z1e(t,e={}){let r=JC(t);return e.size&&(rc(r,{size:e.size}),r=i1(r,{dir:"right"})),new TextDecoder().decode(r)}const HV=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function HT(t,e={}){return typeof t=="number"||typeof t=="bigint"?aD(t,e):typeof t=="string"?cD(t,e):typeof t=="boolean"?zV(t,e):oD(t,e)}function zV(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(rc(r,{size:e.size}),Md(r,{size:e.size})):r}function oD(t,e={}){let r="";for(let s=0;s<t.length;s++)r+=HV[t[s]];const n=`0x${r}`;return typeof e.size=="number"?(rc(n,{size:e.size}),Md(n,{dir:"right",size:e.size})):n}function aD(t,e={}){const{signed:r,size:n}=e,s=BigInt(t);let i;n?r?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&r?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new MV({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const a=`0x${(r&&s<0?(1n<<BigInt(n*8))+BigInt(s):s).toString(16)}`;return n?Md(a,{size:n}):a}const $V=new TextEncoder;function cD(t,e={}){const r=$V.encode(t);return oD(r,e)}const VV=new TextEncoder;function Y1e(t,e={}){return typeof t=="number"||typeof t=="bigint"?WV(t,e):typeof t=="boolean"?GV(t,e):rD(t)?JC(t,e):KV(t,e)}function GV(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(rc(r,{size:e.size}),Md(r,{size:e.size})):r}const no={zero:48,nine:57,A:65,F:70,a:97,f:102};function zT(t){if(t>=no.zero&&t<=no.nine)return t-no.zero;if(t>=no.A&&t<=no.F)return t-(no.A-10);if(t>=no.a&&t<=no.f)return t-(no.a-10)}function JC(t,e={}){let r=t;e.size&&(rc(r,{size:e.size}),r=Md(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const s=n.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=zT(n.charCodeAt(a++)),u=zT(n.charCodeAt(a++));if(c===void 0||u===void 0)throw new Vt(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);i[o]=c*16+u}return i}function WV(t,e){const r=aD(t,e);return JC(r)}function KV(t,e={}){const r=VV.encode(t);return typeof e.size=="number"?(rc(r,{size:e.size}),Md(r,{dir:"right",size:e.size})):r}let ZV=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}};const Su=(t,e,r)=>JSON.stringify(t,(n,s)=>typeof s=="bigint"?s.toString():s,r),Q1e={gwei:9,wei:18},YV={ether:-9,wei:9};function QC(t,e){let r=t.toString();const n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(e,"0");let[s,i]=[r.slice(0,r.length-e),r.slice(r.length-e)];return i=i.replace(/(0+)$/,""),`${n?"-":""}${s||"0"}${i?`.${i}`:""}`}function k1(t,e="wei"){return QC(t,YV[e])}const X1e=t=>t,XC=t=>t;class Lh extends Vt{constructor({body:e,cause:r,details:n,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:r,details:n,metaMessages:[i&&`Status: ${i}`,`URL: ${XC(o)}`,e&&`Request body: ${Su(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class uD extends Vt{constructor({body:e,error:r,url:n}){super("RPC Request failed.",{cause:r,details:r.message,metaMessages:[`URL: ${XC(n)}`,`Request body: ${Su(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r.code,this.data=r.data,this.url=n}}class $T extends Vt{constructor({body:e,url:r}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${XC(r)}`,`Request body: ${Su(e)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=r}}const JV=-1;class Yn extends Vt{constructor(e,{code:r,docsPath:n,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:n,metaMessages:s||e?.metaMessages,name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof uD?e.code:r??JV}}class vs extends Yn{constructor(e,r){super(e,r),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r.data}}class pp extends Yn{constructor(e){super(e,{code:pp.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(pp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class gp extends Yn{constructor(e){super(e,{code:gp.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(gp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class mp extends Yn{constructor(e,{method:r}={}){super(e,{code:mp.code,name:"MethodNotFoundRpcError",shortMessage:`The method${r?` "${r}"`:""} does not exist / is not available.`})}}Object.defineProperty(mp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class yp extends Yn{constructor(e){super(e,{code:yp.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(yp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Ed extends Yn{constructor(e){super(e,{code:Ed.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Ed,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class bp extends Yn{constructor(e){super(e,{code:bp.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(bp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class wp extends Yn{constructor(e){super(e,{code:wp.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(wp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Ep extends Yn{constructor(e){super(e,{code:Ep.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Ep,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class vd extends Yn{constructor(e){super(e,{code:vd.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(vd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class hu extends Yn{constructor(e,{method:r}={}){super(e,{code:hu.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${r?` "${r}"`:""} is not supported.`})}}Object.defineProperty(hu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class _d extends Yn{constructor(e){super(e,{code:_d.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(_d,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class vp extends Yn{constructor(e){super(e,{code:vp.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(vp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Tu extends vs{constructor(e){super(e,{code:Tu.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Tu,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class _p extends vs{constructor(e){super(e,{code:_p.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(_p,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Ap extends vs{constructor(e,{method:r}={}){super(e,{code:Ap.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${r?` " ${r}"`:""}.`})}}Object.defineProperty(Ap,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Cp extends vs{constructor(e){super(e,{code:Cp.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Cp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Ip extends vs{constructor(e){super(e,{code:Ip.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Ip,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Sp extends vs{constructor(e){super(e,{code:Sp.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Sp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Tp extends vs{constructor(e){super(e,{code:Tp.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Tp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Pp extends vs{constructor(e){super(e,{code:Pp.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Pp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Np extends vs{constructor(e){super(e,{code:Np.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Np,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Op extends vs{constructor(e){super(e,{code:Op.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Op,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Rp extends vs{constructor(e){super(e,{code:Rp.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Rp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class xp extends vs{constructor(e){super(e,{code:xp.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(xp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class kp extends vs{constructor(e){super(e,{code:kp.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(kp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class QV extends Yn{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const XV="modulepreload",eG=function(t){return"/"+t},VT={},$r=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let c=function(u){return Promise.all(u.map(l=>Promise.resolve(l).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=c(r.map(u=>{if(u=eG(u),u in VT)return;VT[u]=!0;const l=u.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":XV,l||(f.as="script"),f.crossOrigin="",f.href=u,a&&f.setAttribute("nonce",a),document.head.appendChild(f),l)return new Promise((g,p)=>{f.addEventListener("load",g),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};class eI extends Vt{constructor({cause:e,message:r}={}){const n=r?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(eI,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(eI,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class tG extends Vt{constructor({cause:e,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${k1(r)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(tG,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class rG extends Vt{constructor({cause:e,maxFeePerGas:r}={}){super(`The fee cap (\`maxFeePerGas\`${r?` = ${k1(r)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(rG,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class nG extends Vt{constructor({cause:e,nonce:r}={}){super(`Nonce provided for the transaction ${r?`(${r}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(nG,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class sG extends Vt{constructor({cause:e,nonce:r}={}){super([`Nonce provided for the transaction ${r?`(${r}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(sG,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class iG extends Vt{constructor({cause:e,nonce:r}={}){super(`Nonce provided for the transaction ${r?`(${r}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(iG,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class oG extends Vt{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(oG,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class aG extends Vt{constructor({cause:e,gas:r}={}){super(`The amount of gas ${r?`(${r}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(aG,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class cG extends Vt{constructor({cause:e,gas:r}={}){super(`The amount of gas ${r?`(${r}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(cG,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class uG extends Vt{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(uG,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class lG extends Vt{constructor({cause:e,maxPriorityFeePerGas:r,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${r?` = ${k1(r)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${k1(n)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(lG,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class eEe extends Vt{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}const tEe=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],rEe=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],lD=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}],nEe=[...lD,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],sEe=[...lD,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],iEe=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],oEe=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],aEe=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],cEe=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],sg=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}];function dG(){let t=()=>{},e=()=>{};return{promise:new Promise((n,s)=>{t=n,e=s}),resolve:t,reject:e}}const n_=new Map;function fG({fn:t,id:e,shouldSplitBatch:r,wait:n=0,sort:s}){const i=async()=>{const l=c();o();const d=l.map(({args:f})=>f);d.length!==0&&t(d).then(f=>{s&&Array.isArray(f)&&f.sort(s);for(let g=0;g<l.length;g++){const{resolve:p}=l[g];p?.([f[g],f])}}).catch(f=>{for(let g=0;g<l.length;g++){const{reject:p}=l[g];p?.(f)}})},o=()=>n_.delete(e),a=()=>c().map(({args:l})=>l),c=()=>n_.get(e)||[],u=l=>n_.set(e,[...c(),l]);return{flush:o,async schedule(l){const{promise:d,resolve:f,reject:g}=dG();return r?.([...a(),l])&&i(),c().length>0?(u({args:l,resolve:f,reject:g}),d):(u({args:l,resolve:f,reject:g}),setTimeout(i,n),d)}}}async function dD(t){return new Promise(e=>setTimeout(e,t))}function hG(t,{delay:e=100,retryCount:r=2,shouldRetry:n=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:u})=>{const l=typeof e=="function"?e({count:a,error:u}):e;l&&await dD(l),o({count:a+1})};try{const u=await t();s(u)}catch(u){if(a<r&&await n({count:a,error:u}))return c({error:u});i(u)}};o()})}const E2=256;let ig=E2,og;function pG(t=11){if(!og||ig+t>E2*2){og="",ig=0;for(let e=0;e<E2;e++)og+=(256+Math.random()*256|0).toString(16).substring(1)}return og.substring(ig,ig+++t)}const ag=new ZV(8192);function gG(t,{enabled:e=!0,id:r}){if(!e||!r)return t();if(ag.get(r))return ag.get(r);const n=t().finally(()=>ag.delete(r));return ag.set(r,n),n}function mG(t,e={}){return async(r,n={})=>{const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...n},{method:u}=r;if(i?.exclude?.includes(u))throw new hu(new Error("method not supported"),{method:u});if(i?.include&&!i.include.includes(u))throw new hu(new Error("method not supported"),{method:u});const l=s?cD(`${c}.${Su(r)}`):void 0;return gG(()=>hG(async()=>{try{return await t(r)}catch(d){const f=d;switch(f.code){case pp.code:throw new pp(f);case gp.code:throw new gp(f);case mp.code:throw new mp(f,{method:r.method});case yp.code:throw new yp(f);case Ed.code:throw new Ed(f);case bp.code:throw new bp(f);case wp.code:throw new wp(f);case Ep.code:throw new Ep(f);case vd.code:throw new vd(f);case hu.code:throw new hu(f,{method:r.method});case _d.code:throw new _d(f);case vp.code:throw new vp(f);case Tu.code:throw new Tu(f);case _p.code:throw new _p(f);case Ap.code:throw new Ap(f);case Cp.code:throw new Cp(f);case Ip.code:throw new Ip(f);case Sp.code:throw new Sp(f);case Tp.code:throw new Tp(f);case Pp.code:throw new Pp(f);case Np.code:throw new Np(f);case Op.code:throw new Op(f);case Rp.code:throw new Rp(f);case xp.code:throw new xp(f);case kp.code:throw new kp(f);case 5e3:throw new Tu(f);default:throw d instanceof Vt?d:new QV(f)}}},{delay:({count:d,error:f})=>{if(f&&f instanceof Lh){const g=f?.headers?.get("Retry-After");if(g?.match(/\d/))return Number.parseInt(g,10)*1e3}return~~(1<<d)*o},retryCount:a,shouldRetry:({error:d})=>yG(d)}),{enabled:s,id:l})}}function yG(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===_d.code||t.code===Ed.code:t instanceof Lh&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function fD(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function bG(t,{errorInstance:e=new Error("timed out"),timeout:r,signal:n}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;r>0&&(o=setTimeout(()=>{n&&a.abort()},r)),s(await t({signal:a?.signal||null}))}catch(a){a?.name==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function wG(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const GT=wG();function EG(t,e={}){return{async request(r){const{body:n,fetchFn:s=e.fetchFn??fetch,onRequest:i=e.onRequest,onResponse:o=e.onResponse,timeout:a=e.timeout??1e4}=r,c={...e.fetchOptions??{},...r.fetchOptions??{}},{headers:u,method:l,signal:d}=c;try{const f=await bG(async({signal:p})=>{const h={...c,body:Array.isArray(n)?Su(n.map(w=>({jsonrpc:"2.0",id:w.id??GT.take(),...w}))):Su({jsonrpc:"2.0",id:n.id??GT.take(),...n}),headers:{"Content-Type":"application/json",...u},method:l||"POST",signal:d||(a>0?p:null)},y=new Request(t,h),b=await i?.(y,h)??{...h,url:t};return await s(b.url??t,b)},{errorInstance:new $T({body:n,url:t}),timeout:a,signal:!0});o&&await o(f);let g;if(f.headers.get("Content-Type")?.startsWith("application/json"))g=await f.json();else{g=await f.text();try{g=JSON.parse(g||"{}")}catch(p){if(f.ok)throw p;g={error:g}}}if(!f.ok)throw new Lh({body:n,details:Su(g.error)||f.statusText,headers:f.headers,status:f.status,url:t});return g}catch(f){throw f instanceof Lh||f instanceof $T?f:new Lh({body:n,cause:f,url:t})}}}}function hD({key:t,methods:e,name:r,request:n,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const u=pG();return{config:{key:t,methods:e,name:r,request:n,retryCount:s,retryDelay:i,timeout:o,type:a},request:mG(n,{methods:e,retryCount:s,retryDelay:i,uid:u}),value:c}}function WT(t,e={}){const{key:r="fallback",name:n="Fallback",rank:s=!1,shouldThrow:i=vG,retryCount:o,retryDelay:a}=e;return(({chain:c,pollingInterval:u=4e3,timeout:l,...d})=>{let f=t,g=()=>{};const p=hD({key:r,name:n,async request({method:h,params:y}){let b;const E=async(w=0)=>{const m=f[w]({...d,chain:c,retryCount:0,timeout:l});try{const _=await m.request({method:h,params:y});return g({method:h,params:y,response:_,transport:m,status:"success"}),_}catch(_){if(g({error:_,method:h,params:y,transport:m,status:"error"}),i(_)||w===f.length-1||(b??=f.slice(w+1).some(C=>{const{include:I,exclude:P}=C({chain:c}).config.methods||{};return I?I.includes(h):P?!P.includes(h):!0}),!b))throw _;return E(w+1)}};return E()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:h=>g=h,transports:f.map(h=>h({chain:c,retryCount:0}))});if(s){const h=typeof s=="object"?s:{};_G({chain:c,interval:h.interval??u,onTransports:y=>f=y,ping:h.ping,sampleCount:h.sampleCount,timeout:h.timeout,transports:f,weights:h.weights})}return p})}function vG(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===vd.code||t.code===Tu.code||eI.nodeMessage.test(t.message)||t.code===5e3))}function _G({chain:t,interval:e=4e3,onTransports:r,ping:n,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:u=.3}=a,l=[],d=async()=>{const f=await Promise.all(o.map(async h=>{const y=h({chain:t,retryCount:0,timeout:i}),b=Date.now();let E,w;try{await(n?n({transport:y}):y.request({method:"net_listening"})),w=1}catch{w=0}finally{E=Date.now()}return{latency:E-b,success:w}}));l.push(f),l.length>s&&l.shift();const g=Math.max(...l.map(h=>Math.max(...h.map(({latency:y})=>y)))),p=o.map((h,y)=>{const b=l.map(C=>C[y].latency),w=1-b.reduce((C,I)=>C+I,0)/b.length/g,m=l.map(C=>C[y].success),_=m.reduce((C,I)=>C+I,0)/m.length;return _===0?[0,y]:[u*w+c*_,y]}).sort((h,y)=>y[0]-h[0]);r(p.map(([,h])=>o[h])),await dD(e),d()};d()}class AG extends Vt{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function cg(t,e={}){const{batch:r,fetchFn:n,fetchOptions:s,key:i="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:u,retryDelay:l,raw:d}=e;return({chain:f,retryCount:g,timeout:p})=>{const{batchSize:h=1e3,wait:y=0}=typeof r=="object"?r:{},b=e.retryCount??g,E=p??e.timeout??1e4,w=t||f?.rpcUrls.default.http[0];if(!w)throw new AG;const m=EG(w,{fetchFn:n,fetchOptions:s,onRequest:c,onResponse:u,timeout:E});return hD({key:i,methods:o,name:a,async request({method:_,params:C}){const I={method:_,params:C},{schedule:P}=fG({id:w,wait:y,shouldSplitBatch(k){return k.length>h},fn:k=>m.request({body:k}),sort:(k,O)=>k.id-O.id}),T=async k=>r?P(k):[await m.request({body:k})],[{error:R,result:U}]=await T(I);if(d)return{error:R,result:U};if(R)throw new uD({body:I,error:R,url:w});return U},retryCount:b,retryDelay:l,timeout:E,type:"http"},{fetchOptions:s,url:w})}}async function of(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class r0{constructor({baseUrl:e,clientId:r}){this.baseUrl=e,this.clientId=r}async get({headers:e,signal:r,cache:n,...s}){const i=this.createUrl(s);return(await of(i,{method:"GET",headers:e,signal:r,cache:n})).json()}async getBlob({headers:e,signal:r,...n}){const s=this.createUrl(n);return(await of(s,{method:"GET",headers:e,signal:r})).blob()}async post({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await of(i,{method:"POST",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async put({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await of(i,{method:"PUT",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async delete({body:e,headers:r,signal:n,...s}){const i=this.createUrl(s);return(await of(i,{method:"DELETE",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}createUrl({path:e,params:r}){const n=new URL(e,this.baseUrl);return r&&Object.entries(r).forEach(([s,i])=>{i&&n.searchParams.append(s,i)}),this.clientId&&n.searchParams.append("clientId",this.clientId),n}sendBeacon({body:e,...r}){const n=this.createUrl(r);return navigator.sendBeacon(n.toString(),e?JSON.stringify(e):void 0)}}const v2={getFeatureValue(t,e){const r=e?.[t];return r===void 0?ft.DEFAULT_FEATURES[t]:r},filterSocialsByPlatform(t){if(!t||!t.length)return t;let e=t;return be.isTelegram()&&(be.isIos()&&(e=e.filter(r=>r!=="google")),be.isMac()&&(e=e.filter(r=>r!=="x")),be.isAndroid()&&(e=e.filter(r=>!["facebook","x"].includes(r)))),be.isMobile()&&(e=e.filter(r=>r!=="facebook")),e},isSocialsEnabled(){return Array.isArray(ne.state.features?.socials)&&ne.state.features?.socials.length>0||Array.isArray(ne.state.remoteFeatures?.socials)&&ne.state.remoteFeatures?.socials.length>0},isEmailEnabled(){return!!(ne.state.features?.email||ne.state.remoteFeatures?.email)}},je=Kt({features:ft.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:ft.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{},enableMobileFullScreen:!1,coinbasePreference:"all"}),ne={state:je,subscribeKey(t,e){return Kr(je,t,e)},setOptions(t){Object.assign(je,t)},setRemoteFeatures(t){if(!t)return;const e={...je.remoteFeatures,...t};je.remoteFeatures=e,je.remoteFeatures?.socials&&(je.remoteFeatures.socials=v2.filterSocialsByPlatform(je.remoteFeatures.socials)),je.features?.pay&&(je.remoteFeatures.email=!1,je.remoteFeatures.socials=!1)},setFeatures(t){if(!t)return;je.features||(je.features=ft.DEFAULT_FEATURES);const e={...je.features,...t};je.features=e,je.features?.pay&&je.remoteFeatures&&(je.remoteFeatures.email=!1,je.remoteFeatures.socials=!1)},setProjectId(t){je.projectId=t},setCustomRpcUrls(t){je.customRpcUrls=t},setAllWallets(t){je.allWallets=t},setIncludeWalletIds(t){je.includeWalletIds=t},setExcludeWalletIds(t){je.excludeWalletIds=t},setFeaturedWalletIds(t){je.featuredWalletIds=t},setTokens(t){je.tokens=t},setTermsConditionsUrl(t){je.termsConditionsUrl=t},setPrivacyPolicyUrl(t){je.privacyPolicyUrl=t},setCustomWallets(t){je.customWallets=t},setIsSiweEnabled(t){je.isSiweEnabled=t},setIsUniversalProvider(t){je.isUniversalProvider=t},setSdkVersion(t){je.sdkVersion=t},setMetadata(t){je.metadata=t},setDisableAppend(t){je.disableAppend=t},setEIP6963Enabled(t){je.enableEIP6963=t},setDebug(t){je.debug=t},setEnableWalletGuide(t){je.enableWalletGuide=t},setEnableAuthLogger(t){je.enableAuthLogger=t},setEnableWallets(t){je.enableWallets=t},setPreferUniversalLinks(t){je.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,r]of Object.entries(ft.SIWX_DEFAULTS))t[e]??=r;je.siwx=t},setConnectMethodsOrder(t){je.features={...je.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){je.features={...je.features,walletFeaturesOrder:t}},setSocialsOrder(t){je.remoteFeatures={...je.remoteFeatures,socials:t}},setCollapseWallets(t){je.features={...je.features,collapseWallets:t}},setEnableEmbedded(t){je.enableEmbedded=t},setAllowUnsupportedChain(t){je.allowUnsupportedChain=t},setManualWCControl(t){je.manualWCControl=t},setEnableNetworkSwitch(t){je.enableNetworkSwitch=t},setEnableMobileFullScreen(t){je.enableMobileFullScreen=be.isMobile()&&t},setEnableReconnect(t){je.enableReconnect=t},setCoinbasePreference(t){je.coinbasePreference=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,r])=>{r&&(je.defaultAccountTypes[e]=r)})},setUniversalProviderConfigOverride(t){je.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return je.universalProviderConfigOverride},getSnapshot(){return Xh(je)}},nu=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Ir=Kt({...nu}),CG={state:Ir,subscribeKey(t,e){return Kr(Ir,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=be.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Ir.message=nu.message,Ir.variant=nu.variant,Ir.svg=nu.svg,Ir.open=nu.open,Ir.autoClose=nu.autoClose},_showMessage({message:t,svg:e,variant:r="success",autoClose:n=nu.autoClose}){Ir.open?(Ir.open=!1,setTimeout(()=>{Ir.message=t,Ir.variant=r,Ir.svg=e,Ir.open=!0,Ir.autoClose=n},150)):(Ir.message=t,Ir.variant=r,Ir.svg=e,Ir.open=!0,Ir.autoClose=n)}},zi=CG,IG={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},pD=be.getBlockchainApiUrl(),fn=Kt({clientId:null,api:new r0({baseUrl:pD,clientId:null}),supportedChains:{http:[],ws:[]}}),He={state:fn,async get(t){const{st:e,sv:r}=He.getSdkProperties(),n=ne.state.projectId,s={...t.params||{},st:e,sv:r,projectId:n};return fn.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=ne.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{fn.supportedChains.http.length||await He.getSupportedNetworks()}catch{return!1}return fn.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await He.get({path:"v1/supported-chains"});return fn.supportedChains=t,t}catch{return fn.supportedChains}},async fetchIdentity({address:t}){const e=ie.getIdentityFromCacheForAddress(t);if(e)return e;const r=await He.get({path:`/v1/identity/${t}`,params:{sender:z.state.activeCaipAddress?be.getPlainAddress(z.state.activeCaipAddress):void 0}});return ie.updateIdentityCache({address:t,identity:r,timestamp:Date.now()}),r},async fetchTransactions({account:t,cursor:e,signal:r,cache:n,chainId:s}){if(!await He.isNetworkSupported(z.state.activeCaipNetwork?.caipNetworkId))return{data:[],next:void 0};const o=ie.getTransactionsCacheForAddress({address:t,chainId:s});if(o)return o;const a=await He.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:s},signal:r,cache:n});return ie.updateTransactionsCache({address:t,chainId:s,timestamp:Date.now(),transactions:a}),a},async fetchSwapQuote({amount:t,userAddress:e,from:r,to:n,gasPrice:s}){return await He.isNetworkSupported(z.state.activeCaipNetwork?.caipNetworkId)?He.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:r,to:n,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){return await He.isNetworkSupported(z.state.activeCaipNetwork?.caipNetworkId)?He.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async getAddressBalance({caipNetworkId:t,address:e}){return fn.api.post({path:`/v1?chainId=${t}&projectId=${ne.state.projectId}`,body:{id:"1",jsonrpc:"2.0",method:"getAddressBalance",params:{address:e}}}).then(r=>r.result)},async fetchTokenPrice({addresses:t}){if(!await He.isNetworkSupported(z.state.activeCaipNetwork?.caipNetworkId))return{fungibles:[]};const r=ie.getTokenPriceCacheForAddresses(t);if(r)return r;const n=await fn.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:ne.state.projectId},headers:{"Content-Type":"application/json"}});return ie.updateTokenPriceCache({addresses:t,timestamp:Date.now(),tokenPrice:n}),n},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){return await He.isNetworkSupported(z.state.activeCaipNetwork?.caipNetworkId)?He.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){const{st:e,sv:r}=He.getSdkProperties();if(!await He.isNetworkSupported(z.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Gas Price");return He.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:r}})},async generateSwapCalldata({amount:t,from:e,to:r,userAddress:n,disableEstimate:s}){if(!await He.isNetworkSupported(z.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return fn.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:ft.CONVERT_SLIPPAGE_TOLERANCE},projectId:ne.state.projectId,from:e,to:r,userAddress:n,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:r}){const{st:n,sv:s}=He.getSdkProperties();if(!await He.isNetworkSupported(z.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return He.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:r,from:t,to:e,st:n,sv:s}})},async getBalance(t,e,r){const{st:n,sv:s}=He.getSdkProperties();if(!await He.isNetworkSupported(z.state.activeCaipNetwork?.caipNetworkId))return zi.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=ie.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await He.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:r,st:n,sv:s}});return ie.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){return await He.isNetworkSupported(z.state.activeCaipNetwork?.caipNetworkId)?He.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){if(!await He.isNetworkSupported(z.state.activeCaipNetwork?.caipNetworkId))return[];const r=z.getAccountData()?.address;return He.get({path:`/v1/profile/reverse/${t}`,params:{sender:r,apiVersion:"2"}})},async getEnsNameSuggestions(t){return await He.isNetworkSupported(z.state.activeCaipNetwork?.caipNetworkId)?He.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:r,signature:n}){return await He.isNetworkSupported(z.state.activeCaipNetwork?.caipNetworkId)?fn.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:r,signature:n},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:r,purchaseAmount:n,paymentAmount:s}){return await He.isNetworkSupported(z.state.activeCaipNetwork?.caipNetworkId)?(await fn.api.post({path:"/v1/generators/onrampurl",params:{projectId:ne.state.projectId},body:{destinationWallets:t,defaultNetwork:r,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:n,presetFiatAmount:s}})).url:""},async getOnrampOptions(){if(!await He.isNetworkSupported(z.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await He.get({path:"/v1/onramp/options"})}catch{return IG}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}){try{return await He.isNetworkSupported(z.state.activeCaipNetwork?.caipNetworkId)?await fn.api.post({path:"/v1/onramp/quote",params:{projectId:ne.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}}):null}catch{return{networkFee:{amount:r,currency:e.id},paymentSubtotal:{amount:r,currency:e.id},paymentTotal:{amount:r,currency:e.id},purchaseAmount:{amount:r,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){return await He.isNetworkSupported(z.state.activeCaipNetwork?.caipNetworkId)?He.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,r){return await He.isNetworkSupported(z.state.activeCaipNetwork?.caipNetworkId)?fn.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:ne.state.projectId},body:{pci:e,signature:r}}):{success:!1}},setClientId(t){fn.clientId=t,fn.api=new r0({baseUrl:pD,clientId:t})}},Os={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"},BINANCE:{id:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25",appId:"yFK5FCqYprrXDiVFbhyRx7",deeplink:"bnc://app.binance.com/mp/app",url:"https://app.binance.com/en/download"}},SG={handleMobileDeeplinkRedirect(t,e){const r=window.location.href,n=encodeURIComponent(r);if(t===Os.PHANTOM.id&&!("phantom"in window)){const s=r.startsWith("https")?"https":"http",i=r.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Os.PHANTOM.url}/ul/browse/${n}?ref=${o}`}if(t===Os.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Os.SOLFLARE.url}/ul/v1/browse/${n}?ref=${n}`),e===Q.CHAIN.SOLANA&&t===Os.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Os.COINBASE.url}/dapp?cb_url=${n}`),e===Q.CHAIN.BITCOIN&&t===Os.BINANCE.id&&!("binancew3w"in window)){const s=z.state.activeCaipNetwork,i=window.btoa("/pages/browser/index"),o=window.btoa(`url=${n}&defaultChainId=${s?.id??1}`),a=new URL(Os.BINANCE.deeplink);a.searchParams.set("appId",Os.BINANCE.appId),a.searchParams.set("startPagePath",i),a.searchParams.set("startPageQuery",o);const c=new URL(Os.BINANCE.url);c.searchParams.set("_dp",window.btoa(a.toString())),window.location.href=c.toString()}}},TG=Object.freeze({enabled:!0,events:[]}),PG=new r0({baseUrl:be.getAnalyticsUrl(),clientId:null}),NG=5,OG=60*1e3,ha=Kt({...TG}),RG={state:ha,subscribeKey(t,e){return Kr(ha,t,e)},async sendError(t,e){if(!ha.enabled)return;const r=Date.now();if(ha.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return r-o<OG}).length>=NG)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};ha.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=ne.state;await PG.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:be.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){ha.enabled=!0},disable(){ha.enabled=!1},clearEvents(){ha.events=[]}};class Du extends Error{constructor(e,r,n){super(e),this.originalName="AppKitError",this.name="AppKitError",this.category=r,this.originalError=n,n&&n instanceof Error&&(this.originalName=n.name),Object.setPrototypeOf(this,Du.prototype);let s=!1;if(n instanceof Error&&typeof n.stack=="string"&&n.stack){const i=n.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Du):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function KT(t,e){let r="";try{t instanceof Error?r=t.message:typeof t=="string"?r=t:typeof t=="object"&&t!==null?Object.keys(t).length===0?r="Unknown error":r=t?.message||JSON.stringify(t):r=String(t)}catch(s){r="Unknown error",console.error("Error parsing error message",s)}const n=t instanceof Du?t:new Du(r,e,t);throw RG.sendError(n,n.category),n}function Fs(t,e="INTERNAL_SDK_ERROR"){const r={};return Object.keys(t).forEach(n=>{const s=t[n];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return KT(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return KT(a,e)}},r[n]=i}else r[n]=s}),r}const rs=Kt({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),xG={state:rs,subscribeNetworkImages(t){return Wr(rs.networkImages,()=>t(rs.networkImages))},subscribeKey(t,e){return Kr(rs,t,e)},subscribe(t){return Wr(rs,()=>t(rs))},setWalletImage(t,e){rs.walletImages[t]=e},setNetworkImage(t,e){rs.networkImages[t]=e},setChainImage(t,e){rs.chainImages[t]=e},setConnectorImage(t,e){rs.connectorImages={...rs.connectorImages,[t]:e}},setTokenImage(t,e){rs.tokenImages[t]=e},setCurrencyImage(t,e){rs.currencyImages[t]=e}},ms=Fs(xG),kG={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:"",ton:"20f673c0-095e-49b2-07cf-eb5049dcf600"},s_=Kt({networkImagePromises:{}}),gD={async fetchWalletImage(t){if(t)return await ke._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(s_.networkImagePromises[t]||(s_.networkImagePromises[t]=ke._fetchNetworkImage(t)),await s_.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return ms.state.walletImages[t]},getWalletImage(t){if(t?.image_url)return t?.image_url;if(t?.image_id)return ms.state.walletImages[t.image_id]},getNetworkImage(t){if(t?.assets?.imageUrl)return t?.assets?.imageUrl;if(t?.assets?.imageId)return ms.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return ms.state.networkImages[t]},getConnectorImage(t){if(t?.imageUrl)return t.imageUrl;if(t?.info?.icon)return t.info.icon;if(t?.imageId)return ms.state.connectorImages[t.imageId]},getChainImage(t){return ms.state.networkImages[kG[t]]},getTokenImage(t){if(t)return ms.state.tokenImages[t]}},BG=be.getAnalyticsUrl(),jG=new r0({baseUrl:BG,clientId:null}),DG=["MODAL_CREATED"],UG=45,ZT=1e3*10,cr=Kt({timestamp:Date.now(),lastFlush:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"},pendingEvents:[],subscribedToVisibilityChange:!1,walletImpressions:[]}),Ye={state:cr,subscribe(t){return Wr(cr,()=>t(cr))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=ne.state;return{projectId:t,st:e,sv:r||"html-wagmi-4.2.2"}},shouldFlushEvents(){const t=JSON.stringify(cr.pendingEvents).length/1024>UG,e=cr.lastFlush+ZT<Date.now();return t||e},_setPendingEvent(t){try{let e=z.getAccountData()?.address;if("address"in t.data&&t.data.address&&(e=t.data.address),DG.includes(t.data.event)||typeof window>"u")return;const r=z.getActiveCaipNetwork()?.caipNetworkId;this.state.pendingEvents.push({eventId:be.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e,properties:{..."properties"in t.data?t.data.properties:{},caipNetworkId:r}}}),cr.reportedErrors.FORBIDDEN=!1,Ye.shouldFlushEvents()&&Ye._submitPendingEvents()}catch(e){console.warn("_setPendingEvent",e)}},sendEvent(t){cr.timestamp=Date.now(),cr.data=t;const e=["INITIALIZE","CONNECT_SUCCESS","SOCIAL_LOGIN_SUCCESS"];(ne.state.features?.analytics||e.includes(t.event))&&Ye._setPendingEvent(cr),this.subscribeToFlushTriggers()},sendWalletImpressionEvent(t){cr.walletImpressions.push(t)},_transformPendingEventsForBatch(t){try{return t.filter(e=>e.props.event!=="WALLET_IMPRESSION_V2")}catch{return t}},_submitPendingEvents(){if(cr.lastFlush=Date.now(),!(cr.pendingEvents.length===0&&cr.walletImpressions.length===0))try{const t=Ye._transformPendingEventsForBatch(cr.pendingEvents);cr.walletImpressions.length&&t.push({eventId:be.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:Date.now(),props:{type:"track",event:"WALLET_IMPRESSION_V2",items:[...cr.walletImpressions]}}),jG.sendBeacon({path:"/batch",params:Ye.getSdkProperties(),body:t}),cr.reportedErrors.FORBIDDEN=!1,cr.pendingEvents=[],cr.walletImpressions=[]}catch{cr.reportedErrors.FORBIDDEN=!0}},subscribeToFlushTriggers(){cr.subscribedToVisibilityChange||typeof document>"u"||(cr.subscribedToVisibilityChange=!0,document?.addEventListener?.("visibilitychange",()=>{document.visibilityState==="hidden"&&Ye._submitPendingEvents()}),document?.addEventListener?.("freeze",()=>{Ye._submitPendingEvents()}),window?.addEventListener?.("pagehide",()=>{Ye._submitPendingEvents()}),setInterval(()=>{Ye._submitPendingEvents()},ZT))}},MG=be.getApiUrl(),hn=new r0({baseUrl:MG,clientId:null}),LG=40,YT=4,FG=20,Ve=Kt({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1,explorerWallets:[],explorerFilteredWallets:[],plan:{tier:"none",hasExceededUsageLimit:!1,limits:{isAboveRpcLimit:!1,isAboveMauLimit:!1}}}),ke={state:Ve,subscribeKey(t,e){return Kr(Ve,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=ne.state;return{projectId:t,st:e||"appkit",sv:r||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return ne.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${hn.baseUrl}/getWalletImage/${t}`,r=await hn.getBlob({path:e,params:ke._getSdkProperties()});ms.setWalletImage(t,URL.createObjectURL(r))},async _fetchNetworkImage(t){const e=`${hn.baseUrl}/public/getAssetImage/${t}`,r=await hn.getBlob({path:e,params:ke._getSdkProperties()});ms.setNetworkImage(t,URL.createObjectURL(r))},async _fetchConnectorImage(t){const e=`${hn.baseUrl}/public/getAssetImage/${t}`,r=await hn.getBlob({path:e,params:ke._getSdkProperties()});ms.setConnectorImage(t,URL.createObjectURL(r))},async _fetchCurrencyImage(t){const e=`${hn.baseUrl}/public/getCurrencyImage/${t}`,r=await hn.getBlob({path:e,params:ke._getSdkProperties()});ms.setCurrencyImage(t,URL.createObjectURL(r))},async _fetchTokenImage(t){const e=`${hn.baseUrl}/public/getTokenImage/${t}`,r=await hn.getBlob({path:e,params:ke._getSdkProperties()});ms.setTokenImage(t,URL.createObjectURL(r))},_filterWalletsByPlatform(t){const e=t.length,r=be.isMobile()?t?.filter(s=>s.mobile_link||s.webapp_link?!0:Object.values(Os).map(o=>o.id).includes(s.id)):t,n=e-r.length;return{filteredWallets:r,mobileFilteredOutWalletsLength:n}},async fetchProjectConfig(){return(await hn.get({path:"/appkit/v1/config",params:ke._getSdkProperties()})).features},async fetchUsage(){try{const t=await hn.get({path:"/appkit/v1/project-limits",params:ke._getSdkProperties()}),{tier:e,isAboveMauLimit:r,isAboveRpcLimit:n}=t.planLimits,s=e==="starter",i=r||n;ke.state.plan={tier:e,hasExceededUsageLimit:s&&i,limits:{isAboveRpcLimit:n,isAboveMauLimit:r}}}catch(t){console.warn("Failed to fetch usage",t)}},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await hn.get({path:"/projects/v1/origins",params:ke._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===Q.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=Q.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const e=z.getAllRequestedCaipNetworks()?.map(({assets:r})=>r?.imageId).filter(Boolean).filter(r=>!gD.getNetworkImageById(r));e&&await Promise.allSettled(e.map(r=>ke._fetchNetworkImage(r)))},async fetchConnectorImages(){const{connectors:t}=ue.state,e=t.map(({imageId:r})=>r).filter(Boolean);await Promise.allSettled(e.map(r=>ke._fetchConnectorImage(r)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>ke._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>ke._fetchTokenImage(e)))},async fetchWallets(t){const e=t.exclude??[];ke._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Os).map(o=>o.id));const n=await hn.get({path:"/getWallets",params:{...ke._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:t.include?.join(","),exclude:e.join(",")}}),{filteredWallets:s,mobileFilteredOutWalletsLength:i}=ke._filterWalletsByPlatform(n?.data);return{data:s||[],count:n?.count,mobileFilteredOutWalletsLength:i}},async prefetchWalletRanks(){const t=ue.state.connectors;if(!t?.length)return;const e={page:1,entries:20,badge:"certified"};if(e.names=t.map(s=>s.name).join(","),z.state.activeChain===Q.CHAIN.EVM){const s=[...t.flatMap(i=>i.connectors?.map(o=>o.info?.rdns)||[]),...t.map(i=>i.info?.rdns)].filter(i=>typeof i=="string"&&i.length>0);s.length&&(e.rdns=s.join(","))}const{data:r}=await ke.fetchWallets(e);Ve.explorerWallets=r,ue.extendConnectorsWithExplorerWallets(r);const n=z.getRequestedCaipNetworkIds().join(",");Ve.explorerFilteredWallets=r.filter(s=>s.chains?.some(i=>n.includes(i)))},async fetchFeaturedWallets(){const{featuredWalletIds:t}=ne.state;if(t?.length){const e={...ke._getSdkProperties(),page:1,entries:t?.length??YT,include:t},{data:r}=await ke.fetchWallets(e),n=[...r].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=n.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>ke._fetchWalletImage(i))),Ve.featured=n,Ve.allFeatured=n}},async fetchRecommendedWallets(){try{Ve.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:r}=ne.state,n=[...e??[],...r??[]].filter(Boolean),s=z.getRequestedCaipNetworkIds().join(","),i={page:1,entries:YT,include:t,exclude:n,chains:s},{data:o,count:a}=await ke.fetchWallets(i),c=ie.getRecentWallets(),u=o.map(d=>d.image_id).filter(Boolean),l=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...u,...l].map(d=>ke._fetchWalletImage(d))),Ve.recommended=o,Ve.allRecommended=o,Ve.count=a??0}catch{}finally{Ve.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:r,featuredWalletIds:n}=ne.state,s=z.getRequestedCaipNetworkIds().join(","),i=[...Ve.recommended.map(({id:d})=>d),...r??[],...n??[]].filter(Boolean),o={page:t,entries:LG,include:e,exclude:i,chains:s},{data:a,count:c,mobileFilteredOutWalletsLength:u}=await ke.fetchWallets(o);Ve.mobileFilteredOutWalletsLength=u+(Ve.mobileFilteredOutWalletsLength??0);const l=a.slice(0,FG).map(d=>d.image_id).filter(Boolean);await Promise.allSettled(l.map(d=>ke._fetchWalletImage(d))),Ve.wallets=be.uniqueBy([...Ve.wallets,...ke._filterOutExtensions(a)],"id").filter(d=>d.chains?.some(f=>s.includes(f))),Ve.count=c>Ve.count?c:Ve.count,Ve.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:r}=await ke.fetchWallets(e);r&&r.forEach(n=>{Ve.excludedWallets.push({rdns:n.rdns,name:n.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:r,excludeWalletIds:n}=ne.state,s=z.getRequestedCaipNetworkIds().join(",");Ve.search=[];const i={page:1,entries:100,search:t?.trim(),badge_type:e,include:r,exclude:n,chains:s},{data:o}=await ke.fetchWallets(i);Ye.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>ke._fetchWalletImage(c)),be.wait(300)]),Ve.search=ke._filterOutExtensions(o)},initPromise(t,e){const r=Ve.promises[t];return r||(Ve.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:r=!0,fetchNetworkImages:n=!0,fetchWalletRanks:s=!0}={}){const i=[t&&ke.initPromise("connectorImages",ke.fetchConnectorImages),e&&ke.initPromise("featuredWallets",ke.fetchFeaturedWallets),r&&ke.initPromise("recommendedWallets",ke.fetchRecommendedWallets),n&&ke.initPromise("networkImages",ke.fetchNetworkImages),s&&ke.initPromise("walletRanks",ke.prefetchWalletRanks)].filter(Boolean);return Promise.allSettled(i)},prefetchAnalyticsConfig(){ne.state.features?.analytics&&ke.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await hn.get({path:"/getAnalyticsConfig",params:ke._getSdkProperties()});ne.setFeatures({analytics:t})}catch{ne.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!t?.length){Ve.featured=Ve.allFeatured,Ve.recommended=Ve.allRecommended;return}const e=z.getRequestedCaipNetworkIds().join(",");Ve.featured=Ve.allFeatured.filter(r=>r.chains?.some(n=>e.includes(n))),Ve.recommended=Ve.allRecommended.filter(r=>r.chains?.some(n=>e.includes(n))),Ve.filteredWallets=Ve.wallets.filter(r=>r.chains?.some(n=>e.includes(n)))},clearFilterByNamespaces(){Ve.filteredWallets=[]},setFilterByNamespace(t){if(!t){Ve.featured=Ve.allFeatured,Ve.recommended=Ve.allRecommended;return}const e=z.getRequestedCaipNetworkIds().join(",");Ve.featured=Ve.allFeatured.filter(r=>r.chains?.some(n=>e.includes(n))),Ve.recommended=Ve.allRecommended.filter(r=>r.chains?.some(n=>e.includes(n))),Ve.filteredWallets=Ve.wallets.filter(r=>r.chains?.some(n=>e.includes(n)))}},qG=["ConnectingExternal","ConnectingMultiChain","ConnectingSocial","ConnectingFarcaster"],Tt=Kt({view:"Connect",history:["Connect"],transactionStack:[]}),HG={state:Tt,subscribeKey(t,e){return Kr(Tt,t,e)},pushTransactionStack(t){Tt.transactionStack.push(t)},popTransactionStack(t){const e=Tt.transactionStack.pop();if(!e)return;const{onSuccess:r,onError:n,onCancel:s}=e;switch(t){case"success":r?.();break;case"error":n?.(),Fe.goBack();break;case"cancel":s?.(),Fe.goBack();break}},push(t,e){let r=t,n=e;ke.state.plan.hasExceededUsageLimit&&qG.includes(t)&&(r="UsageExceeded",n=void 0),r!==Tt.view&&(Tt.view=r,Tt.history.push(r),Tt.data=n)},reset(t,e){Tt.view=t,Tt.history=[t],Tt.data=e},replace(t,e){Tt.history.at(-1)===t||(Tt.view=t,Tt.history[Tt.history.length-1]=t,Tt.data=e)},goBack(){const t=z.state.activeCaipAddress,e=Fe.state.view==="ConnectingFarcaster",r=!t&&e;if(Tt.history.length>1){Tt.history.pop();const[n]=Tt.history.slice(-1);n&&(t&&n==="Connect"?Tt.view="Account":Tt.view=n)}else ot.close();Tt.data?.wallet&&(Tt.data.wallet=void 0),Tt.data?.redirectView&&(Tt.data.redirectView=void 0),setTimeout(()=>{if(r){z.setAccountProp("farcasterUrl",void 0,z.state.activeChain);const n=ue.getAuthConnector();n?.provider?.reload();const s=Xh(ne.state);n?.provider?.syncDappData?.({metadata:s.metadata,sdkVersion:s.sdkVersion,projectId:s.projectId,sdkType:s.sdkType})}},100)},goBackToIndex(t){if(Tt.history.length>1){Tt.history=Tt.history.slice(0,t+1);const[e]=Tt.history.slice(-1);e&&(Tt.view=e)}},goBackOrCloseModal(){Fe.state.history.length>1?Fe.goBack():ot.close()}},Fe=Fs(HG),so=Kt({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),_2={state:so,subscribe(t){return Wr(so,()=>t(so))},setThemeMode(t){so.themeMode=t;try{const e=ue.getAuthConnector();if(e){const r=_2.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:r,w3mThemeVariables:tp(r,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){so.themeVariables={...so.themeVariables,...t};try{const e=ue.getAuthConnector();if(e){const r=_2.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:r,w3mThemeVariables:tp(so.themeVariables,so.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Xh(so)}},Un=Fs(_2),mD=Object.fromEntries(Hj.map(t=>[t,void 0])),zG=Object.fromEntries(Hj.map(t=>[t,!0])),pt=Kt({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:mD,filterByNamespaceMap:zG}),$G={state:pt,subscribe(t){return Wr(pt,()=>{t(pt)})},subscribeKey(t,e){return Kr(pt,t,e)},initialize(t){t.forEach(e=>{const r=ie.getConnectedConnectorId(e);r&&ue.setConnectorId(r,e)})},setActiveConnector(t){t&&(pt.activeConnector=ep(t))},setConnectors(t){t.filter(s=>!pt.allConnectors.some(i=>i.id===s.id&&ue.getConnectorName(i.name)===ue.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&pt.allConnectors.push(ep(s))});const r=ue.getEnabledNamespaces(),n=ue.getEnabledConnectors(r);pt.connectors=ue.mergeMultiChainConnectors(n)},filterByNamespaces(t){Object.keys(pt.filterByNamespaceMap).forEach(e=>{pt.filterByNamespaceMap[e]=!1}),t.forEach(e=>{pt.filterByNamespaceMap[e]=!0}),ue.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){pt.filterByNamespaceMap[t]=e,ue.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=ue.getEnabledNamespaces(),e=ue.getEnabledConnectors(t),r=ue.areAllNamespacesEnabled();pt.connectors=ue.mergeMultiChainConnectors(e),r?ke.clearFilterByNamespaces():ke.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(pt.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return pt.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(pt.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=ue.generateConnectorMapByName(t),r=[];return e.forEach(n=>{const s=n[0],i=s?.id===Q.CONNECTOR_ID.AUTH;n.length>1&&s?r.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...n],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:s?.id||""}):s&&r.push(s)}),r},generateConnectorMapByName(t){const e=new Map;return t.forEach(r=>{const{name:n}=r,s=ue.getConnectorName(n);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===r.chain)||i.push(r),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(r=>{e.find(n=>n.chain===r.chain)||e.push(r)}),e},addConnector(t){if(t.id===Q.CONNECTOR_ID.AUTH){const e=t,r=Xh(ne.state),n=Un.getSnapshot().themeMode,s=Un.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),e?.provider?.syncTheme({themeMode:n,themeVariables:s,w3mThemeVariables:tp(s,n)}),ue.setConnectors([t])}else ue.setConnectors([t])},getAuthConnector(t){const e=t||z.state.activeChain,r=pt.connectors.find(n=>n.id===Q.CONNECTOR_ID.AUTH);if(r)return r?.connectors?.length?r.connectors.find(s=>s.chain===e):r},getAnnouncedConnectorRdns(){return pt.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>t.info?.rdns)},getConnectorById(t){return pt.allConnectors.find(e=>e.id===t)},getConnector({id:t,rdns:e,namespace:r}){const n=r||z.state.activeChain;return pt.allConnectors.filter(i=>i.chain===n).find(i=>i.explorerId===t||i.info?.rdns===e)},syncIfAuthConnector(t){if(t.id!=="AUTH")return;const e=t,r=Xh(ne.state),n=Un.getSnapshot().themeMode,s=Un.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:r.metadata,sdkVersion:r.sdkVersion,sdkType:r.sdkType,projectId:r.projectId}),e.provider.syncTheme({themeMode:n,themeVariables:s,w3mThemeVariables:tp(s,n)})},getConnectorsByNamespace(t){const e=pt.allConnectors.filter(r=>r.chain===t);return ue.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return z.checkIfSmartAccountEnabled()&&En(t)===yr.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=Fe.state.data?.redirectView,r=ue.getConnector({id:t.id,rdns:t.rdns});SG.handleMobileDeeplinkRedirect(r?.explorerId||t.id,z.state.activeChain),r?Fe.push("ConnectingExternal",{connector:r,wallet:t,redirectView:e}):Fe.push("ConnectingWalletConnect",{wallet:t,redirectView:e})},getConnectors(t){return t?ue.getConnectorsByNamespace(t):ue.mergeMultiChainConnectors(pt.allConnectors)},setFilterByNamespace(t){pt.filterByNamespace=t,pt.connectors=ue.getConnectors(t),ke.setFilterByNamespace(t)},setConnectorId(t,e){t&&(pt.activeConnectorIds={...pt.activeConnectorIds,[e]:t},ie.setConnectedConnectorId(e,t))},removeConnectorId(t){pt.activeConnectorIds={...pt.activeConnectorIds,[t]:void 0},ie.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return pt.activeConnectorIds[t]},isConnected(t){return t?!!pt.activeConnectorIds[t]:Object.values(pt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){pt.activeConnectorIds={...mD}},extendConnectorsWithExplorerWallets(t){pt.allConnectors.forEach(n=>{const s=t.find(i=>i.id===n.id||i.rdns&&i.rdns===n.info?.rdns);s&&(n.explorerWallet=s)});const e=ue.getEnabledNamespaces(),r=ue.getEnabledConnectors(e);pt.connectors=ue.mergeMultiChainConnectors(r)}},ue=Fs($G),VG=1e3,af={checkNamespaceConnectorId(t,e){return ue.getConnectorId(t)===e},isSocialProvider(t){return ft.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:r=!0,redirectViewOnModalClose:n="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&ue.setActiveConnector(e),s?.(be.isMobile()&&t),n){const u=ot.subscribeKey("open",l=>{l||(Fe.state.view!==n&&Fe.replace(n),u(),a(new Error("Modal closed")))})}const c=z.subscribeKey("activeCaipAddress",u=>{u&&(i?.(),r&&ot.close(),c(),o(_r.parseCaipAddress(u)))})})},connectExternal(t){return new Promise((e,r)=>{const n=z.subscribeKey("activeCaipAddress",s=>{s&&(ot.close(),n(),e(_r.parseCaipAddress(s)))});me.connectExternal(t,t.chain).catch(()=>{n(),r(new Error("Connection rejected"))})})},connectSocial({social:t,namespace:e,closeModalOnConnect:r=!0,onOpenFarcaster:n,onConnect:s}){let i,o=!1,a=null;const c=e||z.state.activeChain,u=z.subscribeKey("activeCaipAddress",l=>{l&&(r&&ot.close(),u())});return new Promise((l,d)=>{async function f(p){if(p.data?.resultUri)if(p.origin===Q.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",f,!1);try{const h=ue.getAuthConnector(c);if(h&&!o){i&&i.close(),o=!0;const y=p.data.resultUri;Ye.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:t}}),ie.setConnectedSocialProvider(t),await me.connectExternal({id:h.id,type:h.type,socialUri:y},h.chain);const b=z.state.activeCaipAddress;if(!b){d(new Error("Failed to connect"));return}l(_r.parseCaipAddress(b)),Ye.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:t}})}}catch(h){Ye.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:t,message:be.parseError(h)}}),d(new Error("Failed to connect"))}}else Ye.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:t,message:"Untrusted Origin"}})}async function g(){if(Ye.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:t}}),t==="farcaster"){n?.();const p=ot.subscribeKey("open",y=>{!y&&t==="farcaster"&&(d(new Error("Popup closed")),s?.(),p())}),h=ue.getAuthConnector();if(h&&!z.getAccountData(c)?.farcasterUrl)try{const{url:b}=await h.provider.getFarcasterUri();z.setAccountProp("farcasterUrl",b,c)}catch{d(new Error("Failed to connect to farcaster"))}}else{const p=ue.getAuthConnector();a=be.returnOpenHref(`${Q.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(p){const{uri:h}=await p.provider.getSocialRedirectUri({provider:t});if(a&&h){a.location.href=h,i=a;const y=setInterval(()=>{i?.closed&&!o&&(d(new Error("Popup closed")),clearInterval(y))},1e3);window.addEventListener("message",f,!1)}else a?.close(),d(new Error("Failed to initiate social connection"))}}catch{d(new Error("Failed to initiate social connection")),a?.close()}}}g()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:r,onConnect:n}){return new Promise((s,i)=>{if(r?.(),e){const a=ot.subscribeKey("open",c=>{c||(Fe.state.view!==e&&Fe.replace(e),a(),i(new Error("Modal closed")))})}const o=z.subscribeKey("activeCaipAddress",a=>{a&&(n?.(),t&&ot.close(),o(),s(_r.parseCaipAddress(a)))})})},async updateEmail(){const t=ie.getConnectedConnectorId(z.state.activeChain),e=ue.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==Q.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const r=e.provider.getEmail()??"";return await ot.open({view:"UpdateEmailWallet",data:{email:r,redirectView:void 0}}),new Promise((n,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==r&&(ot.close(),clearInterval(i),o(),n({email:a}))},VG),o=ot.subscribeKey("open",a=>{a||(Fe.state.view!=="Connect"&&Fe.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return z.checkIfSmartAccountEnabled()&&En(t)===yr.ACCOUNT_TYPES.EOA}};function yD(){const t=z.state.activeCaipNetwork?.chainNamespace||"eip155",e=z.state.activeCaipNetwork?.id||1,r=ft.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${r}`}function En(t){return z.getAccountData(t)?.preferredAccountType}function xh(t){return t?z.state.chains.get(t)?.networkState?.caipNetwork:z.state.activeCaipNetwork}const B1={getConnectionStatus(t,e){const r=ue.state.activeConnectorIds[e],n=me.getConnections(e);return!!r&&t.connectorId===r?"connected":n.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:r}){return t.map(n=>{if((e?n.connectorId.toLowerCase()===e.toLowerCase():!1)&&r){const i=n.accounts.filter(o=>!r.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...n,accounts:i}}return n})},excludeExistingConnections(t,e){const r=new Set(t);return e.filter(n=>!r.has(n.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(r=>r.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){const e=!!ne.state.remoteFeatures?.multiWallet,r=ue.state.activeConnectorIds[t],n=me.getConnections(t),i=(me.state.recentConnections.get(t)??[]).filter(a=>ue.getConnectorById(a.connectorId)),o=B1.excludeExistingConnections([...n.map(a=>a.connectorId),...r?[r]:[]],i);return e?{connections:n,recentConnections:o}:{connections:n.filter(a=>a.connectorId.toLowerCase()===r?.toLowerCase()),recentConnections:[]}}},Zt=Kt({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),GG={state:Zt,subscribe(t){return Wr(Zt,()=>t(Zt))},setLastNetworkInView(t){Zt.lastNetworkInView=t},async fetchTransactions(t){if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Zt.loading=!0;try{const e=await He.fetchTransactions({account:t,cursor:Zt.next,chainId:z.state.activeCaipNetwork?.caipNetworkId}),r=o1.filterSpamTransactions(e.data),n=o1.filterByConnectedChain(r),s=[...Zt.transactions,...n];Zt.loading=!1,Zt.transactions=s,Zt.transactionsByYear=o1.groupTransactionsByYearAndMonth(Zt.transactionsByYear,n),Zt.empty=s.length===0,Zt.next=e.next?e.next:void 0}catch{const r=z.state.activeChain;Ye.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:ne.state.projectId,cursor:Zt.next,isSmartAccount:En(r)===yr.ACCOUNT_TYPES.SMART_ACCOUNT}}),zi.showError("Failed to fetch transactions"),Zt.loading=!1,Zt.empty=!0,Zt.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const r=t;return e.forEach(n=>{const s=new Date(n.metadata.minedAt).getFullYear(),i=new Date(n.metadata.minedAt).getMonth(),o=r[s]??{},c=(o[i]??[]).filter(u=>u.id!==n.id);r[s]={...o,[i]:[...c,n].sort((u,l)=>new Date(l.metadata.minedAt).getTime()-new Date(u.metadata.minedAt).getTime())}}),r},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(n=>n.nft_info?.flags.is_spam===!0))},filterByConnectedChain(t){const e=z.state.activeCaipNetwork?.caipNetworkId;return t.filter(n=>n.metadata.chain===e)},clearCursor(){Zt.next=void 0},resetTransactions(){Zt.transactions=[],Zt.transactionsByYear={},Zt.lastNetworkInView=void 0,Zt.loading=!1,Zt.empty=!1,Zt.next=void 0}},o1=Fs(GG,"API_ERROR"),wt=Kt({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Sc;const WG={state:wt,subscribe(t){return Wr(wt,()=>t(wt))},subscribeKey(t,e){return Kr(wt,t,e)},_getClient(){return wt._client},setClient(t){wt._client=ep(t)},initialize(t){const e=t.filter(r=>!!r.namespace).map(r=>r.namespace);me.syncStorageConnections(e)},syncStorageConnections(t){const e=ie.getConnections(),r=t??Array.from(z.state.chains.keys());for(const n of r){const s=e[n]??[],i=new Map(wt.recentConnections);i.set(n,s),wt.recentConnections=i}},getConnections(t){return t?wt.connections.get(t)??[]:[]},hasAnyConnection(t){const e=me.state.connections;return Array.from(e.values()).flatMap(r=>r).some(({connectorId:r})=>r===t)},async connectWalletConnect({cache:t="auto"}={}){const e=be.isTelegram()||be.isSafari()&&be.isIos();if(t==="always"||t==="auto"&&e){if(Sc){await Sc,Sc=void 0;return}if(!be.isPairingExpired(wt?.wcPairingExpiry)){const r=wt.wcUri;wt.wcUri=r;return}Sc=me._getClient()?.connectWalletConnect?.().catch(()=>{}),me.state.status="connecting",await Sc,Sc=void 0,wt.wcPairingExpiry=void 0,me.state.status="connected"}else await me._getClient()?.connectWalletConnect?.()},async connectExternal(t,e,r=!0){const n=await me._getClient()?.connectExternal?.(t);r&&z.setActiveNamespace(e);const s=ue.state.allConnectors.find(o=>o.id===t?.id),i=t.type==="AUTH"?"email":"browser";return Ye.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:i,name:s?.name||"Unknown",view:Fe.state.view,walletRank:s?.explorerWallet?.order}}),n},async reconnectExternal(t){await me._getClient()?.reconnectExternal?.(t);const e=t.chain||z.state.activeChain;e&&ue.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){if(!e)return;ot.setLoading(!0,z.state.activeChain);const r=ue.getAuthConnector();r&&(z.setAccountProp("preferredAccountType",t,e),await r.provider.setPreferredAccount(t),ie.setPreferredAccountTypes(Object.entries(z.state.chains).reduce((n,[s,i])=>{const o=s,a=En(o);return a!==void 0&&(n[o]=a),n},{})),await me.reconnectExternal(r),ot.setLoading(!1,z.state.activeChain),Ye.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:z.state.activeCaipNetwork?.caipNetworkId||""}}))},async signMessage(t){return me._getClient()?.signMessage(t)},parseUnits(t,e){return me._getClient()?.parseUnits(t,e)},formatUnits(t,e){return me._getClient()?.formatUnits(t,e)},updateBalance(t){return me._getClient()?.updateBalance(t)},async sendTransaction(t){return me._getClient()?.sendTransaction(t)},async getCapabilities(t){return me._getClient()?.getCapabilities(t)},async grantPermissions(t){return me._getClient()?.grantPermissions(t)},async walletGetAssets(t){return me._getClient()?.walletGetAssets(t)??{}},async estimateGas(t){return me._getClient()?.estimateGas(t)},async writeContract(t){return me._getClient()?.writeContract(t)},async getEnsAddress(t){return me._getClient()?.getEnsAddress(t)},async getEnsAvatar(t){return me._getClient()?.getEnsAvatar(t)},checkInstalled(t){return me._getClient()?.checkInstalled?.(t)||!1},resetWcConnection(){wt.wcUri=void 0,wt.wcPairingExpiry=void 0,wt.wcLinking=void 0,wt.recentWallet=void 0,wt.status="disconnected",o1.resetTransactions(),ie.deleteWalletConnectDeepLink(),ie.deleteRecentWallet()},resetUri(){wt.wcUri=void 0,wt.wcPairingExpiry=void 0,Sc=void 0},finalizeWcConnection(t){const{wcLinking:e,recentWallet:r}=me.state;e&&ie.setWalletConnectDeepLink(e),r&&ie.setAppKitRecent(r),t&&Ye.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:t,properties:{method:e?"mobile":"qrcode",name:Fe.state.data?.wallet?.name||"Unknown",view:Fe.state.view,walletRank:r?.order}})},setWcBasic(t){wt.wcBasic=t},setUri(t){wt.wcUri=t,wt.wcPairingExpiry=be.getPairingExpiry()},setWcLinking(t){wt.wcLinking=t},setWcError(t){wt.wcError=t,wt.buffering=!1},setRecentWallet(t){wt.recentWallet=t},setBuffering(t){wt.buffering=t},setStatus(t){wt.status=t},setIsSwitchingConnection(t){wt.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:r}={}){try{await me._getClient()?.disconnect({id:t,chainNamespace:e,initialDisconnect:r})}catch(n){throw new Du("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},async disconnectConnector({id:t,namespace:e}){try{await me._getClient()?.disconnectConnector({id:t,namespace:e})}catch(r){throw new Du("Failed to disconnect connector","INTERNAL_SDK_ERROR",r)}},setConnections(t,e){const r=new Map(wt.connections);r.set(e,t),wt.connections=r},async handleAuthAccountSwitch({address:t,namespace:e}){const n=z.getAccountData(e)?.user?.accounts?.find(i=>i.type==="smartAccount"),s=n&&n.address.toLowerCase()===t.toLowerCase()&&af.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await me.setPreferredAccountType(s,e)},async handleActiveConnection({connection:t,namespace:e,address:r}){const n=ue.getConnectorById(t.connectorId),s=t.connectorId===Q.CONNECTOR_ID.AUTH;if(!n)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)r&&await me.handleAuthAccountSwitch({address:r,namespace:e});else return(await me.connectExternal({id:n.id,type:n.type,provider:n.provider,address:r,chain:e},e))?.address;return r},async handleDisconnectedConnection({connection:t,namespace:e,address:r,closeModalOnConnect:n}){const s=ue.getConnectorById(t.connectorId),i=t.auth?.name?.toLowerCase(),o=t.connectorId===Q.CONNECTOR_ID.AUTH,a=t.connectorId===Q.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&af.isSocialProvider(i)){const{address:u}=await af.connectSocial({social:i,closeModalOnConnect:n,onOpenFarcaster(){ot.open({view:"ConnectingFarcaster"})},onConnect(){Fe.replace("ProfileWallets")}});c=u}else{const{address:u}=await af.connectEmail({closeModalOnConnect:n,onOpen(){ot.open({view:"EmailLogin"})},onConnect(){Fe.replace("ProfileWallets")}});c=u}else if(a){const{address:u}=await af.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:n,onOpen(l){const d=l?"AllWallets":"ConnectingWalletConnect";ot.state.open?Fe.push(d):ot.open({view:d})},onConnect(){Fe.replace("ProfileWallets")}});c=u}else{const u=await me.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);u&&(c=u.address)}return o&&r&&await me.handleAuthAccountSwitch({address:r,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:r,closeModalOnConnect:n,onChange:s}){let i;const o=z.getAccountData(r)?.caipAddress;if(o){const{address:c}=_r.parseCaipAddress(o);i=c}const a=B1.getConnectionStatus(t,r);switch(a){case"connected":case"active":{const c=await me.handleActiveConnection({connection:t,namespace:r,address:e});if(i&&c){const u=c.toLowerCase()!==i.toLowerCase();s?.({address:c,namespace:r,hasSwitchedAccount:u,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await me.handleDisconnectedConnection({connection:t,namespace:r,address:e,closeModalOnConnect:n});c&&s?.({address:c,namespace:r,hasSwitchedAccount:!0,hasSwitchedWallet:!0});break}default:throw new Error(`Invalid connection status: ${a}`)}}},me=Fs(WG),i_={createBalance(t,e){const r={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:r.name,symbol:r.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:r.value,price:r.price,quantity:{decimals:r.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:r.decimals})},iconUrl:r.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return QC(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const r=e[1],n=parseInt(r,10);return isNaN(n)?"0x0":`0x${n.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(r=>this.isValidAsset(r)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}};let o_;async function JT(){if(!o_){const{createPublicClient:t,http:e,defineChain:r}=await $r(async()=>{const{createPublicClient:n,http:s,defineChain:i}=await import("./index-TaK5JcCx.js").then(o=>o.i);return{createPublicClient:n,http:s,defineChain:i}},__vite__mapDeps([0,1,2]));o_={createPublicClient:t,http:e,defineChain:r}}return o_}const A2={getBlockchainApiRpcUrl(t,e){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",t),r.searchParams.set("projectId",e),r.toString()},async getViemChain(t){const{defineChain:e}=await JT(),{chainId:r}=_r.parseCaipNetworkId(t.caipNetworkId);return e({...t,id:Number(r)})},async createViemPublicClient(t){const{createPublicClient:e,http:r}=await JT(),n=ne.state.projectId,s=await A2.getViemChain(t);if(!s)throw new Error(`Chain ${t.caipNetworkId} not found in viem/chains`);return e({chain:s,transport:r(A2.getBlockchainApiRpcUrl(t.caipNetworkId,n))})}},tI={async getMyTokensWithBalance(t){const e=z.getAccountData()?.address,r=z.state.activeCaipNetwork,n=ue.getConnectorId("eip155")===Q.CONNECTOR_ID.AUTH;if(!e||!r)return[];const s=`${r.caipNetworkId}:${e}`,i=ie.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(r.chainNamespace===Q.CHAIN.EVM&&n){const a=await this.getEIP155Balances(e,r);if(a)return this.filterLowQualityTokens(a)}const o=await He.getBalance(e,r.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){try{const r=i_.getChainIdHexFromCAIP2ChainId(e.caipNetworkId);if(!(await me.getCapabilities(t))?.[r]?.assetDiscovery?.supported)return null;const s=await me.walletGetAssets({account:t,chainFilter:[r]});if(!i_.isWalletGetAssetsResponse(s))return null;const o=(s[r]||[]).map(a=>i_.createBalance(a,e.caipNetworkId));return ie.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:o},timestamp:Date.now()}),o}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},async fetchERC20Balance({caipAddress:t,assetAddress:e,caipNetwork:r}){const n=await A2.createViemPublicClient(r),{address:s}=_r.parseCaipAddress(t),[{result:i},{result:o},{result:a},{result:c}]=await n.multicall({contracts:[{address:e,functionName:"name",args:[],abi:sg},{address:e,functionName:"symbol",args:[],abi:sg},{address:e,functionName:"balanceOf",args:[s],abi:sg},{address:e,functionName:"decimals",args:[],abi:sg}]});return{name:i,symbol:o,decimals:c,balance:a&&c?QC(a,c):"0"}}},a_={adapters:{}},bD={state:a_,initialize(t){a_.adapters={...t}},get(t){return a_.adapters[t]}},j1={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0,ton:void 0},Nn=Kt({providers:{...j1},providerIds:{...j1}}),yt={state:Nn,subscribeKey(t,e){return Kr(Nn,t,e)},subscribe(t){return Wr(Nn,()=>{t(Nn)})},subscribeProviders(t){return Wr(Nn.providers,()=>t(Nn.providers))},setProvider(t,e){t&&e&&(Nn.providers[t]=ep(e))},getProvider(t){if(t)return Nn.providers[t]},setProviderId(t,e){e&&(Nn.providerIds[t]=e)},getProviderId(t){if(t)return Nn.providerIds[t]},reset(){Nn.providers={...j1},Nn.providerIds={...j1}},resetChain(t){Nn.providers[t]=void 0,Nn.providerIds[t]=void 0}},dl=Kt({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),fi={state:dl,subscribe(t){return Wr(dl,()=>t(dl))},subscribeOpen(t){return Kr(dl,"open",t)},set(t){Object.assign(dl,{...dl,...t})}},KG={async getTokenList(t){return(await He.fetchSwapTokens({chainId:t}))?.tokens?.map(n=>({...n,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0}))||[]},async fetchGasPrice(){const t=z.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const e=(await me?.estimateGas({chainNamespace:"solana"}))?.toString();return{standard:e,fast:e,instant:e};case"eip155":default:return await He.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:r,sourceTokenDecimals:n}){const s=await He.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s?.allowance&&r&&n){const i=me.parseUnits(r,n)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await tI.getMyTokensWithBalance(t);return z.setAccountProp("tokenBalance",e,z.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return t?.map(e=>({...e,address:e?.address?e.address:yD(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1}))||[]},async handleSwapError(t){try{const e=t?.cause;return e?.json&&(await e.json())?.reasons?.[0]?.description?.includes("insufficient liquidity")?"Insufficient liquidity":void 0}catch{return}}},gt=Kt({tokenBalances:[],loading:!1}),ZG={state:gt,subscribe(t){return Wr(gt,()=>t(gt))},subscribeKey(t,e){return Kr(gt,t,e)},setToken(t){t&&(gt.token=ep(t))},setTokenAmount(t){gt.sendTokenAmount=t},setReceiverAddress(t){gt.receiverAddress=t},setReceiverProfileImageUrl(t){gt.receiverProfileImageUrl=t},setReceiverProfileName(t){gt.receiverProfileName=t},setNetworkBalanceInUsd(t){gt.networkBalanceInUSD=t},setLoading(t){gt.loading=t},getSdkEventProperties(t){return{message:be.parseError(t),isSmartAccount:En(z.state.activeChain)===yr.ACCOUNT_TYPES.SMART_ACCOUNT,token:gt.token?.symbol||"",amount:gt.sendTokenAmount??0,network:z.state.activeCaipNetwork?.caipNetworkId||""}},async sendToken(){try{switch(rt.setLoading(!0),z.state.activeCaipNetwork?.chainNamespace){case"eip155":await rt.sendEvmToken();return;case"solana":await rt.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}catch(t){throw Fi.isUserRejectedRequestError(t)?new KC(t):t}finally{rt.setLoading(!1)}},async sendEvmToken(){const t=z.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=En(t);if(!rt.state.sendTokenAmount||!rt.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!rt.state.token)throw new Error("A token is required");if(rt.state.token?.address){Ye.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===yr.ACCOUNT_TYPES.SMART_ACCOUNT,token:rt.state.token.address,amount:rt.state.sendTokenAmount,network:z.state.activeCaipNetwork?.caipNetworkId||""}});const{hash:r}=await rt.sendERC20Token({receiverAddress:rt.state.receiverAddress,tokenAddress:rt.state.token.address,sendTokenAmount:rt.state.sendTokenAmount,decimals:rt.state.token.quantity.decimals});r&&(gt.hash=r)}else{Ye.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===yr.ACCOUNT_TYPES.SMART_ACCOUNT,token:rt.state.token.symbol||"",amount:rt.state.sendTokenAmount,network:z.state.activeCaipNetwork?.caipNetworkId||""}});const{hash:r}=await rt.sendNativeToken({receiverAddress:rt.state.receiverAddress,sendTokenAmount:rt.state.sendTokenAmount,decimals:rt.state.token.quantity.decimals});r&&(gt.hash=r)}},async fetchTokenBalance(t){gt.loading=!0;const e=z.state.activeChain,r=z.state.activeCaipNetwork?.caipNetworkId,n=z.state.activeCaipNetwork?.chainNamespace,s=z.getAccountData(e)?.caipAddress??z.state.activeCaipAddress,i=s?be.getPlainAddress(s):void 0;if(gt.lastRetry&&!be.isAllowedRetry(gt.lastRetry,30*ft.ONE_SEC_MS))return gt.loading=!1,[];try{if(i&&r&&n){const o=await tI.getMyTokensWithBalance();return gt.tokenBalances=o,gt.lastRetry=void 0,o}}catch(o){gt.lastRetry=Date.now(),t?.(o),zi.showError("Token Balance Unavailable")}finally{gt.loading=!1}return[]},fetchNetworkBalance(){if(gt.tokenBalances.length===0)return;const t=KG.mapBalancesToSwapTokens(gt.tokenBalances);if(!t)return;const e=t.find(r=>r.address===yD());e&&(gt.networkBalanceInUSD=e?RH.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){Fe.pushTransactionStack({});const e=t.receiverAddress,r=z.getAccountData()?.address,n=me.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),i=await me.sendTransaction({chainNamespace:Q.CHAIN.EVM,to:e,address:r,data:"0x",value:n??BigInt(0)});return Ye.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:En("eip155")===yr.ACCOUNT_TYPES.SMART_ACCOUNT,token:rt.state.token?.symbol||"",amount:t.sendTokenAmount,network:z.state.activeCaipNetwork?.caipNetworkId||"",hash:i||""}}),me._getClient()?.updateBalance("eip155"),rt.resetSend(),{hash:i}},async sendERC20Token(t){Fe.pushTransactionStack({onSuccess(){Fe.replace("Account")}});const e=me.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),r=z.getAccountData()?.address;if(r&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=be.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");const s=await me.writeContract({fromAddress:r,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:jH.getERC20Abi(n),chainNamespace:Q.CHAIN.EVM});return Ye.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:En("eip155")===yr.ACCOUNT_TYPES.SMART_ACCOUNT,token:rt.state.token?.symbol||"",amount:t.sendTokenAmount,network:z.state.activeCaipNetwork?.caipNetworkId||"",hash:s||""}}),rt.resetSend(),{hash:s}}return{hash:void 0}},async sendSolanaToken(){if(!rt.state.sendTokenAmount||!rt.state.receiverAddress)throw new Error("An amount and receiver address are required");Fe.pushTransactionStack({onSuccess(){Fe.replace("Account")}});let t;rt.state.token&&rt.state.token.address!==ft.SOLANA_NATIVE_TOKEN_ADDRESS&&(be.isCaipAddress(rt.state.token.address)?t=be.getPlainAddress(rt.state.token.address):t=rt.state.token.address);const e=await me.sendTransaction({chainNamespace:"solana",tokenMint:t,to:rt.state.receiverAddress,value:rt.state.sendTokenAmount});e&&(gt.hash=e),me._getClient()?.updateBalance("solana"),Ye.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:!1,token:rt.state.token?.symbol||"",amount:rt.state.sendTokenAmount,network:z.state.activeCaipNetwork?.caipNetworkId||"",hash:e||""}}),rt.resetSend()},resetSend(){gt.token=void 0,gt.sendTokenAmount=void 0,gt.receiverAddress=void 0,gt.receiverProfileImageUrl=void 0,gt.receiverProfileName=void 0,gt.loading=!1,gt.tokenBalances=[]}},rt=Fs(ZG),c_={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},ug={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},we=Kt({chains:_H(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{connectionControllerClient:void 0},isSwitchingNamespace:!1}),wD={state:we,subscribe(t){return Wr(we,()=>{t(we)})},subscribeKey(t,e){return Kr(we,t,e)},subscribeAccountStateProp(t,e,r){const n=r||we.activeChain;return n?Kr(we.chains.get(n)?.accountState||{},t,e):()=>{}},subscribeChainProp(t,e,r){let n;return Wr(we.chains,()=>{const s=r||we.activeChain;if(s){const i=we.chains.get(s)?.[t];n!==i&&(n=i,e(i))}})},initialize(t,e,r){const{chainId:n,namespace:s}=ie.getActiveNetworkProps(),i=e?.find(l=>l.id.toString()===n?.toString()),a=t.find(l=>l?.namespace===s)||t?.[0],c=t.map(l=>l.namespace).filter(l=>l!==void 0),u=ne.state.enableEmbedded?new Set([...c]):new Set([...e?.map(l=>l.chainNamespace)??[]]);(t?.length===0||!a)&&(we.noAdapters=!0),we.noAdapters||(we.activeChain=a?.namespace,we.activeCaipNetwork=i,z.setChainNetworkData(a?.namespace,{caipNetwork:i}),we.activeChain&&fi.set({activeChain:a?.namespace})),u.forEach(l=>{const d=e?.filter(p=>p.chainNamespace===l),f=ie.getPreferredAccountTypes()||{},g={...ne.state.defaultAccountTypes,...f};z.state.chains.set(l,{namespace:l,networkState:Kt({...ug,caipNetwork:d?.[0]}),accountState:Kt({...c_,preferredAccountType:g[l]}),caipNetworks:d??[],...r}),z.setRequestedCaipNetworks(d??[],l)})},removeAdapter(t){if(we.activeChain===t){const e=Array.from(we.chains.entries()).find(([r])=>r!==t);if(e){const r=e[1]?.caipNetworks?.[0];r&&z.setActiveCaipNetwork(r)}}we.chains.delete(t)},addAdapter(t,{connectionControllerClient:e},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");we.chains.set(t.namespace,{namespace:t.namespace,networkState:{...ug,caipNetwork:r[0]},accountState:{...c_},caipNetworks:r,connectionControllerClient:e}),z.setRequestedCaipNetworks(r?.filter(n=>n.chainNamespace===t.namespace)??[],t.namespace)},addNetwork(t){const e=we.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];e.caipNetworks?.find(n=>n.id===t.id)||r.push(t),we.chains.set(t.chainNamespace,{...e,caipNetworks:r}),z.setRequestedCaipNetworks(r,t.chainNamespace),ue.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){const r=we.chains.get(t);if(r){const n=we.activeCaipNetwork?.id===e,s=[...r.caipNetworks?.filter(i=>i.id!==e)||[]];n&&r?.caipNetworks?.[0]&&z.setActiveCaipNetwork(r.caipNetworks[0]),we.chains.set(t,{...r,caipNetworks:s}),z.setRequestedCaipNetworks(s||[],t),s.length===0&&ue.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const r=we.chains.get(t);r&&(r.networkState={...r.networkState||ug,...e},we.chains.set(t,r))},setChainAccountData(t,e,r=!0){if(!t)throw new Error("Chain is required to update chain account data");const n=we.chains.get(t);if(n){const s={...n.accountState||c_,...e};we.chains.set(t,{...n,accountState:s}),(we.chains.size===1||we.activeChain===t)&&e.caipAddress&&(we.activeCaipAddress=e.caipAddress)}},setChainNetworkData(t,e){if(!t)return;const r=we.chains.get(t);if(r){const n={...r.networkState||ug,...e};we.chains.set(t,{...r,networkState:n})}},setAccountProp(t,e,r,n=!0){z.setChainAccountData(r,{[t]:e},n)},setActiveNamespace(t){we.activeChain=t;const e=t?we.chains.get(t):void 0,r=e?.networkState?.caipNetwork;r?.id&&t&&(we.activeCaipAddress=e?.accountState?.caipAddress,we.activeCaipNetwork=r,z.setChainNetworkData(t,{caipNetwork:r}),ie.setActiveCaipNetworkId(r?.caipNetworkId),fi.set({activeChain:t,selectedNetworkId:r?.caipNetworkId}))},setActiveCaipNetwork(t){if(!t)return;const e=we.activeChain===t.chainNamespace;e||z.setIsSwitchingNamespace(!0);const r=we.chains.get(t.chainNamespace);we.activeChain=t.chainNamespace,we.activeCaipNetwork=t,z.setChainNetworkData(t.chainNamespace,{caipNetwork:t});let n=r?.accountState?.address;if(n)we.activeCaipAddress=`${t.chainNamespace}:${t.id}:${n}`;else if(e&&we.activeCaipAddress){const{address:i}=_r.parseCaipAddress(we.activeCaipAddress);n=i,we.activeCaipAddress=`${t.caipNetworkId}:${n}`}else we.activeCaipAddress=void 0;z.setChainAccountData(t.chainNamespace,{address:n,caipAddress:we.activeCaipAddress}),rt.resetSend(),fi.set({activeChain:we.activeChain,selectedNetworkId:we.activeCaipNetwork?.caipNetworkId}),ie.setActiveCaipNetworkId(t.caipNetworkId),!z.checkIfSupportedNetwork(t.chainNamespace)&&ne.state.enableNetworkSwitch&&!ne.state.allowUnsupportedChain&&!me.state.wcBasic&&z.showUnsupportedChainUI()},addCaipNetwork(t){if(!t)return;const e=we.chains.get(t.chainNamespace);e&&e?.caipNetworks?.push(t)},async switchActiveNamespace(t){if(!t)return;const e=t!==z.state.activeChain,r=z.getNetworkData(t)?.caipNetwork,n=z.getCaipNetworkByNamespace(t,r?.id);e&&n&&await z.switchActiveNetwork(n)},async switchActiveNetwork(t,{throwOnFailure:e=!1}={}){const r=z.state.activeChain;if(!r)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=yt.getProviderId(we.activeChain)==="AUTH",s=z.getAccountData(r)?.address,i=Q.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t.chainNamespace);try{if(s&&t.chainNamespace===r||n&&i){const o=bD.get(t.chainNamespace);if(!o)throw new Error("Adapter not found");await o.switchNetwork({caipNetwork:t})}z.setActiveCaipNetwork(t)}catch(o){if(e)throw o}Ye.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})},getConnectionControllerClient(t){const e=t||we.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const r=we.chains.get(e);if(!r?.connectionControllerClient)throw new Error("ConnectionController client not set");return r.connectionControllerClient},getNetworkProp(t,e){const r=we.chains.get(e)?.networkState;if(r)return r[t]},getRequestedCaipNetworks(t){const e=we.chains.get(t),{approvedCaipNetworkIds:r=[],requestedCaipNetworks:n=[]}=e?.networkState||{};return be.sortRequestedNetworks(r,n).filter(o=>o?.id)},getAllRequestedCaipNetworks(){const t=[];return we.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const r=z.getRequestedCaipNetworks(e.namespace);t.push(...r)}),t},setRequestedCaipNetworks(t,e){z.setAdapterNetworkState(e,{requestedCaipNetworks:t});const n=z.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(n));ue.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return we.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const r=z.getApprovedCaipNetworkIds(e.namespace);t.push(...r)}),t},getActiveCaipNetwork(t){return t?we.chains.get(t)?.networkState?.caipNetwork:we.activeCaipNetwork},getActiveCaipAddress(){return we.activeCaipAddress},getApprovedCaipNetworkIds(t){return we.chains.get(t)?.networkState?.approvedCaipNetworkIds||[]},setApprovedCaipNetworksData(t,e){z.setAdapterNetworkState(t,e)},checkIfSupportedNetwork(t,e){const r=e||we.activeCaipNetwork?.caipNetworkId,n=z.getRequestedCaipNetworks(t);return n.length?n?.some(s=>s.caipNetworkId===r):!0},checkIfSupportedChainId(t){return we.activeChain?z.getRequestedCaipNetworks(we.activeChain)?.some(r=>r.id===t):!0},checkIfSmartAccountEnabled(){const t=qj.caipNetworkIdToNumber(we.activeCaipNetwork?.caipNetworkId);return!we.activeChain||!t?!1:!!(Tr.get(Pe.SMART_ACCOUNT_ENABLED_NETWORKS)?.split(",")||[])?.includes(t.toString())},showUnsupportedChainUI(){ot.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=we.activeCaipNetwork;return!!(t?.chainNamespace&&ft.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){z.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const r=z.state.chains.get(e)?.accountState?.preferredAccountType,n=ne.state.defaultAccountTypes[e];we.activeCaipAddress=void 0,z.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n||r,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),ue.removeConnectorId(e)},setIsSwitchingNamespace(t){we.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){const t=[];let e;if(we.chains.forEach(r=>{Q.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(n=>n===r.namespace)&&r.namespace&&t.push(r.namespace)}),t.length>0){const r=t[0];return e=r?we.chains.get(r)?.caipNetworks?.[0]:void 0,e}},getAccountData(t){const e=t||we.activeChain;if(e)return z.state.chains.get(e)?.accountState},getNetworkData(t){const e=t||we.activeChain;if(e)return z.state.chains.get(e)?.networkState},getCaipNetworkByNamespace(t,e){if(!t)return;const r=z.state.chains.get(t),n=r?.caipNetworks?.find(s=>s.id.toString()===e?.toString());return n||r?.networkState?.caipNetwork||r?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){const t=ue.state.filterByNamespace;return(t?[we.chains.get(t)]:Array.from(we.chains.values())).flatMap(r=>r?.caipNetworks||[]).map(r=>r.caipNetworkId)},getCaipNetworks(t){return t?z.getRequestedCaipNetworks(t):z.getAllRequestedCaipNetworks()},getCaipNetworkById(t,e){return wD.getCaipNetworks(e).find(r=>r.id.toString()===t.toString()||r.caipNetworkId.toString()===t.toString())},setLastConnectedSIWECaipNetwork(t){we.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return we.lastConnectedSIWECaipNetwork},async fetchTokenBalance(t){const e=z.getAccountData();if(!e)return[];const r=z.state.activeCaipNetwork?.caipNetworkId,n=z.state.activeCaipNetwork?.chainNamespace,s=z.state.activeCaipAddress,i=s?be.getPlainAddress(s):void 0;if(z.setAccountProp("balanceLoading",!0,n),e.lastRetry&&!be.isAllowedRetry(e.lastRetry,30*ft.ONE_SEC_MS))return z.setAccountProp("balanceLoading",!1,n),[];try{if(i&&r&&n){const o=await tI.getMyTokensWithBalance();return z.setAccountProp("tokenBalance",o,n),z.setAccountProp("lastRetry",void 0,n),z.setAccountProp("balanceLoading",!1,n),o}}catch(o){z.setAccountProp("lastRetry",Date.now(),n),t?.(o),zi.showError("Token Balance Unavailable")}finally{z.setAccountProp("balanceLoading",!1,n)}return[]},isCaipNetworkDisabled(t){const e=t.chainNamespace,r=!!z.getAccountData(e)?.caipAddress,n=z.getAllApprovedCaipNetworkIds(),s=z.getNetworkProp("supportsAllNetworks",e)!==!1,i=ue.getConnectorId(e),o=ue.getAuthConnector(),a=i===Q.CONNECTOR_ID.AUTH&&o;return!r||s||a?!1:!n?.includes(t.caipNetworkId)}},z=Fs(wD),YG={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const r=z.state.activeCaipNetwork,n=z.state.activeChain,s=Fe.state.data;if(t.id===r?.id)return;const o=!!z.getAccountData(n)?.address,a=!!z.getAccountData(t.chainNamespace)?.address,c=t.chainNamespace!==n,l=ue.getConnectorId(n)===Q.CONNECTOR_ID.AUTH,d=Q.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(f=>f===t.chainNamespace);e||l&&d?Fe.push("SwitchNetwork",{...s,network:t}):o&&c&&!a?Fe.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Fe.push("SwitchNetwork",{...s,network:t})}},On=Kt({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),JG={state:On,subscribe(t){return Wr(On,()=>t(On))},subscribeKey(t,e){return Kr(On,t,e)},async open(t){const e=t?.namespace,r=z.state.activeChain,n=e&&e!==r,s=z.getAccountData(t?.namespace)?.caipAddress,i=z.state.noAdapters;if(me.state.wcBasic?ke.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1,fetchWalletRanks:!1}):await ke.prefetch(),ue.setFilterByNamespace(t?.namespace),ot.setLoading(!0,e),e&&n){const o=z.getNetworkData(e)?.caipNetwork||z.getRequestedCaipNetworks(e)[0];o&&(i?(await z.switchActiveNetwork(o),Fe.push("ConnectingWalletConnectBasic")):YG.onSwitchNetwork({network:o,ignoreSwitchConfirmation:!0}))}else ne.state.manualWCControl||i&&!s?be.isMobile()?Fe.reset("AllWallets"):Fe.reset("ConnectingWalletConnectBasic"):t?.view?Fe.reset(t.view,t.data):s?Fe.reset("Account"):Fe.reset("Connect");On.open=!0,fi.set({open:!0}),Ye.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=ne.state.enableEmbedded,e=!!z.state.activeCaipAddress;On.open&&Ye.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),On.open=!1,Fe.reset("Connect"),ot.clearLoading(),t?e?Fe.replace("Account"):Fe.push("Connect"):fi.set({open:!1}),me.resetUri()},setLoading(t,e){e&&On.loadingNamespaceMap.set(e,t),On.loading=t,fi.set({loading:t})},clearLoading(){On.loadingNamespaceMap.clear(),On.loading=!1,fi.set({loading:!1})},shake(){On.shake||(On.shake=!0,setTimeout(()=>{On.shake=!1},500))}},ot=Fs(JG),Fh={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},C2={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},QG={providers:Vj,selectedProvider:null,error:null,purchaseCurrency:Fh,paymentCurrency:C2,purchaseCurrencies:[Fh],paymentCurrencies:[],quotesLoading:!1},mt=Kt(QG),XG={state:mt,subscribe(t){return Wr(mt,()=>t(mt))},subscribeKey(t,e){return Kr(mt,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=z.state.activeChain,r=e===Q.CHAIN.SOLANA?"SOL":"USDC",n=e?z.state.chains.get(e)?.accountState?.address??"":"",s=new URL(t.url);s.searchParams.append("publicKey",UH),s.searchParams.append("destinationCurrencyCode",r),s.searchParams.append("walletAddress",n),s.searchParams.append("externalCustomerId",ne.state.projectId),mt.selectedProvider={...t,url:s.toString()}}else mt.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,r=Vj.filter(n=>e.includes(n.name));mt.providers=r}else mt.providers=[]},setPurchaseCurrency(t){mt.purchaseCurrency=t},setPaymentCurrency(t){mt.paymentCurrency=t},setPurchaseAmount(t){I2.state.purchaseAmount=t},setPaymentAmount(t){I2.state.paymentAmount=t},async getAvailableCurrencies(){const t=await He.getOnrampOptions();mt.purchaseCurrencies=t.purchaseCurrencies,mt.paymentCurrencies=t.paymentCurrencies,mt.paymentCurrency=t.paymentCurrencies[0]||C2,mt.purchaseCurrency=t.purchaseCurrencies[0]||Fh,await ke.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await ke.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){mt.quotesLoading=!0;try{const t=await He.getOnrampQuote({purchaseCurrency:mt.purchaseCurrency,paymentCurrency:mt.paymentCurrency,amount:mt.paymentAmount?.toString()||"0",network:mt.purchaseCurrency?.symbol});return mt.quotesLoading=!1,mt.purchaseAmount=Number(t?.purchaseAmount.amount),t}catch(t){return mt.error=t.message,mt.quotesLoading=!1,null}finally{mt.quotesLoading=!1}},resetState(){mt.selectedProvider=null,mt.error=null,mt.purchaseCurrency=Fh,mt.paymentCurrency=C2,mt.purchaseCurrencies=[Fh],mt.paymentCurrencies=[],mt.paymentAmount=void 0,mt.purchaseAmount=void 0,mt.quotesLoading=!1}},I2=Fs(XG);var lg={exports:{}},QT;function ED(){if(QT)return lg.exports;QT=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(_,C,I){return Function.prototype.apply.call(_,C,I)},r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))}:r=function(_){return Object.getOwnPropertyNames(_)};function n(m){console&&console.warn&&console.warn(m)}var s=Number.isNaN||function(_){return _!==_};function i(){i.init.call(this)}lg.exports=i,lg.exports.once=b,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(m){if(typeof m!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof m)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(m){if(typeof m!="number"||m<0||s(m))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+m+".");o=m}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(_){if(typeof _!="number"||_<0||s(_))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+_+".");return this._maxListeners=_,this};function c(m){return m._maxListeners===void 0?i.defaultMaxListeners:m._maxListeners}i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(_){for(var C=[],I=1;I<arguments.length;I++)C.push(arguments[I]);var P=_==="error",T=this._events;if(T!==void 0)P=P&&T.error===void 0;else if(!P)return!1;if(P){var R;if(C.length>0&&(R=C[0]),R instanceof Error)throw R;var U=new Error("Unhandled error."+(R?" ("+R.message+")":""));throw U.context=R,U}var k=T[_];if(k===void 0)return!1;if(typeof k=="function")e(k,this,C);else for(var O=k.length,B=p(k,O),I=0;I<O;++I)e(B[I],this,C);return!0};function u(m,_,C,I){var P,T,R;if(a(C),T=m._events,T===void 0?(T=m._events=Object.create(null),m._eventsCount=0):(T.newListener!==void 0&&(m.emit("newListener",_,C.listener?C.listener:C),T=m._events),R=T[_]),R===void 0)R=T[_]=C,++m._eventsCount;else if(typeof R=="function"?R=T[_]=I?[C,R]:[R,C]:I?R.unshift(C):R.push(C),P=c(m),P>0&&R.length>P&&!R.warned){R.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+R.length+" "+String(_)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=m,U.type=_,U.count=R.length,n(U)}return m}i.prototype.addListener=function(_,C){return u(this,_,C,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(_,C){return u(this,_,C,!0)};function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(m,_,C){var I={fired:!1,wrapFn:void 0,target:m,type:_,listener:C},P=l.bind(I);return P.listener=C,I.wrapFn=P,P}i.prototype.once=function(_,C){return a(C),this.on(_,d(this,_,C)),this},i.prototype.prependOnceListener=function(_,C){return a(C),this.prependListener(_,d(this,_,C)),this},i.prototype.removeListener=function(_,C){var I,P,T,R,U;if(a(C),P=this._events,P===void 0)return this;if(I=P[_],I===void 0)return this;if(I===C||I.listener===C)--this._eventsCount===0?this._events=Object.create(null):(delete P[_],P.removeListener&&this.emit("removeListener",_,I.listener||C));else if(typeof I!="function"){for(T=-1,R=I.length-1;R>=0;R--)if(I[R]===C||I[R].listener===C){U=I[R].listener,T=R;break}if(T<0)return this;T===0?I.shift():h(I,T),I.length===1&&(P[_]=I[0]),P.removeListener!==void 0&&this.emit("removeListener",_,U||C)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(_){var C,I,P;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[_]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[_]),this;if(arguments.length===0){var T=Object.keys(I),R;for(P=0;P<T.length;++P)R=T[P],R!=="removeListener"&&this.removeAllListeners(R);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(C=I[_],typeof C=="function")this.removeListener(_,C);else if(C!==void 0)for(P=C.length-1;P>=0;P--)this.removeListener(_,C[P]);return this};function f(m,_,C){var I=m._events;if(I===void 0)return[];var P=I[_];return P===void 0?[]:typeof P=="function"?C?[P.listener||P]:[P]:C?y(P):p(P,P.length)}i.prototype.listeners=function(_){return f(this,_,!0)},i.prototype.rawListeners=function(_){return f(this,_,!1)},i.listenerCount=function(m,_){return typeof m.listenerCount=="function"?m.listenerCount(_):g.call(m,_)},i.prototype.listenerCount=g;function g(m){var _=this._events;if(_!==void 0){var C=_[m];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function p(m,_){for(var C=new Array(_),I=0;I<_;++I)C[I]=m[I];return C}function h(m,_){for(;_+1<m.length;_++)m[_]=m[_+1];m.pop()}function y(m){for(var _=new Array(m.length),C=0;C<_.length;++C)_[C]=m[C].listener||m[C];return _}function b(m,_){return new Promise(function(C,I){function P(R){m.removeListener(_,T),I(R)}function T(){typeof m.removeListener=="function"&&m.removeListener("error",P),C([].slice.call(arguments))}w(m,_,T,{once:!0}),_!=="error"&&E(m,P,{once:!0})})}function E(m,_,C){typeof m.on=="function"&&w(m,"error",_,C)}function w(m,_,C,I){if(typeof m.on=="function")I.once?m.once(_,C):m.on(_,C);else if(typeof m.addEventListener=="function")m.addEventListener(_,function P(T){I.once&&m.removeEventListener(_,P),C(T)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof m)}return lg.exports}var qs=ED();const rI=WC(qs);var u_={};var S2=function(t,e){return S2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},S2(t,e)};function eW(t,e){S2(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var T2=function(){return T2=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},T2.apply(this,arguments)};function tW(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function rW(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,r,i):o(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function nW(t,e){return function(r,n){e(r,n,t)}}function sW(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function iW(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function oW(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function aW(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function cW(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function P2(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function vD(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function uW(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(vD(arguments[e]));return t}function lW(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function Bp(t){return this instanceof Bp?(this.v=t,this):new Bp(t)}function dW(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){n[f]&&(s[f]=function(g){return new Promise(function(p,h){i.push([f,g,p,h])>1||a(f,g)})})}function a(f,g){try{c(n[f](g))}catch(p){d(i[0][3],p)}}function c(f){f.value instanceof Bp?Promise.resolve(f.value.v).then(u,l):d(i[0][2],f)}function u(f){a("next",f)}function l(f){a("throw",f)}function d(f,g){f(g),i.shift(),i.length&&a(i[0][0],i[0][1])}}function fW(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(o){return(r=!r)?{value:Bp(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function hW(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof P2=="function"?P2(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function pW(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function gW(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function mW(t){return t&&t.__esModule?t:{default:t}}function yW(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function bW(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const wW=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return T2},__asyncDelegator:fW,__asyncGenerator:dW,__asyncValues:hW,__await:Bp,__awaiter:iW,__classPrivateFieldGet:yW,__classPrivateFieldSet:bW,__createBinding:aW,__decorate:rW,__exportStar:cW,__extends:eW,__generator:oW,__importDefault:mW,__importStar:gW,__makeTemplateObject:pW,__metadata:sW,__param:nW,__read:vD,__rest:tW,__spread:uW,__spreadArrays:lW,__values:P2},Symbol.toStringTag,{value:"Module"})),n0=Fj(wW);var l_={},cf={},XT;function EW(){if(XT)return cf;XT=1,Object.defineProperty(cf,"__esModule",{value:!0}),cf.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return cf.delay=t,cf}var Tc={},d_={},Pc={},eP;function vW(){return eP||(eP=1,Object.defineProperty(Pc,"__esModule",{value:!0}),Pc.ONE_THOUSAND=Pc.ONE_HUNDRED=void 0,Pc.ONE_HUNDRED=100,Pc.ONE_THOUSAND=1e3),Pc}var f_={},tP;function _W(){return tP||(tP=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365})(f_)),f_}var rP;function _D(){return rP||(rP=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=n0;e.__exportStar(vW(),t),e.__exportStar(_W(),t)})(d_)),d_}var nP;function AW(){if(nP)return Tc;nP=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.fromMiliseconds=Tc.toMiliseconds=void 0;const t=_D();function e(n){return n*t.ONE_THOUSAND}Tc.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return Tc.fromMiliseconds=r,Tc}var sP;function CW(){return sP||(sP=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=n0;e.__exportStar(EW(),t),e.__exportStar(AW(),t)})(l_)),l_}var fl={},iP;function IW(){if(iP)return fl;iP=1,Object.defineProperty(fl,"__esModule",{value:!0}),fl.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const s=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:s})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return fl.Watch=t,fl.default=t,fl}var h_={},uf={},oP;function SW(){if(oP)return uf;oP=1,Object.defineProperty(uf,"__esModule",{value:!0}),uf.IWatch=void 0;class t{}return uf.IWatch=t,uf}var aP;function TW(){return aP||(aP=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),n0.__exportStar(SW(),t)})(h_)),h_}var cP;function PW(){return cP||(cP=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=n0;e.__exportStar(CW(),t),e.__exportStar(IW(),t),e.__exportStar(TW(),t),e.__exportStar(_D(),t)})(u_)),u_}var pe=PW();class Ku{}let NW=class extends Ku{constructor(e){super()}};const uP=pe.FIVE_SECONDS,Zu={pulse:"heartbeat_pulse"};let OW=class AD extends NW{constructor(e){super(e),this.events=new qs.EventEmitter,this.interval=uP,this.interval=e?.interval||uP}static async init(e){const r=new AD(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),pe.toMiliseconds(this.interval))}pulse(){this.events.emit(Zu.pulse)}};const RW=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,xW=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,kW=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function BW(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){jW(t);return}return e}function jW(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function dg(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const r=t.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!kW.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(RW.test(t)||xW.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,BW)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function DW(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Rr(t,...e){try{return DW(t(...e))}catch(r){return Promise.reject(r)}}function UW(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function MW(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function a1(t){if(UW(t))return String(t);if(MW(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return a1(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const N2="base64:";function LW(t){return typeof t=="string"?t:N2+HW(t)}function FW(t){return typeof t!="string"||!t.startsWith(N2)?t:qW(t.slice(N2.length))}function qW(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function HW(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function jn(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function zW(...t){return jn(t.join(":"))}function fg(t){return t=jn(t),t?t+":":""}function $W(t,e){if(e===void 0)return!0;let r=0,n=t.indexOf(":");for(;n>-1;)r++,n=t.indexOf(":",n+1);return r<=e}function VW(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const GW="memory",WW=()=>{const t=new Map;return{name:GW,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function KW(t={}){const e={mounts:{"":t.driver||WW()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=u=>{for(const l of e.mountpoints)if(u.startsWith(l))return{base:l,relativeKey:u.slice(l.length),driver:e.mounts[l]};return{base:"",relativeKey:u,driver:e.mounts[""]}},n=(u,l)=>e.mountpoints.filter(d=>d.startsWith(u)||l&&u.startsWith(d)).map(d=>({relativeBase:u.length>d.length?u.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(u,l)=>{if(e.watching){l=jn(l);for(const d of e.watchListeners)d(u,l)}},i=async()=>{if(!e.watching){e.watching=!0;for(const u in e.mounts)e.unwatch[u]=await lP(e.mounts[u],s,u)}},o=async()=>{if(e.watching){for(const u in e.unwatch)await e.unwatch[u]();e.unwatch={},e.watching=!1}},a=(u,l,d)=>{const f=new Map,g=p=>{let h=f.get(p.base);return h||(h={driver:p.driver,base:p.base,items:[]},f.set(p.base,h)),h};for(const p of u){const h=typeof p=="string",y=jn(h?p:p.key),b=h?void 0:p.value,E=h||!p.options?l:{...l,...p.options},w=r(y);g(w).items.push({key:y,value:b,relativeKey:w.relativeKey,options:E})}return Promise.all([...f.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(u,l={}){u=jn(u);const{relativeKey:d,driver:f}=r(u);return Rr(f.hasItem,d,l)},getItem(u,l={}){u=jn(u);const{relativeKey:d,driver:f}=r(u);return Rr(f.getItem,d,l).then(g=>dg(g))},getItems(u,l={}){return a(u,l,d=>d.driver.getItems?Rr(d.driver.getItems,d.items.map(f=>({key:f.relativeKey,options:f.options})),l).then(f=>f.map(g=>({key:zW(d.base,g.key),value:dg(g.value)}))):Promise.all(d.items.map(f=>Rr(d.driver.getItem,f.relativeKey,f.options).then(g=>({key:f.key,value:dg(g)})))))},getItemRaw(u,l={}){u=jn(u);const{relativeKey:d,driver:f}=r(u);return f.getItemRaw?Rr(f.getItemRaw,d,l):Rr(f.getItem,d,l).then(g=>FW(g))},async setItem(u,l,d={}){if(l===void 0)return c.removeItem(u);u=jn(u);const{relativeKey:f,driver:g}=r(u);g.setItem&&(await Rr(g.setItem,f,a1(l),d),g.watch||s("update",u))},async setItems(u,l){await a(u,l,async d=>{if(d.driver.setItems)return Rr(d.driver.setItems,d.items.map(f=>({key:f.relativeKey,value:a1(f.value),options:f.options})),l);d.driver.setItem&&await Promise.all(d.items.map(f=>Rr(d.driver.setItem,f.relativeKey,a1(f.value),f.options)))})},async setItemRaw(u,l,d={}){if(l===void 0)return c.removeItem(u,d);u=jn(u);const{relativeKey:f,driver:g}=r(u);if(g.setItemRaw)await Rr(g.setItemRaw,f,l,d);else if(g.setItem)await Rr(g.setItem,f,LW(l),d);else return;g.watch||s("update",u)},async removeItem(u,l={}){typeof l=="boolean"&&(l={removeMeta:l}),u=jn(u);const{relativeKey:d,driver:f}=r(u);f.removeItem&&(await Rr(f.removeItem,d,l),(l.removeMeta||l.removeMata)&&await Rr(f.removeItem,d+"$",l),f.watch||s("remove",u))},async getMeta(u,l={}){typeof l=="boolean"&&(l={nativeOnly:l}),u=jn(u);const{relativeKey:d,driver:f}=r(u),g=Object.create(null);if(f.getMeta&&Object.assign(g,await Rr(f.getMeta,d,l)),!l.nativeOnly){const p=await Rr(f.getItem,d+"$",l).then(h=>dg(h));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(g,p))}return g},setMeta(u,l,d={}){return this.setItem(u+"$",l,d)},removeMeta(u,l={}){return this.removeItem(u+"$",l)},async getKeys(u,l={}){u=fg(u);const d=n(u,!0);let f=[];const g=[];let p=!0;for(const y of d){y.driver.flags?.maxDepth||(p=!1);const b=await Rr(y.driver.getKeys,y.relativeBase,l);for(const E of b){const w=y.mountpoint+jn(E);f.some(m=>w.startsWith(m))||g.push(w)}f=[y.mountpoint,...f.filter(E=>!E.startsWith(y.mountpoint))]}const h=l.maxDepth!==void 0&&!p;return g.filter(y=>(!h||$W(y,l.maxDepth))&&VW(y,u))},async clear(u,l={}){u=fg(u),await Promise.all(n(u,!1).map(async d=>{if(d.driver.clear)return Rr(d.driver.clear,d.relativeBase,l);if(d.driver.removeItem){const f=await d.driver.getKeys(d.relativeBase||"",l);return Promise.all(f.map(g=>d.driver.removeItem(g,l)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(u=>dP(u)))},async watch(u){return await i(),e.watchListeners.push(u),async()=>{e.watchListeners=e.watchListeners.filter(l=>l!==u),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(u,l){if(u=fg(u),u&&e.mounts[u])throw new Error(`already mounted at ${u}`);return u&&(e.mountpoints.push(u),e.mountpoints.sort((d,f)=>f.length-d.length)),e.mounts[u]=l,e.watching&&Promise.resolve(lP(l,s,u)).then(d=>{e.unwatch[u]=d}).catch(console.error),c},async unmount(u,l=!0){u=fg(u),!(!u||!e.mounts[u])&&(e.watching&&u in e.unwatch&&(e.unwatch[u]?.(),delete e.unwatch[u]),l&&await dP(e.mounts[u]),e.mountpoints=e.mountpoints.filter(d=>d!==u),delete e.mounts[u])},getMount(u=""){u=jn(u)+":";const l=r(u);return{driver:l.driver,base:l.base}},getMounts(u="",l={}){return u=jn(u),n(u,l.parents).map(f=>({driver:f.driver,base:f.mountpoint}))},keys:(u,l={})=>c.getKeys(u,l),get:(u,l={})=>c.getItem(u,l),set:(u,l,d={})=>c.setItem(u,l,d),has:(u,l={})=>c.hasItem(u,l),del:(u,l={})=>c.removeItem(u,l),remove:(u,l={})=>c.removeItem(u,l)};return c}function lP(t,e,r){return t.watch?t.watch((n,s)=>e(n,r+s)):()=>{}}async function dP(t){typeof t.dispose=="function"&&await Rr(t.dispose)}function Yu(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function CD(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const n=Yu(r);return(s,i)=>n.then(o=>i(o.transaction(e,s).objectStore(e)))}let p_;function s0(){return p_||(p_=CD("keyval-store","keyval")),p_}function fP(t,e=s0()){return e("readonly",r=>Yu(r.get(t)))}function ZW(t,e,r=s0()){return r("readwrite",n=>(n.put(e,t),Yu(n.transaction)))}function YW(t,e=s0()){return e("readwrite",r=>(r.delete(t),Yu(r.transaction)))}function JW(t=s0()){return t("readwrite",e=>(e.clear(),Yu(e.transaction)))}function QW(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Yu(t.transaction)}function XW(t=s0()){return t("readonly",e=>{if(e.getAllKeys)return Yu(e.getAllKeys());const r=[];return QW(e,n=>r.push(n.key)).then(()=>r)})}const eK="idb-keyval";var tK=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=s=>e+s;let n;return t.dbName&&t.storeName&&(n=CD(t.dbName,t.storeName)),{name:eK,options:t,async hasItem(s){return!(typeof await fP(r(s),n)>"u")},async getItem(s){return await fP(r(s),n)??null},setItem(s,i){return ZW(r(s),i,n)},removeItem(s){return YW(r(s),n)},getKeys(){return XW(n)},clear(){return JW(n)}}};const rK="WALLET_CONNECT_V2_INDEXED_DB",nK="keyvaluestorage";let sK=class{constructor(){this.indexedDb=KW({driver:tK({dbName:rK,storeName:nK})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,ea(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var g_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c1={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof g_<"u"&&g_.localStorage?c1.exports=g_.localStorage:typeof window<"u"&&window.localStorage?c1.exports=window.localStorage:c1.exports=new e})();function iK(t){var e;return[t[0],ju((e=t[1])!=null?e:"")]}let oK=class{constructor(){this.localStorage=c1.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(iK)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return ju(r)}async setItem(e,r){this.localStorage.setItem(e,ea(r))}async removeItem(e){this.localStorage.removeItem(e)}};const aK="wc_storage_version",hP=1,cK=async(t,e,r)=>{const n=aK,s=await e.getItem(n);if(s&&s>=hP){r(e);return}const i=await t.getKeys();if(!i.length){r(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const u=await t.getItem(a);await e.setItem(a,u),o.push(a)}}await e.setItem(n,hP),r(e),uK(t,o)},uK=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let lK=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new oK;this.storage=e;try{const r=new sK;cK(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};var dK=Object.defineProperty,fK=(t,e,r)=>e in t?dK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pP=(t,e,r)=>fK(t,typeof e!="symbol"?e+"":e,r);let hK=class extends Ku{constructor(e){super(),this.opts=e,pP(this,"protocol","wc"),pP(this,"version",2)}};var pK=Object.defineProperty,gK=(t,e,r)=>e in t?pK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mK=(t,e,r)=>gK(t,e+"",r);let yK=class extends Ku{constructor(e,r){super(),this.core=e,this.logger=r,mK(this,"records",new Map)}},bK=class{constructor(e,r){this.logger=e,this.core=r}},wK=class extends Ku{constructor(e,r){super(),this.relayer=e,this.logger=r}},EK=class extends Ku{constructor(e){super()}},vK=class{constructor(e,r,n,s){this.core=e,this.logger=r,this.name=n}},_K=class extends Ku{constructor(e,r){super(),this.relayer=e,this.logger=r}},AK=class extends Ku{constructor(e,r){super(),this.core=e,this.logger=r}},CK=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},IK=class{constructor(e,r){this.projectId=e,this.logger=r}},SK=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}};var TK=Object.defineProperty,PK=(t,e,r)=>e in t?TK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gP=(t,e,r)=>PK(t,typeof e!="symbol"?e+"":e,r);let NK=class{constructor(e){this.opts=e,gP(this,"protocol","wc"),gP(this,"version",2)}},OK=class{constructor(e){this.client=e}};function RK(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ID(t,...e){if(!RK(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function mP(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function xK(t,e){ID(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const hl=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;const m_=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function kK(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function SD(t){return typeof t=="string"&&(t=kK(t)),ID(t),t}let BK=class{clone(){return this._cloneInto()}};function jK(t){const e=n=>t().update(SD(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function TD(t=32){if(hl&&typeof hl.getRandomValues=="function")return hl.getRandomValues(new Uint8Array(t));if(hl&&typeof hl.randomBytes=="function")return hl.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function DK(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}let UK=class extends BK{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=m_(this.buffer)}update(e){mP(this);const{view:r,buffer:n,blockLen:s}=this;e=SD(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=m_(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){mP(this),xK(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;DK(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=m_(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};const hg=BigInt(2**32-1),O2=BigInt(32);function PD(t,e=!1){return e?{h:Number(t&hg),l:Number(t>>O2&hg)}:{h:Number(t>>O2&hg)|0,l:Number(t&hg)|0}}function MK(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=PD(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const LK=(t,e)=>BigInt(t>>>0)<<O2|BigInt(e>>>0),FK=(t,e,r)=>t>>>r,qK=(t,e,r)=>t<<32-r|e>>>r,HK=(t,e,r)=>t>>>r|e<<32-r,zK=(t,e,r)=>t<<32-r|e>>>r,$K=(t,e,r)=>t<<64-r|e>>>r-32,VK=(t,e,r)=>t>>>r-32|e<<64-r,GK=(t,e)=>e,WK=(t,e)=>t,KK=(t,e,r)=>t<<r|e>>>32-r,ZK=(t,e,r)=>e<<r|t>>>32-r,YK=(t,e,r)=>e<<r-32|t>>>64-r,JK=(t,e,r)=>t<<r-32|e>>>64-r;function QK(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const XK=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),eZ=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,tZ=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),rZ=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,nZ=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),sZ=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,et={fromBig:PD,split:MK,toBig:LK,shrSH:FK,shrSL:qK,rotrSH:HK,rotrSL:zK,rotrBH:$K,rotrBL:VK,rotr32H:GK,rotr32L:WK,rotlSH:KK,rotlSL:ZK,rotlBH:YK,rotlBL:JK,add:QK,add3L:XK,add3H:eZ,add4L:tZ,add4H:rZ,add5H:sZ,add5L:nZ},[iZ,oZ]=et.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),pa=new Uint32Array(80),ga=new Uint32Array(80);let aZ=class extends UK{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:f,Gh:g,Gl:p,Hh:h,Hl:y}=this;return[e,r,n,s,i,o,a,c,u,l,d,f,g,p,h,y]}set(e,r,n,s,i,o,a,c,u,l,d,f,g,p,h,y){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=f|0,this.Gh=g|0,this.Gl=p|0,this.Hh=h|0,this.Hl=y|0}process(e,r){for(let w=0;w<16;w++,r+=4)pa[w]=e.getUint32(r),ga[w]=e.getUint32(r+=4);for(let w=16;w<80;w++){const m=pa[w-15]|0,_=ga[w-15]|0,C=et.rotrSH(m,_,1)^et.rotrSH(m,_,8)^et.shrSH(m,_,7),I=et.rotrSL(m,_,1)^et.rotrSL(m,_,8)^et.shrSL(m,_,7),P=pa[w-2]|0,T=ga[w-2]|0,R=et.rotrSH(P,T,19)^et.rotrBH(P,T,61)^et.shrSH(P,T,6),U=et.rotrSL(P,T,19)^et.rotrBL(P,T,61)^et.shrSL(P,T,6),k=et.add4L(I,U,ga[w-7],ga[w-16]),O=et.add4H(k,C,R,pa[w-7],pa[w-16]);pa[w]=O|0,ga[w]=k|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:f,Fh:g,Fl:p,Gh:h,Gl:y,Hh:b,Hl:E}=this;for(let w=0;w<80;w++){const m=et.rotrSH(d,f,14)^et.rotrSH(d,f,18)^et.rotrBH(d,f,41),_=et.rotrSL(d,f,14)^et.rotrSL(d,f,18)^et.rotrBL(d,f,41),C=d&g^~d&h,I=f&p^~f&y,P=et.add5L(E,_,I,oZ[w],ga[w]),T=et.add5H(P,b,m,C,iZ[w],pa[w]),R=P|0,U=et.rotrSH(n,s,28)^et.rotrBH(n,s,34)^et.rotrBH(n,s,39),k=et.rotrSL(n,s,28)^et.rotrBL(n,s,34)^et.rotrBL(n,s,39),O=n&i^n&a^i&a,B=s&o^s&c^o&c;b=h|0,E=y|0,h=g|0,y=p|0,g=d|0,p=f|0,{h:d,l:f}=et.add(u|0,l|0,T|0,R|0),u=a|0,l=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const v=et.add3L(R,k,B);n=et.add3H(v,T,U,O),s=v|0}({h:n,l:s}=et.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=et.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=et.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=et.add(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:f}=et.add(this.Eh|0,this.El|0,d|0,f|0),{h:g,l:p}=et.add(this.Fh|0,this.Fl|0,g|0,p|0),{h,l:y}=et.add(this.Gh|0,this.Gl|0,h|0,y|0),{h:b,l:E}=et.add(this.Hh|0,this.Hl|0,b|0,E|0),this.set(n,s,i,o,a,c,u,l,d,f,g,p,h,y,b,E)}roundClean(){pa.fill(0),ga.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const cZ=jK(()=>new aZ);const nI=BigInt(0),ND=BigInt(1),uZ=BigInt(2);function sI(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function iI(t){if(!sI(t))throw new Error("Uint8Array expected")}function y_(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const lZ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function oI(t){iI(t);let e="";for(let r=0;r<t.length;r++)e+=lZ[t[r]];return e}function OD(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?nI:BigInt("0x"+t)}const io={_0:48,_9:57,A:65,F:70,a:97,f:102};function yP(t){if(t>=io._0&&t<=io._9)return t-io._0;if(t>=io.A&&t<=io.F)return t-(io.A-10);if(t>=io.a&&t<=io.f)return t-(io.a-10)}function RD(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=yP(t.charCodeAt(i)),a=yP(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function dZ(t){return OD(oI(t))}function u1(t){return iI(t),OD(oI(Uint8Array.from(t).reverse()))}function xD(t,e){return RD(t.toString(16).padStart(e*2,"0"))}function R2(t,e){return xD(t,e).reverse()}function oo(t,e,r){let n;if(typeof e=="string")try{n=RD(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(sI(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}function bP(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];iI(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}const b_=t=>typeof t=="bigint"&&nI<=t;function fZ(t,e,r){return b_(t)&&b_(e)&&b_(r)&&e<=t&&t<r}function lf(t,e,r,n){if(!fZ(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function hZ(t){let e;for(e=0;t>nI;t>>=ND,e+=1);return e}const pZ=t=>(uZ<<BigInt(t-1))-ND,gZ={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||sI(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function aI(t,e,r={}){const n=(s,i,o)=>{const a=gZ[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return t}function wP(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}const Dr=BigInt(0),gr=BigInt(1),ou=BigInt(2),mZ=BigInt(3),x2=BigInt(4),EP=BigInt(5),vP=BigInt(8);function Pr(t,e){const r=t%e;return r>=Dr?r:e+r}function yZ(t,e,r){if(e<Dr)throw new Error("invalid exponent, negatives unsupported");if(r<=Dr)throw new Error("invalid modulus");if(r===gr)return Dr;let n=gr;for(;e>Dr;)e&gr&&(n=n*t%r),t=t*t%r,e>>=gr;return n}function Ti(t,e,r){let n=t;for(;e-- >Dr;)n*=n,n%=r;return n}function _P(t,e){if(t===Dr)throw new Error("invert: expected non-zero number");if(e<=Dr)throw new Error("invert: expected positive modulus, got "+e);let r=Pr(t,e),n=e,s=Dr,i=gr;for(;r!==Dr;){const o=n/r,a=n%r,c=s-i*o;n=r,r=a,s=i,i=c}if(n!==gr)throw new Error("invert: does not exist");return Pr(s,e)}function bZ(t){const e=(t-gr)/ou;let r,n,s;for(r=t-gr,n=0;r%ou===Dr;r/=ou,n++);for(s=ou;s<t&&yZ(s,e,t)!==t-gr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+gr)/x2;return function(a,c){const u=a.pow(c,o);if(!a.eql(a.sqr(u),c))throw new Error("Cannot find square root");return u}}const i=(r+gr)/ou;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=n,u=o.pow(o.mul(o.ONE,s),r),l=o.pow(a,i),d=o.pow(a,r);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let f=1;for(let p=o.sqr(d);f<c&&!o.eql(p,o.ONE);f++)p=o.sqr(p);const g=o.pow(u,gr<<BigInt(c-f-1));u=o.sqr(g),l=o.mul(l,g),d=o.mul(d,u),c=f}return l}}function wZ(t){if(t%x2===mZ){const e=(t+gr)/x2;return function(r,n){const s=r.pow(n,e);if(!r.eql(r.sqr(s),n))throw new Error("Cannot find square root");return s}}if(t%vP===EP){const e=(t-EP)/vP;return function(r,n){const s=r.mul(n,ou),i=r.pow(s,e),o=r.mul(n,i),a=r.mul(r.mul(o,ou),i),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),n))throw new Error("Cannot find square root");return c}}return bZ(t)}const EZ=(t,e)=>(Pr(t,e)&gr)===gr,vZ=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function _Z(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=vZ.reduce((n,s)=>(n[s]="function",n),e);return aI(t,r)}function AZ(t,e,r){if(r<Dr)throw new Error("invalid exponent, negatives unsupported");if(r===Dr)return t.ONE;if(r===gr)return e;let n=t.ONE,s=e;for(;r>Dr;)r&gr&&(n=t.mul(n,s)),s=t.sqr(s),r>>=gr;return n}function CZ(t,e){const r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function kD(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function BD(t,e,r=!1,n={}){if(t<=Dr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=kD(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:s,BYTES:i,MASK:pZ(s),ZERO:Dr,ONE:gr,create:c=>Pr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Dr<=c&&c<t},is0:c=>c===Dr,isOdd:c=>(c&gr)===gr,neg:c=>Pr(-c,t),eql:(c,u)=>c===u,sqr:c=>Pr(c*c,t),add:(c,u)=>Pr(c+u,t),sub:(c,u)=>Pr(c-u,t),mul:(c,u)=>Pr(c*u,t),pow:(c,u)=>AZ(a,c,u),div:(c,u)=>Pr(c*_P(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>_P(c,t),sqrt:n.sqrt||(c=>(o||(o=wZ(t)),o(a,c))),invertBatch:c=>CZ(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>r?R2(c,i):xD(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return r?u1(c):dZ(c)}});return Object.freeze(a)}const AP=BigInt(0),pg=BigInt(1);function w_(t,e){const r=e.negate();return t?r:e}function jD(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function E_(t,e){jD(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function IZ(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function SZ(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const v_=new WeakMap,DD=new WeakMap;function __(t){return DD.get(t)||1}function TZ(t,e){return{constTimeNegate:w_,hasPrecomputes(r){return __(r)!==1},unsafeLadder(r,n,s=t.ZERO){let i=r;for(;n>AP;)n&pg&&(s=s.add(i)),i=i.double(),n>>=pg;return s},precomputeWindow(r,n){const{windows:s,windowSize:i}=E_(n,e),o=[];let a=r,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,s){const{windows:i,windowSize:o}=E_(r,e);let a=t.ZERO,c=t.BASE;const u=BigInt(2**r-1),l=2**r,d=BigInt(r);for(let f=0;f<i;f++){const g=f*o;let p=Number(s&u);s>>=d,p>o&&(p-=l,s+=pg);const h=g,y=g+Math.abs(p)-1,b=f%2!==0,E=p<0;p===0?c=c.add(w_(b,n[h])):a=a.add(w_(E,n[y]))}return{p:a,f:c}},wNAFUnsafe(r,n,s,i=t.ZERO){const{windows:o,windowSize:a}=E_(r,e),c=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let d=0;d<o;d++){const f=d*a;if(s===AP)break;let g=Number(s&c);if(s>>=l,g>a&&(g-=u,s+=pg),g===0)continue;let p=n[f+Math.abs(g)-1];g<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(r,n,s){let i=v_.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&v_.set(n,s(i))),i},wNAFCached(r,n,s){const i=__(r);return this.wNAF(i,this.getPrecomputes(i,r,s),n)},wNAFCachedUnsafe(r,n,s,i){const o=__(r);return o===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,r,s),n,i)},setWindowSize(r,n){jD(n,e),DD.set(r,n),v_.delete(r)}}}function PZ(t,e,r,n){if(IZ(r,t),SZ(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=hZ(BigInt(r.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),u=Math.floor((e.BITS-1)/o)*o;let l=s;for(let d=u;d>=0;d-=o){c.fill(s);for(let g=0;g<n.length;g++){const p=n[g],h=Number(p>>BigInt(d)&BigInt(a));c[h]=c[h].add(r[g])}let f=s;for(let g=c.length-1,p=s;g>0;g--)p=p.add(c[g]),f=f.add(p);if(l=l.add(f),d!==0)for(let g=0;g<o;g++)l=l.double()}return l}function NZ(t){return _Z(t.Fp),aI(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...kD(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Vs=BigInt(0),Rn=BigInt(1),gg=BigInt(2),OZ=BigInt(8),RZ={zip215:!0};function xZ(t){const e=NZ(t);return aI(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function kZ(t){const e=xZ(t),{Fp:r,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,u=gg<<BigInt(a*8)-Rn,l=r.create,d=BD(e.n,e.nBitLength),f=e.uvRatio||((v,A)=>{try{return{isValid:!0,value:r.sqrt(v*r.inv(A))}}catch{return{isValid:!1,value:Vs}}}),g=e.adjustScalarBytes||(v=>v),p=e.domain||((v,A,S)=>{if(y_("phflag",S),A.length||S)throw new Error("Contexts/pre-hash are not supported");return v});function h(v,A){lf("coordinate "+v,A,Vs,u)}function y(v){if(!(v instanceof w))throw new Error("ExtendedPoint expected")}const b=wP((v,A)=>{const{ex:S,ey:j,ez:N}=v,x=v.is0();A==null&&(A=x?OZ:r.inv(N));const D=l(S*A),M=l(j*A),L=l(N*A);if(x)return{x:Vs,y:Rn};if(L!==Rn)throw new Error("invZ was invalid");return{x:D,y:M}}),E=wP(v=>{const{a:A,d:S}=e;if(v.is0())throw new Error("bad point: ZERO");const{ex:j,ey:N,ez:x,et:D}=v,M=l(j*j),L=l(N*N),F=l(x*x),q=l(F*F),$=l(M*A),V=l(F*l($+L)),J=l(q+l(S*l(M*L)));if(V!==J)throw new Error("bad point: equation left != right (1)");const Y=l(j*N),Z=l(x*D);if(Y!==Z)throw new Error("bad point: equation left != right (2)");return!0});class w{constructor(A,S,j,N){this.ex=A,this.ey=S,this.ez=j,this.et=N,h("x",A),h("y",S),h("z",j),h("t",N),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(A){if(A instanceof w)throw new Error("extended point not allowed");const{x:S,y:j}=A||{};return h("x",S),h("y",j),new w(S,j,Rn,l(S*j))}static normalizeZ(A){const S=r.invertBatch(A.map(j=>j.ez));return A.map((j,N)=>j.toAffine(S[N])).map(w.fromAffine)}static msm(A,S){return PZ(w,d,A,S)}_setWindowSize(A){C.setWindowSize(this,A)}assertValidity(){E(this)}equals(A){y(A);const{ex:S,ey:j,ez:N}=this,{ex:x,ey:D,ez:M}=A,L=l(S*M),F=l(x*N),q=l(j*M),$=l(D*N);return L===F&&q===$}is0(){return this.equals(w.ZERO)}negate(){return new w(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:A}=e,{ex:S,ey:j,ez:N}=this,x=l(S*S),D=l(j*j),M=l(gg*l(N*N)),L=l(A*x),F=S+j,q=l(l(F*F)-x-D),$=L+D,V=$-M,J=L-D,Y=l(q*V),Z=l($*J),ee=l(q*J),le=l(V*$);return new w(Y,Z,le,ee)}add(A){y(A);const{a:S,d:j}=e,{ex:N,ey:x,ez:D,et:M}=this,{ex:L,ey:F,ez:q,et:$}=A;if(S===BigInt(-1)){const Ze=l((x-N)*(F+L)),de=l((x+N)*(F-L)),te=l(de-Ze);if(te===Vs)return this.double();const Pt=l(D*gg*$),Ft=l(M*gg*q),en=Ft+Pt,re=de+Ze,ce=Ft-Pt,ye=l(en*te),De=l(re*ce),tr=l(en*ce),tn=l(te*re);return new w(ye,De,tn,tr)}const V=l(N*L),J=l(x*F),Y=l(M*j*$),Z=l(D*q),ee=l((N+x)*(L+F)-V-J),le=Z-Y,X=Z+Y,se=l(J-S*V),fe=l(ee*le),Oe=l(X*se),Re=l(ee*se),Me=l(le*X);return new w(fe,Oe,Me,Re)}subtract(A){return this.add(A.negate())}wNAF(A){return C.wNAFCached(this,A,w.normalizeZ)}multiply(A){const S=A;lf("scalar",S,Rn,n);const{p:j,f:N}=this.wNAF(S);return w.normalizeZ([j,N])[0]}multiplyUnsafe(A,S=w.ZERO){const j=A;return lf("scalar",j,Vs,n),j===Vs?_:this.is0()||j===Rn?this:C.wNAFCachedUnsafe(this,j,w.normalizeZ,S)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return C.unsafeLadder(this,n).is0()}toAffine(A){return b(this,A)}clearCofactor(){const{h:A}=e;return A===Rn?this:this.multiplyUnsafe(A)}static fromHex(A,S=!1){const{d:j,a:N}=e,x=r.BYTES;A=oo("pointHex",A,x),y_("zip215",S);const D=A.slice(),M=A[x-1];D[x-1]=M&-129;const L=u1(D),F=S?u:r.ORDER;lf("pointHex.y",L,Vs,F);const q=l(L*L),$=l(q-Rn),V=l(j*q-N);let{isValid:J,value:Y}=f($,V);if(!J)throw new Error("Point.fromHex: invalid y coordinate");const Z=(Y&Rn)===Rn,ee=(M&128)!==0;if(!S&&Y===Vs&&ee)throw new Error("Point.fromHex: x=0 and x_0=1");return ee!==Z&&(Y=l(-Y)),w.fromAffine({x:Y,y:L})}static fromPrivateKey(A){return T(A).point}toRawBytes(){const{x:A,y:S}=this.toAffine(),j=R2(S,r.BYTES);return j[j.length-1]|=A&Rn?128:0,j}toHex(){return oI(this.toRawBytes())}}w.BASE=new w(e.Gx,e.Gy,Rn,l(e.Gx*e.Gy)),w.ZERO=new w(Vs,Rn,Rn,Vs);const{BASE:m,ZERO:_}=w,C=TZ(w,a*8);function I(v){return Pr(v,n)}function P(v){return I(u1(v))}function T(v){const A=r.BYTES;v=oo("private key",v,A);const S=oo("hashed private key",i(v),2*A),j=g(S.slice(0,A)),N=S.slice(A,2*A),x=P(j),D=m.multiply(x),M=D.toRawBytes();return{head:j,prefix:N,scalar:x,point:D,pointBytes:M}}function R(v){return T(v).pointBytes}function U(v=new Uint8Array,...A){const S=bP(...A);return P(i(p(S,oo("context",v),!!s)))}function k(v,A,S={}){v=oo("message",v),s&&(v=s(v));const{prefix:j,scalar:N,pointBytes:x}=T(A),D=U(S.context,j,v),M=m.multiply(D).toRawBytes(),L=U(S.context,M,x,v),F=I(D+L*N);lf("signature.s",F,Vs,n);const q=bP(M,R2(F,r.BYTES));return oo("result",q,r.BYTES*2)}const O=RZ;function B(v,A,S,j=O){const{context:N,zip215:x}=j,D=r.BYTES;v=oo("signature",v,2*D),A=oo("message",A),S=oo("publicKey",S,D),x!==void 0&&y_("zip215",x),s&&(A=s(A));const M=u1(v.slice(D,2*D));let L,F,q;try{L=w.fromHex(S,x),F=w.fromHex(v.slice(0,D),x),q=m.multiplyUnsafe(M)}catch{return!1}if(!x&&L.isSmallOrder())return!1;const $=U(N,F.toRawBytes(),L.toRawBytes(),A);return F.add(L.multiplyUnsafe($)).subtract(q).clearCofactor().equals(w.ZERO)}return m._setWindowSize(8),{CURVE:e,getPublicKey:R,sign:k,verify:B,ExtendedPoint:w,utils:{getExtendedPublicKey:T,randomPrivateKey:()=>o(r.BYTES),precompute(v=8,A=w.BASE){return A._setWindowSize(v),A.multiply(BigInt(3)),A}}}}BigInt(0),BigInt(1);const cI=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),CP=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const BZ=BigInt(1),IP=BigInt(2);BigInt(3);const jZ=BigInt(5),DZ=BigInt(8);function UZ(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=cI,o=t*t%i*t%i,a=Ti(o,IP,i)*o%i,c=Ti(a,BZ,i)*t%i,u=Ti(c,jZ,i)*c%i,l=Ti(u,e,i)*u%i,d=Ti(l,r,i)*l%i,f=Ti(d,n,i)*d%i,g=Ti(f,s,i)*f%i,p=Ti(g,s,i)*f%i,h=Ti(p,e,i)*u%i;return{pow_p_5_8:Ti(h,IP,i)*t%i,b2:o}}function MZ(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function LZ(t,e){const r=cI,n=Pr(e*e*e,r),s=Pr(n*n*e,r),i=UZ(t*s).pow_p_5_8;let o=Pr(t*n*i,r);const a=Pr(e*o*o,r),c=o,u=Pr(o*CP,r),l=a===t,d=a===Pr(-t,r),f=a===Pr(-t*CP,r);return l&&(o=c),(d||f)&&(o=u),EZ(o,r)&&(o=Pr(-o,r)),{isValid:l||d,value:o}}const FZ=BD(cI,void 0,!0),qZ={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:FZ,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:DZ,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:cZ,randomBytes:TD,adjustScalarBytes:MZ,uvRatio:LZ},UD=kZ(qZ),HZ="EdDSA",zZ="JWT",D1=".",bE="base64url",MD="utf8",LD="utf8",$Z=":",VZ="did",GZ="key",SP="base58btc",WZ="z",KZ="K36",ZZ=32;function uI(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function FD(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?uI(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function qD(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const r=FD(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return uI(r)}function YZ(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var h=0,y=0,b=0,E=p.length;b!==E&&p[b]===0;)b++,h++;for(var w=(E-b)*l+1>>>0,m=new Uint8Array(w);b!==E;){for(var _=p[b],C=0,I=w-1;(_!==0||C<y)&&I!==-1;I--,C++)_+=256*m[I]>>>0,m[I]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=C,b++}for(var P=w-y;P!==w&&m[P]===0;)P++;for(var T=c.repeat(h);P<w;++P)T+=t.charAt(m[P]);return T}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var h=0;if(p[h]!==" "){for(var y=0,b=0;p[h]===c;)y++,h++;for(var E=(p.length-h)*u+1>>>0,w=new Uint8Array(E);p[h];){var m=r[p.charCodeAt(h)];if(m===255)return;for(var _=0,C=E-1;(m!==0||_<b)&&C!==-1;C--,_++)m+=a*w[C]>>>0,w[C]=m%256>>>0,m=m/256>>>0;if(m!==0)throw new Error("Non-zero carry");b=_,h++}if(p[h]!==" "){for(var I=E-b;I!==E&&w[I]===0;)I++;for(var P=new Uint8Array(y+(E-I)),T=y;I!==E;)P[T++]=w[I++];return P}}}function g(p){var h=f(p);if(h)return h;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:g}}var JZ=YZ,QZ=JZ;const HD=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},XZ=t=>new TextEncoder().encode(t),eY=t=>new TextDecoder().decode(t);let tY=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},rY=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return zD(this,e)}},nY=class{constructor(e){this.decoders=e}or(e){return zD(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const zD=(t,e)=>new nY({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let sY=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new tY(e,r,n),this.decoder=new rY(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const wE=({name:t,prefix:e,encode:r,decode:n})=>new sY(t,e,r,n),i0=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=QZ(r,e);return wE({prefix:t,name:e,encode:n,decode:i=>HD(s(i))})},iY=(t,e,r,n)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},oY=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Zr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>wE({prefix:e,name:t,encode(s){return oY(s,n,r)},decode(s){return iY(s,n,r,t)}}),aY=wE({prefix:"\0",name:"identity",encode:t=>eY(t),decode:t=>XZ(t)});var cY=Object.freeze({__proto__:null,identity:aY});const uY=Zr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var lY=Object.freeze({__proto__:null,base2:uY});const dY=Zr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var fY=Object.freeze({__proto__:null,base8:dY});const hY=i0({prefix:"9",name:"base10",alphabet:"0123456789"});var pY=Object.freeze({__proto__:null,base10:hY});const gY=Zr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),mY=Zr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var yY=Object.freeze({__proto__:null,base16:gY,base16upper:mY});const bY=Zr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),wY=Zr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),EY=Zr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),vY=Zr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),_Y=Zr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),AY=Zr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),CY=Zr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),IY=Zr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),SY=Zr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var TY=Object.freeze({__proto__:null,base32:bY,base32upper:wY,base32pad:EY,base32padupper:vY,base32hex:_Y,base32hexupper:AY,base32hexpad:CY,base32hexpadupper:IY,base32z:SY});const PY=i0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),NY=i0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var OY=Object.freeze({__proto__:null,base36:PY,base36upper:NY});const RY=i0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),xY=i0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var kY=Object.freeze({__proto__:null,base58btc:RY,base58flickr:xY});const BY=Zr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),jY=Zr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),DY=Zr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),UY=Zr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var MY=Object.freeze({__proto__:null,base64:BY,base64pad:jY,base64url:DY,base64urlpad:UY});const $D=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),LY=$D.reduce((t,e,r)=>(t[r]=e,t),[]),FY=$D.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function qY(t){return t.reduce((e,r)=>(e+=LY[r],e),"")}function HY(t){const e=[];for(const r of t){const n=FY[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const zY=wE({prefix:"ðŸš€",name:"base256emoji",encode:qY,decode:HY});var $Y=Object.freeze({__proto__:null,base256emoji:zY}),VY=VD,TP=128,GY=-128,WY=Math.pow(2,31);function VD(t,e,r){e=e||[],r=r||0;for(var n=r;t>=WY;)e[r++]=t&255|TP,t/=128;for(;t&GY;)e[r++]=t&255|TP,t>>>=7;return e[r]=t|0,VD.bytes=r-n+1,e}var KY=k2,ZY=128,PP=127;function k2(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw k2.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&PP)<<s:(o&PP)*Math.pow(2,s),s+=7}while(o>=ZY);return k2.bytes=i-n,r}var YY=Math.pow(2,7),JY=Math.pow(2,14),QY=Math.pow(2,21),XY=Math.pow(2,28),eJ=Math.pow(2,35),tJ=Math.pow(2,42),rJ=Math.pow(2,49),nJ=Math.pow(2,56),sJ=Math.pow(2,63),iJ=function(t){return t<YY?1:t<JY?2:t<QY?3:t<XY?4:t<eJ?5:t<tJ?6:t<rJ?7:t<nJ?8:t<sJ?9:10},oJ={encode:VY,decode:KY,encodingLength:iJ},GD=oJ;const NP=(t,e,r=0)=>(GD.encode(t,e,r),e),OP=t=>GD.encodingLength(t),B2=(t,e)=>{const r=e.byteLength,n=OP(t),s=n+OP(r),i=new Uint8Array(s+r);return NP(t,i,0),NP(r,i,n),i.set(e,s),new aJ(t,r,e,i)};let aJ=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};const WD=({name:t,code:e,encode:r})=>new cJ(t,e,r);let cJ=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?B2(this.code,r):r.then(n=>B2(this.code,n))}else throw Error("Unknown type, must be binary type")}};const KD=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),uJ=WD({name:"sha2-256",code:18,encode:KD("SHA-256")}),lJ=WD({name:"sha2-512",code:19,encode:KD("SHA-512")});var dJ=Object.freeze({__proto__:null,sha256:uJ,sha512:lJ});const ZD=0,fJ="identity",YD=HD,hJ=t=>B2(ZD,YD(t)),pJ={code:ZD,name:fJ,encode:YD,digest:hJ};var gJ=Object.freeze({__proto__:null,identity:pJ});new TextEncoder,new TextDecoder;const RP={...cY,...lY,...fY,...pY,...yY,...TY,...OY,...kY,...MY,...$Y};({...dJ,...gJ});function JD(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const xP=JD("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),A_=JD("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=FD(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),QD={utf8:xP,"utf-8":xP,hex:RP.base16,latin1:A_,ascii:A_,binary:A_,...RP};function EE(t,e="utf8"){const r=QD[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Ld(t,e="utf8"){const r=QD[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?uI(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function kP(t){return ju(EE(Ld(t,bE),MD))}function U1(t){return EE(Ld(ea(t),MD),bE)}function XD(t){const e=Ld(KZ,SP),r=WZ+EE(qD([e,t]),SP);return[VZ,GZ,r].join($Z)}function mJ(t){return EE(t,bE)}function yJ(t){return Ld(t,bE)}function bJ(t){return Ld([U1(t.header),U1(t.payload)].join(D1),LD)}function wJ(t){return[U1(t.header),U1(t.payload),mJ(t.signature)].join(D1)}function j2(t){const e=t.split(D1),r=kP(e[0]),n=kP(e[1]),s=yJ(e[2]),i=Ld(e.slice(0,2).join(D1),LD);return{header:r,payload:n,signature:s,data:i}}function BP(t=TD(ZZ)){const e=UD.getPublicKey(t);return{secretKey:qD([t,e]),publicKey:e}}async function EJ(t,e,r,n,s=pe.fromMiliseconds(Date.now())){const i={alg:HZ,typ:zZ},o=XD(n.publicKey),a=s+r,c={iss:o,sub:t,aud:e,iat:s,exp:a},u=bJ({header:i,payload:c}),l=UD.sign(u,n.secretKey.slice(0,32));return wJ({header:i,payload:c,signature:l})}var jP=function(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))},vJ=(function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t})(),_J=(function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t})(),AJ=(function(){function t(e,r,n,s){this.name=e,this.version=r,this.os=n,this.bot=s,this.type="bot-device"}return t})(),CJ=(function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t})(),IJ=(function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t})(),SJ=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,TJ=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,DP=3,PJ=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",SJ]],UP=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function NJ(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new IJ:typeof navigator<"u"?RJ(navigator.userAgent):kJ()}function OJ(t){return t!==""&&PJ.reduce(function(e,r){var n=r[0],s=r[1];if(e)return e;var i=s.exec(t);return!!i&&[n,i]},!1)}function RJ(t){var e=OJ(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new CJ;var s=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);s?s.length<DP&&(s=jP(jP([],s,!0),BJ(DP-s.length),!0)):s=[];var i=s.join("."),o=xJ(t),a=TJ.exec(t);return a&&a[1]?new AJ(r,i,o,a[1]):new vJ(r,i,o)}function xJ(t){for(var e=0,r=UP.length;e<r;e++){var n=UP[e],s=n[0],i=n[1],o=i.exec(t);if(o)return s}return null}function kJ(){var t=typeof process<"u"&&process.version;return t?new _J(process.version.slice(1)):null}function BJ(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var kt={},MP;function eU(){if(MP)return kt;MP=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.getLocalStorage=kt.getLocalStorageOrThrow=kt.getCrypto=kt.getCryptoOrThrow=kt.getLocation=kt.getLocationOrThrow=kt.getNavigator=kt.getNavigatorOrThrow=kt.getDocument=kt.getDocumentOrThrow=kt.getFromWindowOrThrow=kt.getFromWindow=void 0;function t(f){let g;return typeof window<"u"&&typeof window[f]<"u"&&(g=window[f]),g}kt.getFromWindow=t;function e(f){const g=t(f);if(!g)throw new Error(`${f} is not defined in Window`);return g}kt.getFromWindowOrThrow=e;function r(){return e("document")}kt.getDocumentOrThrow=r;function n(){return t("document")}kt.getDocument=n;function s(){return e("navigator")}kt.getNavigatorOrThrow=s;function i(){return t("navigator")}kt.getNavigator=i;function o(){return e("location")}kt.getLocationOrThrow=o;function a(){return t("location")}kt.getLocation=a;function c(){return e("crypto")}kt.getCryptoOrThrow=c;function u(){return t("crypto")}kt.getCrypto=u;function l(){return e("localStorage")}kt.getLocalStorageOrThrow=l;function d(){return t("localStorage")}return kt.getLocalStorage=d,kt}var ta=eU(),df={},LP;function jJ(){if(LP)return df;LP=1,Object.defineProperty(df,"__esModule",{value:!0}),df.getWindowMetadata=void 0;const t=eU();function e(){let r,n;try{r=t.getDocumentOrThrow(),n=t.getLocationOrThrow()}catch{return null}function s(){const g=r.getElementsByTagName("link"),p=[];for(let h=0;h<g.length;h++){const y=g[h],b=y.getAttribute("rel");if(b&&b.toLowerCase().indexOf("icon")>-1){const E=y.getAttribute("href");if(E)if(E.toLowerCase().indexOf("https:")===-1&&E.toLowerCase().indexOf("http:")===-1&&E.indexOf("//")!==0){let w=n.protocol+"//"+n.host;if(E.indexOf("/")===0)w+=E;else{const m=n.pathname.split("/");m.pop();const _=m.join("/");w+=_+"/"+E}p.push(w)}else if(E.indexOf("//")===0){const w=n.protocol+E;p.push(w)}else p.push(E)}}return p}function i(...g){const p=r.getElementsByTagName("meta");for(let h=0;h<p.length;h++){const y=p[h],b=["itemprop","property","name"].map(E=>y.getAttribute(E)).filter(E=>E?g.includes(E):!1);if(b.length&&b){const E=y.getAttribute("content");if(E)return E}}return""}function o(){let g=i("name","og:site_name","og:title","twitter:title");return g||(g=r.title),g}function a(){return i("description","og:description","twitter:description","keywords")}const c=o(),u=a(),l=n.origin,d=s();return{description:u,url:l,icons:d,name:c}}return df.getWindowMetadata=e,df}var DJ=jJ();const UJ="0.1.1";function MJ(){return UJ}class Xt extends Error{constructor(e,r={}){const n=(()=>{if(r.cause instanceof Xt){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return r.cause&&"details"in r.cause&&typeof r.cause.details=="string"?r.cause.details:r.cause?.message?r.cause.message:r.details})(),s=r.cause instanceof Xt&&r.cause.docsPath||r.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...r.metaMessages?["",...r.metaMessages]:[],...n||s?["",n?`Details: ${n}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${MJ()}`}),this.cause=r.cause,this.details=n,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return tU(this,e)}}function tU(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?tU(t.cause,e):e?null:t}const pl=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function LJ(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function jp(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Uu(t,...e){if(!LJ(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function FJ(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");jp(t.outputLen),jp(t.blockLen)}function Ad(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function rU(t,e){Uu(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function qJ(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Cd(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function C_(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Pi(t,e){return t<<32-e|t>>>e}const HJ=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function zJ(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function $J(t){for(let e=0;e<t.length;e++)t[e]=zJ(t[e]);return t}const FP=HJ?t=>t:$J;function VJ(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function vE(t){return typeof t=="string"&&(t=VJ(t)),Uu(t),t}function GJ(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];Uu(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}let lI=class{};function nU(t){const e=n=>t().update(vE(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function WJ(t=32){if(pl&&typeof pl.getRandomValues=="function")return pl.getRandomValues(new Uint8Array(t));if(pl&&typeof pl.randomBytes=="function")return Uint8Array.from(pl.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function KJ(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}function ZJ(t,e,r){return t&e^~t&r}function YJ(t,e,r){return t&e^t&r^e&r}class JJ extends lI{constructor(e,r,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=C_(this.buffer)}update(e){Ad(this),e=vE(e),Uu(e);const{view:r,buffer:n,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=C_(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ad(this),rU(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,Cd(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;KJ(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=C_(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const ma=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),mg=BigInt(2**32-1),qP=BigInt(32);function QJ(t,e=!1){return e?{h:Number(t&mg),l:Number(t>>qP&mg)}:{h:Number(t>>qP&mg)|0,l:Number(t&mg)|0}}function XJ(t,e=!1){const r=t.length;let n=new Uint32Array(r),s=new Uint32Array(r);for(let i=0;i<r;i++){const{h:o,l:a}=QJ(t[i],e);[n[i],s[i]]=[o,a]}return[n,s]}const eQ=(t,e,r)=>t<<r|e>>>32-r,tQ=(t,e,r)=>e<<r|t>>>32-r,rQ=(t,e,r)=>e<<r-32|t>>>64-r,nQ=(t,e,r)=>t<<r-32|e>>>64-r,sQ=BigInt(0),ff=BigInt(1),iQ=BigInt(2),oQ=BigInt(7),aQ=BigInt(256),cQ=BigInt(113),sU=[],iU=[],oU=[];for(let t=0,e=ff,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],sU.push(2*(5*n+r)),iU.push((t+1)*(t+2)/2%64);let s=sQ;for(let i=0;i<7;i++)e=(e<<ff^(e>>oQ)*cQ)%aQ,e&iQ&&(s^=ff<<(ff<<BigInt(i))-ff);oU.push(s)}const aU=XJ(oU,!0),uQ=aU[0],lQ=aU[1],HP=(t,e,r)=>r>32?rQ(t,e,r):eQ(t,e,r),zP=(t,e,r)=>r>32?nQ(t,e,r):tQ(t,e,r);function dQ(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],d=HP(u,l,1)^r[a],f=zP(u,l,1)^r[a+1];for(let g=0;g<50;g+=10)t[o+g]^=d,t[o+g+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=iU[o],c=HP(s,i,a),u=zP(s,i,a),l=sU[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=uQ[n],t[1]^=lQ[n]}Cd(r)}let fQ=class cU extends lI{constructor(e,r,n,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,jp(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=qJ(this.state)}clone(){return this._cloneInto()}keccak(){FP(this.state32),dQ(this.state32,this.rounds),FP(this.state32),this.posOut=0,this.pos=0}update(e){Ad(this),e=vE(e),Uu(e);const{blockLen:r,state:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Ad(this,!1),Uu(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return jp(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(rU(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Cd(this.state)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new cU(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const hQ=(t,e,r)=>nU(()=>new fQ(e,t,r)),pQ=hQ(1,136,256/8),gQ=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ya=new Uint32Array(64);let mQ=class extends JJ{constructor(e=32){super(64,e,8,!1),this.A=ma[0]|0,this.B=ma[1]|0,this.C=ma[2]|0,this.D=ma[3]|0,this.E=ma[4]|0,this.F=ma[5]|0,this.G=ma[6]|0,this.H=ma[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)ya[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const f=ya[d-15],g=ya[d-2],p=Pi(f,7)^Pi(f,18)^f>>>3,h=Pi(g,17)^Pi(g,19)^g>>>10;ya[d]=h+ya[d-7]+p+ya[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=Pi(a,6)^Pi(a,11)^Pi(a,25),g=l+f+ZJ(a,c,u)+gQ[d]+ya[d]|0,h=(Pi(n,2)^Pi(n,13)^Pi(n,22))+YJ(n,s,i)|0;l=u,u=c,c=a,a=o+g|0,o=i,i=s,s=n,n=g+h|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){Cd(ya)}destroy(){this.set(0,0,0,0,0,0,0,0),Cd(this.buffer)}};const yQ=nU(()=>new mQ);const dI=BigInt(0),D2=BigInt(1);function o0(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function fI(t){if(!o0(t))throw new Error("Uint8Array expected")}function Dp(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function yg(t){const e=t.toString(16);return e.length&1?"0"+e:e}function uU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?dI:BigInt("0x"+t)}const lU=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",bQ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Up(t){if(fI(t),lU)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=bQ[t[r]];return e}const ao={_0:48,_9:57,A:65,F:70,a:97,f:102};function $P(t){if(t>=ao._0&&t<=ao._9)return t-ao._0;if(t>=ao.A&&t<=ao.F)return t-(ao.A-10);if(t>=ao.a&&t<=ao.f)return t-(ao.a-10)}function M1(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(lU)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=$P(t.charCodeAt(i)),a=$P(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function Pu(t){return uU(Up(t))}function dU(t){return fI(t),uU(Up(Uint8Array.from(t).reverse()))}function a0(t,e){return M1(t.toString(16).padStart(e*2,"0"))}function fU(t,e){return a0(t,e).reverse()}function xs(t,e,r){let n;if(typeof e=="string")try{n=M1(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(o0(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}function L1(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];fI(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}const I_=t=>typeof t=="bigint"&&dI<=t;function hI(t,e,r){return I_(t)&&I_(e)&&I_(r)&&e<=t&&t<r}function nd(t,e,r,n){if(!hI(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function wQ(t){let e;for(e=0;t>dI;t>>=D2,e+=1);return e}const _E=t=>(D2<<BigInt(t))-D2,S_=t=>new Uint8Array(t),VP=t=>Uint8Array.from(t);function EQ(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=S_(t),s=S_(t),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...d)=>r(s,n,...d),c=(d=S_(0))=>{s=a(VP([0]),d),n=a(),d.length!==0&&(s=a(VP([1]),d),n=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){n=a();const g=n.slice();f.push(g),d+=n.length}return L1(...f)};return(d,f)=>{o(),c(d);let g;for(;!(g=f(u()));)c();return o(),g}}const vQ={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||o0(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function AE(t,e,r={}){const n=(s,i,o)=>{const a=vQ[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return t}function GP(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}function _Q(t,e){if(YP(t)>e)throw new zQ({givenSize:YP(t),maxSize:e})}const co={zero:48,nine:57,A:65,F:70,a:97,f:102};function WP(t){if(t>=co.zero&&t<=co.nine)return t-co.zero;if(t>=co.A&&t<=co.F)return t-(co.A-10);if(t>=co.a&&t<=co.f)return t-(co.a-10)}function AQ(t,e={}){const{dir:r,size:n=32}=e;if(n===0)return t;if(t.length>n)throw new $Q({size:t.length,targetSize:n,type:"Bytes"});const s=new Uint8Array(n);for(let i=0;i<n;i++){const o=r==="right";s[o?i:n-i-1]=t[o?i:t.length-i-1]}return s}function hU(t,e){if(Xa(t)>e)throw new kQ({givenSize:Xa(t),maxSize:e})}function CQ(t,e){if(typeof e=="number"&&e>0&&e>Xa(t)-1)throw new mU({offset:e,position:"start",size:Xa(t)})}function IQ(t,e,r){if(typeof e=="number"&&typeof r=="number"&&Xa(t)!==r-e)throw new mU({offset:r,position:"end",size:Xa(t)})}function pU(t,e={}){const{dir:r,size:n=32}=e;if(n===0)return t;const s=t.replace("0x","");if(s.length>n*2)throw new BQ({size:Math.ceil(s.length/2),targetSize:n,type:"Hex"});return`0x${s[r==="right"?"padEnd":"padStart"](n*2,"0")}`}const SQ="#__bigint";function pI(t,e,r){return JSON.stringify(t,(n,s)=>typeof s=="bigint"?s.toString()+SQ:s,r)}const TQ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function PQ(t,e={}){const{strict:r=!1}=e;if(!t)throw new KP(t);if(typeof t!="string")throw new KP(t);if(r&&!/^0x[0-9a-fA-F]*$/.test(t))throw new ZP(t);if(!t.startsWith("0x"))throw new ZP(t)}function NQ(...t){return`0x${t.reduce((e,r)=>e+r.replace("0x",""),"")}`}function gI(t){return t instanceof Uint8Array?F1(t):Array.isArray(t)?F1(new Uint8Array(t)):t}function F1(t,e={}){let r="";for(let s=0;s<t.length;s++)r+=TQ[t[s]];const n=`0x${r}`;return typeof e.size=="number"?(hU(n,e.size),gU(n,e.size)):n}function T_(t,e={}){const{signed:r,size:n}=e,s=BigInt(t);let i;n?r?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&r?-i-1n:0;if(i&&s>i||s<o){const u=typeof t=="bigint"?"n":"";throw new xQ({max:i?`${i}${u}`:void 0,min:`${o}${u}`,signed:r,size:n,value:`${t}${u}`})}const c=`0x${(r&&s<0?(1n<<BigInt(n*8))+BigInt(s):s).toString(16)}`;return n?OQ(c,n):c}function OQ(t,e){return pU(t,{dir:"left",size:e})}function gU(t,e){return pU(t,{dir:"right",size:e})}function ko(t,e,r,n={}){const{strict:s}=n;CQ(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(r??t.length)*2)}`;return s&&IQ(i,e,r),i}function Xa(t){return Math.ceil((t.length-2)/2)}function RQ(t,e={}){const{strict:r=!1}=e;try{return PQ(t,{strict:r}),!0}catch{return!1}}class xQ extends Xt{constructor({max:e,min:r,signed:n,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${n?" signed":" unsigned"} integer range ${e?`(\`${r}\` to \`${e}\`)`:`(above \`${r}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class KP extends Xt{constructor(e){super(`Value \`${typeof e=="object"?pI(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class ZP extends Xt{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let kQ=class extends Xt{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class mU extends Xt{constructor({offset:e,position:r,size:n}){super(`Slice ${r==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let BQ=class extends Xt{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};const jQ=new TextEncoder;function DQ(t){if(!(t instanceof Uint8Array)){if(!t)throw new bg(t);if(typeof t!="object")throw new bg(t);if(!("BYTES_PER_ELEMENT"in t))throw new bg(t);if(t.BYTES_PER_ELEMENT!==1||t.constructor.name!=="Uint8Array")throw new bg(t)}}function UQ(t){return t instanceof Uint8Array?t:typeof t=="string"?LQ(t):MQ(t)}function MQ(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function LQ(t,e={}){const{size:r}=e;let n=t;r&&(hU(t,r),n=gU(t,r));let s=n.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const u=WP(s.charCodeAt(c++)),l=WP(s.charCodeAt(c++));if(u===void 0||l===void 0)throw new Xt(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=u*16+l}return o}function FQ(t,e={}){const{size:r}=e,n=jQ.encode(t);return typeof r=="number"?(_Q(n,r),qQ(n,r)):n}function qQ(t,e){return AQ(t,{dir:"right",size:e})}function YP(t){return t.length}function HQ(t){try{return DQ(t),!0}catch{return!1}}class bg extends Xt{constructor(e){super(`Value \`${typeof e=="object"?pI(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class zQ extends Xt{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class $Q extends Xt{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function yU(t,e={}){const{as:r=typeof t=="string"?"Hex":"Bytes"}=e,n=pQ(UQ(t));return r==="Bytes"?n:F1(n)}class VQ extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const GQ={checksum:new VQ(8192)},P_=GQ.checksum;function bU(t,e={}){const{compressed:r}=e,{prefix:n,x:s,y:i}=t;if(r===!1||typeof s=="bigint"&&typeof i=="bigint"){if(n!==4)throw new JP({prefix:n,cause:new QQ});return}if(r===!0||typeof s=="bigint"&&typeof i>"u"){if(n!==3&&n!==2)throw new JP({prefix:n,cause:new JQ});return}throw new YQ({publicKey:t})}function WQ(t){const e=(()=>{if(RQ(t))return wU(t);if(HQ(t))return KQ(t);const{prefix:r,x:n,y:s}=t;return typeof n=="bigint"&&typeof s=="bigint"?{prefix:r??4,x:n,y:s}:{prefix:r,x:n}})();return bU(e),e}function KQ(t){return wU(F1(t))}function wU(t){if(t.length!==132&&t.length!==130&&t.length!==68)throw new XQ({publicKey:t});if(t.length===130){const n=BigInt(ko(t,0,32)),s=BigInt(ko(t,32,64));return{prefix:4,x:n,y:s}}if(t.length===132){const n=Number(ko(t,0,1)),s=BigInt(ko(t,1,33)),i=BigInt(ko(t,33,65));return{prefix:n,x:s,y:i}}const e=Number(ko(t,0,1)),r=BigInt(ko(t,1,33));return{prefix:e,x:r}}function ZQ(t,e={}){bU(t);const{prefix:r,x:n,y:s}=t,{includePrefix:i=!0}=e;return NQ(i?T_(r,{size:1}):"0x",T_(n,{size:32}),typeof s=="bigint"?T_(s,{size:32}):"0x")}class YQ extends Xt{constructor({publicKey:e}){super(`Value \`${pI(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class JP extends Xt{constructor({prefix:e,cause:r}){super(`Prefix "${e}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class JQ extends Xt{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class QQ extends Xt{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let XQ=class extends Xt{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${Xa(gI(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const eX=/^0x[a-fA-F0-9]{40}$/;function EU(t,e={}){const{strict:r=!0}=e;if(!eX.test(t))throw new QP({address:t,cause:new nX});if(r){if(t.toLowerCase()===t)return;if(vU(t)!==t)throw new QP({address:t,cause:new sX})}}function vU(t){if(P_.has(t))return P_.get(t);EU(t,{strict:!1});const e=t.substring(2).toLowerCase(),r=yU(FQ(e),{as:"Bytes"}),n=e.split("");for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&n[i]&&(n[i]=n[i].toUpperCase()),(r[i>>1]&15)>=8&&n[i+1]&&(n[i+1]=n[i+1].toUpperCase());const s=`0x${n.join("")}`;return P_.set(t,s),s}function tX(t,e={}){const{checksum:r=!1}=e;return EU(t),r?vU(t):t}function rX(t,e={}){const r=yU(`0x${ZQ(t).slice(4)}`).substring(26);return tX(`0x${r}`,e)}class QP extends Xt{constructor({address:e,cause:r}){super(`Address "${e}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class nX extends Xt{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class sX extends Xt{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}let _U=class extends lI{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,FJ(e);const n=vE(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Cd(i)}update(e){return Ad(this),this.iHash.update(e),this}digestInto(e){Ad(this),Uu(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const AU=(t,e,r)=>new _U(t,e).update(r).digest();AU.create=(t,e)=>new _U(t,e);const $n=BigInt(0),Cn=BigInt(1),pu=BigInt(2),iX=BigInt(3),CU=BigInt(4),IU=BigInt(5),SU=BigInt(8);function Mn(t,e){const r=t%e;return r>=$n?r:e+r}function Cs(t,e,r){let n=t;for(;e-- >$n;)n*=n,n%=r;return n}function U2(t,e){if(t===$n)throw new Error("invert: expected non-zero number");if(e<=$n)throw new Error("invert: expected positive modulus, got "+e);let r=Mn(t,e),n=e,s=$n,i=Cn;for(;r!==$n;){const a=n/r,c=n%r,u=s-i*a;n=r,r=c,s=i,i=u}if(n!==Cn)throw new Error("invert: does not exist");return Mn(s,e)}function TU(t,e){const r=(t.ORDER+Cn)/CU,n=t.pow(e,r);if(!t.eql(t.sqr(n),e))throw new Error("Cannot find square root");return n}function oX(t,e){const r=(t.ORDER-IU)/SU,n=t.mul(e,pu),s=t.pow(n,r),i=t.mul(e,s),o=t.mul(t.mul(i,pu),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function aX(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Cn,r=0;for(;e%pu===$n;)e/=pu,r++;let n=pu;const s=mI(t);for(;XP(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return TU;let i=s.pow(n,e);const o=(e+Cn)/pu;return function(c,u){if(c.is0(u))return u;if(XP(c,u)!==1)throw new Error("Cannot find square root");let l=r,d=c.mul(c.ONE,i),f=c.pow(u,e),g=c.pow(u,o);for(;!c.eql(f,c.ONE);){if(c.is0(f))return c.ZERO;let p=1,h=c.sqr(f);for(;!c.eql(h,c.ONE);)if(p++,h=c.sqr(h),p===l)throw new Error("Cannot find square root");const y=Cn<<BigInt(l-p-1),b=c.pow(d,y);l=p,d=c.sqr(b),f=c.mul(f,d),g=c.mul(g,b)}return g}}function cX(t){return t%CU===iX?TU:t%SU===IU?oX:aX(t)}const uX=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function lX(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=uX.reduce((n,s)=>(n[s]="function",n),e);return AE(t,r)}function dX(t,e,r){if(r<$n)throw new Error("invalid exponent, negatives unsupported");if(r===$n)return t.ONE;if(r===Cn)return e;let n=t.ONE,s=e;for(;r>$n;)r&Cn&&(n=t.mul(n,s)),s=t.sqr(s),r>>=Cn;return n}function PU(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(n[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(n[c]=t.mul(o,n[c]),t.mul(o,a)),i),n}function XP(t,e){const r=(t.ORDER-Cn)/pu,n=t.pow(e,r),s=t.eql(n,t.ONE),i=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function NU(t,e){e!==void 0&&jp(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function mI(t,e,r=!1,n={}){if(t<=$n)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=NU(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:s,BYTES:i,MASK:_E(s),ZERO:$n,ONE:Cn,create:c=>Mn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return $n<=c&&c<t},is0:c=>c===$n,isOdd:c=>(c&Cn)===Cn,neg:c=>Mn(-c,t),eql:(c,u)=>c===u,sqr:c=>Mn(c*c,t),add:(c,u)=>Mn(c+u,t),sub:(c,u)=>Mn(c-u,t),mul:(c,u)=>Mn(c*u,t),pow:(c,u)=>dX(a,c,u),div:(c,u)=>Mn(c*U2(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>U2(c,t),sqrt:n.sqrt||(c=>(o||(o=cX(t)),o(a,c))),toBytes:c=>r?fU(c,i):a0(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return r?dU(c):Pu(c)},invertBatch:c=>PU(a,c),cmov:(c,u,l)=>l?u:c});return Object.freeze(a)}function OU(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function RU(t){const e=OU(t);return e+Math.ceil(e/2)}function fX(t,e,r=!1){const n=t.length,s=OU(e),i=RU(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=r?dU(t):Pu(t),a=Mn(o,e-Cn)+Cn;return r?fU(a,s):a0(a,s)}const e6=BigInt(0),M2=BigInt(1);function N_(t,e){const r=e.negate();return t?r:e}function xU(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function O_(t,e){xU(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),s=2**t,i=_E(t),o=BigInt(t);return{windows:r,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function t6(t,e,r){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=r;let a=Number(t&s),c=t>>o;a>n&&(a-=i,c+=M2);const u=e*n,l=u+Math.abs(a)-1,d=a===0,f=a<0,g=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:f,isNegF:g,offsetF:u}}function hX(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function pX(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const R_=new WeakMap,kU=new WeakMap;function x_(t){return kU.get(t)||1}function gX(t,e){return{constTimeNegate:N_,hasPrecomputes(r){return x_(r)!==1},unsafeLadder(r,n,s=t.ZERO){let i=r;for(;n>e6;)n&M2&&(s=s.add(i)),i=i.double(),n>>=M2;return s},precomputeWindow(r,n){const{windows:s,windowSize:i}=O_(n,e),o=[];let a=r,c=a;for(let u=0;u<s;u++){c=a,o.push(c);for(let l=1;l<i;l++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,n,s){let i=t.ZERO,o=t.BASE;const a=O_(r,e);for(let c=0;c<a.windows;c++){const{nextN:u,offset:l,isZero:d,isNeg:f,isNegF:g,offsetF:p}=t6(s,c,a);s=u,d?o=o.add(N_(g,n[p])):i=i.add(N_(f,n[l]))}return{p:i,f:o}},wNAFUnsafe(r,n,s,i=t.ZERO){const o=O_(r,e);for(let a=0;a<o.windows&&s!==e6;a++){const{nextN:c,offset:u,isZero:l,isNeg:d}=t6(s,a,o);if(s=c,!l){const f=n[u];i=i.add(d?f.negate():f)}}return i},getPrecomputes(r,n,s){let i=R_.get(n);return i||(i=this.precomputeWindow(n,r),r!==1&&R_.set(n,s(i))),i},wNAFCached(r,n,s){const i=x_(r);return this.wNAF(i,this.getPrecomputes(i,r,s),n)},wNAFCachedUnsafe(r,n,s,i){const o=x_(r);return o===1?this.unsafeLadder(r,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,r,s),n,i)},setWindowSize(r,n){xU(n,e),kU.set(r,n),R_.delete(r)}}}function mX(t,e,r,n){hX(r,t),pX(n,e);const s=r.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=wQ(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=_E(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let g=d;g>=0;g-=c){l.fill(o);for(let h=0;h<i;h++){const y=n[h],b=Number(y>>BigInt(g)&u);l[b]=l[b].add(r[h])}let p=o;for(let h=l.length-1,y=o;h>0;h--)y=y.add(l[h]),p=p.add(y);if(f=f.add(p),g!==0)for(let h=0;h<c;h++)f=f.double()}return f}function BU(t){return lX(t.Fp),AE(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...NU(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function r6(t){t.lowS!==void 0&&Dp("lowS",t.lowS),t.prehash!==void 0&&Dp("prehash",t.prehash)}function yX(t){const e=BU(t);AE(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}class bX extends Error{constructor(e=""){super(e)}}const Do={Err:bX,_tlv:{encode:(t,e)=>{const{Err:r}=Do;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,s=yg(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");const i=n>127?yg(s.length/2|128):"";return yg(t)+i+s+e},decode(t,e){const{Err:r}=Do;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const u=e.subarray(n,n+c);if(u.length!==c)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=Do;if(t<Fo)throw new e("integer: negative integers are not allowed");let r=yg(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=Do;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Pu(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=Do,s=xs("signature",t),{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:u,l}=n.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(t){const{_tlv:e,_int:r}=Do,n=e.encode(2,r.encode(t.r)),s=e.encode(2,r.encode(t.s)),i=n+s;return e.encode(48,i)}};function k_(t,e){return Up(a0(t,e))}const Fo=BigInt(0),xr=BigInt(1);BigInt(2);const B_=BigInt(3),wX=BigInt(4);function EX(t){const e=yX(t),{Fp:r}=e,n=mI(e.n,e.nBitLength),s=e.toBytes||((w,m,_)=>{const C=m.toAffine();return L1(Uint8Array.from([4]),r.toBytes(C.x),r.toBytes(C.y))}),i=e.fromBytes||(w=>{const m=w.subarray(1),_=r.fromBytes(m.subarray(0,r.BYTES)),C=r.fromBytes(m.subarray(r.BYTES,2*r.BYTES));return{x:_,y:C}});function o(w){const{a:m,b:_}=e,C=r.sqr(w),I=r.mul(C,w);return r.add(r.add(I,r.mul(w,m)),_)}function a(w,m){const _=r.sqr(m),C=o(w);return r.eql(_,C)}if(!a(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const c=r.mul(r.pow(e.a,B_),wX),u=r.mul(r.sqr(e.b),BigInt(27));if(r.is0(r.add(c,u)))throw new Error("bad curve params: a or b");function l(w){return hI(w,xr,e.n)}function d(w){const{allowedPrivateKeyLengths:m,nByteLength:_,wrapPrivateKey:C,n:I}=e;if(m&&typeof w!="bigint"){if(o0(w)&&(w=Up(w)),typeof w!="string"||!m.includes(w.length))throw new Error("invalid private key");w=w.padStart(_*2,"0")}let P;try{P=typeof w=="bigint"?w:Pu(xs("private key",w,_))}catch{throw new Error("invalid private key, expected hex or "+_+" bytes, got "+typeof w)}return C&&(P=Mn(P,I)),nd("private key",P,xr,I),P}function f(w){if(!(w instanceof h))throw new Error("ProjectivePoint expected")}const g=GP((w,m)=>{const{px:_,py:C,pz:I}=w;if(r.eql(I,r.ONE))return{x:_,y:C};const P=w.is0();m==null&&(m=P?r.ONE:r.inv(I));const T=r.mul(_,m),R=r.mul(C,m),U=r.mul(I,m);if(P)return{x:r.ZERO,y:r.ZERO};if(!r.eql(U,r.ONE))throw new Error("invZ was invalid");return{x:T,y:R}}),p=GP(w=>{if(w.is0()){if(e.allowInfinityPoint&&!r.is0(w.py))return;throw new Error("bad point: ZERO")}const{x:m,y:_}=w.toAffine();if(!r.isValid(m)||!r.isValid(_))throw new Error("bad point: x or y not FE");if(!a(m,_))throw new Error("bad point: equation left != right");if(!w.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(m,_,C){if(m==null||!r.isValid(m))throw new Error("x required");if(_==null||!r.isValid(_)||r.is0(_))throw new Error("y required");if(C==null||!r.isValid(C))throw new Error("z required");this.px=m,this.py=_,this.pz=C,Object.freeze(this)}static fromAffine(m){const{x:_,y:C}=m||{};if(!m||!r.isValid(_)||!r.isValid(C))throw new Error("invalid affine point");if(m instanceof h)throw new Error("projective point not allowed");const I=P=>r.eql(P,r.ZERO);return I(_)&&I(C)?h.ZERO:new h(_,C,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const _=PU(r,m.map(C=>C.pz));return m.map((C,I)=>C.toAffine(_[I])).map(h.fromAffine)}static fromHex(m){const _=h.fromAffine(i(xs("pointHex",m)));return _.assertValidity(),_}static fromPrivateKey(m){return h.BASE.multiply(d(m))}static msm(m,_){return mX(h,n,m,_)}_setWindowSize(m){E.setWindowSize(this,m)}assertValidity(){p(this)}hasEvenY(){const{y:m}=this.toAffine();if(r.isOdd)return!r.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){f(m);const{px:_,py:C,pz:I}=this,{px:P,py:T,pz:R}=m,U=r.eql(r.mul(_,R),r.mul(P,I)),k=r.eql(r.mul(C,R),r.mul(T,I));return U&&k}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:m,b:_}=e,C=r.mul(_,B_),{px:I,py:P,pz:T}=this;let R=r.ZERO,U=r.ZERO,k=r.ZERO,O=r.mul(I,I),B=r.mul(P,P),v=r.mul(T,T),A=r.mul(I,P);return A=r.add(A,A),k=r.mul(I,T),k=r.add(k,k),R=r.mul(m,k),U=r.mul(C,v),U=r.add(R,U),R=r.sub(B,U),U=r.add(B,U),U=r.mul(R,U),R=r.mul(A,R),k=r.mul(C,k),v=r.mul(m,v),A=r.sub(O,v),A=r.mul(m,A),A=r.add(A,k),k=r.add(O,O),O=r.add(k,O),O=r.add(O,v),O=r.mul(O,A),U=r.add(U,O),v=r.mul(P,T),v=r.add(v,v),O=r.mul(v,A),R=r.sub(R,O),k=r.mul(v,B),k=r.add(k,k),k=r.add(k,k),new h(R,U,k)}add(m){f(m);const{px:_,py:C,pz:I}=this,{px:P,py:T,pz:R}=m;let U=r.ZERO,k=r.ZERO,O=r.ZERO;const B=e.a,v=r.mul(e.b,B_);let A=r.mul(_,P),S=r.mul(C,T),j=r.mul(I,R),N=r.add(_,C),x=r.add(P,T);N=r.mul(N,x),x=r.add(A,S),N=r.sub(N,x),x=r.add(_,I);let D=r.add(P,R);return x=r.mul(x,D),D=r.add(A,j),x=r.sub(x,D),D=r.add(C,I),U=r.add(T,R),D=r.mul(D,U),U=r.add(S,j),D=r.sub(D,U),O=r.mul(B,x),U=r.mul(v,j),O=r.add(U,O),U=r.sub(S,O),O=r.add(S,O),k=r.mul(U,O),S=r.add(A,A),S=r.add(S,A),j=r.mul(B,j),x=r.mul(v,x),S=r.add(S,j),j=r.sub(A,j),j=r.mul(B,j),x=r.add(x,j),A=r.mul(S,x),k=r.add(k,A),A=r.mul(D,x),U=r.mul(N,U),U=r.sub(U,A),A=r.mul(N,S),O=r.mul(D,O),O=r.add(O,A),new h(U,k,O)}subtract(m){return this.add(m.negate())}is0(){return this.equals(h.ZERO)}wNAF(m){return E.wNAFCached(this,m,h.normalizeZ)}multiplyUnsafe(m){const{endo:_,n:C}=e;nd("scalar",m,Fo,C);const I=h.ZERO;if(m===Fo)return I;if(this.is0()||m===xr)return this;if(!_||E.hasPrecomputes(this))return E.wNAFCachedUnsafe(this,m,h.normalizeZ);let{k1neg:P,k1:T,k2neg:R,k2:U}=_.splitScalar(m),k=I,O=I,B=this;for(;T>Fo||U>Fo;)T&xr&&(k=k.add(B)),U&xr&&(O=O.add(B)),B=B.double(),T>>=xr,U>>=xr;return P&&(k=k.negate()),R&&(O=O.negate()),O=new h(r.mul(O.px,_.beta),O.py,O.pz),k.add(O)}multiply(m){const{endo:_,n:C}=e;nd("scalar",m,xr,C);let I,P;if(_){const{k1neg:T,k1:R,k2neg:U,k2:k}=_.splitScalar(m);let{p:O,f:B}=this.wNAF(R),{p:v,f:A}=this.wNAF(k);O=E.constTimeNegate(T,O),v=E.constTimeNegate(U,v),v=new h(r.mul(v.px,_.beta),v.py,v.pz),I=O.add(v),P=B.add(A)}else{const{p:T,f:R}=this.wNAF(m);I=T,P=R}return h.normalizeZ([I,P])[0]}multiplyAndAddUnsafe(m,_,C){const I=h.BASE,P=(R,U)=>U===Fo||U===xr||!R.equals(I)?R.multiplyUnsafe(U):R.multiply(U),T=P(this,_).add(P(m,C));return T.is0()?void 0:T}toAffine(m){return g(this,m)}isTorsionFree(){const{h:m,isTorsionFree:_}=e;if(m===xr)return!0;if(_)return _(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:_}=e;return m===xr?this:_?_(h,this):this.multiplyUnsafe(e.h)}toRawBytes(m=!0){return Dp("isCompressed",m),this.assertValidity(),s(h,this,m)}toHex(m=!0){return Dp("isCompressed",m),Up(this.toRawBytes(m))}}h.BASE=new h(e.Gx,e.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const{endo:y,nBitLength:b}=e,E=gX(h,y?Math.ceil(b/2):b);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:l}}function vX(t){const e=BU(t);return AE(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function _X(t){const e=vX(t),{Fp:r,n,nByteLength:s,nBitLength:i}=e,o=r.BYTES+1,a=2*r.BYTES+1;function c(v){return Mn(v,n)}function u(v){return U2(v,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:d,weierstrassEquation:f,isWithinCurveOrder:g}=EX({...e,toBytes(v,A,S){const j=A.toAffine(),N=r.toBytes(j.x),x=L1;return Dp("isCompressed",S),S?x(Uint8Array.from([A.hasEvenY()?2:3]),N):x(Uint8Array.from([4]),N,r.toBytes(j.y))},fromBytes(v){const A=v.length,S=v[0],j=v.subarray(1);if(A===o&&(S===2||S===3)){const N=Pu(j);if(!hI(N,xr,r.ORDER))throw new Error("Point is not on curve");const x=f(N);let D;try{D=r.sqrt(x)}catch(F){const q=F instanceof Error?": "+F.message:"";throw new Error("Point is not on curve"+q)}const M=(D&xr)===xr;return(S&1)===1!==M&&(D=r.neg(D)),{x:N,y:D}}else if(A===a&&S===4){const N=r.fromBytes(j.subarray(0,r.BYTES)),x=r.fromBytes(j.subarray(r.BYTES,2*r.BYTES));return{x:N,y:x}}else{const N=o,x=a;throw new Error("invalid Point, expected length of "+N+", or uncompressed "+x+", got "+A)}}});function p(v){const A=n>>xr;return v>A}function h(v){return p(v)?c(-v):v}const y=(v,A,S)=>Pu(v.slice(A,S));class b{constructor(A,S,j){nd("r",A,xr,n),nd("s",S,xr,n),this.r=A,this.s=S,j!=null&&(this.recovery=j),Object.freeze(this)}static fromCompact(A){const S=s;return A=xs("compactSignature",A,S*2),new b(y(A,0,S),y(A,S,2*S))}static fromDER(A){const{r:S,s:j}=Do.toSig(xs("DER",A));return new b(S,j)}assertValidity(){}addRecoveryBit(A){return new b(this.r,this.s,A)}recoverPublicKey(A){const{r:S,s:j,recovery:N}=this,x=I(xs("msgHash",A));if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");const D=N===2||N===3?S+e.n:S;if(D>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const M=(N&1)===0?"02":"03",L=l.fromHex(M+k_(D,r.BYTES)),F=u(D),q=c(-x*F),$=c(j*F),V=l.BASE.multiplyAndAddUnsafe(L,q,$);if(!V)throw new Error("point at infinify");return V.assertValidity(),V}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return M1(this.toDERHex())}toDERHex(){return Do.hexFromSig(this)}toCompactRawBytes(){return M1(this.toCompactHex())}toCompactHex(){const A=s;return k_(this.r,A)+k_(this.s,A)}}const E={isValidPrivateKey(v){try{return d(v),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const v=RU(e.n);return fX(e.randomBytes(v),e.n)},precompute(v=8,A=l.BASE){return A._setWindowSize(v),A.multiply(BigInt(3)),A}};function w(v,A=!0){return l.fromPrivateKey(v).toRawBytes(A)}function m(v){if(typeof v=="bigint")return!1;if(v instanceof l)return!0;const S=xs("key",v).length,j=r.BYTES,N=j+1,x=2*j+1;if(!(e.allowedPrivateKeyLengths||s===N))return S===N||S===x}function _(v,A,S=!0){if(m(v)===!0)throw new Error("first arg must be private key");if(m(A)===!1)throw new Error("second arg must be public key");return l.fromHex(A).multiply(d(v)).toRawBytes(S)}const C=e.bits2int||function(v){if(v.length>8192)throw new Error("input is too large");const A=Pu(v),S=v.length*8-i;return S>0?A>>BigInt(S):A},I=e.bits2int_modN||function(v){return c(C(v))},P=_E(i);function T(v){return nd("num < 2^"+i,v,Fo,P),a0(v,s)}function R(v,A,S=U){if(["recovered","canonical"].some(Y=>Y in S))throw new Error("sign() legacy options not supported");const{hash:j,randomBytes:N}=e;let{lowS:x,prehash:D,extraEntropy:M}=S;x==null&&(x=!0),v=xs("msgHash",v),r6(S),D&&(v=xs("prehashed msgHash",j(v)));const L=I(v),F=d(A),q=[T(F),T(L)];if(M!=null&&M!==!1){const Y=M===!0?N(r.BYTES):M;q.push(xs("extraEntropy",Y))}const $=L1(...q),V=L;function J(Y){const Z=C(Y);if(!g(Z))return;const ee=u(Z),le=l.BASE.multiply(Z).toAffine(),X=c(le.x);if(X===Fo)return;const se=c(ee*c(V+X*F));if(se===Fo)return;let fe=(le.x===X?0:2)|Number(le.y&xr),Oe=se;return x&&p(se)&&(Oe=h(se),fe^=1),new b(X,Oe,fe)}return{seed:$,k2sig:J}}const U={lowS:e.lowS,prehash:!1},k={lowS:e.lowS,prehash:!1};function O(v,A,S=U){const{seed:j,k2sig:N}=R(v,A,S),x=e;return EQ(x.hash.outputLen,x.nByteLength,x.hmac)(j,N)}l.BASE._setWindowSize(8);function B(v,A,S,j=k){const N=v;A=xs("msgHash",A),S=xs("publicKey",S);const{lowS:x,prehash:D,format:M}=j;if(r6(j),"strict"in j)throw new Error("options.strict was renamed to lowS");if(M!==void 0&&M!=="compact"&&M!=="der")throw new Error("format must be compact or der");const L=typeof N=="string"||o0(N),F=!L&&!M&&typeof N=="object"&&N!==null&&typeof N.r=="bigint"&&typeof N.s=="bigint";if(!L&&!F)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let q,$;try{if(F&&(q=new b(N.r,N.s)),L){try{M!=="compact"&&(q=b.fromDER(N))}catch(fe){if(!(fe instanceof Do.Err))throw fe}!q&&M!=="der"&&(q=b.fromCompact(N))}$=l.fromHex(S)}catch{return!1}if(!q||x&&q.hasHighS())return!1;D&&(A=e.hash(A));const{r:V,s:J}=q,Y=I(A),Z=u(J),ee=c(Y*Z),le=c(V*Z),X=l.BASE.multiplyAndAddUnsafe($,ee,le)?.toAffine();return X?c(X.x)===V:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:_,sign:O,verify:B,ProjectivePoint:l,Signature:b,utils:E}}function AX(t){return{hash:t,hmac:(e,...r)=>AU(t,e,GJ(...r)),randomBytes:WJ}}function CX(t,e){const r=n=>_X({...t,...AX(n)});return{...r(e),create:r}}const jU=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n6=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),IX=BigInt(0),SX=BigInt(1),L2=BigInt(2),s6=(t,e)=>(t+e/L2)/e;function TX(t){const e=jU,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,d=Cs(l,r,e)*l%e,f=Cs(d,r,e)*l%e,g=Cs(f,L2,e)*u%e,p=Cs(g,s,e)*g%e,h=Cs(p,i,e)*p%e,y=Cs(h,a,e)*h%e,b=Cs(y,c,e)*y%e,E=Cs(b,a,e)*h%e,w=Cs(E,r,e)*l%e,m=Cs(w,o,e)*p%e,_=Cs(m,n,e)*u%e,C=Cs(_,L2,e);if(!F2.eql(F2.sqr(C),t))throw new Error("Cannot find square root");return C}const F2=mI(jU,void 0,void 0,{sqrt:TX}),PX=CX({a:IX,b:BigInt(7),Fp:F2,n:n6,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=n6,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-SX*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),a=s6(i*t,e),c=s6(-n*t,e);let u=Mn(t-a*r-c*s,e),l=Mn(-a*n-c*i,e);const d=u>o,f=l>o;if(d&&(u=e-u),f&&(l=e-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:u,k2neg:f,k2:l}}}},yQ);function NX(t){if(t.length!==130&&t.length!==132)throw new RX({signature:t});const e=BigInt(ko(t,0,32)),r=BigInt(ko(t,32,64)),n=(()=>{const s=+`0x${t.slice(130)}`;if(!Number.isNaN(s))try{return OX(s)}catch{throw new xX({value:s})}})();return typeof n>"u"?{r:e,s:r}:{r:e,s:r,yParity:n}}function OX(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new kX({value:t})}class RX extends Xt{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${Xa(gI(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class xX extends Xt{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class kX extends Xt{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}function BX(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function DU(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(r=>typeof r=="string"):e.every(r=>Number.isSafeInteger(r)):!1}function q1(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function yI(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function q2(t){if(!Array.isArray(t))throw new Error("array expected")}function H1(t,e){if(!DU(!0,e))throw new Error(`${t}: array of strings expected`)}function jX(t,e){if(!DU(!1,e))throw new Error(`${t}: array of numbers expected`)}function DX(...t){const e=i=>i,r=(i,o)=>a=>i(o(a)),n=t.map(i=>i.encode).reduceRight(r,e),s=t.map(i=>i.decode).reduce(r,e);return{encode:n,decode:s}}function UX(t){const e=typeof t=="string"?t.split(""):t,r=e.length;H1("alphabet",e);const n=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(q2(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=r)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(q2(s),s.map(i=>{q1("alphabet.decode",i);const o=n.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function MX(t=""){return q1("join",t),{encode:e=>(H1("join.decode",e),e.join(t)),decode:e=>(q1("join.decode",e),e.split(t))}}function LX(t,e="="){return yI(t),q1("padding",e),{encode(r){for(H1("padding.encode",r);r.length*t%8;)r.push(e);return r},decode(r){H1("padding.decode",r);let n=r.length;if(n*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===e;n--)if((n-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}const UU=(t,e)=>e===0?t:UU(e,t%e),z1=(t,e)=>t+(e-UU(t,e)),j_=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function i6(t,e,r,n){if(q2(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(z1(e,r)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${r} carryBits=${z1(e,r)}`);let s=0,i=0;const o=j_[e],a=j_[r]-1,c=[];for(const u of t){if(yI(u),u>=o)throw new Error(`convertRadix2: invalid data word=${u} from=${e}`);if(s=s<<e|u,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=r;i-=r)c.push((s>>i-r&a)>>>0);const l=j_[i];if(l===void 0)throw new Error("invalid carry");s&=l-1}if(s=s<<r-i&a,!n&&i>=e)throw new Error("Excess padding");if(!n&&s>0)throw new Error(`Non-zero padding: ${s}`);return n&&i>0&&c.push(s>>>0),c}function FX(t,e=!1){if(yI(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(z1(8,t)>32||z1(t,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!BX(r))throw new Error("radix2.encode input should be Uint8Array");return i6(Array.from(r),8,t,!e)},decode:r=>(jX("radix2.decode",r),Uint8Array.from(i6(r,t,8,e)))}}const qX=DX(FX(5),UX("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),LX(5),MX(""));function HX(t){return rX(zX(t))}function zX(t){const{payload:e,signature:r}=t,{r:n,s,yParity:i}=r,a=new PX.Signature(BigInt(n),BigInt(s)).addRecoveryBit(i).recoverPublicKey(gI(e).substring(2));return WQ(a)}function $X(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let u=0;u<e.length;u++)e[u]=255;for(let u=0;u<t.length;u++){const l=t.charAt(u),d=l.charCodeAt(0);if(e[d]!==255)throw new TypeError(l+" is ambiguous");e[d]=u}const r=t.length,n=t.charAt(0),s=Math.log(r)/Math.log(256),i=Math.log(256)/Math.log(r);function o(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let l=0,d=0,f=0;const g=u.length;for(;f!==g&&u[f]===0;)f++,l++;const p=(g-f)*i+1>>>0,h=new Uint8Array(p);for(;f!==g;){let E=u[f],w=0;for(let m=p-1;(E!==0||w<d)&&m!==-1;m--,w++)E+=256*h[m]>>>0,h[m]=E%r>>>0,E=E/r>>>0;if(E!==0)throw new Error("Non-zero carry");d=w,f++}let y=p-d;for(;y!==p&&h[y]===0;)y++;let b=n.repeat(l);for(;y<p;++y)b+=t.charAt(h[y]);return b}function a(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let l=0,d=0,f=0;for(;u[l]===n;)d++,l++;const g=(u.length-l)*s+1>>>0,p=new Uint8Array(g);for(;l<u.length;){const E=u.charCodeAt(l);if(E>255)return;let w=e[E];if(w===255)return;let m=0;for(let _=g-1;(w!==0||m<f)&&_!==-1;_--,m++)w+=r*p[_]>>>0,p[_]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");f=m,l++}let h=g-f;for(;h!==g&&p[h]===0;)h++;const y=new Uint8Array(d+(g-h));let b=d;for(;h!==g;)y[b++]=p[h++];return y}function c(u){const l=a(u);if(l)return l;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var VX="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Fd=$X(VX);function GX(t){const e=t.length;let r=0,n=0;for(;n<e;){let s=t.charCodeAt(n++);if((s&4294967168)===0){r++;continue}else if((s&4294965248)===0)r+=2;else{if(s>=55296&&s<=56319&&n<e){const i=t.charCodeAt(n);(i&64512)===56320&&(++n,s=((s&1023)<<10)+(i&1023)+65536)}(s&4294901760)===0?r+=3:r+=4}}return r}function WX(t,e,r){const n=t.length;let s=r,i=0;for(;i<n;){let o=t.charCodeAt(i++);if((o&4294967168)===0){e[s++]=o;continue}else if((o&4294965248)===0)e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<n){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}(o&4294901760)===0?(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128):(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128)}e[s++]=o&63|128}}const KX=new TextEncoder,ZX=50;function YX(t,e,r){KX.encodeInto(t,e.subarray(r))}function JX(t,e,r){t.length>ZX?YX(t,e,r):WX(t,e,r)}const QX=4096;function MU(t,e,r){let n=e;const s=n+r,i=[];let o="";for(;n<s;){const a=t[n++];if((a&128)===0)i.push(a);else if((a&224)===192){const c=t[n++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[n++]&63,u=t[n++]&63;i.push((a&31)<<12|c<<6|u)}else if((a&248)===240){const c=t[n++]&63,u=t[n++]&63,l=t[n++]&63;let d=(a&7)<<18|c<<12|u<<6|l;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=QX&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const XX=new TextDecoder,eee=200;function tee(t,e,r){const n=t.subarray(e,e+r);return XX.decode(n)}function ree(t,e,r){return r>eee?tee(t,e,r):MU(t,e,r)}class wg{constructor(e,r){this.type=e,this.data=r}}class ps extends Error{constructor(e){super(e);const r=Object.create(ps.prototype);Object.setPrototypeOf(this,r),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:ps.name})}}const hf=4294967295;function nee(t,e,r){const n=r/4294967296,s=r;t.setUint32(e,n),t.setUint32(e+4,s)}function LU(t,e,r){const n=Math.floor(r/4294967296),s=r;t.setUint32(e,n),t.setUint32(e+4,s)}function FU(t,e){const r=t.getInt32(e),n=t.getUint32(e+4);return r*4294967296+n}function see(t,e){const r=t.getUint32(e),n=t.getUint32(e+4);return r*4294967296+n}const iee=-1,oee=4294967296-1,aee=17179869184-1;function cee({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=aee)if(e===0&&t<=oee){const r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,t),r}else{const r=t/4294967296,n=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|r&3),i.setUint32(4,n),s}else{const r=new Uint8Array(12),n=new DataView(r.buffer);return n.setUint32(0,e),LU(n,4,t),r}}function uee(t){const e=t.getTime(),r=Math.floor(e/1e3),n=(e-r*1e3)*1e6,s=Math.floor(n/1e9);return{sec:r+s,nsec:n-s*1e9}}function lee(t){if(t instanceof Date){const e=uee(t);return cee(e)}else return null}function dee(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const r=e.getUint32(0),n=e.getUint32(4),s=(r&3)*4294967296+n,i=r>>>2;return{sec:s,nsec:i}}case 12:{const r=FU(e,4),n=e.getUint32(0);return{sec:r,nsec:n}}default:throw new ps(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function fee(t){const e=dee(t);return new Date(e.sec*1e3+e.nsec/1e6)}const hee={type:iee,encode:lee,decode:fee};class $1{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(hee)}register({type:e,encode:r,decode:n}){if(e>=0)this.encoders[e]=r,this.decoders[e]=n;else{const s=-1-e;this.builtInEncoders[s]=r,this.builtInDecoders[s]=n}}tryToEncode(e,r){for(let n=0;n<this.builtInEncoders.length;n++){const s=this.builtInEncoders[n];if(s!=null){const i=s(e,r);if(i!=null){const o=-1-n;return new wg(o,i)}}}for(let n=0;n<this.encoders.length;n++){const s=this.encoders[n];if(s!=null){const i=s(e,r);if(i!=null){const o=n;return new wg(o,i)}}}return e instanceof wg?e:null}decode(e,r,n){const s=r<0?this.builtInDecoders[-1-r]:this.decoders[r];return s?s(e,r,n):new wg(r,e)}}$1.defaultCodec=new $1;function pee(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function H2(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):pee(t)?new Uint8Array(t):Uint8Array.from(t)}const gee=100,mee=2048;let yee=class qU{constructor(e){this.entered=!1,this.extensionCodec=e?.extensionCodec??$1.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??gee,this.initialBufferSize=e?.initialBufferSize??mee,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new qU({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,r){if(r>this.maxDepth)throw new Error(`Too deep objects in depth ${r}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,r)}ensureBufferSizeToWrite(e){const r=this.pos+e;this.view.byteLength<r&&this.resizeBuffer(r*2)}resizeBuffer(e){const r=new ArrayBuffer(e),n=new Uint8Array(r),s=new DataView(r);n.set(this.bytes),this.view=s,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const n=GX(e);this.ensureBufferSizeToWrite(5+n),this.writeStringHeader(n),JX(e,this.bytes,this.pos),this.pos+=n}encodeObject(e,r){const n=this.extensionCodec.tryToEncode(e,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,r);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,r);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const r=e.byteLength;if(r<256)this.writeU8(196),this.writeU8(r);else if(r<65536)this.writeU8(197),this.writeU16(r);else if(r<4294967296)this.writeU8(198),this.writeU32(r);else throw new Error(`Too large binary: ${r}`);const n=H2(e);this.writeU8a(n)}encodeArray(e,r){const n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error(`Too large array: ${n}`);for(const s of e)this.doEncode(s,r+1)}countWithoutUndefined(e,r){let n=0;for(const s of r)e[s]!==void 0&&n++;return n}encodeMap(e,r){const n=Object.keys(e);this.sortKeys&&n.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of n){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,r+1))}}encodeExtension(e){if(typeof e.data=="function"){const n=e.data(this.pos+6),s=n.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(n);return}const r=e.data.length;if(r===1)this.writeU8(212);else if(r===2)this.writeU8(213);else if(r===4)this.writeU8(214);else if(r===8)this.writeU8(215);else if(r===16)this.writeU8(216);else if(r<256)this.writeU8(199),this.writeU8(r);else if(r<65536)this.writeU8(200),this.writeU16(r);else if(r<4294967296)this.writeU8(201),this.writeU32(r);else throw new Error(`Too large extension object: ${r}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const r=e.length;this.ensureBufferSizeToWrite(r),this.bytes.set(e,this.pos),this.pos+=r}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),nee(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),LU(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function bee(t,e){return new yee(e).encodeSharedRef(t)}function D_(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const wee=16,Eee=16;class vee{constructor(e=wee,r=Eee){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=r,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,r,n){const s=this.caches[n-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<n;a++)if(o[a]!==e[r+a])continue e;return i.str}return null}store(e,r){const n=this.caches[e.length-1],s={bytes:e,str:r};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=s:n.push(s)}decode(e,r,n){const s=this.find(e,r,n);if(s!=null)return this.hit++,s;this.miss++;const i=MU(e,r,n),o=Uint8Array.prototype.slice.call(e,r,r+n);return this.store(o,i),i}}const z2="array",qh="map_key",HU="map_value",_ee=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new ps("The type of key must be string or number but "+typeof t)};class Aee{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const r=this.getUninitializedStateFromPool();r.type=z2,r.position=0,r.size=e,r.array=new Array(e)}pushMapState(e){const r=this.getUninitializedStateFromPool();r.type=qh,r.readCount=0,r.size=e,r.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===z2){const n=e;n.size=0,n.array=void 0,n.position=0,n.type=void 0}if(e.type===qh||e.type===HU){const n=e;n.size=0,n.map=void 0,n.readCount=0,n.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const pf=-1,bI=new DataView(new ArrayBuffer(0)),Cee=new Uint8Array(bI.buffer);try{bI.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const o6=new RangeError("Insufficient data"),Iee=new vee;let See=class zU{constructor(e){this.totalPos=0,this.pos=0,this.view=bI,this.bytes=Cee,this.headByte=pf,this.stack=new Aee,this.entered=!1,this.extensionCodec=e?.extensionCodec??$1.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??hf,this.maxBinLength=e?.maxBinLength??hf,this.maxArrayLength=e?.maxArrayLength??hf,this.maxMapLength=e?.maxMapLength??hf,this.maxExtLength=e?.maxExtLength??hf,this.keyDecoder=e?.keyDecoder!==void 0?e.keyDecoder:Iee,this.mapKeyConverter=e?.mapKeyConverter??_ee}clone(){return new zU({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=pf,this.stack.reset()}setBuffer(e){const r=H2(e);this.bytes=r,this.view=new DataView(r.buffer,r.byteOffset,r.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===pf&&!this.hasRemaining(1))this.setBuffer(e);else{const r=this.bytes.subarray(this.pos),n=H2(e),s=new Uint8Array(r.length+n.length);s.set(r),s.set(n,r.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:r,pos:n}=this;return new RangeError(`Extra ${r.byteLength-n} of ${r.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const r=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return r}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let r=!1,n;for await(const a of e){if(r)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{n=this.doDecodeSync(),r=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(r){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return n}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${D_(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,r){if(this.entered){yield*this.clone().decodeMultiAsync(e,r);return}try{this.entered=!0;let n=r,s=-1;for await(const i of e){if(r&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),n&&(s=this.readArraySize(),n=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let r;if(e>=224)r=e-256;else if(e<192)if(e<128)r=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else{const s=e-160;r=this.decodeString(s,0)}else if(e===192)r=null;else if(e===194)r=!1;else if(e===195)r=!0;else if(e===202)r=this.readF32();else if(e===203)r=this.readF64();else if(e===204)r=this.readU8();else if(e===205)r=this.readU16();else if(e===206)r=this.readU32();else if(e===207)this.useBigInt64?r=this.readU64AsBigInt():r=this.readU64();else if(e===208)r=this.readI8();else if(e===209)r=this.readI16();else if(e===210)r=this.readI32();else if(e===211)this.useBigInt64?r=this.readI64AsBigInt():r=this.readI64();else if(e===217){const s=this.lookU8();r=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();r=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();r=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else r=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else r={}}else if(e===196){const s=this.lookU8();r=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();r=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();r=this.decodeBinary(s,4)}else if(e===212)r=this.decodeExtension(1,0);else if(e===213)r=this.decodeExtension(2,0);else if(e===214)r=this.decodeExtension(4,0);else if(e===215)r=this.decodeExtension(8,0);else if(e===216)r=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();r=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();r=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();r=this.decodeExtension(s,4)}else throw new ps(`Unrecognized type byte: ${D_(e)}`);this.complete();const n=this.stack;for(;n.length>0;){const s=n.top();if(s.type===z2)if(s.array[s.position]=r,s.position++,s.position===s.size)r=s.array,n.release(s);else continue e;else if(s.type===qh){if(r==="__proto__")throw new ps("The key __proto__ is not allowed");s.key=this.mapKeyConverter(r),s.type=HU;continue e}else if(s.map[s.key]=r,s.readCount++,s.readCount===s.size)r=s.map,n.release(s);else{s.key=null,s.type=qh;continue e}}return r}}readHeadByte(){return this.headByte===pf&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=pf}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new ps(`Unrecognized array type byte: ${D_(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new ps(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new ps(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,r){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,r):this.decodeBinary(e,r)}decodeUtf8String(e,r){if(e>this.maxStrLength)throw new ps(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+r+e)throw o6;const n=this.pos+r;let s;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?s=this.keyDecoder.decode(this.bytes,n,e):s=ree(this.bytes,n,e),this.pos+=r+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===qh:!1}decodeBinary(e,r){if(e>this.maxBinLength)throw new ps(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+r))throw o6;const n=this.pos+r,s=this.bytes.subarray(n,n+e);return this.pos+=r+e,s}decodeExtension(e,r){if(e>this.maxExtLength)throw new ps(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const n=this.view.getInt8(this.pos+r),s=this.decodeBinary(e,r+1);return this.extensionCodec.decode(s,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=see(this.view,this.pos);return this.pos+=8,e}readI64(){const e=FU(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function Tee(t,e){return new See(e).decode(t)}function wI(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function $U(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?wI(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Hh(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const r=$U(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return wI(r)}function Pee(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var h=0,y=0,b=0,E=p.length;b!==E&&p[b]===0;)b++,h++;for(var w=(E-b)*l+1>>>0,m=new Uint8Array(w);b!==E;){for(var _=p[b],C=0,I=w-1;(_!==0||C<y)&&I!==-1;I--,C++)_+=256*m[I]>>>0,m[I]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=C,b++}for(var P=w-y;P!==w&&m[P]===0;)P++;for(var T=c.repeat(h);P<w;++P)T+=t.charAt(m[P]);return T}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var h=0;if(p[h]!==" "){for(var y=0,b=0;p[h]===c;)y++,h++;for(var E=(p.length-h)*u+1>>>0,w=new Uint8Array(E);p[h];){var m=r[p.charCodeAt(h)];if(m===255)return;for(var _=0,C=E-1;(m!==0||_<b)&&C!==-1;C--,_++)m+=a*w[C]>>>0,w[C]=m%256>>>0,m=m/256>>>0;if(m!==0)throw new Error("Non-zero carry");b=_,h++}if(p[h]!==" "){for(var I=E-b;I!==E&&w[I]===0;)I++;for(var P=new Uint8Array(y+(E-I)),T=y;I!==E;)P[T++]=w[I++];return P}}}function g(p){var h=f(p);if(h)return h;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:g}}var Nee=Pee,Oee=Nee;const Ree=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},xee=t=>new TextEncoder().encode(t),kee=t=>new TextDecoder().decode(t);class Bee{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class jee{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return VU(this,e)}}class Dee{constructor(e){this.decoders=e}or(e){return VU(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const VU=(t,e)=>new Dee({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Uee{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new Bee(e,r,n),this.decoder=new jee(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const CE=({name:t,prefix:e,encode:r,decode:n})=>new Uee(t,e,r,n),c0=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=Oee(r,e);return CE({prefix:t,name:e,encode:n,decode:i=>Ree(s(i))})},Mee=(t,e,r,n)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Lee=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Yr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>CE({prefix:e,name:t,encode(s){return Lee(s,n,r)},decode(s){return Mee(s,n,r,t)}}),Fee=CE({prefix:"\0",name:"identity",encode:t=>kee(t),decode:t=>xee(t)}),qee=Object.freeze(Object.defineProperty({__proto__:null,identity:Fee},Symbol.toStringTag,{value:"Module"})),Hee=Yr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),zee=Object.freeze(Object.defineProperty({__proto__:null,base2:Hee},Symbol.toStringTag,{value:"Module"})),$ee=Yr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Vee=Object.freeze(Object.defineProperty({__proto__:null,base8:$ee},Symbol.toStringTag,{value:"Module"})),Gee=c0({prefix:"9",name:"base10",alphabet:"0123456789"}),Wee=Object.freeze(Object.defineProperty({__proto__:null,base10:Gee},Symbol.toStringTag,{value:"Module"})),Kee=Yr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Zee=Yr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Yee=Object.freeze(Object.defineProperty({__proto__:null,base16:Kee,base16upper:Zee},Symbol.toStringTag,{value:"Module"})),Jee=Yr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Qee=Yr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Xee=Yr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ete=Yr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),tte=Yr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),rte=Yr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),nte=Yr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ste=Yr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ite=Yr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),ote=Object.freeze(Object.defineProperty({__proto__:null,base32:Jee,base32hex:tte,base32hexpad:nte,base32hexpadupper:ste,base32hexupper:rte,base32pad:Xee,base32padupper:ete,base32upper:Qee,base32z:ite},Symbol.toStringTag,{value:"Module"})),ate=c0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),cte=c0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),ute=Object.freeze(Object.defineProperty({__proto__:null,base36:ate,base36upper:cte},Symbol.toStringTag,{value:"Module"})),lte=c0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),dte=c0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),fte=Object.freeze(Object.defineProperty({__proto__:null,base58btc:lte,base58flickr:dte},Symbol.toStringTag,{value:"Module"})),hte=Yr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),pte=Yr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),gte=Yr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),mte=Yr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),yte=Object.freeze(Object.defineProperty({__proto__:null,base64:hte,base64pad:pte,base64url:gte,base64urlpad:mte},Symbol.toStringTag,{value:"Module"})),GU=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),bte=GU.reduce((t,e,r)=>(t[r]=e,t),[]),wte=GU.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Ete(t){return t.reduce((e,r)=>(e+=bte[r],e),"")}function vte(t){const e=[];for(const r of t){const n=wte[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const _te=CE({prefix:"ðŸš€",name:"base256emoji",encode:Ete,decode:vte}),Ate=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:_te},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const a6={...qee,...zee,...Vee,...Wee,...Yee,...ote,...ute,...fte,...yte,...Ate};function WU(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const c6=WU("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),U_=WU("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=$U(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),KU={utf8:c6,"utf-8":c6,hex:a6.base16,latin1:U_,ascii:U_,binary:U_,...a6};function Ds(t,e="utf8"){const r=KU[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?wI(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function Gn(t,e="utf8"){const r=KU[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}const Cte={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var M_,u6;function ZU(){if(u6)return M_;u6=1;const t="Input must be an string, Buffer or Uint8Array";function e(o){let a;if(o instanceof Uint8Array)a=o;else if(typeof o=="string")a=new TextEncoder().encode(o);else throw new Error(t);return a}function r(o){return Array.prototype.map.call(o,function(a){return(a<16?"0":"")+a.toString(16)}).join("")}function n(o){return(4294967296+o).toString(16).substring(1)}function s(o,a,c){let u=`
`+o+" = ";for(let l=0;l<a.length;l+=2){if(c===32)u+=n(a[l]).toUpperCase(),u+=" ",u+=n(a[l+1]).toUpperCase();else if(c===64)u+=n(a[l+1]).toUpperCase(),u+=n(a[l]).toUpperCase();else throw new Error("Invalid size "+c);l%6===4?u+=`
`+new Array(o.length+4).join(" "):l<a.length-2&&(u+=" ")}console.log(u)}function i(o,a,c){let u=new Date().getTime();const l=new Uint8Array(a);for(let f=0;f<a;f++)l[f]=f%256;const d=new Date().getTime();console.log("Generated random input in "+(d-u)+"ms"),u=d;for(let f=0;f<c;f++){const g=o(l),p=new Date().getTime(),h=p-u;u=p,console.log("Hashed in "+h+"ms: "+g.substring(0,20)+"..."),console.log(Math.round(a/(1<<20)/(h/1e3)*100)/100+" MB PER SECOND")}}return M_={normalizeInput:e,toHex:r,debugPrint:s,testSpeed:i},M_}var L_,l6;function Ite(){if(l6)return L_;l6=1;const t=ZU();function e(b,E,w){const m=b[E]+b[w];let _=b[E+1]+b[w+1];m>=4294967296&&_++,b[E]=m,b[E+1]=_}function r(b,E,w,m){let _=b[E]+w;w<0&&(_+=4294967296);let C=b[E+1]+m;_>=4294967296&&C++,b[E]=_,b[E+1]=C}function n(b,E){return b[E]^b[E+1]<<8^b[E+2]<<16^b[E+3]<<24}function s(b,E,w,m,_,C){const I=u[_],P=u[_+1],T=u[C],R=u[C+1];e(c,b,E),r(c,b,I,P);let U=c[m]^c[b],k=c[m+1]^c[b+1];c[m]=k,c[m+1]=U,e(c,w,m),U=c[E]^c[w],k=c[E+1]^c[w+1],c[E]=U>>>24^k<<8,c[E+1]=k>>>24^U<<8,e(c,b,E),r(c,b,T,R),U=c[m]^c[b],k=c[m+1]^c[b+1],c[m]=U>>>16^k<<16,c[m+1]=k>>>16^U<<16,e(c,w,m),U=c[E]^c[w],k=c[E+1]^c[w+1],c[E]=k>>>31^U<<1,c[E+1]=U>>>31^k<<1}const i=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],a=new Uint8Array(o.map(function(b){return b*2})),c=new Uint32Array(32),u=new Uint32Array(32);function l(b,E){let w=0;for(w=0;w<16;w++)c[w]=b.h[w],c[w+16]=i[w];for(c[24]=c[24]^b.t,c[25]=c[25]^b.t/4294967296,E&&(c[28]=~c[28],c[29]=~c[29]),w=0;w<32;w++)u[w]=n(b.b,4*w);for(w=0;w<12;w++)s(0,8,16,24,a[w*16+0],a[w*16+1]),s(2,10,18,26,a[w*16+2],a[w*16+3]),s(4,12,20,28,a[w*16+4],a[w*16+5]),s(6,14,22,30,a[w*16+6],a[w*16+7]),s(0,10,20,30,a[w*16+8],a[w*16+9]),s(2,12,22,24,a[w*16+10],a[w*16+11]),s(4,14,16,26,a[w*16+12],a[w*16+13]),s(6,8,18,28,a[w*16+14],a[w*16+15]);for(w=0;w<16;w++)b.h[w]=b.h[w]^c[w]^c[w+16]}const d=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function f(b,E,w,m){if(b===0||b>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(E&&E.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(w&&w.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(m&&m.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const _={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:b};d.fill(0),d[0]=b,E&&(d[1]=E.length),d[2]=1,d[3]=1,w&&d.set(w,32),m&&d.set(m,48);for(let C=0;C<16;C++)_.h[C]=i[C]^n(d,C*4);return E&&(g(_,E),_.c=128),_}function g(b,E){for(let w=0;w<E.length;w++)b.c===128&&(b.t+=b.c,l(b,!1),b.c=0),b.b[b.c++]=E[w]}function p(b){for(b.t+=b.c;b.c<128;)b.b[b.c++]=0;l(b,!0);const E=new Uint8Array(b.outlen);for(let w=0;w<b.outlen;w++)E[w]=b.h[w>>2]>>8*(w&3);return E}function h(b,E,w,m,_){w=w||64,b=t.normalizeInput(b),m&&(m=t.normalizeInput(m)),_&&(_=t.normalizeInput(_));const C=f(w,E,m,_);return g(C,b),p(C)}function y(b,E,w,m,_){const C=h(b,E,w,m,_);return t.toHex(C)}return L_={blake2b:h,blake2bHex:y,blake2bInit:f,blake2bUpdate:g,blake2bFinal:p},L_}var F_,d6;function Ste(){if(d6)return F_;d6=1;const t=ZU();function e(p,h){return p[h]^p[h+1]<<8^p[h+2]<<16^p[h+3]<<24}function r(p,h,y,b,E,w){o[p]=o[p]+o[h]+E,o[b]=n(o[b]^o[p],16),o[y]=o[y]+o[b],o[h]=n(o[h]^o[y],12),o[p]=o[p]+o[h]+w,o[b]=n(o[b]^o[p],8),o[y]=o[y]+o[b],o[h]=n(o[h]^o[y],7)}function n(p,h){return p>>>h^p<<32-h}const s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),i=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),o=new Uint32Array(16),a=new Uint32Array(16);function c(p,h){let y=0;for(y=0;y<8;y++)o[y]=p.h[y],o[y+8]=s[y];for(o[12]^=p.t,o[13]^=p.t/4294967296,h&&(o[14]=~o[14]),y=0;y<16;y++)a[y]=e(p.b,4*y);for(y=0;y<10;y++)r(0,4,8,12,a[i[y*16+0]],a[i[y*16+1]]),r(1,5,9,13,a[i[y*16+2]],a[i[y*16+3]]),r(2,6,10,14,a[i[y*16+4]],a[i[y*16+5]]),r(3,7,11,15,a[i[y*16+6]],a[i[y*16+7]]),r(0,5,10,15,a[i[y*16+8]],a[i[y*16+9]]),r(1,6,11,12,a[i[y*16+10]],a[i[y*16+11]]),r(2,7,8,13,a[i[y*16+12]],a[i[y*16+13]]),r(3,4,9,14,a[i[y*16+14]],a[i[y*16+15]]);for(y=0;y<8;y++)p.h[y]^=o[y]^o[y+8]}function u(p,h){if(!(p>0&&p<=32))throw new Error("Incorrect output length, should be in [1, 32]");const y=h?h.length:0;if(h&&!(y>0&&y<=32))throw new Error("Incorrect key length, should be in [1, 32]");const b={h:new Uint32Array(s),b:new Uint8Array(64),c:0,t:0,outlen:p};return b.h[0]^=16842752^y<<8^p,y>0&&(l(b,h),b.c=64),b}function l(p,h){for(let y=0;y<h.length;y++)p.c===64&&(p.t+=p.c,c(p,!1),p.c=0),p.b[p.c++]=h[y]}function d(p){for(p.t+=p.c;p.c<64;)p.b[p.c++]=0;c(p,!0);const h=new Uint8Array(p.outlen);for(let y=0;y<p.outlen;y++)h[y]=p.h[y>>2]>>8*(y&3)&255;return h}function f(p,h,y){y=y||32,p=t.normalizeInput(p);const b=u(y,h);return l(b,p),d(b)}function g(p,h,y){const b=f(p,h,y);return t.toHex(b)}return F_={blake2s:f,blake2sHex:g,blake2sInit:u,blake2sUpdate:l,blake2sFinal:d},F_}var q_,f6;function Tte(){if(f6)return q_;f6=1;const t=Ite(),e=Ste();return q_={blake2b:t.blake2b,blake2bHex:t.blake2bHex,blake2bInit:t.blake2bInit,blake2bUpdate:t.blake2bUpdate,blake2bFinal:t.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},q_}var Pte=Tte(),Nte={};const Ote=":";function Ko(t){const[e,r]=t.split(Ote);return{namespace:e,reference:r}}function YU(t,e){return t.includes(":")?[t]:e.chains||[]}var Rte=Object.defineProperty,xte=Object.defineProperties,kte=Object.getOwnPropertyDescriptors,h6=Object.getOwnPropertySymbols,Bte=Object.prototype.hasOwnProperty,jte=Object.prototype.propertyIsEnumerable,$2=(t,e,r)=>e in t?Rte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,p6=(t,e)=>{for(var r in e||(e={}))Bte.call(e,r)&&$2(t,r,e[r]);if(h6)for(var r of h6(e))jte.call(e,r)&&$2(t,r,e[r]);return t},Dte=(t,e)=>xte(t,kte(e)),g6=(t,e,r)=>$2(t,typeof e!="symbol"?e+"":e,r);const Ute="ReactNative",ws={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Mte="js";function V1(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function nc(){return!ta.getDocument()&&!!ta.getNavigator()&&navigator.product===Ute}function Lte(){return nc()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Fte(){return nc()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function qd(){return!V1()&&!!ta.getNavigator()&&!!ta.getDocument()}function u0(){return nc()?ws.reactNative:V1()?ws.node:qd()?ws.browser:ws.unknown}function m6(){var t;try{return nc()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function qte(t,e){const r=new URLSearchParams(t);return Object.entries(e).sort(([n],[s])=>n.localeCompare(s)).forEach(([n,s])=>{s!=null&&r.set(n,String(s))}),r.toString()}function Hte(t){var e,r;const n=JU();try{return t!=null&&t.url&&n.url&&new URL(t.url).host!==new URL(n.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),t.url=n.url),(e=t?.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),Dte(p6(p6({},n),t),{url:t?.url||n.url,name:t?.name||n.name,description:t?.description||n.description,icons:(r=t?.icons)!=null&&r.length&&t.icons.length>0?t.icons:n.icons})}catch(s){return console.warn("Error populating app metadata",s),t||n}}function JU(){return DJ.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function zte(){if(u0()===ws.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=NJ();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function $te(){var t;const e=u0();return e===ws.browser?[e,((t=ta.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function QU(t,e,r){const n=zte(),s=$te();return[[t,e].join("-"),[Mte,r].join("-"),n,s].join("/")}function Vte({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const u=r.split("?"),l=QU(t,e,n),d={auth:s,ua:l,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},f=qte(u[1]||"",d);return u[0]+"?"+f}function gu(t,e){return t.filter(r=>e.includes(r)).length===t.length}function V2(t){return Object.fromEntries(t.entries())}function G2(t){return new Map(Object.entries(t))}function su(t=pe.FIVE_MINUTES,e){const r=pe.toMiliseconds(t||pe.FIVE_MINUTES);let n,s,i,o;return{resolve:a=>{i&&n&&(clearTimeout(i),n(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const u=new Error(e);o=Promise.reject(u),c(u)},r),n=a,s=c})}}function $i(t,e,r){return new Promise(async(n,s)=>{const i=setTimeout(()=>s(new Error(r)),e);try{const o=await t;n(o)}catch(o){s(o)}clearTimeout(i)})}function XU(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Gte(t){return XU("topic",t)}function Wte(t){return XU("id",t)}function eM(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function wr(t,e){return pe.fromMiliseconds(Date.now()+pe.toMiliseconds(t))}function Li(t){return Date.now()>=pe.toMiliseconds(t)}function Ot(t,e){return`${t}${e?`:${e}`:""}`}function Wi(t=[],e=[]){return[...new Set([...t,...e])]}async function Kte({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const s=typeof r=="string"?JSON.parse(r):r,i=s?.href;if(typeof i!="string")return;const o=Zte(i,t,e),a=u0();if(a===ws.browser){if(!((n=ta.getDocument())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}Yte(o)}else a===ws.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function Zte(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${ere(n,!0)}`}else s=`${s}/wc?${n}`;return s}function Yte(t){let e="_self";Xte()?e="_top":(Qte()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function Jte(t,e){let r="";try{if(qd()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function y6(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function b6(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function EI(){return typeof process<"u"&&Nte.IS_VITEST==="true"}function Qte(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Xte(){try{return window.self!==window.top}catch{return!1}}function ere(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function tM(t){return Buffer.from(t,"base64").toString("utf-8")}function tre(t){return new Promise(e=>setTimeout(e,t))}let rre=class{constructor({limit:e}){g6(this,"limit"),g6(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const r=this.set.values().next().value;r&&this.set.delete(r)}this.set.add(e)}}has(e){return this.set.has(e)}};const Eg=BigInt(2**32-1),w6=BigInt(32);function rM(t,e=!1){return e?{h:Number(t&Eg),l:Number(t>>w6&Eg)}:{h:Number(t>>w6&Eg)|0,l:Number(t&Eg)|0}}function nM(t,e=!1){const r=t.length;let n=new Uint32Array(r),s=new Uint32Array(r);for(let i=0;i<r;i++){const{h:o,l:a}=rM(t[i],e);[n[i],s[i]]=[o,a]}return[n,s]}const E6=(t,e,r)=>t>>>r,v6=(t,e,r)=>t<<32-r|e>>>r,Da=(t,e,r)=>t>>>r|e<<32-r,Ua=(t,e,r)=>t<<32-r|e>>>r,kh=(t,e,r)=>t<<64-r|e>>>r-32,Bh=(t,e,r)=>t>>>r-32|e<<64-r,nre=(t,e)=>e,sre=(t,e)=>t,ire=(t,e,r)=>t<<r|e>>>32-r,ore=(t,e,r)=>e<<r|t>>>32-r,are=(t,e,r)=>e<<r-32|t>>>64-r,cre=(t,e,r)=>t<<r-32|e>>>64-r;function ri(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const vI=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),_I=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,ure=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),lre=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,dre=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),fre=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,gl=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function IE(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ra(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function bi(t,...e){if(!IE(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function SE(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");ra(t.outputLen),ra(t.blockLen)}function ec(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function AI(t,e){bi(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Mp(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Ms(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function H_(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ni(t,e){return t<<32-e|t>>>e}const sM=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function iM(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Oo=sM?t=>t:t=>iM(t);function hre(t){for(let e=0;e<t.length;e++)t[e]=iM(t[e]);return t}const Ma=sM?t=>t:hre,oM=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",pre=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function sd(t){if(bi(t),oM)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=pre[t[r]];return e}const uo={_0:48,_9:57,A:65,F:70,a:97,f:102};function _6(t){if(t>=uo._0&&t<=uo._9)return t-uo._0;if(t>=uo.A&&t<=uo.F)return t-(uo.A-10);if(t>=uo.a&&t<=uo.f)return t-(uo.a-10)}function G1(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(oM)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){const o=_6(t.charCodeAt(i)),a=_6(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function aM(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function mi(t){return typeof t=="string"&&(t=aM(t)),bi(t),t}function qa(...t){let e=0;for(let n=0;n<t.length;n++){const s=t[n];bi(s),e+=s.length}const r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){const i=t[n];r.set(i,s),s+=i.length}return r}let TE=class{};function l0(t){const e=n=>t().update(mi(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function gre(t){const e=(n,s)=>t(s).update(mi(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}function Ju(t=32){if(gl&&typeof gl.getRandomValues=="function")return gl.getRandomValues(new Uint8Array(t));if(gl&&typeof gl.randomBytes=="function")return Uint8Array.from(gl.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const mre=BigInt(0),gf=BigInt(1),yre=BigInt(2),bre=BigInt(7),wre=BigInt(256),Ere=BigInt(113),cM=[],uM=[],lM=[];for(let t=0,e=gf,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],cM.push(2*(5*n+r)),uM.push((t+1)*(t+2)/2%64);let s=mre;for(let i=0;i<7;i++)e=(e<<gf^(e>>bre)*Ere)%wre,e&yre&&(s^=gf<<(gf<<BigInt(i))-gf);lM.push(s)}const dM=nM(lM,!0),vre=dM[0],_re=dM[1],A6=(t,e,r)=>r>32?are(t,e,r):ire(t,e,r),C6=(t,e,r)=>r>32?cre(t,e,r):ore(t,e,r);function Are(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],d=A6(u,l,1)^r[a],f=C6(u,l,1)^r[a+1];for(let g=0;g<50;g+=10)t[o+g]^=d,t[o+g+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=uM[o],c=A6(s,i,a),u=C6(s,i,a),l=cM[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=vre[n],t[1]^=_re[n]}Ms(r)}let Cre=class fM extends TE{constructor(e,r,n,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,ra(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Mp(this.state)}clone(){return this._cloneInto()}keccak(){Ma(this.state32),Are(this.state32,this.rounds),Ma(this.state32),this.posOut=0,this.pos=0}update(e){ec(this),e=mi(e),bi(e);const{blockLen:r,state:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){ec(this,!1),bi(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ra(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(AI(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ms(this.state)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new fM(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Ire=(t,e,r)=>l0(()=>new Cre(e,t,r)),Sre=Ire(1,136,256/8);function Tre(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}function Pre(t,e,r){return t&e^~t&r}function Nre(t,e,r){return t&e^t&r^e&r}let hM=class extends TE{constructor(e,r,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=H_(this.buffer)}update(e){ec(this),e=mi(e),bi(e);const{view:r,buffer:n,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=H_(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ec(this),AI(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,Ms(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;Tre(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=H_(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}};const ba=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),rn=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),nn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Ore=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),wa=new Uint32Array(64);class Rre extends hM{constructor(e=32){super(64,e,8,!1),this.A=ba[0]|0,this.B=ba[1]|0,this.C=ba[2]|0,this.D=ba[3]|0,this.E=ba[4]|0,this.F=ba[5]|0,this.G=ba[6]|0,this.H=ba[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)wa[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const f=wa[d-15],g=wa[d-2],p=Ni(f,7)^Ni(f,18)^f>>>3,h=Ni(g,17)^Ni(g,19)^g>>>10;wa[d]=h+wa[d-7]+p+wa[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=Ni(a,6)^Ni(a,11)^Ni(a,25),g=l+f+Pre(a,c,u)+Ore[d]+wa[d]|0,p=(Ni(n,2)^Ni(n,13)^Ni(n,22))+Nre(n,s,i)|0;l=u,u=c,c=a,a=o+g|0,o=i,i=s,s=n,n=g+p|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){Ms(wa)}destroy(){this.set(0,0,0,0,0,0,0,0),Ms(this.buffer)}}const pM=nM(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),xre=pM[0],kre=pM[1],Ea=new Uint32Array(80),va=new Uint32Array(80);let CI=class extends hM{constructor(e=64){super(128,e,16,!1),this.Ah=nn[0]|0,this.Al=nn[1]|0,this.Bh=nn[2]|0,this.Bl=nn[3]|0,this.Ch=nn[4]|0,this.Cl=nn[5]|0,this.Dh=nn[6]|0,this.Dl=nn[7]|0,this.Eh=nn[8]|0,this.El=nn[9]|0,this.Fh=nn[10]|0,this.Fl=nn[11]|0,this.Gh=nn[12]|0,this.Gl=nn[13]|0,this.Hh=nn[14]|0,this.Hl=nn[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:f,Gh:g,Gl:p,Hh:h,Hl:y}=this;return[e,r,n,s,i,o,a,c,u,l,d,f,g,p,h,y]}set(e,r,n,s,i,o,a,c,u,l,d,f,g,p,h,y){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=f|0,this.Gh=g|0,this.Gl=p|0,this.Hh=h|0,this.Hl=y|0}process(e,r){for(let w=0;w<16;w++,r+=4)Ea[w]=e.getUint32(r),va[w]=e.getUint32(r+=4);for(let w=16;w<80;w++){const m=Ea[w-15]|0,_=va[w-15]|0,C=Da(m,_,1)^Da(m,_,8)^E6(m,_,7),I=Ua(m,_,1)^Ua(m,_,8)^v6(m,_,7),P=Ea[w-2]|0,T=va[w-2]|0,R=Da(P,T,19)^kh(P,T,61)^E6(P,T,6),U=Ua(P,T,19)^Bh(P,T,61)^v6(P,T,6),k=ure(I,U,va[w-7],va[w-16]),O=lre(k,C,R,Ea[w-7],Ea[w-16]);Ea[w]=O|0,va[w]=k|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:f,Fh:g,Fl:p,Gh:h,Gl:y,Hh:b,Hl:E}=this;for(let w=0;w<80;w++){const m=Da(d,f,14)^Da(d,f,18)^kh(d,f,41),_=Ua(d,f,14)^Ua(d,f,18)^Bh(d,f,41),C=d&g^~d&h,I=f&p^~f&y,P=dre(E,_,I,kre[w],va[w]),T=fre(P,b,m,C,xre[w],Ea[w]),R=P|0,U=Da(n,s,28)^kh(n,s,34)^kh(n,s,39),k=Ua(n,s,28)^Bh(n,s,34)^Bh(n,s,39),O=n&i^n&a^i&a,B=s&o^s&c^o&c;b=h|0,E=y|0,h=g|0,y=p|0,g=d|0,p=f|0,{h:d,l:f}=ri(u|0,l|0,T|0,R|0),u=a|0,l=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const v=vI(R,k,B);n=_I(v,T,U,O),s=v|0}({h:n,l:s}=ri(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=ri(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=ri(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=ri(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:f}=ri(this.Eh|0,this.El|0,d|0,f|0),{h:g,l:p}=ri(this.Fh|0,this.Fl|0,g|0,p|0),{h,l:y}=ri(this.Gh|0,this.Gl|0,h|0,y|0),{h:b,l:E}=ri(this.Hh|0,this.Hl|0,b|0,E|0),this.set(n,s,i,o,a,c,u,l,d,f,g,p,h,y,b,E)}roundClean(){Ms(Ea,va)}destroy(){Ms(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};class Bre extends CI{constructor(){super(48),this.Ah=rn[0]|0,this.Al=rn[1]|0,this.Bh=rn[2]|0,this.Bl=rn[3]|0,this.Ch=rn[4]|0,this.Cl=rn[5]|0,this.Dh=rn[6]|0,this.Dl=rn[7]|0,this.Eh=rn[8]|0,this.El=rn[9]|0,this.Fh=rn[10]|0,this.Fl=rn[11]|0,this.Gh=rn[12]|0,this.Gl=rn[13]|0,this.Hh=rn[14]|0,this.Hl=rn[15]|0}}const sn=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class jre extends CI{constructor(){super(32),this.Ah=sn[0]|0,this.Al=sn[1]|0,this.Bh=sn[2]|0,this.Bl=sn[3]|0,this.Ch=sn[4]|0,this.Cl=sn[5]|0,this.Dh=sn[6]|0,this.Dl=sn[7]|0,this.Eh=sn[8]|0,this.El=sn[9]|0,this.Fh=sn[10]|0,this.Fl=sn[11]|0,this.Gh=sn[12]|0,this.Gl=sn[13]|0,this.Hh=sn[14]|0,this.Hl=sn[15]|0}}const PE=l0(()=>new Rre),Dre=l0(()=>new CI),Ure=l0(()=>new Bre),Mre=l0(()=>new jre),Lre=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Sr=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ve=new Uint32Array(32);function _a(t,e,r,n,s,i){const o=s[i],a=s[i+1];let c=ve[2*t],u=ve[2*t+1],l=ve[2*e],d=ve[2*e+1],f=ve[2*r],g=ve[2*r+1],p=ve[2*n],h=ve[2*n+1],y=vI(c,l,o);u=_I(y,u,d,a),c=y|0,{Dh:h,Dl:p}={Dh:h^u,Dl:p^c},{Dh:h,Dl:p}={Dh:nre(h,p),Dl:sre(h)},{h:g,l:f}=ri(g,f,h,p),{Bh:d,Bl:l}={Bh:d^g,Bl:l^f},{Bh:d,Bl:l}={Bh:Da(d,l,24),Bl:Ua(d,l,24)},ve[2*t]=c,ve[2*t+1]=u,ve[2*e]=l,ve[2*e+1]=d,ve[2*r]=f,ve[2*r+1]=g,ve[2*n]=p,ve[2*n+1]=h}function Aa(t,e,r,n,s,i){const o=s[i],a=s[i+1];let c=ve[2*t],u=ve[2*t+1],l=ve[2*e],d=ve[2*e+1],f=ve[2*r],g=ve[2*r+1],p=ve[2*n],h=ve[2*n+1],y=vI(c,l,o);u=_I(y,u,d,a),c=y|0,{Dh:h,Dl:p}={Dh:h^u,Dl:p^c},{Dh:h,Dl:p}={Dh:Da(h,p,16),Dl:Ua(h,p,16)},{h:g,l:f}=ri(g,f,h,p),{Bh:d,Bl:l}={Bh:d^g,Bl:l^f},{Bh:d,Bl:l}={Bh:kh(d,l,63),Bl:Bh(d,l,63)},ve[2*t]=c,ve[2*t+1]=u,ve[2*e]=l,ve[2*e+1]=d,ve[2*r]=f,ve[2*r+1]=g,ve[2*n]=p,ve[2*n+1]=h}function Fre(t,e={},r,n,s){if(ra(r),t<0||t>r)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>r))throw new Error("key length must be undefined or 1.."+r);if(o!==void 0&&o.length!==n)throw new Error("salt must be undefined or "+n);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class qre extends TE{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,ra(e),ra(r),this.blockLen=e,this.outputLen=r,this.buffer=new Uint8Array(e),this.buffer32=Mp(this.buffer)}update(e){ec(this),e=mi(e),bi(e);const{blockLen:r,buffer:n,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===r&&(Ma(s),this.compress(s,0,!1),Ma(s),this.pos=0);const u=Math.min(r-this.pos,i-c),l=o+c;if(u===r&&!(l%4)&&c+u<i){const d=new Uint32Array(a,l,Math.floor((i-c)/4));Ma(d);for(let f=0;c+r<i;f+=s.length,c+=r)this.length+=r,this.compress(d,f,!1);Ma(d);continue}n.set(e.subarray(c,c+u),this.pos),this.pos+=u,this.length+=u,c+=u}return this}digestInto(e){ec(this),AI(e,this);const{pos:r,buffer32:n}=this;this.finished=!0,Ms(this.buffer.subarray(r)),Ma(n),this.compress(n,0,!0),Ma(n);const s=Mp(e);this.get().forEach((i,o)=>s[o]=Oo(i))}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){const{buffer:r,length:n,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(r),e.destroyed=i,e.finished=s,e.length=n,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class Hre extends qre{constructor(e={}){const r=e.dkLen===void 0?64:e.dkLen;super(128,r),this.v0l=Sr[0]|0,this.v0h=Sr[1]|0,this.v1l=Sr[2]|0,this.v1h=Sr[3]|0,this.v2l=Sr[4]|0,this.v2h=Sr[5]|0,this.v3l=Sr[6]|0,this.v3h=Sr[7]|0,this.v4l=Sr[8]|0,this.v4h=Sr[9]|0,this.v5l=Sr[10]|0,this.v5h=Sr[11]|0,this.v6l=Sr[12]|0,this.v6h=Sr[13]|0,this.v7l=Sr[14]|0,this.v7h=Sr[15]|0,Fre(r,e,64,16,16);let{key:n,personalization:s,salt:i}=e,o=0;if(n!==void 0&&(n=mi(n),o=n.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=mi(i);const a=Mp(i);this.v4l^=Oo(a[0]),this.v4h^=Oo(a[1]),this.v5l^=Oo(a[2]),this.v5h^=Oo(a[3])}if(s!==void 0){s=mi(s);const a=Mp(s);this.v6l^=Oo(a[0]),this.v6h^=Oo(a[1]),this.v7l^=Oo(a[2]),this.v7h^=Oo(a[3])}if(n!==void 0){const a=new Uint8Array(this.blockLen);a.set(n),this.update(a)}}get(){let{v0l:e,v0h:r,v1l:n,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:u,v4h:l,v5l:d,v5h:f,v6l:g,v6h:p,v7l:h,v7h:y}=this;return[e,r,n,s,i,o,a,c,u,l,d,f,g,p,h,y]}set(e,r,n,s,i,o,a,c,u,l,d,f,g,p,h,y){this.v0l=e|0,this.v0h=r|0,this.v1l=n|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=u|0,this.v4h=l|0,this.v5l=d|0,this.v5h=f|0,this.v6l=g|0,this.v6h=p|0,this.v7l=h|0,this.v7h=y|0}compress(e,r,n){this.get().forEach((c,u)=>ve[u]=c),ve.set(Sr,16);let{h:s,l:i}=rM(BigInt(this.length));ve[24]=Sr[8]^i,ve[25]=Sr[9]^s,n&&(ve[28]=~ve[28],ve[29]=~ve[29]);let o=0;const a=Lre;for(let c=0;c<12;c++)_a(0,4,8,12,e,r+2*a[o++]),Aa(0,4,8,12,e,r+2*a[o++]),_a(1,5,9,13,e,r+2*a[o++]),Aa(1,5,9,13,e,r+2*a[o++]),_a(2,6,10,14,e,r+2*a[o++]),Aa(2,6,10,14,e,r+2*a[o++]),_a(3,7,11,15,e,r+2*a[o++]),Aa(3,7,11,15,e,r+2*a[o++]),_a(0,5,10,15,e,r+2*a[o++]),Aa(0,5,10,15,e,r+2*a[o++]),_a(1,6,11,12,e,r+2*a[o++]),Aa(1,6,11,12,e,r+2*a[o++]),_a(2,7,8,13,e,r+2*a[o++]),Aa(2,7,8,13,e,r+2*a[o++]),_a(3,4,9,14,e,r+2*a[o++]),Aa(3,4,9,14,e,r+2*a[o++]);this.v0l^=ve[0]^ve[16],this.v0h^=ve[1]^ve[17],this.v1l^=ve[2]^ve[18],this.v1h^=ve[3]^ve[19],this.v2l^=ve[4]^ve[20],this.v2h^=ve[5]^ve[21],this.v3l^=ve[6]^ve[22],this.v3h^=ve[7]^ve[23],this.v4l^=ve[8]^ve[24],this.v4h^=ve[9]^ve[25],this.v5l^=ve[10]^ve[26],this.v5h^=ve[11]^ve[27],this.v6l^=ve[12]^ve[28],this.v6h^=ve[13]^ve[29],this.v7l^=ve[14]^ve[30],this.v7h^=ve[15]^ve[31],Ms(ve)}destroy(){this.destroyed=!0,Ms(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const zre=gre(t=>new Hre(t)),$re="https://rpc.walletconnect.org/v1";function gM(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(Sre(r)).toString("hex")}async function Vre(t,e,r,n,s,i){switch(r.t){case"eip191":return await Gre(t,e,r.s);case"eip1271":return await Wre(t,e,r.s,n,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}function Gre(t,e,r){const n=NX(r);return HX({payload:gM(e),signature:n}).toLowerCase()===t.toLowerCase()}async function Wre(t,e,r,n,s,i){const o=Ko(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",u=r.substring(2),l=(u.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:gM(e)).substring(2),f=a+d+c+l+u,g=await fetch(`${i||$re}/?chainId=${n}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:Kre(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:f},"latest"]})}),{result:p}=await g.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function Kre(){return Date.now()+Math.floor(Math.random()*1e3)}function Zre(t){const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);const n=r[0];if(n===0)throw new Error("No signatures found");const s=1+n*64;if(r.length<s)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Fd.encode(i)}function Yre(t){const e=new Uint8Array(Buffer.from(t,"base64")),r=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),n=new Uint8Array(r.length+e.length);n.set(r),n.set(e,r.length);const s=zre(n,{dkLen:32});return Fd.encode(s)}function I6(t){const e=new Uint8Array(PE(Jre(t)));return Fd.encode(e)}function Jre(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function S6(t){const e=Buffer.from(t,"base64"),r=Tee(e).txn;if(!r)throw new Error("Invalid signed transaction: missing 'txn' field");const n=bee(r),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(n)]),o=Mre(i);return qX.encode(o).replace(/=+$/,"")}function z_(t){const e=[];let r=BigInt(t);for(;r>=BigInt(128);)e.push(Number(r&BigInt(127)|BigInt(128))),r>>=BigInt(7);return e.push(Number(r)),Buffer.from(e)}function Qre(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),r=Buffer.from(t.signed.authInfoBytes,"base64"),n=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(z_(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(z_(r.length)),s.push(r),s.push(Buffer.from([26])),s.push(z_(n.length)),s.push(n);const i=Buffer.concat(s),o=PE(i);return Buffer.from(o).toString("hex").toUpperCase()}function Xre(t){var e,r;const n=[];try{if(typeof t=="string")return n.push(t),n;if(typeof t!="object")return n;t!=null&&t.id&&n.push(t.id);const s=(r=(e=t?.capabilities)==null?void 0:e.caip345)==null?void 0:r.transactionHashes;s&&n.push(...s)}catch(s){console.warn("getWalletSendCallsHashes failed: ",s)}return n}var ene=Object.defineProperty,tne=Object.defineProperties,rne=Object.getOwnPropertyDescriptors,T6=Object.getOwnPropertySymbols,nne=Object.prototype.hasOwnProperty,sne=Object.prototype.propertyIsEnumerable,P6=(t,e,r)=>e in t?ene(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ine=(t,e)=>{for(var r in e||(e={}))nne.call(e,r)&&P6(t,r,e[r]);if(T6)for(var r of T6(e))sne.call(e,r)&&P6(t,r,e[r]);return t},one=(t,e)=>tne(t,rne(e));const mM="did:pkh:",ane={eip155:"Ethereum",solana:"Solana",bip122:"Bitcoin"},cne=t=>t?ane[t]||t:"",NE=t=>t?.split(":"),une=t=>{const e=t&&NE(t);if(e)return t.includes(mM)?e[3]:e[1]},lne=t=>{const e=t&&NE(t);if(e)return t.includes(mM)?e[2]:e[0]},W2=t=>{const e=t&&NE(t);if(e)return e[2]+":"+e[3]},W1=t=>{const e=t&&NE(t);if(e)return e.pop()};async function N6(t){const{cacao:e,projectId:r}=t,{s:n,p:s}=e,i=yM(s,s.iss),o=W1(s.iss);return await Vre(o,i,n,W2(s.iss),r)}const yM=(t,e)=>{const r=lne(e);if(!r)throw new Error("Invalid issuer: "+e);const n=`${t.domain} wants you to sign in with your ${cne(r)} account:`,s=W1(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const o=`URI: ${t.aud||t.uri}`,a=`Version: ${t.version}`,c=`Chain ID: ${une(e)}`,u=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,d=t.exp?`Expiration Time: ${t.exp}`:void 0,f=t.nbf?`Not Before: ${t.nbf}`:void 0,g=t.requestId?`Request ID: ${t.requestId}`:void 0,p=t.resources?`Resources:${t.resources.map(y=>`
- ${y}`).join("")}`:void 0,h=l1(t.resources);if(h){const y=Lp(h);i=wne(i,y)}return[n,s,"",i,"",o,a,c,u,l,d,f,g,p].filter(y=>y!=null).join(`
`)};function dne(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function fne(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Mu(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(s=>{const i=n[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function hne(t,e,r,n={}){return r?.sort((s,i)=>s.localeCompare(i)),{att:{[t]:pne(e,r,n)}}}function pne(t,e,r={}){e=e?.sort((s,i)=>s.localeCompare(i));const n=e.map(s=>({[`${t}/${s}`]:[r]}));return Object.assign({},...n)}function bM(t){return Mu(t),`urn:recap:${dne(t).replace(/=/g,"")}`}function Lp(t){const e=fne(t.replace("urn:recap:",""));return Mu(e),e}function gne(t,e,r){const n=hne(t,e,r);return bM(n)}function mne(t){return t&&t.includes("urn:recap:")}function yne(t,e){const r=Lp(t),n=Lp(e),s=bne(r,n);return bM(s)}function bne(t,e){Mu(t),Mu(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),n={att:{}};return r.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,u;n.att[s]=one(ine({},n.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((u=e.att[s])==null?void 0:u[a])})})}),n}function wne(t="",e){Mu(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,f)=>d.action.localeCompare(f.action));const u={};c.forEach(d=>{u[d.ability]||(u[d.ability]=[]),u[d.ability].push(d.action)});const l=Object.keys(u).map(d=>(s++,`(${s}) '${d}': '${u[d].join("', '")}' for '${a}'.`));n.push(l.join(", ").replace(".,","."))});const i=n.join(" "),o=`${r}${i}`;return`${t?t+" ":""}${o}`}function O6(t){var e;const r=Lp(t);Mu(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(s=>s.split("/")[1]):[]}function R6(t){const e=Lp(t);Mu(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(s=>{var i;(i=s?.[0])!=null&&i.chains&&r.push(s[0].chains)})}),[...new Set(r.flat())]}function l1(t){if(!t)return;const e=t?.[t.length-1];return mne(e)?e:void 0}function wM(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function K2(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function $_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ln(t,...e){if(!wM(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function x6(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ene(t,e){Ln(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Wa(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Id(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function vne(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const _ne=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Ane(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Z2(t){if(typeof t=="string")t=Ane(t);else if(wM(t))t=Y2(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Cne(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Ine(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const Sne=(t,e)=>{function r(n,...s){if(Ln(n),!_ne)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const u=s[0];if(!u)throw new Error("nonce / iv required");t.varSizeNonce?Ln(u):Ln(u,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Ln(s[1]);const o=e(n,...s),a=(u,l)=>{if(l!==void 0){if(u!==2)throw new Error("cipher output not supported");Ln(l)}};let c=!1;return{encrypt(u,l){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Ln(u),a(o.encrypt.length,l),o.encrypt(u,l)},decrypt(u,l){if(Ln(u),i&&u.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,l),o.decrypt(u,l)}}}return Object.assign(r,t),r};function k6(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!Pne(e))throw new Error("invalid output, must be aligned");return e}function B6(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i);t.setUint32(e+4,o,n),t.setUint32(e+0,a,n)}function Tne(t,e,r){K2(r);const n=new Uint8Array(16),s=vne(n);return B6(s,0,BigInt(e),r),B6(s,8,BigInt(t),r),n}function Pne(t){return t.byteOffset%4===0}function Y2(t){return Uint8Array.from(t)}const EM=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Nne=EM("expand 16-byte k"),One=EM("expand 32-byte k"),Rne=Wa(Nne),xne=Wa(One);function Et(t,e){return t<<e|t>>>32-e}function J2(t){return t.byteOffset%4===0}const vg=64,kne=16,vM=2**32-1,j6=new Uint32Array;function Bne(t,e,r,n,s,i,o,a){const c=s.length,u=new Uint8Array(vg),l=Wa(u),d=J2(s)&&J2(i),f=d?Wa(s):j6,g=d?Wa(i):j6;for(let p=0;p<c;o++){if(t(e,r,n,l,o,a),o>=vM)throw new Error("arx: counter overflow");const h=Math.min(vg,c-p);if(d&&h===vg){const y=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let b=0,E;b<kne;b++)E=y+b,g[E]=f[E]^l[b];p+=vg;continue}for(let y=0,b;y<h;y++)b=p+y,i[b]=s[b]^u[y];p+=h}}function jne(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:s,counterRight:i,rounds:o}=Cne({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return $_(s),$_(o),K2(i),K2(r),(a,c,u,l,d=0)=>{Ln(a),Ln(c),Ln(u);const f=u.length;if(l===void 0&&(l=new Uint8Array(f)),Ln(l),$_(d),d<0||d>=vM)throw new Error("arx: counter overflow");if(l.length<f)throw new Error(`arx: output (${l.length}) is shorter than data (${f})`);const g=[];let p=a.length,h,y;if(p===32)g.push(h=Y2(a)),y=xne;else if(p===16&&r)h=new Uint8Array(32),h.set(a),h.set(a,16),y=Rne,g.push(h);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);J2(c)||g.push(c=Y2(c));const b=Wa(h);if(n){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(y,b,Wa(c.subarray(0,16)),b),c=c.subarray(16)}const E=16-s;if(E!==c.length)throw new Error(`arx: nonce must be ${E} or 16 bytes`);if(E!==12){const m=new Uint8Array(12);m.set(c,i?0:12-c.length),c=m,g.push(c)}const w=Wa(c);return Bne(t,y,b,w,u,l,d,o),Id(...g),l}}const Lr=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Dne{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Z2(e),Ln(e,32);const r=Lr(e,0),n=Lr(e,2),s=Lr(e,4),i=Lr(e,6),o=Lr(e,8),a=Lr(e,10),c=Lr(e,12),u=Lr(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let l=0;l<8;l++)this.pad[l]=Lr(e,16+2*l)}process(e,r,n=!1){const s=n?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],u=o[2],l=o[3],d=o[4],f=o[5],g=o[6],p=o[7],h=o[8],y=o[9],b=Lr(e,r+0),E=Lr(e,r+2),w=Lr(e,r+4),m=Lr(e,r+6),_=Lr(e,r+8),C=Lr(e,r+10),I=Lr(e,r+12),P=Lr(e,r+14);let T=i[0]+(b&8191),R=i[1]+((b>>>13|E<<3)&8191),U=i[2]+((E>>>10|w<<6)&8191),k=i[3]+((w>>>7|m<<9)&8191),O=i[4]+((m>>>4|_<<12)&8191),B=i[5]+(_>>>1&8191),v=i[6]+((_>>>14|C<<2)&8191),A=i[7]+((C>>>11|I<<5)&8191),S=i[8]+((I>>>8|P<<8)&8191),j=i[9]+(P>>>5|s),N=0,x=N+T*a+R*(5*y)+U*(5*h)+k*(5*p)+O*(5*g);N=x>>>13,x&=8191,x+=B*(5*f)+v*(5*d)+A*(5*l)+S*(5*u)+j*(5*c),N+=x>>>13,x&=8191;let D=N+T*c+R*a+U*(5*y)+k*(5*h)+O*(5*p);N=D>>>13,D&=8191,D+=B*(5*g)+v*(5*f)+A*(5*d)+S*(5*l)+j*(5*u),N+=D>>>13,D&=8191;let M=N+T*u+R*c+U*a+k*(5*y)+O*(5*h);N=M>>>13,M&=8191,M+=B*(5*p)+v*(5*g)+A*(5*f)+S*(5*d)+j*(5*l),N+=M>>>13,M&=8191;let L=N+T*l+R*u+U*c+k*a+O*(5*y);N=L>>>13,L&=8191,L+=B*(5*h)+v*(5*p)+A*(5*g)+S*(5*f)+j*(5*d),N+=L>>>13,L&=8191;let F=N+T*d+R*l+U*u+k*c+O*a;N=F>>>13,F&=8191,F+=B*(5*y)+v*(5*h)+A*(5*p)+S*(5*g)+j*(5*f),N+=F>>>13,F&=8191;let q=N+T*f+R*d+U*l+k*u+O*c;N=q>>>13,q&=8191,q+=B*a+v*(5*y)+A*(5*h)+S*(5*p)+j*(5*g),N+=q>>>13,q&=8191;let $=N+T*g+R*f+U*d+k*l+O*u;N=$>>>13,$&=8191,$+=B*c+v*a+A*(5*y)+S*(5*h)+j*(5*p),N+=$>>>13,$&=8191;let V=N+T*p+R*g+U*f+k*d+O*l;N=V>>>13,V&=8191,V+=B*u+v*c+A*a+S*(5*y)+j*(5*h),N+=V>>>13,V&=8191;let J=N+T*h+R*p+U*g+k*f+O*d;N=J>>>13,J&=8191,J+=B*l+v*u+A*c+S*a+j*(5*y),N+=J>>>13,J&=8191;let Y=N+T*y+R*h+U*p+k*g+O*f;N=Y>>>13,Y&=8191,Y+=B*d+v*l+A*u+S*c+j*a,N+=Y>>>13,Y&=8191,N=(N<<2)+N|0,N=N+x|0,x=N&8191,N=N>>>13,D+=N,i[0]=x,i[1]=D,i[2]=M,i[3]=L,i[4]=F,i[5]=q,i[6]=$,i[7]=V,i[8]=J,i[9]=Y}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,n[0]=e[0]+5,s=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+s,s=n[a]>>>13,n[a]&=8191;n[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)n[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;Id(n)}update(e){x6(this),e=Z2(e),Ln(e);const{buffer:r,blockLen:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);if(o===n){for(;n<=s-i;i+=n)this.process(e,i);continue}r.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){Id(this.h,this.r,this.buffer,this.pad)}digestInto(e){x6(this),Ene(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:s}=this;if(s){for(r[s++]=1;s<16;s++)r[s]=0;this.process(r,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=n[o]>>>0,e[i++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}}function Une(t){const e=(n,s)=>t(s).update(Z2(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const Mne=Une(t=>new Dne(t));function Lne(t,e,r,n,s,i=20){let o=t[0],a=t[1],c=t[2],u=t[3],l=e[0],d=e[1],f=e[2],g=e[3],p=e[4],h=e[5],y=e[6],b=e[7],E=s,w=r[0],m=r[1],_=r[2],C=o,I=a,P=c,T=u,R=l,U=d,k=f,O=g,B=p,v=h,A=y,S=b,j=E,N=w,x=m,D=_;for(let L=0;L<i;L+=2)C=C+R|0,j=Et(j^C,16),B=B+j|0,R=Et(R^B,12),C=C+R|0,j=Et(j^C,8),B=B+j|0,R=Et(R^B,7),I=I+U|0,N=Et(N^I,16),v=v+N|0,U=Et(U^v,12),I=I+U|0,N=Et(N^I,8),v=v+N|0,U=Et(U^v,7),P=P+k|0,x=Et(x^P,16),A=A+x|0,k=Et(k^A,12),P=P+k|0,x=Et(x^P,8),A=A+x|0,k=Et(k^A,7),T=T+O|0,D=Et(D^T,16),S=S+D|0,O=Et(O^S,12),T=T+O|0,D=Et(D^T,8),S=S+D|0,O=Et(O^S,7),C=C+U|0,D=Et(D^C,16),A=A+D|0,U=Et(U^A,12),C=C+U|0,D=Et(D^C,8),A=A+D|0,U=Et(U^A,7),I=I+k|0,j=Et(j^I,16),S=S+j|0,k=Et(k^S,12),I=I+k|0,j=Et(j^I,8),S=S+j|0,k=Et(k^S,7),P=P+O|0,N=Et(N^P,16),B=B+N|0,O=Et(O^B,12),P=P+O|0,N=Et(N^P,8),B=B+N|0,O=Et(O^B,7),T=T+R|0,x=Et(x^T,16),v=v+x|0,R=Et(R^v,12),T=T+R|0,x=Et(x^T,8),v=v+x|0,R=Et(R^v,7);let M=0;n[M++]=o+C|0,n[M++]=a+I|0,n[M++]=c+P|0,n[M++]=u+T|0,n[M++]=l+R|0,n[M++]=d+U|0,n[M++]=f+k|0,n[M++]=g+O|0,n[M++]=p+B|0,n[M++]=h+v|0,n[M++]=y+A|0,n[M++]=b+S|0,n[M++]=E+j|0,n[M++]=w+N|0,n[M++]=m+x|0,n[M++]=_+D|0}const Fne=jne(Lne,{counterRight:!1,counterLength:4,allowShortKeys:!1}),qne=new Uint8Array(16),D6=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(qne.subarray(r))},Hne=new Uint8Array(32);function U6(t,e,r,n,s){const i=t(e,r,Hne),o=Mne.create(i);s&&D6(o,s),D6(o,n);const a=Tne(n.length,s?s.length:0,!0);o.update(a);const c=o.digest();return Id(i,a),c}const zne=t=>(e,r,n)=>({encrypt(s,i){const o=s.length;i=k6(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,r,a,a,1);const c=U6(t,e,r,a,n);return i.set(c,o),Id(c),i},decrypt(s,i){i=k6(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=U6(t,e,r,o,n);if(!Ine(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,r,i,i,1),Id(c),i}}),_M=Sne({blockSize:64,nonceLength:12,tagLength:16},zne(Fne));let AM=class extends TE{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,SE(e);const n=mi(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Ms(i)}update(e){return ec(this),this.iHash.update(e),this}digestInto(e){ec(this),bi(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const OE=(t,e,r)=>new AM(t,e).update(r).digest();OE.create=(t,e)=>new AM(t,e);function $ne(t,e,r){return SE(t),r===void 0&&(r=new Uint8Array(t.outputLen)),OE(t,mi(r),mi(e))}const V_=Uint8Array.from([0]),M6=Uint8Array.of();function Vne(t,e,r,n=32){SE(t),ra(n);const s=t.outputLen;if(n>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/s);r===void 0&&(r=M6);const o=new Uint8Array(i*s),a=OE.create(t,e),c=a._cloneInto(),u=new Uint8Array(a.outputLen);for(let l=0;l<i;l++)V_[0]=l+1,c.update(l===0?M6:u).update(r).update(V_).digestInto(u),o.set(u,s*l),a._cloneInto(c);return a.destroy(),c.destroy(),Ms(u,V_),o.slice(0,n)}const Gne=(t,e,r,n,s)=>Vne(t,$ne(t,e,r),n,s),RE=PE,II=BigInt(0),Q2=BigInt(1);function K1(t,e=""){if(typeof t!="boolean"){const r=e&&`"${e}"`;throw new Error(r+"expected boolean, got type="+typeof t)}return t}function mu(t,e,r=""){const n=IE(t),s=t?.length,i=e!==void 0;if(!n||i&&s!==e){const o=r&&`"${r}" `,a=i?` of length ${e}`:"",c=n?`length=${s}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+c)}return t}function _g(t){const e=t.toString(16);return e.length&1?"0"+e:e}function CM(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?II:BigInt("0x"+t)}function xE(t){return CM(sd(t))}function Z1(t){return bi(t),CM(sd(Uint8Array.from(t).reverse()))}function SI(t,e){return G1(t.toString(16).padStart(e*2,"0"))}function TI(t,e){return SI(t,e).reverse()}function ln(t,e,r){let n;if(typeof e=="string")try{n=G1(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(IE(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}const G_=t=>typeof t=="bigint"&&II<=t;function Wne(t,e,r){return G_(t)&&G_(e)&&G_(r)&&e<=t&&t<r}function X2(t,e,r,n){if(!Wne(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function IM(t){let e;for(e=0;t>II;t>>=Q2,e+=1);return e}const d0=t=>(Q2<<BigInt(t))-Q2;function Kne(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=n(t),o=n(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},u=(...f)=>r(o,i,...f),l=(f=n(0))=>{o=u(s(0),f),i=u(),f.length!==0&&(o=u(s(1),f),i=u())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const g=[];for(;f<e;){i=u();const p=i.slice();g.push(p),f+=i.length}return qa(...g)};return(f,g)=>{c(),l(f);let p;for(;!(p=g(d()));)l();return c(),p}}function kE(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>n(s,i,!1)),Object.entries(r).forEach(([s,i])=>n(s,i,!0))}function L6(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}const Vn=BigInt(0),In=BigInt(1),yu=BigInt(2),SM=BigInt(3),TM=BigInt(4),PM=BigInt(5),Zne=BigInt(7),NM=BigInt(8),Yne=BigInt(9),OM=BigInt(16);function gs(t,e){const r=t%e;return r>=Vn?r:e+r}function ei(t,e,r){let n=t;for(;e-- >Vn;)n*=n,n%=r;return n}function F6(t,e){if(t===Vn)throw new Error("invert: expected non-zero number");if(e<=Vn)throw new Error("invert: expected positive modulus, got "+e);let r=gs(t,e),n=e,s=Vn,i=In;for(;r!==Vn;){const o=n/r,a=n%r,c=s-i*o;n=r,r=a,s=i,i=c}if(n!==In)throw new Error("invert: does not exist");return gs(s,e)}function PI(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function RM(t,e){const r=(t.ORDER+In)/TM,n=t.pow(e,r);return PI(t,n,e),n}function Jne(t,e){const r=(t.ORDER-PM)/NM,n=t.mul(e,yu),s=t.pow(n,r),i=t.mul(e,s),o=t.mul(t.mul(i,yu),s),a=t.mul(i,t.sub(o,t.ONE));return PI(t,a,e),a}function Qne(t){const e=sc(t),r=xM(t),n=r(e,e.neg(e.ONE)),s=r(e,n),i=r(e,e.neg(n)),o=(t+Zne)/OM;return(a,c)=>{let u=a.pow(c,o),l=a.mul(u,n);const d=a.mul(u,s),f=a.mul(u,i),g=a.eql(a.sqr(l),c),p=a.eql(a.sqr(d),c);u=a.cmov(u,l,g),l=a.cmov(f,d,p);const h=a.eql(a.sqr(l),c),y=a.cmov(u,l,h);return PI(a,y,c),y}}function xM(t){if(t<SM)throw new Error("sqrt is not defined for small field");let e=t-In,r=0;for(;e%yu===Vn;)e/=yu,r++;let n=yu;const s=sc(t);for(;q6(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return RM;let i=s.pow(n,e);const o=(e+In)/yu;return function(a,c){if(a.is0(c))return c;if(q6(a,c)!==1)throw new Error("Cannot find square root");let u=r,l=a.mul(a.ONE,i),d=a.pow(c,e),f=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let g=1,p=a.sqr(d);for(;!a.eql(p,a.ONE);)if(g++,p=a.sqr(p),g===u)throw new Error("Cannot find square root");const h=In<<BigInt(u-g-1),y=a.pow(l,h);u=g,l=a.sqr(y),d=a.mul(d,l),f=a.mul(f,y)}return f}}function Xne(t){return t%TM===SM?RM:t%NM===PM?Jne:t%OM===Yne?Qne(t):xM(t)}const ese=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function tse(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=ese.reduce((n,s)=>(n[s]="function",n),e);return kE(t,r),t}function rse(t,e,r){if(r<Vn)throw new Error("invalid exponent, negatives unsupported");if(r===Vn)return t.ONE;if(r===In)return e;let n=t.ONE,s=e;for(;r>Vn;)r&In&&(n=t.mul(n,s)),s=t.sqr(s),r>>=In;return n}function kM(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(n[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(n[c]=t.mul(o,n[c]),t.mul(o,a)),i),n}function q6(t,e){const r=(t.ORDER-In)/yu,n=t.pow(e,r),s=t.eql(n,t.ONE),i=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function BM(t,e){e!==void 0&&ra(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function sc(t,e,r=!1,n={}){if(t<=Vn)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i,o=!1,a;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const f=e;f.BITS&&(s=f.BITS),f.sqrt&&(i=f.sqrt),typeof f.isLE=="boolean"&&(r=f.isLE),typeof f.modFromBytes=="boolean"&&(o=f.modFromBytes),a=f.allowedLengths}else typeof e=="number"&&(s=e),n.sqrt&&(i=n.sqrt);const{nBitLength:c,nByteLength:u}=BM(t,s);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const d=Object.freeze({ORDER:t,isLE:r,BITS:c,BYTES:u,MASK:d0(c),ZERO:Vn,ONE:In,allowedLengths:a,create:f=>gs(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return Vn<=f&&f<t},is0:f=>f===Vn,isValidNot0:f=>!d.is0(f)&&d.isValid(f),isOdd:f=>(f&In)===In,neg:f=>gs(-f,t),eql:(f,g)=>f===g,sqr:f=>gs(f*f,t),add:(f,g)=>gs(f+g,t),sub:(f,g)=>gs(f-g,t),mul:(f,g)=>gs(f*g,t),pow:(f,g)=>rse(d,f,g),div:(f,g)=>gs(f*F6(g,t),t),sqrN:f=>f*f,addN:(f,g)=>f+g,subN:(f,g)=>f-g,mulN:(f,g)=>f*g,inv:f=>F6(f,t),sqrt:i||(f=>(l||(l=Xne(t)),l(d,f))),toBytes:f=>r?TI(f,u):SI(f,u),fromBytes:(f,g=!0)=>{if(a){if(!a.includes(f.length)||f.length>u)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+f.length);const h=new Uint8Array(u);h.set(f,r?0:h.length-f.length),f=h}if(f.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+f.length);let p=r?Z1(f):xE(f);if(o&&(p=gs(p,t)),!g&&!d.isValid(p))throw new Error("invalid field element: outside of range 0..ORDER");return p},invertBatch:f=>kM(d,f),cmov:(f,g,p)=>p?g:f});return Object.freeze(d)}function jM(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function DM(t){const e=jM(t);return e+Math.ceil(e/2)}function nse(t,e,r=!1){const n=t.length,s=jM(e),i=DM(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=r?Z1(t):xE(t),a=gs(o,e-In)+In;return r?TI(a,s):SI(a,s)}const Sd=BigInt(0),bu=BigInt(1);function Y1(t,e){const r=e.negate();return t?r:e}function W_(t,e){const r=kM(t.Fp,e.map(n=>n.Z));return e.map((n,s)=>t.fromAffine(n.toAffine(r[s])))}function UM(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function K_(t,e){UM(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),s=2**t,i=d0(t),o=BigInt(t);return{windows:r,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function H6(t,e,r){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=r;let a=Number(t&s),c=t>>o;a>n&&(a-=i,c+=bu);const u=e*n,l=u+Math.abs(a)-1,d=a===0,f=a<0,g=e%2!==0;return{nextN:c,offset:l,isZero:d,isNeg:f,isNegF:g,offsetF:u}}function sse(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function ise(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const Z_=new WeakMap,MM=new WeakMap;function Y_(t){return MM.get(t)||1}function z6(t){if(t!==Sd)throw new Error("invalid wNAF")}class ose{constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,n=this.ZERO){let s=e;for(;r>Sd;)r&bu&&(n=n.add(s)),s=s.double(),r>>=bu;return n}precomputeWindow(e,r){const{windows:n,windowSize:s}=K_(r,this.bits),i=[];let o=e,a=o;for(let c=0;c<n;c++){a=o,i.push(a);for(let u=1;u<s;u++)a=a.add(o),i.push(a);o=a.double()}return i}wNAF(e,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=K_(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:c,offset:u,isZero:l,isNeg:d,isNegF:f,offsetF:g}=H6(n,a,o);n=c,l?i=i.add(Y1(f,r[g])):s=s.add(Y1(d,r[u]))}return z6(n),{p:s,f:i}}wNAFUnsafe(e,r,n,s=this.ZERO){const i=K_(e,this.bits);for(let o=0;o<i.windows&&n!==Sd;o++){const{nextN:a,offset:c,isZero:u,isNeg:l}=H6(n,o,i);if(n=a,!u){const d=r[c];s=s.add(l?d.negate():d)}}return z6(n),s}getPrecomputes(e,r,n){let s=Z_.get(r);return s||(s=this.precomputeWindow(r,e),e!==1&&(typeof n=="function"&&(s=n(s)),Z_.set(r,s))),s}cached(e,r,n){const s=Y_(e);return this.wNAF(s,this.getPrecomputes(s,e,n),r)}unsafe(e,r,n,s){const i=Y_(e);return i===1?this._unsafeLadder(e,r,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,n),r,s)}createCache(e,r){UM(r,this.bits),MM.set(e,r),Z_.delete(e)}hasCache(e){return Y_(e)!==1}}function ase(t,e,r,n){let s=e,i=t.ZERO,o=t.ZERO;for(;r>Sd||n>Sd;)r&bu&&(i=i.add(s)),n&bu&&(o=o.add(s)),s=s.double(),r>>=bu,n>>=bu;return{p1:i,p2:o}}function cse(t,e,r,n){sse(r,t),ise(n,e);const s=r.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=IM(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=d0(c),l=new Array(Number(u)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let g=d;g>=0;g-=c){l.fill(o);for(let h=0;h<i;h++){const y=n[h],b=Number(y>>BigInt(g)&u);l[b]=l[b].add(r[h])}let p=o;for(let h=l.length-1,y=o;h>0;h--)y=y.add(l[h]),p=p.add(y);if(f=f.add(p),g!==0)for(let h=0;h<c;h++)f=f.double()}return f}function $6(t,e,r){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return tse(e),e}else return sc(t,{isLE:r})}function use(t,e,r={},n){if(n===void 0&&(n=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>Sd))throw new Error(`CURVE.${a} must be positive bigint`)}const s=$6(e.p,r.Fp,n),i=$6(e.n,r.Fn,n),o=["Gx","Gy","a","b"];for(const a of o)if(!s.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),aM("HashToScalar-");const mf=BigInt(0),ml=BigInt(1),Ag=BigInt(2);function lse(t){return kE(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function dse(t){const e=lse(t),{P:r,type:n,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=n==="x25519";if(!a&&n!=="x448")throw new Error("invalid type");const c=o||Ju,u=a?255:448,l=a?32:56,d=BigInt(a?9:5),f=BigInt(a?121665:39081),g=a?Ag**BigInt(254):Ag**BigInt(447),p=a?BigInt(8)*Ag**BigInt(251)-ml:BigInt(4)*Ag**BigInt(445)-ml,h=g+p+ml,y=k=>gs(k,r),b=E(d);function E(k){return TI(y(k),l)}function w(k){const O=ln("u coordinate",k,l);return a&&(O[31]&=127),y(Z1(O))}function m(k){return Z1(s(ln("scalar",k,l)))}function _(k,O){const B=P(w(O),m(k));if(B===mf)throw new Error("invalid private or public key received");return E(B)}function C(k){return _(k,b)}function I(k,O,B){const v=y(k*(O-B));return O=y(O-v),B=y(B+v),{x_2:O,x_3:B}}function P(k,O){X2("u",k,mf,r),X2("scalar",O,g,h);const B=O,v=k;let A=ml,S=mf,j=k,N=ml,x=mf;for(let M=BigInt(u-1);M>=mf;M--){const L=B>>M&ml;x^=L,{x_2:A,x_3:j}=I(x,A,j),{x_2:S,x_3:N}=I(x,S,N),x=L;const F=A+S,q=y(F*F),$=A-S,V=y($*$),J=q-V,Y=j+N,Z=j-N,ee=y(Z*F),le=y(Y*$),X=ee+le,se=ee-le;j=y(X*X),N=y(v*y(se*se)),A=y(q*V),S=y(J*(q+y(f*J)))}({x_2:A,x_3:j}=I(x,A,j)),{x_2:S,x_3:N}=I(x,S,N);const D=i(S);return y(A*D)}const T={secretKey:l,publicKey:l,seed:l},R=(k=c(l))=>(bi(k,T.seed),k);function U(k){const O=R(k);return{secretKey:O,publicKey:C(O)}}return{keygen:U,getSharedSecret:(k,O)=>_(k,O),getPublicKey:k=>C(k),scalarMult:_,scalarMultBase:C,utils:{randomSecretKey:R,randomPrivateKey:R},GuBytes:b.slice(),lengths:T}}const fse=BigInt(1),V6=BigInt(2),hse=BigInt(3),pse=BigInt(5);BigInt(8);const LM=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),gse={p:LM,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function mse(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=LM,o=t*t%i*t%i,a=ei(o,V6,i)*o%i,c=ei(a,fse,i)*t%i,u=ei(c,pse,i)*c%i,l=ei(u,e,i)*u%i,d=ei(l,r,i)*l%i,f=ei(d,n,i)*d%i,g=ei(f,s,i)*f%i,p=ei(g,s,i)*f%i,h=ei(p,e,i)*u%i;return{pow_p_5_8:ei(h,V6,i)*t%i,b2:o}}function yse(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const bse=sc(gse.p,{isLE:!0}),eC=(()=>{const t=bse.ORDER;return dse({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:r,b2:n}=mse(e);return gs(ei(r,hse,t)*n,t)},adjustScalarBytes:yse})})(),G6=(t,e)=>(t+(t>=0?e:-e)/FM)/e;function wse(t,e,r){const[[n,s],[i,o]]=e,a=G6(o*t,r),c=G6(-s*t,r);let u=t-a*n-c*i,l=-a*s-c*o;const d=u<$o,f=l<$o;d&&(u=-u),f&&(l=-l);const g=d0(Math.ceil(IM(r)/2))+id;if(u<$o||u>=g||l<$o||l>=g)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:d,k1:u,k2neg:f,k2:l}}function tC(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function J_(t,e){const r={};for(let n of Object.keys(e))r[n]=t[n]===void 0?e[n]:t[n];return K1(r.lowS,"lowS"),K1(r.prehash,"prehash"),r.format!==void 0&&tC(r.format),r}class Ese extends Error{constructor(e=""){super(e)}}const Uo={Err:Ese,_tlv:{encode:(t,e)=>{const{Err:r}=Uo;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,s=_g(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");const i=n>127?_g(s.length/2|128):"";return _g(t)+i+s+e},decode(t,e){const{Err:r}=Uo;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");const u=e.subarray(n,n+c);if(u.length!==c)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const l of u)o=o<<8|l;if(n+=c,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=Uo;if(t<$o)throw new e("integer: negative integers are not allowed");let r=_g(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=Uo;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return xE(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=Uo,s=ln("signature",t),{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:u,l}=n.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(t){const{_tlv:e,_int:r}=Uo,n=e.encode(2,r.encode(t.r)),s=e.encode(2,r.encode(t.s)),i=n+s;return e.encode(48,i)}},$o=BigInt(0),id=BigInt(1),FM=BigInt(2),Cg=BigInt(3),vse=BigInt(4);function Zl(t,e){const{BYTES:r}=t;let n;if(typeof e=="bigint")n=e;else{let s=ln("private key",e);try{n=t.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof e}`)}}if(!t.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function _se(t,e={}){const r=use("weierstrass",t,e),{Fp:n,Fn:s}=r;let i=r.CURVE;const{h:o,n:a}=i;kE(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!n.is0(i.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const u=HM(n,s);function l(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function d(k,O,B){const{x:v,y:A}=O.toAffine(),S=n.toBytes(v);if(K1(B,"isCompressed"),B){l();const j=!n.isOdd(A);return qa(qM(j),S)}else return qa(Uint8Array.of(4),S,n.toBytes(A))}function f(k){mu(k,void 0,"Point");const{publicKey:O,publicKeyUncompressed:B}=u,v=k.length,A=k[0],S=k.subarray(1);if(v===O&&(A===2||A===3)){const j=n.fromBytes(S);if(!n.isValid(j))throw new Error("bad point: is not on curve, wrong x");const N=h(j);let x;try{x=n.sqrt(N)}catch(M){const L=M instanceof Error?": "+M.message:"";throw new Error("bad point: is not on curve, sqrt error"+L)}l();const D=n.isOdd(x);return(A&1)===1!==D&&(x=n.neg(x)),{x:j,y:x}}else if(v===B&&A===4){const j=n.BYTES,N=n.fromBytes(S.subarray(0,j)),x=n.fromBytes(S.subarray(j,j*2));if(!y(N,x))throw new Error("bad point: is not on curve");return{x:N,y:x}}else throw new Error(`bad point: got length ${v}, expected compressed=${O} or uncompressed=${B}`)}const g=e.toBytes||d,p=e.fromBytes||f;function h(k){const O=n.sqr(k),B=n.mul(O,k);return n.add(n.add(B,n.mul(k,i.a)),i.b)}function y(k,O){const B=n.sqr(O),v=h(k);return n.eql(B,v)}if(!y(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const b=n.mul(n.pow(i.a,Cg),vse),E=n.mul(n.sqr(i.b),BigInt(27));if(n.is0(n.add(b,E)))throw new Error("bad curve params: a or b");function w(k,O,B=!1){if(!n.isValid(O)||B&&n.is0(O))throw new Error(`bad point coordinate ${k}`);return O}function m(k){if(!(k instanceof T))throw new Error("ProjectivePoint expected")}function _(k){if(!c||!c.basises)throw new Error("no endo");return wse(k,c.basises,s.ORDER)}const C=L6((k,O)=>{const{X:B,Y:v,Z:A}=k;if(n.eql(A,n.ONE))return{x:B,y:v};const S=k.is0();O==null&&(O=S?n.ONE:n.inv(A));const j=n.mul(B,O),N=n.mul(v,O),x=n.mul(A,O);if(S)return{x:n.ZERO,y:n.ZERO};if(!n.eql(x,n.ONE))throw new Error("invZ was invalid");return{x:j,y:N}}),I=L6(k=>{if(k.is0()){if(e.allowInfinityPoint&&!n.is0(k.Y))return;throw new Error("bad point: ZERO")}const{x:O,y:B}=k.toAffine();if(!n.isValid(O)||!n.isValid(B))throw new Error("bad point: x or y not field elements");if(!y(O,B))throw new Error("bad point: equation left != right");if(!k.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function P(k,O,B,v,A){return B=new T(n.mul(B.X,k),B.Y,B.Z),O=Y1(v,O),B=Y1(A,B),O.add(B)}class T{constructor(O,B,v){this.X=w("x",O),this.Y=w("y",B,!0),this.Z=w("z",v),Object.freeze(this)}static CURVE(){return i}static fromAffine(O){const{x:B,y:v}=O||{};if(!O||!n.isValid(B)||!n.isValid(v))throw new Error("invalid affine point");if(O instanceof T)throw new Error("projective point not allowed");return n.is0(B)&&n.is0(v)?T.ZERO:new T(B,v,n.ONE)}static fromBytes(O){const B=T.fromAffine(p(mu(O,void 0,"point")));return B.assertValidity(),B}static fromHex(O){return T.fromBytes(ln("pointHex",O))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(O=8,B=!0){return U.createCache(this,O),B||this.multiply(Cg),this}assertValidity(){I(this)}hasEvenY(){const{y:O}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(O)}equals(O){m(O);const{X:B,Y:v,Z:A}=this,{X:S,Y:j,Z:N}=O,x=n.eql(n.mul(B,N),n.mul(S,A)),D=n.eql(n.mul(v,N),n.mul(j,A));return x&&D}negate(){return new T(this.X,n.neg(this.Y),this.Z)}double(){const{a:O,b:B}=i,v=n.mul(B,Cg),{X:A,Y:S,Z:j}=this;let N=n.ZERO,x=n.ZERO,D=n.ZERO,M=n.mul(A,A),L=n.mul(S,S),F=n.mul(j,j),q=n.mul(A,S);return q=n.add(q,q),D=n.mul(A,j),D=n.add(D,D),N=n.mul(O,D),x=n.mul(v,F),x=n.add(N,x),N=n.sub(L,x),x=n.add(L,x),x=n.mul(N,x),N=n.mul(q,N),D=n.mul(v,D),F=n.mul(O,F),q=n.sub(M,F),q=n.mul(O,q),q=n.add(q,D),D=n.add(M,M),M=n.add(D,M),M=n.add(M,F),M=n.mul(M,q),x=n.add(x,M),F=n.mul(S,j),F=n.add(F,F),M=n.mul(F,q),N=n.sub(N,M),D=n.mul(F,L),D=n.add(D,D),D=n.add(D,D),new T(N,x,D)}add(O){m(O);const{X:B,Y:v,Z:A}=this,{X:S,Y:j,Z:N}=O;let x=n.ZERO,D=n.ZERO,M=n.ZERO;const L=i.a,F=n.mul(i.b,Cg);let q=n.mul(B,S),$=n.mul(v,j),V=n.mul(A,N),J=n.add(B,v),Y=n.add(S,j);J=n.mul(J,Y),Y=n.add(q,$),J=n.sub(J,Y),Y=n.add(B,A);let Z=n.add(S,N);return Y=n.mul(Y,Z),Z=n.add(q,V),Y=n.sub(Y,Z),Z=n.add(v,A),x=n.add(j,N),Z=n.mul(Z,x),x=n.add($,V),Z=n.sub(Z,x),M=n.mul(L,Y),x=n.mul(F,V),M=n.add(x,M),x=n.sub($,M),M=n.add($,M),D=n.mul(x,M),$=n.add(q,q),$=n.add($,q),V=n.mul(L,V),Y=n.mul(F,Y),$=n.add($,V),V=n.sub(q,V),V=n.mul(L,V),Y=n.add(Y,V),q=n.mul($,Y),D=n.add(D,q),q=n.mul(Z,Y),x=n.mul(J,x),x=n.sub(x,q),q=n.mul(J,$),M=n.mul(Z,M),M=n.add(M,q),new T(x,D,M)}subtract(O){return this.add(O.negate())}is0(){return this.equals(T.ZERO)}multiply(O){const{endo:B}=e;if(!s.isValidNot0(O))throw new Error("invalid scalar: out of range");let v,A;const S=j=>U.cached(this,j,N=>W_(T,N));if(B){const{k1neg:j,k1:N,k2neg:x,k2:D}=_(O),{p:M,f:L}=S(N),{p:F,f:q}=S(D);A=L.add(q),v=P(B.beta,M,F,j,x)}else{const{p:j,f:N}=S(O);v=j,A=N}return W_(T,[v,A])[0]}multiplyUnsafe(O){const{endo:B}=e,v=this;if(!s.isValid(O))throw new Error("invalid scalar: out of range");if(O===$o||v.is0())return T.ZERO;if(O===id)return v;if(U.hasCache(this))return this.multiply(O);if(B){const{k1neg:A,k1:S,k2neg:j,k2:N}=_(O),{p1:x,p2:D}=ase(T,v,S,N);return P(B.beta,x,D,A,j)}else return U.unsafe(v,O)}multiplyAndAddUnsafe(O,B,v){const A=this.multiplyUnsafe(B).add(O.multiplyUnsafe(v));return A.is0()?void 0:A}toAffine(O){return C(this,O)}isTorsionFree(){const{isTorsionFree:O}=e;return o===id?!0:O?O(T,this):U.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:O}=e;return o===id?this:O?O(T,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(O=!0){return K1(O,"isCompressed"),this.assertValidity(),g(T,this,O)}toHex(O=!0){return sd(this.toBytes(O))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(O=!0){return this.toBytes(O)}_setWindowSize(O){this.precompute(O)}static normalizeZ(O){return W_(T,O)}static msm(O,B){return cse(T,s,O,B)}static fromPrivateKey(O){return T.BASE.multiply(Zl(s,O))}}T.BASE=new T(i.Gx,i.Gy,n.ONE),T.ZERO=new T(n.ZERO,n.ONE,n.ZERO),T.Fp=n,T.Fn=s;const R=s.BITS,U=new ose(T,e.endo?Math.ceil(R/2):R);return T.BASE.precompute(8),T}function qM(t){return Uint8Array.of(t?2:3)}function HM(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function Ase(t,e={}){const{Fn:r}=t,n=e.randomBytes||Ju,s=Object.assign(HM(t.Fp,r),{seed:DM(r.ORDER)});function i(f){try{return!!Zl(r,f)}catch{return!1}}function o(f,g){const{publicKey:p,publicKeyUncompressed:h}=s;try{const y=f.length;return g===!0&&y!==p||g===!1&&y!==h?!1:!!t.fromBytes(f)}catch{return!1}}function a(f=n(s.seed)){return nse(mu(f,s.seed,"seed"),r.ORDER)}function c(f,g=!0){return t.BASE.multiply(Zl(r,f)).toBytes(g)}function u(f){const g=a(f);return{secretKey:g,publicKey:c(g)}}function l(f){if(typeof f=="bigint")return!1;if(f instanceof t)return!0;const{secretKey:g,publicKey:p,publicKeyUncompressed:h}=s;if(r.allowedLengths||g===p)return;const y=ln("key",f).length;return y===p||y===h}function d(f,g,p=!0){if(l(f)===!0)throw new Error("first arg must be private key");if(l(g)===!1)throw new Error("second arg must be public key");const h=Zl(r,f);return t.fromHex(g).multiply(h).toBytes(p)}return Object.freeze({getPublicKey:c,getSharedSecret:d,keygen:u,Point:t,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:i,randomPrivateKey:a,normPrivateKeyToScalar:f=>Zl(r,f),precompute(f=8,g=t.BASE){return g.precompute(f,!1)}},lengths:s})}function Cse(t,e,r={}){SE(e),kE(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=r.randomBytes||Ju,s=r.hmac||((B,...v)=>OE(e,B,qa(...v))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o,{keygen:u,getPublicKey:l,getSharedSecret:d,utils:f,lengths:g}=Ase(t,r),p={prehash:!1,lowS:typeof r.lowS=="boolean"?r.lowS:!1,format:void 0,extraEntropy:!1},h="compact";function y(B){const v=a>>id;return B>v}function b(B,v){if(!o.isValidNot0(v))throw new Error(`invalid signature ${B}: out of range 1..Point.Fn.ORDER`);return v}function E(B,v){tC(v);const A=g.signature,S=v==="compact"?A:v==="recovered"?A+1:void 0;return mu(B,S,`${v} signature`)}class w{constructor(v,A,S){this.r=b("r",v),this.s=b("s",A),S!=null&&(this.recovery=S),Object.freeze(this)}static fromBytes(v,A=h){E(v,A);let S;if(A==="der"){const{r:D,s:M}=Uo.toSig(mu(v));return new w(D,M)}A==="recovered"&&(S=v[0],A="compact",v=v.subarray(1));const j=o.BYTES,N=v.subarray(0,j),x=v.subarray(j,j*2);return new w(o.fromBytes(N),o.fromBytes(x),S)}static fromHex(v,A){return this.fromBytes(G1(v),A)}addRecoveryBit(v){return new w(this.r,this.s,v)}recoverPublicKey(v){const A=i.ORDER,{r:S,s:j,recovery:N}=this;if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");if(a*FM<A&&N>1)throw new Error("recovery id is ambiguous for h>1 curve");const x=N===2||N===3?S+a:S;if(!i.isValid(x))throw new Error("recovery id 2 or 3 invalid");const D=i.toBytes(x),M=t.fromBytes(qa(qM((N&1)===0),D)),L=o.inv(x),F=_(ln("msgHash",v)),q=o.create(-F*L),$=o.create(j*L),V=t.BASE.multiplyUnsafe(q).add(M.multiplyUnsafe($));if(V.is0())throw new Error("point at infinify");return V.assertValidity(),V}hasHighS(){return y(this.s)}toBytes(v=h){if(tC(v),v==="der")return G1(Uo.hexFromSig(this));const A=o.toBytes(this.r),S=o.toBytes(this.s);if(v==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return qa(Uint8Array.of(this.recovery),A,S)}return qa(A,S)}toHex(v){return sd(this.toBytes(v))}assertValidity(){}static fromCompact(v){return w.fromBytes(ln("sig",v),"compact")}static fromDER(v){return w.fromBytes(ln("sig",v),"der")}normalizeS(){return this.hasHighS()?new w(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return sd(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return sd(this.toBytes("compact"))}}const m=r.bits2int||function(B){if(B.length>8192)throw new Error("input is too large");const v=xE(B),A=B.length*8-c;return A>0?v>>BigInt(A):v},_=r.bits2int_modN||function(B){return o.create(m(B))},C=d0(c);function I(B){return X2("num < 2^"+c,B,$o,C),o.toBytes(B)}function P(B,v){return mu(B,void 0,"message"),v?mu(e(B),void 0,"prehashed message"):B}function T(B,v,A){if(["recovered","canonical"].some($=>$ in A))throw new Error("sign() legacy options not supported");const{lowS:S,prehash:j,extraEntropy:N}=J_(A,p);B=P(B,j);const x=_(B),D=Zl(o,v),M=[I(D),I(x)];if(N!=null&&N!==!1){const $=N===!0?n(g.secretKey):N;M.push(ln("extraEntropy",$))}const L=qa(...M),F=x;function q($){const V=m($);if(!o.isValidNot0(V))return;const J=o.inv(V),Y=t.BASE.multiply(V).toAffine(),Z=o.create(Y.x);if(Z===$o)return;const ee=o.create(J*o.create(F+Z*D));if(ee===$o)return;let le=(Y.x===Z?0:2)|Number(Y.y&id),X=ee;return S&&y(ee)&&(X=o.neg(ee),le^=1),new w(Z,X,le)}return{seed:L,k2sig:q}}function R(B,v,A={}){B=ln("message",B);const{seed:S,k2sig:j}=T(B,v,A);return Kne(e.outputLen,o.BYTES,s)(S,j)}function U(B){let v;const A=typeof B=="string"||IE(B),S=!A&&B!==null&&typeof B=="object"&&typeof B.r=="bigint"&&typeof B.s=="bigint";if(!A&&!S)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(S)v=new w(B.r,B.s);else if(A){try{v=w.fromBytes(ln("sig",B),"der")}catch(j){if(!(j instanceof Uo.Err))throw j}if(!v)try{v=w.fromBytes(ln("sig",B),"compact")}catch{return!1}}return v||!1}function k(B,v,A,S={}){const{lowS:j,prehash:N,format:x}=J_(S,p);if(A=ln("publicKey",A),v=P(ln("message",v),N),"strict"in S)throw new Error("options.strict was renamed to lowS");const D=x===void 0?U(B):w.fromBytes(ln("sig",B),x);if(D===!1)return!1;try{const M=t.fromBytes(A);if(j&&D.hasHighS())return!1;const{r:L,s:F}=D,q=_(v),$=o.inv(F),V=o.create(q*$),J=o.create(L*$),Y=t.BASE.multiplyUnsafe(V).add(M.multiplyUnsafe(J));return Y.is0()?!1:o.create(Y.x)===L}catch{return!1}}function O(B,v,A={}){const{prehash:S}=J_(A,p);return v=P(v,S),w.fromBytes(B,"recovered").recoverPublicKey(v).toBytes()}return Object.freeze({keygen:u,getPublicKey:l,getSharedSecret:d,utils:f,lengths:g,Point:t,sign:R,verify:k,recoverPublicKey:O,Signature:w,hash:e})}function Ise(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp;let n=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=sc(e.n,{BITS:t.nBitLength,allowedLengths:n,modFromBytes:t.wrapPrivateKey}),i={Fp:r,Fn:s,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function Sse(t){const{CURVE:e,curveOpts:r}=Ise(t),n={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,hash:t.hash,ecdsaOpts:n}}function Tse(t,e){const r=e.Point;return Object.assign({},e,{ProjectivePoint:r,CURVE:Object.assign({},t,BM(r.Fn.ORDER,r.Fn.BITS))})}function Pse(t){const{CURVE:e,curveOpts:r,hash:n,ecdsaOpts:s}=Sse(t),i=_se(e,r),o=Cse(i,n,s);return Tse(t,o)}function rC(t,e){const r=n=>Pse({...t,hash:n});return{...r(e),create:r}}const zM={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},$M={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},VM={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Nse=sc(zM.p),Ose=sc($M.p),Rse=sc(VM.p),xse=rC({...zM,Fp:Nse,lowS:!1},PE);rC({...$M,Fp:Ose,lowS:!1},Ure),rC({...VM,Fp:Rse,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Dre);const kse=xse,GM="base10",Sn="base16",Fn="base64pad",Ha="base64url",f0="utf8",WM=0,Zo=1,h0=2,Bse=0,W6=1,zh=12,NI=32;function jse(){const t=eC.utils.randomPrivateKey(),e=eC.getPublicKey(t);return{privateKey:Gn(t,Sn),publicKey:Gn(e,Sn)}}function nC(){const t=Ju(NI);return Gn(t,Sn)}function Dse(t,e){const r=eC.getSharedSecret(Ds(t,Sn),Ds(e,Sn)),n=Gne(RE,r,void 0,void 0,NI);return Gn(n,Sn)}function d1(t){const e=RE(Ds(t,Sn));return Gn(e,Sn)}function ks(t){const e=RE(Ds(t,f0));return Gn(e,Sn)}function KM(t){return Ds(`${t}`,GM)}function Lu(t){return Number(Gn(t,GM))}function ZM(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function YM(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4;return e+"=".repeat(r)}function Use(t){const e=KM(typeof t.type<"u"?t.type:WM);if(Lu(e)===Zo&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Ds(t.senderPublicKey,Sn):void 0,n=typeof t.iv<"u"?Ds(t.iv,Sn):Ju(zh),s=Ds(t.symKey,Sn),i=_M(s,n).encrypt(Ds(t.message,f0)),o=JM({type:e,sealed:i,iv:n,senderPublicKey:r});return t.encoding===Ha?ZM(o):o}function Mse(t){const e=Ds(t.symKey,Sn),{sealed:r,iv:n}=Fp({encoded:t.encoded,encoding:t.encoding}),s=_M(e,n).decrypt(r);if(s===null)throw new Error("Failed to decrypt");return Gn(s,f0)}function Lse(t,e){const r=KM(h0),n=Ju(zh),s=Ds(t,f0),i=JM({type:r,sealed:s,iv:n});return e===Ha?ZM(i):i}function Fse(t,e){const{sealed:r}=Fp({encoded:t,encoding:e});return Gn(r,f0)}function JM(t){if(Lu(t.type)===h0)return Gn(Hh([t.type,t.sealed]),Fn);if(Lu(t.type)===Zo){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Gn(Hh([t.type,t.senderPublicKey,t.iv,t.sealed]),Fn)}return Gn(Hh([t.type,t.iv,t.sealed]),Fn)}function Fp(t){const e=(t.encoding||Fn)===Ha?YM(t.encoded):t.encoded,r=Ds(e,Fn),n=r.slice(Bse,W6),s=W6;if(Lu(n)===Zo){const c=s+NI,u=c+zh,l=r.slice(s,c),d=r.slice(c,u),f=r.slice(u);return{type:n,sealed:f,iv:d,senderPublicKey:l}}if(Lu(n)===h0){const c=r.slice(s),u=Ju(zh);return{type:n,sealed:c,iv:u}}const i=s+zh,o=r.slice(s,i),a=r.slice(i);return{type:n,sealed:a,iv:o}}function qse(t,e){const r=Fp({encoded:t,encoding:e?.encoding});return QM({type:Lu(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Gn(r.senderPublicKey,Sn):void 0,receiverPublicKey:e?.receiverPublicKey})}function QM(t){const e=t?.type||WM;if(e===Zo){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function K6(t){return t.type===Zo&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function Z6(t){return t.type===h0}function Hse(t){const e=Buffer.from(t.x,"base64"),r=Buffer.from(t.y,"base64");return Hh([new Uint8Array([4]),e,r])}function zse(t,e){const[r,n,s]=t.split("."),i=Buffer.from(YM(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${r}.${n}`,u=RE(c),l=Hse(e);if(!kse.verify(Hh([o,a]),u,l))throw new Error("Invalid signature");return j2(t).payload}const $se="irn";function J1(t){return t?.relay||{protocol:$se}}function Yl(t){const e=Cte[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var Vse=Object.defineProperty,Gse=Object.defineProperties,Wse=Object.getOwnPropertyDescriptors,Y6=Object.getOwnPropertySymbols,Kse=Object.prototype.hasOwnProperty,Zse=Object.prototype.propertyIsEnumerable,J6=(t,e,r)=>e in t?Vse(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Q_=(t,e)=>{for(var r in e||(e={}))Kse.call(e,r)&&J6(t,r,e[r]);if(Y6)for(var r of Y6(e))Zse.call(e,r)&&J6(t,r,e[r]);return t},Yse=(t,e)=>Gse(t,Wse(e));function Jse(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(n)){const i=s.replace(n,""),o=t[s];r[i]=o}}),r}function Q6(t){if(!t.includes("wc:")){const u=tM(t);u!=null&&u.includes("wc:")&&(t=u)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),s=t.substring(e+1,r).split("@"),i=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(i),a=Object.fromEntries(o.entries()),c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:Qse(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:Jse(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Qse(t){return t.startsWith("//")?t.substring(2):t}function Xse(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(s=>{const i=s,o=r+e+i;t[i]&&(n[o]=t[i])}),n}function X6(t){const e=new URLSearchParams,r=Q_(Q_(Yse(Q_({},Xse(t.relay)),{symKey:t.symKey}),t.expiryTimestamp&&{expiryTimestamp:t.expiryTimestamp.toString()}),t.methods&&{methods:t.methods.join(",")});return Object.entries(r).sort(([n],[s])=>n.localeCompare(s)).forEach(([n,s])=>{s!==void 0&&e.append(n,String(s))}),`${t.protocol}:${t.topic}@${t.version}?${e}`}function Ig(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}var eie=Object.defineProperty,tie=Object.defineProperties,rie=Object.getOwnPropertyDescriptors,e5=Object.getOwnPropertySymbols,nie=Object.prototype.hasOwnProperty,sie=Object.prototype.propertyIsEnumerable,t5=(t,e,r)=>e in t?eie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,iie=(t,e)=>{for(var r in e||(e={}))nie.call(e,r)&&t5(t,r,e[r]);if(e5)for(var r of e5(e))sie.call(e,r)&&t5(t,r,e[r]);return t},oie=(t,e)=>tie(t,rie(e));function Hd(t){const e=[];return t.forEach(r=>{const[n,s]=r.split(":");e.push(`${n}:${s}`)}),e}function XM(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Hd(r.accounts))}),[...new Set(e)]}function aie(t){const e=[];return Object.values(t).forEach(r=>{e.push(...r.methods)}),[...new Set(e)]}function cie(t){const e=[];return Object.values(t).forEach(r=>{e.push(...r.events)}),[...new Set(e)]}function uie(t,e){const r=[];return Object.values(t).forEach(n=>{Hd(n.accounts).includes(e)&&r.push(...n.methods)}),r}function lie(t,e){const r=[];return Object.values(t).forEach(n=>{Hd(n.accounts).includes(e)&&r.push(...n.events)}),r}function BE(t){return t.includes(":")}function Jl(t){return BE(t)?t.split(":")[0]:t}function r5(t){var e,r,n;const s={};if(!Ki(t))return s;for(const[i,o]of Object.entries(t)){const a=BE(i)?[i]:o.chains,c=o.methods||[],u=o.events||[],l=Jl(i);s[l]=oie(iie({},s[l]),{chains:Wi(a,(e=s[l])==null?void 0:e.chains),methods:Wi(c,(r=s[l])==null?void 0:r.methods),events:Wi(u,(n=s[l])==null?void 0:n.events)})}return s}function die(t){const e={};return t?.forEach(r=>{var n;const[s,i]=r.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(r),(n=e[s].chains)==null||n.push(`${s}:${i}`)}),e}function n5(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=die(e);for(const[n,s]of Object.entries(r))s.methods?s.methods=Wi(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return r}function fie(t,e){var r,n,s,i,o,a;const c=r5(t),u=r5(e),l={},d=Object.keys(c).concat(Object.keys(u));for(const f of d)l[f]={chains:Wi((r=c[f])==null?void 0:r.chains,(n=u[f])==null?void 0:n.chains),methods:Wi((s=c[f])==null?void 0:s.methods,(i=u[f])==null?void 0:i.methods),events:Wi((o=c[f])==null?void 0:o.events,(a=u[f])==null?void 0:a.events)};return l}const hie={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},pie={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ge(t,e){const{message:r,code:n}=pie[t];return{message:e?`${r} ${e}`:r,code:n}}function Jt(t,e){const{message:r,code:n}=hie[t];return{message:e?`${r} ${e}`:r,code:n}}function Yo(t,e){return!!Array.isArray(t)}function Ki(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function kr(t){return typeof t>"u"}function vr(t,e){return e&&kr(t)?!0:typeof t=="string"&&!!t.trim().length}function OI(t,e){return typeof t=="number"&&!isNaN(t)}function gie(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),s=Object.keys(r);let i=!0;return gu(s,n)?(n.forEach(o=>{const{accounts:a,methods:c,events:u}=t.namespaces[o],l=Hd(a),d=r[o];(!gu(YU(o,d),l)||!gu(d.methods,c)||!gu(d.events,u))&&(i=!1)}),i):!1}function Q1(t){return vr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function mie(t){if(vr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Q1(r)}}return!1}function yie(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(vr(t,!1)){if(e(t))return!0;const r=tM(t);return e(r)}}catch{}return!1}function bie(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function wie(t){return t?.topic}function Eie(t,e){let r=null;return vr(t?.publicKey,!1)||(r=ge("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function s5(t){let e=!0;return Yo(t)?t.length&&(e=t.every(r=>vr(r,!1))):e=!1,e}function vie(t,e,r){let n=null;return Yo(e)&&e.length?e.forEach(s=>{n||Q1(s)||(n=Jt("UNSUPPORTED_CHAINS",`${r}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):Q1(t)||(n=Jt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function _ie(t,e,r){let n=null;return Object.entries(t).forEach(([s,i])=>{if(n)return;const o=vie(s,YU(s,i),`${e} ${r}`);o&&(n=o)}),n}function Aie(t,e){let r=null;return Yo(t)?t.forEach(n=>{r||mie(n)||(r=Jt("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=Jt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Cie(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=Aie(n?.accounts,`${e} namespace`);s&&(r=s)}),r}function Iie(t,e){let r=null;return s5(t?.methods)?s5(t?.events)||(r=Jt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Jt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function eL(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const s=Iie(n,`${e}, namespace`);s&&(r=s)}),r}function Sie(t,e,r){let n=null;if(t&&Ki(t)){const s=eL(t,e);s&&(n=s);const i=_ie(t,e,r);i&&(n=i)}else n=ge("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function X_(t,e){let r=null;if(t&&Ki(t)){const n=eL(t,e);n&&(r=n);const s=Cie(t,e);s&&(r=s)}else r=ge("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function tL(t){return vr(t.protocol,!0)}function Tie(t,e){let r=!1;return t?t&&Yo(t)&&t.length&&t.forEach(n=>{r=tL(n)}):r=!0,r}function Pie(t){return typeof t=="number"}function Dn(t){return typeof t<"u"&&typeof t!==null}function Nie(t){return!(!t||typeof t!="object"||!t.code||!OI(t.code)||!t.message||!vr(t.message,!1))}function Oie(t){return!(kr(t)||!vr(t.method,!1))}function Rie(t){return!(kr(t)||kr(t.result)&&kr(t.error)||!OI(t.id)||!vr(t.jsonrpc,!1))}function xie(t){return!(kr(t)||!vr(t.name,!1))}function i5(t,e){return!(!Q1(e)||!XM(t).includes(e))}function kie(t,e,r){return vr(r,!1)?uie(t,e).includes(r):!1}function Bie(t,e,r){return vr(r,!1)?lie(t,e).includes(r):!1}function o5(t,e,r){let n=null;const s=jie(t),i=Die(e),o=Object.keys(s),a=Object.keys(i),c=a5(Object.keys(t)),u=a5(Object.keys(e)),l=c.filter(d=>!u.includes(d));return l.length&&(n=ge("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(e).toString()}`)),gu(o,a)||(n=ge("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||n)return;const f=Hd(e[d].accounts);f.includes(d)||(n=ge("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${f.toString()}`))}),o.forEach(d=>{n||(gu(s[d].methods,i[d].methods)?gu(s[d].events,i[d].events)||(n=ge("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${d}`)):n=ge("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${d}`))}),n}function jie(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(s=>{e[s]={methods:t[r].methods,events:t[r].events}})}),e}function a5(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Die(t){const e={};return Object.keys(t).forEach(r=>{r.includes(":")?e[r]=t[r]:Hd(t[r].accounts)?.forEach(s=>{e[s]={accounts:t[r].accounts.filter(i=>i.includes(`${s}:`)),methods:t[r].methods,events:t[r].events}})}),e}function Uie(t,e){return OI(t)&&t<=e.max&&t>=e.min}function c5(){const t=u0();return new Promise(e=>{switch(t){case ws.browser:e(Mie());break;case ws.reactNative:e(Lie());break;case ws.node:e(Fie());break;default:e(!0)}})}function Mie(){return qd()&&navigator?.onLine}async function Lie(){return nc()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function Fie(){return!0}function qie(t){switch(u0()){case ws.browser:Hie(t);break;case ws.reactNative:zie(t);break}}function Hie(t){!nc()&&qd()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function zie(t){nc()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}function $ie(){var t;return qd()&&ta.getDocument()?((t=ta.getDocument())==null?void 0:t.visibilityState)==="visible":!0}const eA={};class yf{static get(e){return eA[e]}static set(e,r){eA[e]=r}static delete(e){delete eA[e]}}function Vie(t){const e=Fd.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function Gie({publicKey:t,signature:e,payload:r}){var n;const s=sC(r.method),i=128|parseInt(((n=r.version)==null?void 0:n.toString())||"4"),o=Zie(r.address),a=r.era==="00"?new Uint8Array([0]):sC(r.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(r.nonce,16),u=new Uint8Array([c&255,c>>8&255]),l=BigInt(`0x${Kie(r.tip)}`),d=Jie(l),f=new Uint8Array([0,...t,o,...e,...a,...u,...d,...s]),g=Yie(f.length+1);return new Uint8Array([...g,i,...f])}function Wie(t){const e=sC(t),r=Pte.blake2b(e,void 0,32);return"0x"+Buffer.from(r).toString("hex")}function sC(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function Kie(t){return t.startsWith("0x")?t.slice(2):t}function Zie(t){const e=Fd.decode(t)[0];return e===42?0:e===60?2:1}function Yie(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function Jie(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function Qie(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),r=Vie(t.transaction.address),n=Gie({publicKey:r,signature:e,payload:t.transaction}),s=Buffer.from(n).toString("hex");return Wie(s)}function RI({logger:t,name:e}){const r=typeof t=="string"?yE({opts:{level:t,name:e}}).logger:t;return r.level=typeof t=="string"?t:t.level,r}const Xie="PARSE_ERROR",eoe="INVALID_REQUEST",toe="METHOD_NOT_FOUND",roe="INVALID_PARAMS",rL="INTERNAL_ERROR",xI="SERVER_ERROR",noe=[-32700,-32600,-32601,-32602,-32603],$h={[Xie]:{code:-32700,message:"Parse error"},[eoe]:{code:-32600,message:"Invalid Request"},[toe]:{code:-32601,message:"Method not found"},[roe]:{code:-32602,message:"Invalid params"},[rL]:{code:-32603,message:"Internal error"},[xI]:{code:-32e3,message:"Server error"}},nL=xI;function soe(t){return noe.includes(t)}function u5(t){return Object.keys($h).includes(t)?$h[t]:$h[nL]}function ioe(t){const e=Object.values($h).find(r=>r.code===t);return e||$h[nL]}function sL(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var tA={},lo={},l5;function ooe(){if(l5)return lo;l5=1,Object.defineProperty(lo,"__esModule",{value:!0}),lo.isBrowserCryptoAvailable=lo.getSubtleCrypto=lo.getBrowerCrypto=void 0;function t(){return Mi?.crypto||Mi?.msCrypto||{}}lo.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}lo.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return lo.isBrowserCryptoAvailable=r,lo}var fo={},d5;function aoe(){if(d5)return fo;d5=1,Object.defineProperty(fo,"__esModule",{value:!0}),fo.isBrowser=fo.isNode=fo.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}fo.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}fo.isNode=e;function r(){return!t()&&!e()}return fo.isBrowser=r,fo}var f5;function coe(){return f5||(f5=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=n0;e.__exportStar(ooe(),t),e.__exportStar(aoe(),t)})(tA)),tA}var uoe=coe();function Di(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Va(t=6){return BigInt(Di(t))}function ai(t,e,r){return{id:r||Di(),jsonrpc:"2.0",method:t,params:e}}function qp(t,e){return{id:t,jsonrpc:"2.0",result:e}}function jE(t,e,r){return{id:t,jsonrpc:"2.0",error:loe(e)}}function loe(t,e){return typeof t>"u"?u5(rL):(typeof t=="string"&&(t=Object.assign(Object.assign({},u5(xI)),{message:t})),soe(t.code)&&(t=ioe(t.code)),t)}let doe=class{},foe=class extends doe{constructor(){super()}},hoe=class extends foe{constructor(e){super()}};const poe="^https?:",goe="^wss?:";function moe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function iL(t,e){const r=moe(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function h5(t){return iL(t,poe)}function p5(t){return iL(t,goe)}function yoe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function oL(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function kI(t){return oL(t)&&"method"in t}function DE(t){return oL(t)&&(Ui(t)||Bs(t))}function Ui(t){return"result"in t}function Bs(t){return"error"in t}let BI=class extends hoe{constructor(e){super(e),this.events=new qs.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(ai(e.method,e.params||[],e.id||Va().toString()),r)}async requestStrict(e,r){return new Promise(async(n,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Bs(i)?s(i.error):n(i.result)});try{await this.connection.send(e,r)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),DE(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const boe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),woe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",g5=t=>t.split("?")[0],m5=10,Eoe=boe();let voe=class{constructor(e){if(this.url=e,this.events=new qs.EventEmitter,this.registering=!1,!p5(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ea(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!p5(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const s=uoe.isReactNative()?void 0:{rejectUnauthorized:!yoe(e)},i=new Eoe(e,[],s);woe()?i.onerror=o=>{const a=o;n(this.emitError(a.error))}:i.on("error",o=>{n(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),r(i)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?ju(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),s=n.message||n.toString(),i=jE(e,s);this.events.emit("payload",i)}parseError(e,r=this.url){return sL(e,g5(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>m5&&this.events.setMaxListeners(m5)}emitError(e){const r=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${g5(this.url)}`));return this.events.emit("register_error",r),r}};var _oe={};const aL="wc",cL=2,iC="core",Xi=`${aL}@2:${iC}:`,Aoe={logger:"error"},Coe={database:":memory:"},Ioe="crypto",y5="client_ed25519_seed",Soe=pe.ONE_DAY,Toe="keychain",Poe="0.3",Noe="messages",Ooe="0.3",Roe=pe.SIX_HOURS,xoe="publisher",uL="irn",koe="error",lL="wss://relay.walletconnect.org",Boe="relayer",Er={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},joe="_subscription",Is={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Doe=.1,oC="2.23.0",Wt={link_mode:"link_mode",relay:"relay"},f1={inbound:"inbound",outbound:"outbound"},Uoe="0.3",Moe="WALLETCONNECT_CLIENT_ID",b5="WALLETCONNECT_LINK_MODE_APPS",ds={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Loe="subscription",Foe="0.3",qoe="pairing",Hoe="0.3",bf={wc_pairingDelete:{req:{ttl:pe.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:pe.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:pe.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:pe.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:pe.ONE_DAY,prompt:!1,tag:0},res:{ttl:pe.ONE_DAY,prompt:!1,tag:0}}},au={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Gs={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},zoe="history",$oe="0.3",Voe="expirer",Rs={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Goe="0.3",Woe="verify-api",Koe="https://verify.walletconnect.com",dL="https://verify.walletconnect.org",Vh=dL,Zoe=`${Vh}/v3`,Yoe=[Koe,dL],Joe="echo",Qoe="https://echo.walletconnect.com",ji={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Ro={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Ws={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success",session_request_response_started:"session_request_response_started",session_request_response_validation_success:"session_request_response_validation_success",session_request_response_publish_started:"session_request_response_publish_started"},Nc={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found",session_request_response_validation_failure:"session_request_response_validation_failure",session_request_response_publish_failure:"session_request_response_publish_failure"},Oc={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},wf={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},Xoe=.1,eae="event-client",tae=86400,rae="https://pulse.walletconnect.org/batch";function nae(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var h=0,y=0,b=0,E=p.length;b!==E&&p[b]===0;)b++,h++;for(var w=(E-b)*l+1>>>0,m=new Uint8Array(w);b!==E;){for(var _=p[b],C=0,I=w-1;(_!==0||C<y)&&I!==-1;I--,C++)_+=256*m[I]>>>0,m[I]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=C,b++}for(var P=w-y;P!==w&&m[P]===0;)P++;for(var T=c.repeat(h);P<w;++P)T+=t.charAt(m[P]);return T}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var h=0;if(p[h]!==" "){for(var y=0,b=0;p[h]===c;)y++,h++;for(var E=(p.length-h)*u+1>>>0,w=new Uint8Array(E);p[h];){var m=r[p.charCodeAt(h)];if(m===255)return;for(var _=0,C=E-1;(m!==0||_<b)&&C!==-1;C--,_++)m+=a*w[C]>>>0,w[C]=m%256>>>0,m=m/256>>>0;if(m!==0)throw new Error("Non-zero carry");b=_,h++}if(p[h]!==" "){for(var I=E-b;I!==E&&w[I]===0;)I++;for(var P=new Uint8Array(y+(E-I)),T=y;I!==E;)P[T++]=w[I++];return P}}}function g(p){var h=f(p);if(h)return h;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:g}}var sae=nae,iae=sae;const fL=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},oae=t=>new TextEncoder().encode(t),aae=t=>new TextDecoder().decode(t);class cae{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class uae{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return hL(this,e)}}class lae{constructor(e){this.decoders=e}or(e){return hL(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const hL=(t,e)=>new lae({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class dae{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new cae(e,r,n),this.decoder=new uae(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const UE=({name:t,prefix:e,encode:r,decode:n})=>new dae(t,e,r,n),p0=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:s}=iae(r,e);return UE({prefix:t,name:e,encode:n,decode:i=>fL(s(i))})},fae=(t,e,r,n)=>{const s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*r/8|0);let a=0,c=0,u=0;for(let l=0;l<i;++l){const d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|d,a+=r,a>=8&&(a-=8,o[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},hae=(t,e,r)=>{const n=e[e.length-1]==="=",s=(1<<r)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Jr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>UE({prefix:e,name:t,encode(s){return hae(s,n,r)},decode(s){return fae(s,n,r,t)}}),pae=UE({prefix:"\0",name:"identity",encode:t=>aae(t),decode:t=>oae(t)});var gae=Object.freeze({__proto__:null,identity:pae});const mae=Jr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var yae=Object.freeze({__proto__:null,base2:mae});const bae=Jr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var wae=Object.freeze({__proto__:null,base8:bae});const Eae=p0({prefix:"9",name:"base10",alphabet:"0123456789"});var vae=Object.freeze({__proto__:null,base10:Eae});const _ae=Jr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Aae=Jr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Cae=Object.freeze({__proto__:null,base16:_ae,base16upper:Aae});const Iae=Jr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Sae=Jr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Tae=Jr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Pae=Jr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Nae=Jr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Oae=Jr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Rae=Jr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),xae=Jr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),kae=Jr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Bae=Object.freeze({__proto__:null,base32:Iae,base32upper:Sae,base32pad:Tae,base32padupper:Pae,base32hex:Nae,base32hexupper:Oae,base32hexpad:Rae,base32hexpadupper:xae,base32z:kae});const jae=p0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Dae=p0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Uae=Object.freeze({__proto__:null,base36:jae,base36upper:Dae});const Mae=p0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Lae=p0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Fae=Object.freeze({__proto__:null,base58btc:Mae,base58flickr:Lae});const qae=Jr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Hae=Jr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),zae=Jr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),$ae=Jr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Vae=Object.freeze({__proto__:null,base64:qae,base64pad:Hae,base64url:zae,base64urlpad:$ae});const pL=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),Gae=pL.reduce((t,e,r)=>(t[r]=e,t),[]),Wae=pL.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Kae(t){return t.reduce((e,r)=>(e+=Gae[r],e),"")}function Zae(t){const e=[];for(const r of t){const n=Wae[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Yae=UE({prefix:"ðŸš€",name:"base256emoji",encode:Kae,decode:Zae});var Jae=Object.freeze({__proto__:null,base256emoji:Yae}),Qae=gL,w5=128,Xae=-128,ece=Math.pow(2,31);function gL(t,e,r){e=e||[],r=r||0;for(var n=r;t>=ece;)e[r++]=t&255|w5,t/=128;for(;t&Xae;)e[r++]=t&255|w5,t>>>=7;return e[r]=t|0,gL.bytes=r-n+1,e}var tce=aC,rce=128,E5=127;function aC(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw aC.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&E5)<<s:(o&E5)*Math.pow(2,s),s+=7}while(o>=rce);return aC.bytes=i-n,r}var nce=Math.pow(2,7),sce=Math.pow(2,14),ice=Math.pow(2,21),oce=Math.pow(2,28),ace=Math.pow(2,35),cce=Math.pow(2,42),uce=Math.pow(2,49),lce=Math.pow(2,56),dce=Math.pow(2,63),fce=function(t){return t<nce?1:t<sce?2:t<ice?3:t<oce?4:t<ace?5:t<cce?6:t<uce?7:t<lce?8:t<dce?9:10},hce={encode:Qae,decode:tce,encodingLength:fce},mL=hce;const v5=(t,e,r=0)=>(mL.encode(t,e,r),e),_5=t=>mL.encodingLength(t),cC=(t,e)=>{const r=e.byteLength,n=_5(t),s=n+_5(r),i=new Uint8Array(s+r);return v5(t,i,0),v5(r,i,n),i.set(e,s),new pce(t,r,e,i)};class pce{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}}const yL=({name:t,code:e,encode:r})=>new gce(t,e,r);class gce{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?cC(this.code,r):r.then(n=>cC(this.code,n))}else throw Error("Unknown type, must be binary type")}}const bL=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),mce=yL({name:"sha2-256",code:18,encode:bL("SHA-256")}),yce=yL({name:"sha2-512",code:19,encode:bL("SHA-512")});var bce=Object.freeze({__proto__:null,sha256:mce,sha512:yce});const wL=0,wce="identity",EL=fL,Ece=t=>cC(wL,EL(t)),vce={code:wL,name:wce,encode:EL,digest:Ece};var _ce=Object.freeze({__proto__:null,identity:vce});new TextEncoder,new TextDecoder;const A5={...gae,...yae,...wae,...vae,...Cae,...Bae,...Uae,...Fae,...Vae,...Jae};({...bce,..._ce});function vL(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Ace(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?vL(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function _L(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const C5=_L("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),rA=_L("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Ace(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Cce={utf8:C5,"utf-8":C5,hex:A5.base16,latin1:rA,ascii:rA,binary:rA,...A5};function Ice(t,e="utf8"){const r=Cce[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?vL(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var Sce=Object.defineProperty,Tce=(t,e,r)=>e in t?Sce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Oi=(t,e,r)=>Tce(t,typeof e!="symbol"?e+"":e,r);class Pce{constructor(e,r){this.core=e,this.logger=r,Oi(this,"keychain",new Map),Oi(this,"name",Toe),Oi(this,"version",Poe),Oi(this,"initialized",!1),Oi(this,"storagePrefix",Xi),Oi(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),Oi(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),Oi(this,"set",async(n,s)=>{this.isInitialized(),this.keychain.set(n,s),await this.persist()}),Oi(this,"get",n=>{this.isInitialized();const s=this.keychain.get(n);if(typeof s>"u"){const{message:i}=ge("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(i)}return s}),Oi(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=Zn(r,this.name)}get context(){return Kn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,V2(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?G2(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Nce=Object.defineProperty,Oce=(t,e,r)=>e in t?Nce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Nr=(t,e,r)=>Oce(t,typeof e!="symbol"?e+"":e,r);class Rce{constructor(e,r,n){this.core=e,this.logger=r,Nr(this,"name",Ioe),Nr(this,"keychain"),Nr(this,"randomSessionIdentifier",nC()),Nr(this,"initialized",!1),Nr(this,"clientId"),Nr(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Nr(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Nr(this,"getClientId",async()=>{if(this.isInitialized(),this.clientId)return this.clientId;const s=await this.getClientSeed(),i=BP(s),o=XD(i.publicKey);return this.clientId=o,o}),Nr(this,"generateKeyPair",()=>{this.isInitialized();const s=jse();return this.setPrivateKey(s.publicKey,s.privateKey)}),Nr(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=BP(i),a=this.randomSessionIdentifier;return await EJ(a,s,Soe,o)}),Nr(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=Dse(a,i);return this.setSymKey(c,o)}),Nr(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||d1(s);return await this.keychain.set(o,s),o}),Nr(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Nr(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Nr(this,"encode",async(s,i,o)=>{this.isInitialized();const a=QM(o),c=ea(i);if(Z6(a))return Lse(c,o?.encoding);if(K6(a)){const f=a.senderPublicKey,g=a.receiverPublicKey;s=await this.generateSharedKey(f,g)}const u=this.getSymKey(s),{type:l,senderPublicKey:d}=a;return Use({type:l,symKey:u,message:c,senderPublicKey:d,encoding:o?.encoding})}),Nr(this,"decode",async(s,i,o)=>{this.isInitialized();const a=qse(i,o);if(Z6(a)){const c=Fse(i,o?.encoding);return ju(c)}if(K6(a)){const c=a.receiverPublicKey,u=a.senderPublicKey;s=await this.generateSharedKey(c,u)}try{const c=this.getSymKey(s),u=Mse({symKey:c,encoded:i,encoding:o?.encoding});return ju(u)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Nr(this,"getPayloadType",(s,i=Fn)=>{const o=Fp({encoded:s,encoding:i});return Lu(o.type)}),Nr(this,"getPayloadSenderPublicKey",(s,i=Fn)=>{const o=Fp({encoded:s,encoding:i});return o.senderPublicKey?Gn(o.senderPublicKey,Sn):void 0}),this.core=e,this.logger=Zn(r,this.name),this.keychain=n||new Pce(this.core,this.logger)}get context(){return Kn(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(y5)}catch{e=nC(),await this.keychain.set(y5,e)}return Ice(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var xce=Object.defineProperty,kce=Object.defineProperties,Bce=Object.getOwnPropertyDescriptors,I5=Object.getOwnPropertySymbols,jce=Object.prototype.hasOwnProperty,Dce=Object.prototype.propertyIsEnumerable,uC=(t,e,r)=>e in t?xce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Uce=(t,e)=>{for(var r in e||(e={}))jce.call(e,r)&&uC(t,r,e[r]);if(I5)for(var r of I5(e))Dce.call(e,r)&&uC(t,r,e[r]);return t},Mce=(t,e)=>kce(t,Bce(e)),ns=(t,e,r)=>uC(t,typeof e!="symbol"?e+"":e,r);class Lce extends bK{constructor(e,r){super(e,r),this.logger=e,this.core=r,ns(this,"messages",new Map),ns(this,"messagesWithoutClientAck",new Map),ns(this,"name",Noe),ns(this,"version",Ooe),ns(this,"initialized",!1),ns(this,"storagePrefix",Xi),ns(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),ns(this,"set",async(n,s,i)=>{this.isInitialized();const o=ks(s);let a=this.messages.get(n);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(n,a),i===f1.inbound){const c=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,Mce(Uce({},c),{[o]:s}))}return await this.persist(),o}),ns(this,"get",n=>{this.isInitialized();let s=this.messages.get(n);return typeof s>"u"&&(s={}),s}),ns(this,"getWithoutAck",n=>{this.isInitialized();const s={};for(const i of n){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),ns(this,"has",(n,s)=>{this.isInitialized();const i=this.get(n),o=ks(s);return typeof i[o]<"u"}),ns(this,"ack",async(n,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(n);if(typeof i>"u")return;const o=ks(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,i),await this.persist()}),ns(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),await this.persist()}),this.logger=Zn(e,this.name),this.core=r}get context(){return Kn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,V2(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,V2(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?G2(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?G2(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Fce=Object.defineProperty,qce=Object.defineProperties,Hce=Object.getOwnPropertyDescriptors,S5=Object.getOwnPropertySymbols,zce=Object.prototype.hasOwnProperty,$ce=Object.prototype.propertyIsEnumerable,lC=(t,e,r)=>e in t?Fce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yl=(t,e)=>{for(var r in e||(e={}))zce.call(e,r)&&lC(t,r,e[r]);if(S5)for(var r of S5(e))$ce.call(e,r)&&lC(t,r,e[r]);return t},T5=(t,e)=>qce(t,Hce(e)),Ss=(t,e,r)=>lC(t,typeof e!="symbol"?e+"":e,r);class Vce extends wK{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,Ss(this,"events",new qs.EventEmitter),Ss(this,"name",xoe),Ss(this,"queue",new Map),Ss(this,"publishTimeout",pe.toMiliseconds(pe.ONE_MINUTE)),Ss(this,"initialPublishTimeout",pe.toMiliseconds(pe.ONE_SECOND*15)),Ss(this,"needsTransportRestart",!1),Ss(this,"publish",async(n,s,i)=>{var o,a,c,u,l;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:s,opts:i}});const d=i?.ttl||Roe,f=i?.prompt||!1,g=i?.tag||0,p=i?.id||Va().toString(),h=Yl(J1().protocol),y={id:p,method:i?.publishMethod||h.publish,params:yl({topic:n,message:s,ttl:d,prompt:f,tag:g,attestation:i?.attestation},i?.tvf)},b=`Failed to publish payload, please try again. id:${p} tag:${g}`;try{kr((o=y.params)==null?void 0:o.prompt)&&((a=y.params)==null||delete a.prompt),kr((c=y.params)==null?void 0:c.tag)&&((u=y.params)==null||delete u.tag);const E=new Promise(async w=>{const m=({id:C})=>{var I;((I=y.id)==null?void 0:I.toString())===C.toString()&&(this.removeRequestFromQueue(C),this.relayer.events.removeListener(Er.publish,m),w())};this.relayer.events.on(Er.publish,m);const _=$i(new Promise((C,I)=>{this.rpcPublish(y,i).then(C).catch(P=>{this.logger.warn(P,P?.message),I(P)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${p} tag:${g}`);try{await _,this.events.removeListener(Er.publish,m)}catch(C){this.queue.set(p,{request:y,opts:i,attempt:1}),this.logger.warn(C,C?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:p,topic:n,message:s,opts:i}}),await $i(E,this.publishTimeout,b)}catch(E){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(E),(l=i?.internal)!=null&&l.throwOnFailedPublish)throw E}finally{this.queue.delete(p)}}),Ss(this,"publishCustom",async n=>{var s,i,o,a,c;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:n});const{payload:u,opts:l={}}=n,{attestation:d,tvf:f,publishMethod:g,prompt:p,tag:h,ttl:y=pe.FIVE_MINUTES}=l,b=l.id||Va().toString(),E=Yl(J1().protocol),w=g||E.publish,m={id:b,method:w,params:yl(T5(yl({},u),{ttl:y,prompt:p,tag:h,attestation:d}),f)},_=`Failed to publish custom payload, please try again. id:${b} tag:${h}`;try{kr((s=m.params)==null?void 0:s.prompt)&&((i=m.params)==null||delete i.prompt),kr((o=m.params)==null?void 0:o.tag)&&((a=m.params)==null||delete a.tag);const C=new Promise(async I=>{const P=({id:R})=>{var U;((U=m.id)==null?void 0:U.toString())===R.toString()&&(this.removeRequestFromQueue(R),this.relayer.events.removeListener(Er.publish,P),I())};this.relayer.events.on(Er.publish,P);const T=$i(new Promise((R,U)=>{this.rpcPublish(m,l).then(R).catch(k=>{this.logger.warn(k,k?.message),U(k)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${w} id:${b} tag:${h}`);try{await T,this.events.removeListener(Er.publish,P)}catch(R){this.queue.set(b,{request:m,opts:l,attempt:1}),this.logger.warn(R,R?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:b,payload:u,opts:l}}),await $i(C,this.publishTimeout,_)}catch(C){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(C),(c=l?.internal)!=null&&c.throwOnFailedPublish)throw C}finally{this.queue.delete(b)}}),Ss(this,"on",(n,s)=>{this.events.on(n,s)}),Ss(this,"once",(n,s)=>{this.events.once(n,s)}),Ss(this,"off",(n,s)=>{this.events.off(n,s)}),Ss(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.relayer=e,this.logger=Zn(r,this.name),this.registerEventListeners()}get context(){return Kn(this.logger)}async rpcPublish(e,r){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});const n=await this.relayer.request(e);return this.relayer.events.emit(Er.publish,yl(yl({},e),r)),this.logger.debug("Successfully Published Payload"),n}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{var n;const s=e.attempt+1;this.queue.set(r,T5(yl({},e),{attempt:s})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${(n=e.request.params)==null?void 0:n.tag}, attempt: ${s}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Zu.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Er.connection_stalled);return}this.checkQueue()}),this.relayer.on(Er.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var Gce=Object.defineProperty,Wce=(t,e,r)=>e in t?Gce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bl=(t,e,r)=>Wce(t,typeof e!="symbol"?e+"":e,r);class Kce{constructor(){bl(this,"map",new Map),bl(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),bl(this,"get",e=>this.map.get(e)||[]),bl(this,"exists",(e,r)=>this.get(e).includes(r)),bl(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const s=n.filter(i=>i!==r);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),bl(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var Zce=Object.defineProperty,Yce=Object.defineProperties,Jce=Object.getOwnPropertyDescriptors,P5=Object.getOwnPropertySymbols,Qce=Object.prototype.hasOwnProperty,Xce=Object.prototype.propertyIsEnumerable,dC=(t,e,r)=>e in t?Zce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ef=(t,e)=>{for(var r in e||(e={}))Qce.call(e,r)&&dC(t,r,e[r]);if(P5)for(var r of P5(e))Xce.call(e,r)&&dC(t,r,e[r]);return t},nA=(t,e)=>Yce(t,Jce(e)),Bt=(t,e,r)=>dC(t,typeof e!="symbol"?e+"":e,r);class eue extends _K{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,Bt(this,"subscriptions",new Map),Bt(this,"topicMap",new Kce),Bt(this,"events",new qs.EventEmitter),Bt(this,"name",Loe),Bt(this,"version",Foe),Bt(this,"pending",new Map),Bt(this,"cached",[]),Bt(this,"initialized",!1),Bt(this,"storagePrefix",Xi),Bt(this,"subscribeTimeout",pe.toMiliseconds(pe.ONE_MINUTE)),Bt(this,"initialSubscribeTimeout",pe.toMiliseconds(pe.ONE_SECOND*15)),Bt(this,"clientId"),Bt(this,"batchSubscribeTopicsLimit",500),Bt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Bt(this,"subscribe",async(n,s)=>{var i;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}});try{const o=J1(s),a={topic:n,relay:o,transportType:s?.transportType};(i=s?.internal)!=null&&i.skipSubscribe||this.pending.set(n,a);const c=await this.rpcSubscribe(n,o,s);return typeof c=="string"&&(this.onSubscribe(c,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:s}})),c}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),Bt(this,"unsubscribe",async(n,s)=>{this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(n,s.id,s):await this.unsubscribeByTopic(n,s)}),Bt(this,"isSubscribed",n=>new Promise(s=>{s(this.topicMap.topics.includes(n))})),Bt(this,"isKnownTopic",n=>new Promise(s=>{s(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(i=>i.topic===n))})),Bt(this,"on",(n,s)=>{this.events.on(n,s)}),Bt(this,"once",(n,s)=>{this.events.once(n,s)}),Bt(this,"off",(n,s)=>{this.events.off(n,s)}),Bt(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),Bt(this,"start",async()=>{await this.onConnect()}),Bt(this,"stop",async()=>{await this.onDisconnect()}),Bt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Bt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(s=>{n.push(s)}),await this.batchSubscribe(n)}),Bt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Zu.pulse,async()=>{await this.checkPending()}),this.events.on(ds.created,async n=>{const s=ds.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()}),this.events.on(ds.deleted,async n=>{const s=ds.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:n}),await this.persist()})}),this.relayer=e,this.logger=Zn(r,this.name),this.clientId=""}get context(){return Kn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async s=>await this.unsubscribeById(e,s,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const s=J1(n);await this.restartToComplete({topic:e,id:r,relay:s}),await this.rpcUnsubscribe(e,r,s);const i=Jt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,r,n){var s,i;const o=await this.getSubscriptionId(e);if((s=n?.internal)!=null&&s.skipSubscribe)return o;(!n||n?.transportType===Wt.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const a={method:Yl(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const c=(i=n?.internal)==null?void 0:i.throwOnFailedPublish;try{if(n?.transportType===Wt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(d=>this.logger.warn(d))},pe.toMiliseconds(pe.ONE_SECOND)),o;const u=new Promise(async d=>{const f=g=>{g.topic===e&&(this.events.removeListener(ds.created,f),d(g.id))};this.events.on(ds.created,f);try{const g=await $i(new Promise((p,h)=>{this.relayer.request(a).catch(y=>{this.logger.warn(y,y?.message),h(y)}).then(p)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(ds.created,f),d(g)}catch{}}),l=await $i(u,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&c)throw new Error(`Subscribing to ${e} failed, please try again`);return l?o:null}catch(u){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Er.connection_stalled),c)throw u}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:Yl(r.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await $i(new Promise(s=>{this.relayer.request(n).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Er.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:Yl(r.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let s;try{s=await await $i(new Promise((i,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Er.connection_stalled)}return s}rpcUnsubscribe(e,r,n){const s={method:Yl(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,r){this.setSubscription(e,nA(Ef({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Ef({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,Ef({},r)),this.topicMap.set(r.topic,e),this.events.emit(ds.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(ds.deleted,nA(Ef({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ds.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(ds.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(r=>{var n;return r.topic===((n=this.subscriptions.get(r.id))==null?void 0:n.topic)})){const{message:r}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>nA(Ef({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await tre(pe.toMiliseconds(pe.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return ks(e+await this.getClientId())}}var tue=Object.defineProperty,N5=Object.getOwnPropertySymbols,rue=Object.prototype.hasOwnProperty,nue=Object.prototype.propertyIsEnumerable,fC=(t,e,r)=>e in t?tue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,O5=(t,e)=>{for(var r in e||(e={}))rue.call(e,r)&&fC(t,r,e[r]);if(N5)for(var r of N5(e))nue.call(e,r)&&fC(t,r,e[r]);return t},vt=(t,e,r)=>fC(t,typeof e!="symbol"?e+"":e,r);class sue extends EK{constructor(e){var r;super(e),vt(this,"protocol","wc"),vt(this,"version",2),vt(this,"core"),vt(this,"logger"),vt(this,"events",new qs.EventEmitter),vt(this,"provider"),vt(this,"messages"),vt(this,"subscriber"),vt(this,"publisher"),vt(this,"name",Boe),vt(this,"transportExplicitlyClosed",!1),vt(this,"initialized",!1),vt(this,"connectionAttemptInProgress",!1),vt(this,"relayUrl"),vt(this,"projectId"),vt(this,"packageName"),vt(this,"bundleId"),vt(this,"hasExperiencedNetworkDisruption",!1),vt(this,"pingTimeout"),vt(this,"heartBeatTimeout",pe.toMiliseconds(pe.THIRTY_SECONDS+pe.FIVE_SECONDS)),vt(this,"reconnectTimeout"),vt(this,"connectPromise"),vt(this,"reconnectInProgress",!1),vt(this,"requestsInFlight",[]),vt(this,"connectTimeout",pe.toMiliseconds(pe.ONE_SECOND*15)),vt(this,"request",async n=>{var s,i;this.logger.debug("Publishing Request Payload");const o=n.id||Va().toString();await this.toEstablishConnection();try{this.logger.trace({id:o,method:n.method,topic:(s=n.params)==null?void 0:s.topic},"relayer.request - publishing...");const a=`${o}:${((i=n.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(a);const c=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(u=>u!==a),c}catch(a){throw this.logger.debug(`Failed to Publish Request: ${o}`),a}}),vt(this,"resetPingTimeout",()=>{V1()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,s,i,o;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(o=(i=(s=(n=this.provider)==null?void 0:n.connection)==null?void 0:s.socket)==null?void 0:i.terminate)==null||o.call(i)}catch(a){this.logger.warn(a,a?.message)}},this.heartBeatTimeout))}),vt(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),vt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected ðŸ›œ"),this.startPingTimeout(),this.events.emit(Er.connect)}),vt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected ðŸ›‘"),this.requestsInFlight=[],this.onProviderDisconnect()}),vt(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Er.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),vt(this,"registerProviderListeners",()=>{this.provider.on(Is.payload,this.onPayloadHandler),this.provider.on(Is.connect,this.onConnectHandler),this.provider.on(Is.disconnect,this.onDisconnectHandler),this.provider.on(Is.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=RI({logger:(r=e.logger)!=null?r:koe,name:this.name}),this.messages=new Lce(this.logger,e.core),this.subscriber=new eue(this,this.logger),this.publisher=new Vce(this,this.logger),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||lL,Lte()?this.packageName=m6():Fte()&&(this.bundleId=m6()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e?.message))}get context(){return Kn(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:Wt.relay},f1.outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,r){var n,s,i;this.isInitialized(),(!(r!=null&&r.transportType)||r?.transportType==="relay")&&await this.toEstablishConnection();const o=typeof((n=r?.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(s=r?.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const u=l=>{l.topic===e&&(this.subscriber.off(ds.created,u),c())};return await Promise.all([new Promise(l=>{c=l,this.subscriber.on(ds.created,u)}),new Promise(async(l,d)=>{a=await this.subscriber.subscribe(e,O5({internal:{throwOnFailedPublish:o}},r)).catch(f=>{o&&d(f)})||a,l()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await $i(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await c5())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,s)=>n.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+s?.message)}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const s=wr(pe.FIVE_MINUTES),i={topic:n,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,i)}this.events.emit(Er.message,e),await this.recordMessageEvent(e,f1.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Is.disconnect,i),await $i(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Is.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Is.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Is.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const s=n;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,pe.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,s,i;if(V1())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((i=(s=(n=this.provider)==null?void 0:n.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new BI(new voe(Vte({sdkVersion:oC,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,r){const{topic:n,message:s}=e;await this.messages.set(n,s,r)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isKnownTopic(r))return this.logger.warn(`Ignoring message for unknown topic ${r}`),!0;const s=this.messages.has(r,n);return s&&this.logger.warn(`Ignoring duplicate message: ${n}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),kI(e)){if(!e.method.endsWith(joe))return;const r=e.params,{topic:n,message:s,publishedAt:i,attestation:o}=r.data,a={topic:n,message:s,publishedAt:i,transportType:Wt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(O5({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else DE(e)&&this.events.emit(Er.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,f1.inbound),this.events.emit(Er.message,e))}async acknowledgePayload(e){const r=qp(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Is.payload,this.onPayloadHandler),this.provider.off(Is.connect,this.onConnectHandler),this.provider.off(Is.disconnect,this.onDisconnectHandler),this.provider.off(Is.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await c5();qie(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Zu.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&$ie())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(r){this.logger.warn(r,r?.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Er.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},pe.toMiliseconds(Doe)))))}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function iue(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function R5(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function x5(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const oue="[object RegExp]",aue="[object String]",cue="[object Number]",uue="[object Boolean]",k5="[object Arguments]",lue="[object Symbol]",due="[object Date]",fue="[object Map]",hue="[object Set]",pue="[object Array]",gue="[object Function]",mue="[object ArrayBuffer]",sA="[object Object]",yue="[object Error]",bue="[object DataView]",wue="[object Uint8Array]",Eue="[object Uint8ClampedArray]",vue="[object Uint16Array]",_ue="[object Uint32Array]",Aue="[object BigUint64Array]",Cue="[object Int8Array]",Iue="[object Int16Array]",Sue="[object Int32Array]",Tue="[object BigInt64Array]",Pue="[object Float32Array]",Nue="[object Float64Array]";function Oue(){}function B5(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Rue(t,e,r){return jh(t,e,void 0,void 0,void 0,void 0,r)}function jh(t,e,r,n,s,i,o){const a=o(t,e,r,n,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Gh(t,e,i,o)}return Gh(t,e,i,o)}function Gh(t,e,r,n){if(Object.is(t,e))return!0;let s=x5(t),i=x5(e);if(s===k5&&(s=sA),i===k5&&(i=sA),s!==i)return!1;switch(s){case aue:return t.toString()===e.toString();case cue:{const c=t.valueOf(),u=e.valueOf();return iue(c,u)}case uue:case due:case lue:return Object.is(t.valueOf(),e.valueOf());case oue:return t.source===e.source&&t.flags===e.flags;case gue:return t===e}r=r??new Map;const o=r.get(t),a=r.get(e);if(o!=null&&a!=null)return o===e;r.set(t,e),r.set(e,t);try{switch(s){case fue:{if(t.size!==e.size)return!1;for(const[c,u]of t.entries())if(!e.has(c)||!jh(u,e.get(c),c,t,e,r,n))return!1;return!0}case hue:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),u=Array.from(e.values());for(let l=0;l<c.length;l++){const d=c[l],f=u.findIndex(g=>jh(d,g,void 0,t,e,r,n));if(f===-1)return!1;u.splice(f,1)}return!0}case pue:case wue:case Eue:case vue:case _ue:case Aue:case Cue:case Iue:case Sue:case Tue:case Pue:case Nue:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!jh(t[c],e[c],c,t,e,r,n))return!1;return!0}case mue:return t.byteLength!==e.byteLength?!1:Gh(new Uint8Array(t),new Uint8Array(e),r,n);case bue:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Gh(new Uint8Array(t),new Uint8Array(e),r,n);case yue:return t.name===e.name&&t.message===e.message;case sA:{if(!(Gh(t.constructor,e.constructor,r,n)||B5(t)&&B5(e)))return!1;const c=[...Object.keys(t),...R5(t)],u=[...Object.keys(e),...R5(e)];if(c.length!==u.length)return!1;for(let l=0;l<c.length;l++){const d=c[l],f=t[d];if(!Object.hasOwn(e,d))return!1;const g=e[d];if(!jh(f,g,d,t,e,r,n))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}function xue(t,e){return Rue(t,e,Oue)}var kue=Object.defineProperty,j5=Object.getOwnPropertySymbols,Bue=Object.prototype.hasOwnProperty,jue=Object.prototype.propertyIsEnumerable,hC=(t,e,r)=>e in t?kue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,D5=(t,e)=>{for(var r in e||(e={}))Bue.call(e,r)&&hC(t,r,e[r]);if(j5)for(var r of j5(e))jue.call(e,r)&&hC(t,r,e[r]);return t},xn=(t,e,r)=>hC(t,typeof e!="symbol"?e+"":e,r);class Qu extends vK{constructor(e,r,n,s=Xi,i=void 0){super(e,r,n,s),this.core=e,this.logger=r,this.name=n,xn(this,"map",new Map),xn(this,"version",Uoe),xn(this,"cached",[]),xn(this,"initialized",!1),xn(this,"getKey"),xn(this,"storagePrefix",Xi),xn(this,"recentlyDeleted",[]),xn(this,"recentlyDeletedLimit",200),xn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!kr(o)?this.map.set(this.getKey(o),o):bie(o)?this.map.set(o.id,o):wie(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),xn(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),xn(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),xn(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>xue(a[c],o[c]))):this.values)),xn(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=D5(D5({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),xn(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Zn(r,this.name),this.storagePrefix=s,this.getKey=i}get context(){return Kn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:s}=ge("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:n}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Due=Object.defineProperty,Uue=(t,e,r)=>e in t?Due(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,at=(t,e,r)=>Uue(t,typeof e!="symbol"?e+"":e,r);class Mue{constructor(e,r){this.core=e,this.logger=r,at(this,"name",qoe),at(this,"version",Hoe),at(this,"events",new rI),at(this,"pairings"),at(this,"initialized",!1),at(this,"storagePrefix",Xi),at(this,"ignoredPayloadTypes",[Zo]),at(this,"registeredMethods",[]),at(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),at(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),at(this,"create",async n=>{this.isInitialized();const s=nC(),i=await this.core.crypto.setSymKey(s),o=wr(pe.FIVE_MINUTES),a={protocol:uL},c={topic:i,expiry:o,relay:a,active:!1,methods:n?.methods},u=X6({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:n?.methods});return this.events.emit(au.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:n?.transportType,internal:n?.internal}),{topic:i,uri:u}}),at(this,"pair",async n=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:n?.uri,trace:[ji.pairing_started]}});this.isValidPair(n,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:u}=Q6(n.uri);s.props.properties.topic=i,s.addTrace(ji.pairing_uri_validation_success),s.addTrace(ji.pairing_uri_not_expired);let l;if(this.pairings.keys.includes(i)){if(l=this.pairings.get(i),s.addTrace(ji.existing_pairing),l.active)throw s.setError(Ro.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(ji.pairing_not_expired)}const d=c||wr(pe.FIVE_MINUTES),f={topic:i,relay:a,expiry:d,active:!1,methods:u};this.core.expirer.set(i,d),await this.pairings.set(i,f),s.addTrace(ji.store_new_pairing),n.activatePairing&&await this.activate({topic:i}),this.events.emit(au.create,f),s.addTrace(ji.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(ji.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Ro.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(g){throw s.setError(Ro.subscribe_pairing_topic_failure),g}return s.addTrace(ji.subscribe_pairing_topic_success),f}),at(this,"activate",async({topic:n})=>{this.isInitialized();const s=wr(pe.FIVE_MINUTES);this.core.expirer.set(n,s),await this.pairings.update(n,{active:!0,expiry:s})}),at(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=n;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=su();this.events.once(Ot("pairing_ping",i),({error:u})=>{u?c(u):a()}),await o()}}),at(this,"updateExpiry",async({topic:n,expiry:s})=>{this.isInitialized(),await this.pairings.update(n,{expiry:s})}),at(this,"updateMetadata",async({topic:n,metadata:s})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:s})}),at(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),at(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:s}=n;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Jt("USER_DISCONNECTED")),await this.deletePairing(s))}),at(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=n,c=this.core.crypto.keychain.get(s);return X6({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),at(this,"sendRequest",async(n,s,i)=>{const o=ai(s,i),a=await this.core.crypto.encode(n,o),c=bf[s].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,c),o.id}),at(this,"sendResult",async(n,s,i)=>{const o=qp(n,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,n)).request.method,u=bf[c].res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),at(this,"sendError",async(n,s,i)=>{const o=jE(n,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,n)).request.method,u=bf[c]?bf[c].res:bf.unregistered_method.res;await this.core.relayer.publish(s,a,u),await this.core.history.resolve(o)}),at(this,"deletePairing",async(n,s)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Jt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),s?Promise.resolve():this.core.expirer.del(n)])}),at(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(s=>Li(s.expiry));await Promise.all(n.map(s=>this.deletePairing(s.topic)))}),at(this,"onRelayEventRequest",async n=>{const{topic:s,payload:i}=n;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),at(this,"onRelayEventResponse",async n=>{const{topic:s,payload:i}=n,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),at(this,"onPairingPingRequest",async(n,s)=>{const{id:i}=s;try{this.isValidPing({topic:n}),await this.sendResult(i,n,!0),this.events.emit(au.ping,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),at(this,"onPairingPingResponse",(n,s)=>{const{id:i}=s;setTimeout(()=>{Ui(s)?this.events.emit(Ot("pairing_ping",i),{}):Bs(s)&&this.events.emit(Ot("pairing_ping",i),{error:s.error})},500)}),at(this,"onPairingDeleteRequest",async(n,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(au.delete,{id:i,topic:n})}catch(o){await this.sendError(i,n,o),this.logger.error(o)}}),at(this,"onUnknownRpcMethodRequest",async(n,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Jt("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,n,a),this.logger.error(a)}catch(a){await this.sendError(i,n,a),this.logger.error(a)}}),at(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(Jt("WC_METHOD_UNSUPPORTED",n))}),at(this,"isValidPair",(n,s)=>{var i;if(!Dn(n)){const{message:a}=ge("MISSING_OR_INVALID",`pair() params: ${n}`);throw s.setError(Ro.malformed_pairing_uri),new Error(a)}if(!yie(n.uri)){const{message:a}=ge("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw s.setError(Ro.malformed_pairing_uri),new Error(a)}const o=Q6(n?.uri);if(!((i=o?.relay)!=null&&i.protocol)){const{message:a}=ge("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Ro.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=ge("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Ro.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&pe.toMiliseconds(o?.expiryTimestamp)<Date.now()){s.setError(Ro.pairing_expired);const{message:a}=ge("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),at(this,"isValidPing",async n=>{if(!Dn(n)){const{message:i}=ge("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),at(this,"isValidDisconnect",async n=>{if(!Dn(n)){const{message:i}=ge("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(i)}const{topic:s}=n;await this.isValidPairingTopic(s)}),at(this,"isValidPairingTopic",async n=>{if(!vr(n,!1)){const{message:s}=ge("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(s)}if(!this.pairings.keys.includes(n)){const{message:s}=ge("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(s)}if(Li(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:s}=ge("EXPIRED",`pairing topic: ${n}`);throw new Error(s)}}),this.core=e,this.logger=Zn(r,this.name),this.pairings=new Qu(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Kn(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Er.message,async e=>{const{topic:r,message:n,transportType:s}=e;if(this.pairings.keys.includes(r)&&s!==Wt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{const i=await this.core.crypto.decode(r,n);kI(i)?(this.core.history.set(r,i),await this.onRelayEventRequest({topic:r,payload:i})):DE(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id)),await this.core.relayer.messages.ack(r,n)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Rs.expired,async e=>{const{topic:r}=eM(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(au.expire,{topic:r}))})}}var Lue=Object.defineProperty,Fue=(t,e,r)=>e in t?Lue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fr=(t,e,r)=>Fue(t,typeof e!="symbol"?e+"":e,r);class que extends yK{constructor(e,r){super(e,r),this.core=e,this.logger=r,Fr(this,"records",new Map),Fr(this,"events",new qs.EventEmitter),Fr(this,"name",zoe),Fr(this,"version",$oe),Fr(this,"cached",[]),Fr(this,"initialized",!1),Fr(this,"storagePrefix",Xi),Fr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Fr(this,"set",(n,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:n,request:{method:s.method,params:s.params||null},chainId:i,expiry:wr(pe.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Gs.created,o)}),Fr(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const s=await this.getRecord(n.id);typeof s.response>"u"&&(s.response=Bs(n)?{error:n.error}:{result:n.result},this.records.set(s.id,s),this.persist(),this.events.emit(Gs.updated,s))}),Fr(this,"get",async(n,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:s}),await this.getRecord(s))),Fr(this,"delete",(n,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===n){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Gs.deleted,i)}}),this.persist()}),Fr(this,"exists",async(n,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===n:!1)),Fr(this,"on",(n,s)=>{this.events.on(n,s)}),Fr(this,"once",(n,s)=>{this.events.once(n,s)}),Fr(this,"off",(n,s)=>{this.events.off(n,s)}),Fr(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=Zn(r,this.name)}get context(){return Kn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:ai(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Gs.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Gs.created,e=>{const r=Gs.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Gs.updated,e=>{const r=Gs.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Gs.deleted,e=>{const r=Gs.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(Zu.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{pe.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(Gs.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Hue=Object.defineProperty,zue=(t,e,r)=>e in t?Hue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,on=(t,e,r)=>zue(t,typeof e!="symbol"?e+"":e,r);class $ue extends AK{constructor(e,r){super(e,r),this.core=e,this.logger=r,on(this,"expirations",new Map),on(this,"events",new qs.EventEmitter),on(this,"name",Voe),on(this,"version",Goe),on(this,"cached",[]),on(this,"initialized",!1),on(this,"storagePrefix",Xi),on(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),on(this,"has",n=>{try{const s=this.formatTarget(n);return typeof this.getExpiration(s)<"u"}catch{return!1}}),on(this,"set",(n,s)=>{this.isInitialized();const i=this.formatTarget(n),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Rs.created,{target:i,expiration:o})}),on(this,"get",n=>{this.isInitialized();const s=this.formatTarget(n);return this.getExpiration(s)}),on(this,"del",n=>{if(this.isInitialized(),this.has(n)){const s=this.formatTarget(n),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Rs.deleted,{target:s,expiration:i})}}),on(this,"on",(n,s)=>{this.events.on(n,s)}),on(this,"once",(n,s)=>{this.events.once(n,s)}),on(this,"off",(n,s)=>{this.events.off(n,s)}),on(this,"removeListener",(n,s)=>{this.events.removeListener(n,s)}),this.logger=Zn(r,this.name)}get context(){return Kn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Gte(e);if(typeof e=="number")return Wte(e);const{message:r}=ge("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Rs.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;pe.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Rs.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Zu.pulse,()=>this.checkExpirations()),this.events.on(Rs.created,e=>{const r=Rs.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Rs.expired,e=>{const r=Rs.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Rs.deleted,e=>{const r=Rs.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Vue=Object.defineProperty,Gue=(t,e,r)=>e in t?Vue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,br=(t,e,r)=>Gue(t,typeof e!="symbol"?e+"":e,r);class Wue extends CK{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,br(this,"name",Woe),br(this,"abortController"),br(this,"isDevEnv"),br(this,"verifyUrlV3",Zoe),br(this,"storagePrefix",Xi),br(this,"version",cL),br(this,"publicKey"),br(this,"fetchPromise"),br(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&pe.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),br(this,"register",async s=>{if(!qd()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const u=ta.getDocument(),l=this.startAbortTimer(pe.ONE_SECOND*5),d=await new Promise((f,g)=>{const p=()=>{window.removeEventListener("message",y),u.body.removeChild(h),g("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const h=u.createElement("iframe");h.src=c,h.style.display="none",h.addEventListener("error",p,{signal:this.abortController.signal});const y=b=>{if(b.data&&typeof b.data=="string")try{const E=JSON.parse(b.data);if(E.type==="verify_attestation"){if(j2(E.attestation).payload.id!==o)return;clearInterval(l),u.body.removeChild(h),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",y),f(E.attestation===null?"":E.attestation)}}catch(E){this.logger.warn(E)}};u.body.appendChild(h),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug(d,"jwt attestation"),d}catch(u){this.logger.warn(u)}return""}),br(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(j2(i).payload.id!==a)return;const u=await this.isValidJwtAttestation(i);if(u){if(!u.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return u}}if(!o)return;const c=this.getVerifyUrl(s?.verifyUrl);return this.fetchAttestation(o,c)}),br(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(pe.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),br(this,"getVerifyUrl",s=>{let i=s||Vh;return Yoe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${Vh}`),i=Vh),i}),br(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(pe.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),br(this,"persistPublicKey",async s=>{this.logger.debug(s,"persisting public key to local storage"),await this.store.setItem(this.storeKey,s),this.publicKey=s}),br(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),br(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),br(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),br(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),br(this,"validateAttestation",(s,i)=>{const o=zse(s,i.publicKey),a={hasExpired:pe.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Zn(r,this.name),this.abortController=new AbortController,this.isDevEnv=EI(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Kn(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),pe.toMiliseconds(e))}}var Kue=Object.defineProperty,Zue=(t,e,r)=>e in t?Kue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,U5=(t,e,r)=>Zue(t,typeof e!="symbol"?e+"":e,r);class Yue extends IK{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,U5(this,"context",Joe),U5(this,"registerDeviceToken",async n=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=n,c=`${Qoe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Zn(r,this.context)}}var Jue=Object.defineProperty,M5=Object.getOwnPropertySymbols,Que=Object.prototype.hasOwnProperty,Xue=Object.prototype.propertyIsEnumerable,pC=(t,e,r)=>e in t?Jue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vf=(t,e)=>{for(var r in e||(e={}))Que.call(e,r)&&pC(t,r,e[r]);if(M5)for(var r of M5(e))Xue.call(e,r)&&pC(t,r,e[r]);return t},Or=(t,e,r)=>pC(t,typeof e!="symbol"?e+"":e,r);class ele extends SK{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,Or(this,"context",eae),Or(this,"storagePrefix",Xi),Or(this,"storageVersion",Xoe),Or(this,"events",new Map),Or(this,"shouldPersist",!1),Or(this,"init",async()=>{if(!EI())try{const s={eventId:b6(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:QU(this.core.relayer.protocol,this.core.relayer.version,oC)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Or(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,u=b6(),l=this.core.projectId||"",d=Date.now(),f=vf({eventId:u,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:l,domain:this.getAppDomain()},this.setMethods(u));return this.telemetryEnabled&&(this.events.set(u,f),this.shouldPersist=!0),f}),Or(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return vf(vf({},a),this.setMethods(a.eventId))}),Or(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Or(this,"setEventListeners",()=>{this.core.heartbeat.on(Zu.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{pe.fromMiliseconds(Date.now())-pe.fromMiliseconds(s.timestamp)>tae&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Or(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Or(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Or(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Or(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Or(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,vf(vf({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Or(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Or(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${rae}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${oC}${i}`,{method:"POST",body:JSON.stringify(s)})}),Or(this,"getAppDomain",()=>JU().url),this.logger=Zn(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var tle=Object.defineProperty,L5=Object.getOwnPropertySymbols,rle=Object.prototype.hasOwnProperty,nle=Object.prototype.propertyIsEnumerable,gC=(t,e,r)=>e in t?tle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,F5=(t,e)=>{for(var r in e||(e={}))rle.call(e,r)&&gC(t,r,e[r]);if(L5)for(var r of L5(e))nle.call(e,r)&&gC(t,r,e[r]);return t},qt=(t,e,r)=>gC(t,typeof e!="symbol"?e+"":e,r);let sle=class AL extends hK{constructor(e){var r;super(e),qt(this,"protocol",aL),qt(this,"version",cL),qt(this,"name",iC),qt(this,"relayUrl"),qt(this,"projectId"),qt(this,"customStoragePrefix"),qt(this,"events",new qs.EventEmitter),qt(this,"logger"),qt(this,"heartbeat"),qt(this,"relayer"),qt(this,"crypto"),qt(this,"storage"),qt(this,"history"),qt(this,"expirer"),qt(this,"pairing"),qt(this,"verify"),qt(this,"echoClient"),qt(this,"linkModeSupportedApps"),qt(this,"eventClient"),qt(this,"initialized",!1),qt(this,"logChunkController"),qt(this,"on",(a,c)=>this.events.on(a,c)),qt(this,"once",(a,c)=>this.events.once(a,c)),qt(this,"off",(a,c)=>this.events.off(a,c)),qt(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),qt(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:u})=>{if(!a||!c)return;const l={topic:a,message:c,publishedAt:Date.now(),transportType:Wt.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:u})});const n=this.getGlobalCore(e?.customStoragePrefix);if(n)try{return this.customStoragePrefix=n.customStoragePrefix,this.logger=n.logger,this.heartbeat=n.heartbeat,this.crypto=n.crypto,this.history=n.history,this.expirer=n.expirer,this.storage=n.storage,this.relayer=n.relayer,this.pairing=n.pairing,this.verify=n.verify,this.echoClient=n.echoClient,this.linkModeSupportedApps=n.linkModeSupportedApps,this.eventClient=n.eventClient,this.initialized=n.initialized,this.logChunkController=n.logChunkController,n}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||lL,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=YC({level:typeof e?.logger=="string"&&e.logger?e.logger:Aoe.logger,name:iC}),{logger:i,chunkLoggerController:o}=yE({opts:s,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=o,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Zn(i,this.name),this.heartbeat=new OW,this.crypto=new Rce(this,this.logger,e?.keychain),this.history=new que(this,this.logger),this.expirer=new $ue(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new lK(F5(F5({},Coe),e?.storageOptions)),this.relayer=new sue({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Mue(this,this.logger),this.verify=new Wue(this,this.logger,this.storage),this.echoClient=new Yue(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new ele(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const r=new AL(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(Moe,n),r}get context(){return Kn(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(b5,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(b5)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(e,`Core Initialization Failure at epoch ${Date.now()}`),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${e}`,n=`${r}_count`;return globalThis[n]=(globalThis[n]||0)+1,globalThis[n]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[n]} times.`),globalThis[r]}catch(r){console.warn("Failed to get global WalletConnect core",r);return}}setGlobalCore(e){var r;try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${((r=e.opts)==null?void 0:r.customStoragePrefix)||""}`;globalThis[n]=e}catch(n){console.warn("Failed to set global WalletConnect core",n)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&_oe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const ile=sle,CL="wc",IL=2,SL="client",jI=`${CL}@${IL}:${SL}:`,iA={name:SL,logger:"error"},q5="WALLETCONNECT_DEEPLINK_CHOICE",ole="proposal",H5="Proposal expired",ale="session",wl=pe.SEVEN_DAYS,cle="engine",qr={wc_sessionPropose:{req:{ttl:pe.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:pe.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:pe.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:pe.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:pe.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:pe.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:pe.ONE_DAY,prompt:!1,tag:1104},res:{ttl:pe.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:pe.ONE_DAY,prompt:!1,tag:1106},res:{ttl:pe.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:pe.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:pe.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:pe.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:pe.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:pe.ONE_DAY,prompt:!1,tag:1112},res:{ttl:pe.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:pe.ONE_DAY,prompt:!1,tag:1114},res:{ttl:pe.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:pe.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:pe.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:pe.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:pe.FIVE_MINUTES,prompt:!1,tag:1119}}},oA={min:pe.FIVE_MINUTES,max:pe.SEVEN_DAYS},Ri={idle:"IDLE",active:"ACTIVE"},ule={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},lle="request",dle=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],fle="wc",hle="auth",ple="authKeys",gle="pairingTopics",mle="requests",ME=`${fle}@${1.5}:${hle}:`,h1=`${ME}:PUB_KEY`;var yle=Object.defineProperty,ble=Object.defineProperties,wle=Object.getOwnPropertyDescriptors,z5=Object.getOwnPropertySymbols,Ele=Object.prototype.hasOwnProperty,vle=Object.prototype.propertyIsEnumerable,mC=(t,e,r)=>e in t?yle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ct=(t,e)=>{for(var r in e||(e={}))Ele.call(e,r)&&mC(t,r,e[r]);if(z5)for(var r of z5(e))vle.call(e,r)&&mC(t,r,e[r]);return t},Hr=(t,e)=>ble(t,wle(e)),ae=(t,e,r)=>mC(t,typeof e!="symbol"?e+"":e,r);class _le extends OK{constructor(e){super(e),ae(this,"name",cle),ae(this,"events",new rI),ae(this,"initialized",!1),ae(this,"requestQueue",{state:Ri.idle,queue:[]}),ae(this,"sessionRequestQueue",{state:Ri.idle,queue:[]}),ae(this,"emittedSessionRequests",new rre({limit:500})),ae(this,"requestQueueDelay",pe.ONE_SECOND),ae(this,"expectedPairingMethodMap",new Map),ae(this,"recentlyDeletedMap",new Map),ae(this,"recentlyDeletedLimit",200),ae(this,"relayMessageCache",[]),ae(this,"pendingSessions",new Map),ae(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(qr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},pe.toMiliseconds(this.requestQueueDelay)))}),ae(this,"connect",async r=>{var n;this.isInitialized(),await this.confirmOnlineStateOrThrow();const s=Hr(Ct({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(s),s.optionalNamespaces=fie(s.requiredNamespaces,s.optionalNamespaces),s.requiredNamespaces={};const{pairingTopic:i,requiredNamespaces:o,optionalNamespaces:a,sessionProperties:c,scopedProperties:u,relays:l,authentication:d,walletPay:f}=s,g=((n=d?.[0])==null?void 0:n.ttl)||qr.wc_sessionPropose.req.ttl||pe.FIVE_MINUTES;this.validateRequestExpiry(g);let p=i,h,y=!1;try{if(p){const T=this.client.core.pairing.pairings.get(p);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),y=T.active}}catch(T){throw this.client.logger.error(`connect() -> pairing.get(${p}) failed`),T}if(!p||!y){const{topic:T,uri:R}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});p=T,h=R}if(!p){const{message:T}=ge("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(T)}const b=await this.client.core.crypto.generateKeyPair(),E=wr(g),w=Ct(Hr(Ct(Ct({requiredNamespaces:o,optionalNamespaces:a,relays:l??[{protocol:uL}],proposer:{publicKey:b,metadata:this.client.metadata},expiryTimestamp:E,pairingTopic:p},c&&{sessionProperties:c}),u&&{scopedProperties:u}),{id:Di()}),(d||f)&&{requests:{authentication:d?.map(T=>{const{domain:R,chains:U,nonce:k,uri:O,exp:B,nbf:v,type:A,statement:S,requestId:j,resources:N,signatureTypes:x}=T;return{domain:R,chains:U,nonce:k,type:A??"caip122",aud:O,version:"1",iat:new Date().toISOString(),exp:B,nbf:v,statement:S,requestId:j,resources:N,signatureTypes:x}}),walletPay:f}}),m=Ot("session_connect",w.id),{reject:_,resolve:C,done:I}=su(g,H5),P=({id:T})=>{T===w.id&&(this.client.events.off("proposal_expire",P),this.pendingSessions.delete(w.id),this.events.emit(m,{error:{message:H5,code:0}}))};return this.client.events.on("proposal_expire",P),this.events.once(m,({error:T,session:R})=>{this.client.events.off("proposal_expire",P),T?_(T):R&&C(R)}),await this.setProposal(w.id,w),await this.sendProposeSession({proposal:w,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:w.id}}}).catch(T=>{throw this.deleteProposal(w.id),T}),{uri:h,approval:I}}),ae(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),ae(this,"approve",async r=>{var n,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r?.id)==null?void 0:n.toString(),trace:[Ws.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(R){throw o.setError(Nc.no_internet_connection),R}try{await this.isValidProposalId(r?.id)}catch(R){throw this.client.logger.error(`approve() -> proposal.get(${r?.id}) failed`),o.setError(Nc.proposal_not_found),R}try{await this.isValidApprove(r)}catch(R){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Nc.session_approve_namespace_validation_failure),R}const{id:a,relayProtocol:c,namespaces:u,sessionProperties:l,scopedProperties:d,sessionConfig:f,proposalRequestsResponses:g}=r,p=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:h,proposer:y,requiredNamespaces:b,optionalNamespaces:E}=p;let w=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:h});w||(w=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Ws.session_approve_started,properties:{topic:h,trace:[Ws.session_approve_started,Ws.session_namespaces_validation_success]}}));const m=await this.client.core.crypto.generateKeyPair(),_=y.publicKey,C=await this.client.core.crypto.generateSharedKey(m,_),I=Hr(Ct(Ct(Ct({relay:{protocol:c??"irn"},namespaces:u,controller:{publicKey:m,metadata:this.client.metadata},expiry:wr(wl)},l&&{sessionProperties:l}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),{proposalRequestsResponses:g}),P=Wt.relay;w.addTrace(Ws.subscribing_session_topic);try{await this.client.core.relayer.subscribe(C,{transportType:P,internal:{skipSubscribe:!0}})}catch(R){throw w.setError(Nc.subscribe_session_topic_failure),R}w.addTrace(Ws.subscribe_session_topic_success);const T=Hr(Ct({},I),{topic:C,requiredNamespaces:b,optionalNamespaces:E,pairingTopic:h,acknowledged:!1,self:I.controller,peer:{publicKey:y.publicKey,metadata:y.metadata},controller:m,transportType:Wt.relay,authentication:g?.authentication,walletPayResult:g?.walletPay});await this.client.session.set(C,T),w.addTrace(Ws.store_session);try{await this.sendApproveSession({sessionTopic:C,proposal:p,pairingProposalResponse:{relay:{protocol:c??"irn"},responderPublicKey:m},sessionSettleRequest:I,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:Ct({correlationId:a},this.getTVFApproveParams(T))}}),w.addTrace(Ws.session_approve_publish_success)}catch(R){throw this.client.logger.error(R),this.client.session.delete(C,Jt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(C),R}return this.client.core.eventClient.deleteEvent({eventId:w.eventId}),await this.client.core.pairing.updateMetadata({topic:h,metadata:y.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:h}),await this.setExpiry(C,wr(wl)),{topic:C,acknowledged:()=>Promise.resolve(this.client.session.get(C))}}),ae(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:s}=r;let i;try{i=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}i&&await this.sendError({id:n,topic:i,error:s,rpcOpts:qr.wc_sessionPropose.reject}),await this.deleteProposal(n)}),ae(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:n,namespaces:s}=r,{done:i,resolve:o,reject:a}=su(pe.FIVE_MINUTES,"Session update request expired without receiving any acknowledgement"),c=Di(),u=Va().toString(),l=this.client.session.get(n).namespaces;return this.events.once(Ot("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(n,{namespaces:s}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:u}).catch(d=>{this.client.logger.error(d),this.client.session.update(n,{namespaces:l}),a(d)}),{acknowledged:i}}),ae(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:n}=r,s=Di(),{done:i,resolve:o,reject:a}=su(pe.FIVE_MINUTES,"Session extend request expired without receiving any acknowledgement");return this.events.once(Ot("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(n,wr(wl)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),ae(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:n,request:s,topic:i,expiry:o=qr.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(i);a?.transportType===Wt.relay&&await this.confirmOnlineStateOrThrow();const c=Di(),u=Va().toString(),{done:l,resolve:d,reject:f}=su(o,"Request expired. Please try again.");this.events.once(Ot("session_request",c),({error:y,result:b})=>{y?f(y):d(b)});const g="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:g,params:{request:Hr(Ct({},s),{expiryTimestamp:wr(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>f(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),await l();const h={request:Hr(Ct({},s),{expiryTimestamp:wr(o)}),chainId:n};return await Promise.all([new Promise(async y=>{await this.sendRequest({clientRpcId:c,relayRpcId:u,topic:i,method:g,params:h,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,h)}).catch(b=>f(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:c}),y()}),new Promise(async y=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const E=await Jte(this.client.core.storage,q5);await Kte({id:c,topic:i,wcDeepLink:E})}y()}),l()]).then(y=>y[2])}),ae(this,"respond",async r=>{var n,s;this.isInitialized();const i=this.client.core.eventClient.createEvent({properties:{topic:r?.topic||((s=(n=r?.response)==null?void 0:n.id)==null?void 0:s.toString()),trace:[Ws.session_request_response_started]}});try{await this.isValidRespond(r)}catch(d){throw i.addTrace(d?.message),i.setError(Nc.session_request_response_validation_failure),d}i.addTrace(Ws.session_request_response_validation_success);const{topic:o,response:a}=r,{id:c}=a,u=this.client.session.get(o);u.transportType===Wt.relay&&await this.confirmOnlineStateOrThrow();const l=this.getAppLinkIfEnabled(u.peer.metadata,u.transportType);try{i.addTrace(Ws.session_request_response_publish_started),Ui(a)?await this.sendResult({id:c,topic:o,result:a.result,throwOnFailedPublish:!0,appLink:l}):Bs(a)&&await this.sendError({id:c,topic:o,error:a.error,appLink:l}),this.cleanupAfterResponse(r)}catch(d){throw i.addTrace(d?.message),i.setError(Nc.session_request_response_publish_failure),d}}),ae(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:n}=r;if(this.client.session.keys.includes(n)){const s=Di(),i=Va().toString(),{done:o,resolve:a,reject:c}=su(pe.FIVE_MINUTES,"Ping request expired without receiving any acknowledgement");this.events.once(Ot("session_ping",s),({error:u})=>{u?c(u):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),ae(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:s,chainId:i}=r,o=Va().toString(),a=Di();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),ae(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:Jt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:s}=ge("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(s)}}),ae(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>gie(n,r)))),ae(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),ae(this,"authenticate",async(r,n)=>{var s;this.isInitialized(),this.isValidAuthenticate(r);const i=n&&this.client.core.linkModeSupportedApps.includes(n)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Wt.link_mode:Wt.relay;o===Wt.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:u,domain:l,nonce:d,type:f,exp:g,nbf:p,methods:h=[],expiry:y}=r,b=[...r.resources||[]],{topic:E,uri:w}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:E,uri:w}});const m=await this.client.core.crypto.generateKeyPair(),_=d1(m);if(await Promise.all([this.client.auth.authKeys.set(h1,{responseTopic:_,publicKey:m}),this.client.auth.pairingTopics.set(_,{topic:_,pairingTopic:E})]),await this.client.core.relayer.subscribe(_,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${E}`),h.length>0){const{namespace:N}=Ko(a[0]);let x=gne(N,"request",h);l1(b)&&(x=yne(x,b.pop())),b.push(x)}const C=y&&y>qr.wc_sessionAuthenticate.req.ttl?y:qr.wc_sessionAuthenticate.req.ttl,I={authPayload:{type:f??"caip122",chains:a,statement:c,aud:u,domain:l,version:"1",nonce:d,iat:new Date().toISOString(),exp:g,nbf:p,resources:b},requester:{publicKey:m,metadata:this.client.metadata},expiryTimestamp:wr(C)},P={eip155:{chains:a,methods:[...new Set(["personal_sign",...h])],events:["chainChanged","accountsChanged"]}},T={requiredNamespaces:{},optionalNamespaces:P,relays:[{protocol:"irn"}],pairingTopic:E,proposer:{publicKey:m,metadata:this.client.metadata},expiryTimestamp:wr(qr.wc_sessionPropose.req.ttl),id:Di()},{done:R,resolve:U,reject:k}=su(C,"Request expired"),O=Di(),B=Ot("session_connect",T.id),v=Ot("session_request",O),A=async({error:N,session:x})=>{this.events.off(v,S),N?k(N):x&&U({session:x})},S=async N=>{var x,D,M;if(await this.deletePendingAuthRequest(O,{message:"fulfilled",code:0}),N.error){const Y=Jt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return N.error.code===Y.code?void 0:(this.events.off(B,A),k(N.error.message))}await this.deleteProposal(T.id),this.events.off(B,A);const{cacaos:L,responder:F}=N.result,q=[],$=[];for(const Y of L){await N6({cacao:Y,projectId:this.client.core.projectId})||(this.client.logger.error(Y,"Signature verification failed"),k(Jt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Z}=Y,ee=l1(Z.resources),le=[W2(Z.iss)],X=W1(Z.iss);if(ee){const se=O6(ee),fe=R6(ee);q.push(...se),le.push(...fe)}for(const se of le)$.push(`${se}:${X}`)}const V=await this.client.core.crypto.generateSharedKey(m,F.publicKey);let J;q.length>0&&(J={topic:V,acknowledged:!0,self:{publicKey:m,metadata:this.client.metadata},peer:F,controller:F.publicKey,expiry:wr(wl),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:E,namespaces:n5([...new Set(q)],[...new Set($)]),transportType:o},await this.client.core.relayer.subscribe(V,{transportType:o}),await this.client.session.set(V,J),E&&await this.client.core.pairing.updateMetadata({topic:E,metadata:F.metadata}),J=this.client.session.get(V)),(x=this.client.metadata.redirect)!=null&&x.linkMode&&(D=F.metadata.redirect)!=null&&D.linkMode&&(M=F.metadata.redirect)!=null&&M.universal&&n&&(this.client.core.addLinkModeSupportedApp(F.metadata.redirect.universal),this.client.session.update(V,{transportType:Wt.link_mode})),U({auths:L,session:J})};this.events.once(B,A),this.events.once(v,S);let j;try{if(i){const N=ai("wc_sessionAuthenticate",I,O);this.client.core.history.set(E,N);const x=await this.client.core.crypto.encode("",N,{type:h0,encoding:Ha});j=Ig(n,E,x)}else await Promise.all([this.sendRequest({topic:E,method:"wc_sessionAuthenticate",params:I,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:O}),this.sendRequest({topic:E,method:"wc_sessionPropose",params:T,expiry:qr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:T.id})])}catch(N){throw this.events.off(B,A),this.events.off(v,S),N}return await this.setProposal(T.id,T),await this.setAuthRequest(O,{request:Hr(Ct({},I),{verifyContext:{}}),pairingTopic:E,transportType:o}),{uri:j??w,response:R}}),ae(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:s}=r,i=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[Oc.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(wf.no_internet_connection),y}const o=this.getPendingAuthRequest(n);if(!o)throw i.setError(wf.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||Wt.relay;a===Wt.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),l=d1(c),d={type:Zo,receiverPublicKey:c,senderPublicKey:u},f=[],g=[];for(const y of s){if(!await N6({cacao:y,projectId:this.client.core.projectId})){i.setError(wf.invalid_cacao);const _=Jt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:l,error:_,encodeOpts:d}),new Error(_.message)}i.addTrace(Oc.cacaos_verified);const{p:b}=y,E=l1(b.resources),w=[W2(b.iss)],m=W1(b.iss);if(E){const _=O6(E),C=R6(E);f.push(..._),w.push(...C)}for(const _ of w)g.push(`${_}:${m}`)}const p=await this.client.core.crypto.generateSharedKey(u,c);i.addTrace(Oc.create_authenticated_session_topic);let h;if(f?.length>0){h={topic:p,acknowledged:!0,self:{publicKey:u,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:wr(wl),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:n5([...new Set(f)],[...new Set(g)]),transportType:a},i.addTrace(Oc.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(y){throw i.setError(wf.subscribe_authenticated_session_topic_failure),y}i.addTrace(Oc.subscribe_authenticated_session_topic_success),await this.client.session.set(p,h),i.addTrace(Oc.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Oc.publishing_authenticated_session_approve);try{await this.sendResult({topic:l,id:n,result:{cacaos:s,responder:{publicKey:u,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(wf.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:h}}),ae(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:s}=r,i=this.getPendingAuthRequest(n);if(!i)throw new Error(`Could not find pending auth request with id ${n}`);i.transportType===Wt.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=d1(o),u={type:Zo,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:c,error:s,encodeOpts:u,rpcOpts:qr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.deleteProposal(n)}),ae(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:s}=r;return yM(n,s)}),ae(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),ae(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&i.topic&&i.topic!==n.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),ae(this,"deleteSession",async r=>{var n;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Jt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(q5).catch(u=>this.client.logger.warn(u)),s===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=Ri.idle),await Promise.all(this.getPendingSessionRequests().filter(u=>u.topic===s).map(u=>this.deletePendingSessionRequest(u.id,Jt("USER_DISCONNECTED")))),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),ae(this,"deleteProposal",async(r,n)=>{if(n)try{const s=this.client.proposal.get(r);this.client.core.eventClient.getEvent({topic:s.pairingTopic})?.setError(Nc.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,Jt("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),ae(this,"deletePendingSessionRequest",async(r,n,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),s?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==r),s&&(this.sessionRequestQueue.state=Ri.idle,this.client.events.emit("session_request_expire",{id:r}))}),ae(this,"deletePendingAuthRequest",async(r,n,s=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),s?Promise.resolve():this.client.core.expirer.del(r)])}),ae(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),ae(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,wr(qr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),ae(this,"setAuthRequest",async(r,n)=>{const{request:s,pairingTopic:i,transportType:o=Wt.relay}=n;this.client.core.expirer.set(r,s.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:r,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),ae(this,"setPendingSessionRequest",async r=>{const{id:n,topic:s,params:i,verifyContext:o}=r,a=i.request.expiryTimestamp||wr(qr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:s,params:i,verifyContext:o})}),ae(this,"sendRequest",async r=>{const{topic:n,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:u,appLink:l,tvf:d,publishOpts:f={}}=r,g=ai(s,i,c);let p;const h=!!l;try{const E=h?Ha:Fn;p=await this.client.core.crypto.encode(n,g,{encoding:E})}catch(E){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),E}let y;if(dle.includes(s)){const E=ks(JSON.stringify(g)),w=ks(p);y=await this.client.core.verify.register({id:w,decryptedId:E})}const b=Ct(Ct({},qr[s].req),f);if(b.attestation=y,o&&(b.ttl=o),a&&(b.id=a),this.client.core.history.set(n,g),h){const E=Ig(l,n,p);await global.Linking.openURL(E,this.client.name)}else b.tvf=Hr(Ct({},d),{correlationId:g.id}),u?(b.internal=Hr(Ct({},b.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,p,b)):this.client.core.relayer.publish(n,p,b).catch(E=>this.client.logger.error(E));return g.id}),ae(this,"sendProposeSession",async r=>{const{proposal:n,publishOpts:s}=r,i=ai("wc_sessionPropose",n,n.id);this.client.core.history.set(n.pairingTopic,i);const o=await this.client.core.crypto.encode(n.pairingTopic,i,{encoding:Fn}),a=ks(JSON.stringify(i)),c=ks(o),u=await this.client.core.verify.register({id:c,decryptedId:a});await this.client.core.relayer.publishCustom({payload:{pairingTopic:n.pairingTopic,sessionProposal:o},opts:Hr(Ct({},s),{publishMethod:"wc_proposeSession",attestation:u})})}),ae(this,"sendApproveSession",async r=>{const{sessionTopic:n,pairingProposalResponse:s,proposal:i,sessionSettleRequest:o,publishOpts:a}=r,c=qp(i.id,s),u=await this.client.core.crypto.encode(i.pairingTopic,c,{encoding:Fn}),l=ai("wc_sessionSettle",o,a?.id),d=await this.client.core.crypto.encode(n,l,{encoding:Fn});this.client.core.history.set(n,l),await this.client.core.relayer.publishCustom({payload:{sessionTopic:n,pairingTopic:i.pairingTopic,sessionProposalResponse:u,sessionSettlementRequest:d},opts:Hr(Ct({},a),{publishMethod:"wc_approveSession"})})}),ae(this,"sendResult",async r=>{const{id:n,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,u=qp(n,i);let l;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?Ha:Fn;l=await this.client.core.crypto.encode(s,u,Hr(Ct({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let f,g;try{f=await this.client.core.history.get(s,n);const p=f.request;try{g=this.getTVFParams(n,p.params,i)}catch(h){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${h?.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${n}) failed`),p}if(d){const p=Ig(c,s,l);await global.Linking.openURL(p,this.client.name)}else{const p=f.request.method,h=qr[p].res;h.tvf=Hr(Ct({},g),{correlationId:n}),o?(h.internal=Hr(Ct({},h.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,l,h)):this.client.core.relayer.publish(s,l,h).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(u)}),ae(this,"sendError",async r=>{const{id:n,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=r,u=jE(n,i);let l;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const g=d?Ha:Fn;l=await this.client.core.crypto.encode(s,u,Hr(Ct({},o||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),g}let f;try{f=await this.client.core.history.get(s,n)}catch(g){throw this.client.logger.error(`sendError() -> history.get(${s}, ${n}) failed`),g}if(d){const g=Ig(c,s,l);await global.Linking.openURL(g,this.client.name)}else{const g=f.request.method,p=a||qr[g].res;this.client.core.relayer.publish(s,l,p)}await this.client.core.history.resolve(u)}),ae(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(s=>{let i=!1;Li(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&r.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Li(s.expiryTimestamp)&&n.push(s.id)}),await Promise.all([...r.map(s=>this.deleteSession({topic:s})),...n.map(s=>this.deleteProposal(s))])}),ae(this,"onProviderMessageEvent",async r=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(r):await this.onRelayMessage(r)}),ae(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),ae(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Ri.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Ri.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=Ri.idle}),ae(this,"processRequest",async r=>{const{topic:n,payload:s,attestation:i,transportType:o,encryptedId:a}=r,c=s.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,s);case"wc_sessionPing":return await this.onSessionPingRequest(n,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),ae(this,"onRelayEventResponse",async r=>{const{topic:n,payload:s,transportType:i}=r,o=(await this.client.core.history.get(n,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,s);case"wc_sessionExtend":return this.onSessionExtendResponse(n,s);case"wc_sessionPing":return this.onSessionPingResponse(n,s);case"wc_sessionRequest":return this.onSessionRequestResponse(n,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),ae(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:s}=ge("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),ae(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:s}=r,i=this.expectedPairingMethodMap.get(n);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),ae(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:s,attestation:i,encryptedId:o}=r,{params:a,id:c}=s;try{const u=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),u?.setError(Ro.proposal_listener_not_found)),this.isValidConnect(Ct({},s.params));const l=a.expiryTimestamp||wr(qr.wc_sessionPropose.req.ttl),d=Ct({id:c,pairingTopic:n,expiryTimestamp:l,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const f=await this.getVerifyContext({attestationId:i,hash:ks(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});u?.addTrace(ji.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:f})}catch(u){await this.sendError({id:c,topic:n,error:u,rpcOpts:qr.wc_sessionPropose.autoReject}),this.client.logger.error(u)}}),ae(this,"onSessionProposeResponse",async(r,n,s)=>{const{id:i}=n;if(Ui(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const u=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});const l=await this.client.core.crypto.generateSharedKey(c,u);this.pendingSessions.set(i,{sessionTopic:l,pairingTopic:r,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(l,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else if(Bs(n)){await this.deleteProposal(i);const o=Ot("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),ae(this,"onSessionSettleRequest",async(r,n)=>{const{id:s,params:i}=n;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:u,sessionProperties:l,scopedProperties:d,sessionConfig:f,proposalRequestsResponses:g}=n.params,p=[...this.pendingSessions.values()].find(b=>b.sessionTopic===r);if(!p)return this.client.logger.error(`Pending session not found for topic ${r}`);const h=this.client.proposal.get(p.proposalId),y=Hr(Ct(Ct(Ct({topic:r,relay:o,expiry:c,namespaces:u,acknowledged:!0,pairingTopic:p.pairingTopic,requiredNamespaces:h.requiredNamespaces,optionalNamespaces:h.optionalNamespaces,controller:a.publicKey,self:{publicKey:p.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},l&&{sessionProperties:l}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),{transportType:Wt.relay,authentication:g?.authentication,walletPayResult:g?.walletPay});await this.client.session.set(y.topic,y),await this.setExpiry(y.topic,y.expiry),await this.client.core.pairing.updateMetadata({topic:p.pairingTopic,metadata:y.peer.metadata}),this.pendingSessions.delete(p.proposalId),this.deleteProposal(p.proposalId,!1),this.cleanupDuplicatePairings(y),await this.sendResult({id:n.id,topic:r,throwOnFailedPublish:!0,result:!0}),this.client.events.emit("session_connect",{session:y}),this.events.emit(Ot("session_connect",p.proposalId),{session:y})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),ae(this,"onSessionSettleResponse",async(r,n)=>{const{id:s}=n;Ui(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Ot("session_approve",s),{})):Bs(n)&&(await this.client.session.delete(r,Jt("USER_DISCONNECTED")),this.events.emit(Ot("session_approve",s),{error:n.error}))}),ae(this,"onSessionUpdateRequest",async(r,n)=>{const{params:s,id:i}=n;try{const o=`${r}_session_update`,a=yf.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:r,error:Jt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Ct({topic:r},s));try{yf.set(o,i),await this.client.session.update(r,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:r,result:!0})}catch(c){throw yf.delete(o),c}this.client.events.emit("session_update",{id:i,topic:r,params:s})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),ae(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),ae(this,"onSessionUpdateResponse",(r,n)=>{const{id:s}=n,i=Ot("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ui(n)?this.events.emit(Ot("session_update",s),{}):Bs(n)&&this.events.emit(Ot("session_update",s),{error:n.error})}),ae(this,"onSessionExtendRequest",async(r,n)=>{const{id:s}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,wr(wl)),await this.sendResult({id:s,topic:r,result:!0}),this.client.events.emit("session_extend",{id:s,topic:r})}catch(i){await this.sendError({id:s,topic:r,error:i}),this.client.logger.error(i)}}),ae(this,"onSessionExtendResponse",(r,n)=>{const{id:s}=n,i=Ot("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ui(n)?this.events.emit(Ot("session_extend",s),{}):Bs(n)&&this.events.emit(Ot("session_extend",s),{error:n.error})}),ae(this,"onSessionPingRequest",async(r,n)=>{const{id:s}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:r})}catch(i){await this.sendError({id:s,topic:r,error:i}),this.client.logger.error(i)}}),ae(this,"onSessionPingResponse",(r,n)=>{const{id:s}=n,i=Ot("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Ui(n)?this.events.emit(Ot("session_ping",s),{}):Bs(n)&&this.events.emit(Ot("session_ping",s),{error:n.error})},500)}),ae(this,"onSessionDeleteRequest",async(r,n)=>{const{id:s}=n;try{await this.isValidDisconnect({topic:r,reason:n.params}),this.cleanupPendingSentRequestsForTopic({topic:r,error:Jt("USER_DISCONNECTED")}),await this.deleteSession({topic:r,id:s})}catch(i){this.client.logger.error(i)}}),ae(this,"onSessionRequest",async r=>{var n,s,i;const{topic:o,payload:a,attestation:c,encryptedId:u,transportType:l}=r,{id:d,params:f}=a;try{await this.isValidRequest(Ct({topic:o},f));const g=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:ks(JSON.stringify(ai("wc_sessionRequest",f,d))),encryptedId:u,metadata:g.peer.metadata,transportType:l}),h={id:d,topic:o,params:f,verifyContext:p};await this.setPendingSessionRequest(h),l===Wt.link_mode&&(n=g.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((s=g.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(h):(this.addSessionRequestToSessionRequestQueue(h),this.processSessionRequestQueue())}catch(g){await this.sendError({id:d,topic:o,error:g}),this.client.logger.error(g)}}),ae(this,"onSessionRequestResponse",(r,n)=>{const{id:s}=n,i=Ot("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ui(n)?this.events.emit(Ot("session_request",s),{result:n.result}):Bs(n)&&this.events.emit(Ot("session_request",s),{error:n.error})}),ae(this,"onSessionEventRequest",async(r,n)=>{const{id:s,params:i}=n;try{const o=`${r}_session_event_${i.event.name}`,a=yf.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Ct({topic:r},i)),this.client.events.emit("session_event",{id:s,topic:r,params:i}),yf.set(o,s)}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),ae(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:s}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Ui(n)?this.events.emit(Ot("session_request",s),{result:n.result}):Bs(n)&&this.events.emit(Ot("session_request",s),{error:n.error})}),ae(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:u,authPayload:l,expiryTimestamp:d}=i.params,f=await this.getVerifyContext({attestationId:o,hash:ks(JSON.stringify(i)),encryptedId:a,metadata:u.metadata,transportType:c}),g={requester:u,pairingTopic:s,id:i.id,authPayload:l,verifyContext:f,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:g,pairingTopic:s,transportType:c}),c===Wt.link_mode&&(n=u.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(u.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:f})}catch(u){this.client.logger.error(u);const l=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),f=this.getAppLinkIfEnabled(i.params.requester.metadata,c),g={type:Zo,receiverPublicKey:l,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:u,encodeOpts:g,rpcOpts:qr.wc_sessionAuthenticate.autoReject,appLink:f})}}),ae(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),ae(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Ri.idle,this.processSessionRequestQueue()},pe.toMiliseconds(this.requestQueueDelay))}),ae(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===r&&i.request.method==="wc_sessionRequest").forEach(i=>{this.events.emit(Ot("session_request",i.request.id),{error:n})})}),ae(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Ri.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),ae(this,"emitSessionRequest",r=>{if(this.emittedSessionRequests.has(r.id)){this.client.logger.warn({id:r.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${r.id}`);return}this.sessionRequestQueue.state=Ri.active,this.emittedSessionRequests.add(r.id),this.client.events.emit("session_request",r)}),ae(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(s=>s.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:ai("wc_sessionPropose",Hr(Ct({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id),attestation:n.attestation,encryptedId:n.encryptedId})}),ae(this,"isValidConnect",async r=>{if(!Dn(r)){const{message:u}=ge("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(u)}const{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=r;if(kr(n)||await this.isValidPairingTopic(n),!Tie(c)){const{message:u}=ge("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(u)}if(s&&!kr(s)&&Ki(s)!==0){const u="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(u):this.client.logger.warn(u),this.validateNamespaces(s,"requiredNamespaces")}if(i&&!kr(i)&&Ki(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),o&&!kr(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!kr(a)){this.validateSessionProps(a,"scopedProperties");const u=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(l=>u.includes(l.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(u)}`)}}),ae(this,"validateNamespaces",(r,n)=>{const s=Sie(r,"connect()",n);if(s)throw new Error(s.message)}),ae(this,"isValidApprove",async r=>{if(!Dn(r))throw new Error(ge("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const c=this.client.proposal.get(n),u=X_(s,"approve()");if(u)throw new Error(u.message);const l=o5(c.requiredNamespaces,s,"approve()");if(l)throw new Error(l.message);if(!vr(i,!0)){const{message:d}=ge("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(o&&!kr(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!kr(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(f=>d.has(f.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),ae(this,"isValidReject",async r=>{if(!Dn(r)){const{message:i}=ge("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(i)}const{id:n,reason:s}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!Nie(s)){const{message:i}=ge("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),ae(this,"isValidSessionSettleRequest",r=>{if(!Dn(r)){const{message:u}=ge("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(u)}const{relay:n,controller:s,namespaces:i,expiry:o}=r;if(!tL(n)){const{message:u}=ge("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(u)}const a=Eie(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=X_(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Li(o)){const{message:u}=ge("EXPIRED","onSessionSettleRequest()");throw new Error(u)}}),ae(this,"isValidUpdate",async r=>{if(!Dn(r)){const{message:c}=ge("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:n,namespaces:s}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const i=this.client.session.get(n),o=X_(s,"update()");if(o)throw new Error(o.message);const a=o5(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),ae(this,"isValidExtend",async r=>{if(!Dn(r)){const{message:s}=ge("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(s)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),ae(this,"isValidRequest",async r=>{if(!Dn(r)){const{message:c}=ge("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:n,request:s,chainId:i,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!i5(a,i)){const{message:c}=ge("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!Oie(s)){const{message:c}=ge("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!kie(a,i,s.method)){const{message:c}=ge("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}this.validateRequestExpiry(o)}),ae(this,"isValidRespond",async r=>{var n;if(!Dn(r)){const{message:a}=ge("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(a)}const{topic:s,response:i}=r;try{await this.isValidSessionTopic(s)}catch(a){throw(n=r?.response)!=null&&n.id&&this.cleanupAfterResponse(r),a}if(!Rie(i)){const{message:a}=ge("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(a)}const o=this.client.pendingRequest.get(i.id);if(o.topic!==s){const{message:a}=ge("MISMATCHED_TOPIC",`Request response topic mismatch. reqId: ${i.id}, expected topic: ${o.topic}, received topic: ${s}`);throw new Error(a)}}),ae(this,"isValidPing",async r=>{if(!Dn(r)){const{message:s}=ge("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),ae(this,"isValidEmit",async r=>{if(!Dn(r)){const{message:a}=ge("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:s,chainId:i}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!i5(o,i)){const{message:a}=ge("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!xie(s)){const{message:a}=ge("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!Bie(o,i,s.name)){const{message:a}=ge("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),ae(this,"isValidDisconnect",async r=>{if(!Dn(r)){const{message:s}=ge("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),ae(this,"isValidAuthenticate",r=>{const{chains:n,uri:s,domain:i,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!vr(s,!1))throw new Error("uri is required parameter");if(!vr(i,!1))throw new Error("domain is required parameter");if(!vr(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(c=>Ko(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Ko(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),ae(this,"getVerifyContext",async r=>{const{attestationId:n,hash:s,encryptedId:i,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||Vh,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Wt.link_mode){const l=this.getAppLinkIfEnabled(o,a);return c.verified.validation=l&&new URL(l).origin===new URL(o.url).origin?"VALID":"INVALID",c}const u=await this.client.core.verify.resolve({attestationId:n,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});u&&(c.verified.origin=u.origin,c.verified.isScam=u.isScam,c.verified.validation=u.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(u){this.client.logger.warn(u)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),ae(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach((s,i)=>{if(s==null){const{message:o}=ge("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${s} for key ${Object.keys(r)[i]}`);throw new Error(o)}})}),ae(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),ae(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),ae(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:s}=ge("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(s)}}),ae(this,"isLinkModeEnabled",(r,n)=>{var s,i,o,a,c,u,l,d,f;return!r||n!==Wt.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((u=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:u.universal)!==""&&((l=r?.redirect)==null?void 0:l.universal)!==void 0&&((d=r?.redirect)==null?void 0:d.universal)!==""&&((f=r?.redirect)==null?void 0:f.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),ae(this,"getAppLinkIfEnabled",(r,n)=>{var s;return this.isLinkModeEnabled(r,n)?(s=r?.redirect)==null?void 0:s.universal:void 0}),ae(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=y6(r,"topic")||"",s=decodeURIComponent(y6(r,"wc_ev")||""),i=this.client.session.keys.includes(n);i&&this.client.session.update(n,{transportType:Wt.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:s,sessionExists:i})}),ae(this,"registerLinkModeListeners",async()=>{var r;if(EI()||nc()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await n.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),ae(this,"getTVFApproveParams",r=>{try{const n=XM(r.namespaces),s=aie(r.namespaces),i=cie(r.namespaces),o=r.sessionProperties,a=r.scopedProperties;return{approvedChains:n,approvedMethods:s,approvedEvents:i,sessionProperties:o,scopedProperties:a}}catch(n){return this.client.logger.warn(n,"Error getting TVF approve params"),{}}}),ae(this,"getTVFParams",(r,n,s)=>{var i,o,a;if(!((i=n.request)!=null&&i.method))return{};const c={correlationId:r,rpcMethods:[n.request.method],chainId:n.chainId};try{const u=this.extractTxHashesFromResult(n.request,s);c.txHashes=u,c.contractAddresses=this.isValidContractData(n.request.params)?[(a=(o=n.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(u){this.client.logger.warn(u,"Error getting TVF params")}return c}),ae(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const s=r?.data||((n=r?.[0])==null?void 0:n.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),ae(this,"extractTxHashesFromResult",(r,n)=>{var s;try{if(!n)return[];const i=r.method,o=ule[i];if(i==="sui_signTransaction")return[Yre(n.transactionBytes)];if(i==="near_signTransaction")return[I6(n)];if(i==="near_signTransactions")return n.map(c=>I6(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=n.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[Qie({transaction:r.params.transactionPayload,signature:n.signature})];if(i==="algo_signTxn")return Yo(n)?n.map(c=>S6(c)):[S6(n)];if(i==="cosmos_signDirect")return[Qre(n)];if(i==="wallet_sendCalls")return Xre(n);if(typeof n=="string")return[n];const a=n[o.key];if(Yo(a))return i==="solana_signAllTransactions"?a.map(c=>Zre(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn(i,"Error extracting tx hashes from result")}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,r=this.client.core.relayer.messages.getWithoutAck(e);for(const[n,s]of Object.entries(r))for(const i of s)try{await this.onProviderMessageEvent({topic:n,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${i}`)}}catch(e){this.client.logger.warn(e,"processPendingMessageEvents failed")}}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Er.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(h1)?this.client.auth.authKeys.get(h1):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:i===Wt.link_mode?Ha:Fn});kI(a)?(this.client.core.history.set(r,a),await this.onRelayEventRequest({topic:r,payload:a,attestation:s,transportType:i,encryptedId:ks(n)})):DE(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:i}),this.client.core.history.delete(r,a.id)):(this.client.logger.error(`onRelayMessage() -> unknown payload: ${JSON.stringify(a)}`),await this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:i})),await this.client.core.relayer.messages.ack(r,n)}catch(a){this.client.logger.error(`onRelayMessage() -> failed to process an inbound message: ${n}`),this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Rs.expired,async e=>{const{topic:r,id:n}=eM(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,ge("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,ge("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(au.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(au.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!vr(e,!1)){const{message:r}=ge("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=ge("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Li(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=ge("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!vr(e,!1)){const{message:r}=ge("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=ge("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Li(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=ge("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=ge("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(vr(e,!1)){const{message:r}=ge("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=ge("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!Pie(e)){const{message:r}=ge("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=ge("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Li(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=ge("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}validateRequestExpiry(e){if(e&&!Uie(e,oA)){const{message:r}=ge("MISSING_OR_INVALID",`request() expiry: ${e}. Expiry must be a number (in seconds) between ${oA.min} and ${oA.max}`);throw new Error(r)}}}class Ale extends Qu{constructor(e,r){super(e,r,ole,jI),this.core=e,this.logger=r}}let Cle=class extends Qu{constructor(e,r){super(e,r,ale,jI),this.core=e,this.logger=r}};class Ile extends Qu{constructor(e,r){super(e,r,lle,jI,n=>n.id),this.core=e,this.logger=r}}class Sle extends Qu{constructor(e,r){super(e,r,ple,ME,()=>h1),this.core=e,this.logger=r}}class Tle extends Qu{constructor(e,r){super(e,r,gle,ME),this.core=e,this.logger=r}}class Ple extends Qu{constructor(e,r){super(e,r,mle,ME,n=>n.id),this.core=e,this.logger=r}}var Nle=Object.defineProperty,Ole=(t,e,r)=>e in t?Nle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,aA=(t,e,r)=>Ole(t,typeof e!="symbol"?e+"":e,r);class Rle{constructor(e,r){this.core=e,this.logger=r,aA(this,"authKeys"),aA(this,"pairingTopics"),aA(this,"requests"),this.authKeys=new Sle(this.core,this.logger),this.pairingTopics=new Tle(this.core,this.logger),this.requests=new Ple(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var xle=Object.defineProperty,kle=(t,e,r)=>e in t?xle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ct=(t,e,r)=>kle(t,typeof e!="symbol"?e+"":e,r);class DI extends NK{constructor(e){super(e),ct(this,"protocol",CL),ct(this,"version",IL),ct(this,"name",iA.name),ct(this,"metadata"),ct(this,"core"),ct(this,"logger"),ct(this,"events",new qs.EventEmitter),ct(this,"engine"),ct(this,"session"),ct(this,"proposal"),ct(this,"pendingRequest"),ct(this,"auth"),ct(this,"signConfig"),ct(this,"on",(n,s)=>this.events.on(n,s)),ct(this,"once",(n,s)=>this.events.once(n,s)),ct(this,"off",(n,s)=>this.events.off(n,s)),ct(this,"removeListener",(n,s)=>this.events.removeListener(n,s)),ct(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),ct(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"update",async n=>{try{return await this.engine.update(n)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"request",async n=>{try{return await this.engine.request(n)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"find",n=>{try{return this.engine.find(n)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),ct(this,"authenticate",async(n,s)=>{try{return await this.engine.authenticate(n,s)}catch(i){throw this.logger.error(i.message),i}}),ct(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),ct(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(s){throw this.logger.error(s.message),s}}),this.name=e?.name||iA.name,this.metadata=Hte(e?.metadata),this.signConfig=e?.signConfig;const r=RI({logger:e?.logger||iA.logger,name:this.name});this.logger=r,this.core=e?.core||new ile(e),this.session=new Cle(this.core,this.logger),this.proposal=new Ale(this.core,this.logger),this.pendingRequest=new Ile(this.core,this.logger),this.engine=new _le(this),this.auth=new Rle(this.core,this.logger)}static async init(e){const r=new DI(e);return await r.initialize(),r}get context(){return Kn(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const Ble=DI;var Sg={exports:{}},$5;function jle(){return $5||($5=1,(function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Mi<"u"&&Mi,n=(function(){function i(){this.fetch=!1,this.DOMException=r.DOMException}return i.prototype=r,new i})();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof Mi<"u"&&Mi||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(v){return v&&DataView.prototype.isPrototypeOf(v)}if(c.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(v){return v&&l.indexOf(Object.prototype.toString.call(v))>-1};function f(v){if(typeof v!="string"&&(v=String(v)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(v)||v==="")throw new TypeError('Invalid character in header field name: "'+v+'"');return v.toLowerCase()}function g(v){return typeof v!="string"&&(v=String(v)),v}function p(v){var A={next:function(){var S=v.shift();return{done:S===void 0,value:S}}};return c.iterable&&(A[Symbol.iterator]=function(){return A}),A}function h(v){this.map={},v instanceof h?v.forEach(function(A,S){this.append(S,A)},this):Array.isArray(v)?v.forEach(function(A){if(A.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+A.length);this.append(A[0],A[1])},this):v&&Object.getOwnPropertyNames(v).forEach(function(A){this.append(A,v[A])},this)}h.prototype.append=function(v,A){v=f(v),A=g(A);var S=this.map[v];this.map[v]=S?S+", "+A:A},h.prototype.delete=function(v){delete this.map[f(v)]},h.prototype.get=function(v){return v=f(v),this.has(v)?this.map[v]:null},h.prototype.has=function(v){return this.map.hasOwnProperty(f(v))},h.prototype.set=function(v,A){this.map[f(v)]=g(A)},h.prototype.forEach=function(v,A){for(var S in this.map)this.map.hasOwnProperty(S)&&v.call(A,this.map[S],S,this)},h.prototype.keys=function(){var v=[];return this.forEach(function(A,S){v.push(S)}),p(v)},h.prototype.values=function(){var v=[];return this.forEach(function(A){v.push(A)}),p(v)},h.prototype.entries=function(){var v=[];return this.forEach(function(A,S){v.push([S,A])}),p(v)},c.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);function y(v){if(!v._noBody){if(v.bodyUsed)return Promise.reject(new TypeError("Already read"));v.bodyUsed=!0}}function b(v){return new Promise(function(A,S){v.onload=function(){A(v.result)},v.onerror=function(){S(v.error)}})}function E(v){var A=new FileReader,S=b(A);return A.readAsArrayBuffer(v),S}function w(v){var A=new FileReader,S=b(A),j=/charset=([A-Za-z0-9_-]+)/.exec(v.type),N=j?j[1]:"utf-8";return A.readAsText(v,N),S}function m(v){for(var A=new Uint8Array(v),S=new Array(A.length),j=0;j<A.length;j++)S[j]=String.fromCharCode(A[j]);return S.join("")}function _(v){if(v.slice)return v.slice(0);var A=new Uint8Array(v.byteLength);return A.set(new Uint8Array(v)),A.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(v){this.bodyUsed=this.bodyUsed,this._bodyInit=v,v?typeof v=="string"?this._bodyText=v:c.blob&&Blob.prototype.isPrototypeOf(v)?this._bodyBlob=v:c.formData&&FormData.prototype.isPrototypeOf(v)?this._bodyFormData=v:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)?this._bodyText=v.toString():c.arrayBuffer&&c.blob&&u(v)?(this._bodyArrayBuffer=_(v.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(v)||d(v))?this._bodyArrayBuffer=_(v):this._bodyText=v=Object.prototype.toString.call(v):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof v=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var v=y(this);if(v)return v;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var v=y(this);return v||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(E);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var v=y(this);if(v)return v;if(this._bodyBlob)return w(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(m(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(R)}),this.json=function(){return this.text().then(JSON.parse)},this}var I=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function P(v){var A=v.toUpperCase();return I.indexOf(A)>-1?A:v}function T(v,A){if(!(this instanceof T))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');A=A||{};var S=A.body;if(v instanceof T){if(v.bodyUsed)throw new TypeError("Already read");this.url=v.url,this.credentials=v.credentials,A.headers||(this.headers=new h(v.headers)),this.method=v.method,this.mode=v.mode,this.signal=v.signal,!S&&v._bodyInit!=null&&(S=v._bodyInit,v.bodyUsed=!0)}else this.url=String(v);if(this.credentials=A.credentials||this.credentials||"same-origin",(A.headers||!this.headers)&&(this.headers=new h(A.headers)),this.method=P(A.method||this.method||"GET"),this.mode=A.mode||this.mode||null,this.signal=A.signal||this.signal||(function(){if("AbortController"in a){var x=new AbortController;return x.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&S)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(S),(this.method==="GET"||this.method==="HEAD")&&(A.cache==="no-store"||A.cache==="no-cache")){var j=/([?&])_=[^&]*/;if(j.test(this.url))this.url=this.url.replace(j,"$1_="+new Date().getTime());else{var N=/\?/;this.url+=(N.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})};function R(v){var A=new FormData;return v.trim().split("&").forEach(function(S){if(S){var j=S.split("="),N=j.shift().replace(/\+/g," "),x=j.join("=").replace(/\+/g," ");A.append(decodeURIComponent(N),decodeURIComponent(x))}}),A}function U(v){var A=new h,S=v.replace(/\r?\n[\t ]+/g," ");return S.split("\r").map(function(j){return j.indexOf(`
`)===0?j.substr(1,j.length):j}).forEach(function(j){var N=j.split(":"),x=N.shift().trim();if(x){var D=N.join(":").trim();try{A.append(x,D)}catch(M){console.warn("Response "+M.message)}}}),A}C.call(T.prototype);function k(v,A){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(A||(A={}),this.type="default",this.status=A.status===void 0?200:A.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=A.statusText===void 0?"":""+A.statusText,this.headers=new h(A.headers),this.url=A.url||"",this._initBody(v)}C.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},k.error=function(){var v=new k(null,{status:200,statusText:""});return v.ok=!1,v.status=0,v.type="error",v};var O=[301,302,303,307,308];k.redirect=function(v,A){if(O.indexOf(A)===-1)throw new RangeError("Invalid status code");return new k(null,{status:A,headers:{location:v}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(A,S){this.message=A,this.name=S;var j=Error(A);this.stack=j.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function B(v,A){return new Promise(function(S,j){var N=new T(v,A);if(N.signal&&N.signal.aborted)return j(new o.DOMException("Aborted","AbortError"));var x=new XMLHttpRequest;function D(){x.abort()}x.onload=function(){var F={statusText:x.statusText,headers:U(x.getAllResponseHeaders()||"")};N.url.indexOf("file://")===0&&(x.status<200||x.status>599)?F.status=200:F.status=x.status,F.url="responseURL"in x?x.responseURL:F.headers.get("X-Request-URL");var q="response"in x?x.response:x.responseText;setTimeout(function(){S(new k(q,F))},0)},x.onerror=function(){setTimeout(function(){j(new TypeError("Network request failed"))},0)},x.ontimeout=function(){setTimeout(function(){j(new TypeError("Network request timed out"))},0)},x.onabort=function(){setTimeout(function(){j(new o.DOMException("Aborted","AbortError"))},0)};function M(F){try{return F===""&&a.location.href?a.location.href:F}catch{return F}}if(x.open(N.method,M(N.url),!0),N.credentials==="include"?x.withCredentials=!0:N.credentials==="omit"&&(x.withCredentials=!1),"responseType"in x&&(c.blob?x.responseType="blob":c.arrayBuffer&&(x.responseType="arraybuffer")),A&&typeof A.headers=="object"&&!(A.headers instanceof h||a.Headers&&A.headers instanceof a.Headers)){var L=[];Object.getOwnPropertyNames(A.headers).forEach(function(F){L.push(f(F)),x.setRequestHeader(F,g(A.headers[F]))}),N.headers.forEach(function(F,q){L.indexOf(q)===-1&&x.setRequestHeader(q,F)})}else N.headers.forEach(function(F,q){x.setRequestHeader(q,F)});N.signal&&(N.signal.addEventListener("abort",D),x.onreadystatechange=function(){x.readyState===4&&N.signal.removeEventListener("abort",D)}),x.send(typeof N._bodyInit>"u"?null:N._bodyInit)})}return B.polyfill=!0,a.fetch||(a.fetch=B,a.Headers=h,a.Request=T,a.Response=k),o.Headers=h,o.Request=T,o.Response=k,o.fetch=B,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=r.fetch?r:n;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(Sg,Sg.exports)),Sg.exports}var Dle=jle();const V5=WC(Dle);var Ule=Object.defineProperty,Mle=Object.defineProperties,Lle=Object.getOwnPropertyDescriptors,G5=Object.getOwnPropertySymbols,Fle=Object.prototype.hasOwnProperty,qle=Object.prototype.propertyIsEnumerable,W5=(t,e,r)=>e in t?Ule(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,K5=(t,e)=>{for(var r in e||(e={}))Fle.call(e,r)&&W5(t,r,e[r]);if(G5)for(var r of G5(e))qle.call(e,r)&&W5(t,r,e[r]);return t},Z5=(t,e)=>Mle(t,Lle(e));const Hle={Accept:"application/json","Content-Type":"application/json"},zle="POST",Y5={headers:Hle,method:zle},J5=10;let TL=class{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new qs.EventEmitter,this.isAvailable=!1,this.registering=!1,!h5(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const r=ea(e),n=await(await V5(this.url,Z5(K5({},Y5),{body:r}))).json();this.onPayload({data:n})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!h5(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=ea({id:1,jsonrpc:"2.0",method:"test",params:[]});await V5(e,Z5(K5({},Y5),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?ju(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),s=n.message||n.toString(),i=jE(e,s);this.events.emit("payload",i)}parseError(e,r=this.url){return sL(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>J5&&this.events.setMaxListeners(J5)}};function UI(t){return t==null||typeof t!="object"&&typeof t!="function"}function PL(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function NL(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const $le="[object RegExp]",OL="[object String]",RL="[object Number]",xL="[object Boolean]",kL="[object Arguments]",Vle="[object Symbol]",Gle="[object Date]",Wle="[object Map]",Kle="[object Set]",Zle="[object Array]",Yle="[object ArrayBuffer]",Jle="[object Object]",Qle="[object DataView]",Xle="[object Uint8Array]",ede="[object Uint8ClampedArray]",tde="[object Uint16Array]",rde="[object Uint32Array]",nde="[object Int8Array]",sde="[object Int16Array]",ide="[object Int32Array]",ode="[object Float32Array]",ade="[object Float64Array]";function MI(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function cde(t,e){return Ql(t,void 0,t,new Map,e)}function Ql(t,e,r,n=new Map,s=void 0){const i=s?.(t,e,r,n);if(i!=null)return i;if(UI(t))return t;if(n.has(t))return n.get(t);if(Array.isArray(t)){const o=new Array(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ql(t[a],a,r,n,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;n.set(t,o);for(const[a,c]of t)o.set(a,Ql(c,a,r,n,s));return o}if(t instanceof Set){const o=new Set;n.set(t,o);for(const a of t)o.add(Ql(a,void 0,r,n,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(MI(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ql(t[a],a,r,n,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return n.set(t,o),cu(o,t,r,n,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return n.set(t,o),cu(o,t,r,n,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return n.set(t,o),cu(o,t,r,n,s),o}if(t instanceof Error){const o=new t.constructor;return n.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,cu(o,t,r,n,s),o}if(typeof t=="object"&&ude(t)){const o=Object.create(Object.getPrototypeOf(t));return n.set(t,o),cu(o,t,r,n,s),o}return t}function cu(t,e,r=t,n,s){const i=[...Object.keys(e),...PL(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Ql(e[a],a,r,n,s))}}function ude(t){switch(NL(t)){case kL:case Zle:case Yle:case Qle:case xL:case Gle:case ode:case ade:case nde:case sde:case ide:case Wle:case RL:case Jle:case $le:case Kle:case OL:case Vle:case Xle:case ede:case tde:case rde:return!0;default:return!1}}function lde(t,e){return cde(t,(r,n,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case RL:case OL:case xL:{const o=new t.constructor(t?.valueOf());return cu(o,t),o}case kL:{const o={};return cu(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function Q5(t){return lde(t)}function X5(t){return t!==null&&typeof t=="object"&&NL(t)==="[object Arguments]"}function eN(t){return typeof t=="object"&&t!==null}function dde(){}function fde(t){return MI(t)}function hde(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function pde(t){if(UI(t))return t;if(Array.isArray(t)||MI(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),r=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new r(t);if(t instanceof RegExp){const n=new r(t);return n.lastIndex=t.lastIndex,n}if(t instanceof DataView)return new r(t.buffer.slice(0));if(t instanceof Error){const n=new r(t.message);return n.stack=t.stack,n.name=t.name,n.cause=t.cause,n}if(typeof File<"u"&&t instanceof File)return new r([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const n=Object.create(e);return Object.assign(n,t)}return t}function gde(t,...e){const r=e.slice(0,-1),n=e[e.length-1];let s=t;for(let i=0;i<r.length;i++){const o=r[i];s=yC(s,o,n,new Map)}return s}function yC(t,e,r,n){if(UI(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(n.has(e))return pde(n.get(e));if(n.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...PL(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(X5(a)&&(a={...a}),X5(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=Q5(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const l=[],d=Reflect.ownKeys(c);for(let f=0;f<d.length;f++){const g=d[f];l[g]=c[g]}c=l}else c=[];const u=r(c,a,o,t,e,n);u!=null?t[o]=u:Array.isArray(a)||eN(c)&&eN(a)?t[o]=yC(c,a,r,n):c==null&&hde(a)?t[o]=yC({},a,r,n):c==null&&fde(a)?t[o]=Q5(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function mde(t,...e){return gde(t,...e,dde)}const tN="error",yde="wss://relay.walletconnect.org",bde="wc",BL="universal_provider",Tg=`${bde}@2:${BL}:`,jL="https://rpc.walletconnect.org/v1/",DL="generic",wde=`${jL}bundler`,od="call_status",Ede=86400,LI={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var vde=Object.defineProperty,_de=Object.defineProperties,Ade=Object.getOwnPropertyDescriptors,rN=Object.getOwnPropertySymbols,Cde=Object.prototype.hasOwnProperty,Ide=Object.prototype.propertyIsEnumerable,nN=(t,e,r)=>e in t?vde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Pg=(t,e)=>{for(var r in e||(e={}))Cde.call(e,r)&&nN(t,r,e[r]);if(rN)for(var r of rN(e))Ide.call(e,r)&&nN(t,r,e[r]);return t},Sde=(t,e)=>_de(t,Ade(e));function UL(t,e,r){var n;const s=Ko(t);return((n=e.rpcMap)==null?void 0:n[s.reference])||`${jL}?chainId=${s.namespace}:${s.reference}&projectId=${r}`}function Tde(t){return t.includes(":")?t.split(":")[1]:t}function ML(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Pde(t,e){const r=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!r.length)return[];const n=[];return r.forEach(s=>{const i=e.namespaces[s].accounts;n.push(...i)}),n}function sN(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>{var n,s;return((n=r?.chains)==null?void 0:n.length)&&((s=r?.chains)==null?void 0:s.length)>0}))}function Ng(t={},e={}){const r=sN(iN(t)),n=sN(iN(e));return mde(r,n)}function iN(t){var e,r,n,s,i;const o={};if(!Ki(t))return o;for(const[a,c]of Object.entries(t)){const u=BE(a)?[a]:c.chains,l=c.methods||[],d=c.events||[],f=c.rpcMap||{},g=Jl(a);o[g]=Sde(Pg(Pg({},o[g]),c),{chains:Wi(u,(e=o[g])==null?void 0:e.chains),methods:Wi(l,(r=o[g])==null?void 0:r.methods),events:Wi(d,(n=o[g])==null?void 0:n.events)}),(Ki(f)||Ki(((s=o[g])==null?void 0:s.rpcMap)||{}))&&(o[g].rpcMap=Pg(Pg({},f),(i=o[g])==null?void 0:i.rpcMap))}return o}function oN(t){return t.includes(":")?t.split(":")[2]:t}function aN(t){const e={};for(const[r,n]of Object.entries(t)){const s=n.methods||[],i=n.events||[],o=n.accounts||[],a=BE(r)?[r]:n.chains?n.chains:ML(n.accounts);e[r]={chains:a,methods:s,events:i,accounts:o}}return e}function cA(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}function Nde(t){try{const e=JSON.parse(t);return typeof e=="object"&&e!==null&&!Array.isArray(e)}catch{return!1}}const LL={},ad=t=>LL[t],uA=(t,e)=>{LL[t]=e};var Ode=Object.defineProperty,cN=Object.getOwnPropertySymbols,Rde=Object.prototype.hasOwnProperty,xde=Object.prototype.propertyIsEnumerable,uN=(t,e,r)=>e in t?Ode(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,lN=(t,e)=>{for(var r in e||(e={}))Rde.call(e,r)&&uN(t,r,e[r]);if(cN)for(var r of cN(e))xde.call(e,r)&&uN(t,r,e[r]);return t};const dN="eip155",kde=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],Bde=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,lA=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,fN=t=>Object.keys(t).filter(e=>kde.includes(e)).reduce((e,r)=>(e[r]=jde(t[r]),e),{}),jde=t=>typeof t=="string"&&Nde(t)?JSON.parse(t):t,Dde=(t,e,r)=>{const{sessionProperties:n={},scopedProperties:s={}}=t,i={};if(!Ki(s)&&!Ki(n))return;const o=fN(n);for(const a of r){const c=Bde(a);if(!c)continue;i[lA(c)]=o;const u=s?.[`${dN}:${c}`];if(u){const l=u?.[`${dN}:${c}:${e}`];i[lA(c)]=lN(lN({},i[lA(c)]),fN(l||u))}}for(const[a,c]of Object.entries(i))Object.keys(c).length===0&&delete i[a];return Object.keys(i).length>0?i:void 0};var Ude=Object.defineProperty,Mde=(t,e,r)=>e in t?Ude(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Lde=(t,e,r)=>Mde(t,e+"",r);let dA;class FI{constructor(e){Lde(this,"storage"),this.storage=e}async getItem(e){return await this.storage.getItem(e)}async setItem(e,r){return await this.storage.setItem(e,r)}async removeItem(e){return await this.storage.removeItem(e)}static getStorage(e){return dA||(dA=new FI(e)),dA}}var Fde=Object.defineProperty,qde=Object.defineProperties,Hde=Object.getOwnPropertyDescriptors,hN=Object.getOwnPropertySymbols,zde=Object.prototype.hasOwnProperty,$de=Object.prototype.propertyIsEnumerable,pN=(t,e,r)=>e in t?Fde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vde=(t,e)=>{for(var r in e||(e={}))zde.call(e,r)&&pN(t,r,e[r]);if(hN)for(var r of hN(e))$de.call(e,r)&&pN(t,r,e[r]);return t},Gde=(t,e)=>qde(t,Hde(e));async function Wde(t,e){const r=Ko(t.result.capabilities.caip345.caip2),n=t.result.capabilities.caip345.transactionHashes,s=await Promise.allSettled(n.map(d=>Kde(r.reference,d,e))),i=s.filter(d=>d.status==="fulfilled").map(d=>d.value).filter(d=>d);s.filter(d=>d.status==="rejected").forEach(d=>console.warn("Failed to fetch transaction receipt:",d.reason));const o=!i.length||i.some(d=>!d),a=i.every(d=>d?.status==="0x1"),c=i.every(d=>d?.status==="0x0"),u=i.some(d=>d?.status==="0x0");let l;return o?l=100:a?l=200:c?l=500:u&&(l=600),{id:t.result.id,version:t.request.version,atomic:t.request.atomicRequired,chainId:t.request.chainId,capabilities:t.result.capabilities,receipts:i,status:l}}async function Kde(t,e,r){return await r(parseInt(t)).request(ai("eth_getTransactionReceipt",[e]))}async function Zde({sendCalls:t,storage:e}){const r=await e.getItem(od);await e.setItem(od,Gde(Vde({},r),{[t.result.id]:{request:t.request,result:t.result,expiry:wr(Ede)}}))}async function Yde({resultId:t,storage:e}){const r=await e.getItem(od);if(r){delete r[t],await e.setItem(od,r);for(const n in r)Li(r[n].expiry)&&delete r[n];await e.setItem(od,r)}}async function Jde({resultId:t,storage:e}){const r=await e.getItem(od),n=r?.[t];if(n&&!Li(n.expiry))return n;await Yde({resultId:t,storage:e})}var Qde=Object.defineProperty,Xde=Object.defineProperties,efe=Object.getOwnPropertyDescriptors,gN=Object.getOwnPropertySymbols,tfe=Object.prototype.hasOwnProperty,rfe=Object.prototype.propertyIsEnumerable,bC=(t,e,r)=>e in t?Qde(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,fA=(t,e)=>{for(var r in e||(e={}))tfe.call(e,r)&&bC(t,r,e[r]);if(gN)for(var r of gN(e))rfe.call(e,r)&&bC(t,r,e[r]);return t},hA=(t,e)=>Xde(t,efe(e)),Rc=(t,e,r)=>bC(t,typeof e!="symbol"?e+"":e,r);class nfe{constructor(e){Rc(this,"name","eip155"),Rc(this,"client"),Rc(this,"chainId"),Rc(this,"namespace"),Rc(this,"httpProviders"),Rc(this,"events"),Rc(this,"storage"),this.namespace=e.namespace,this.events=ad("events"),this.client=ad("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain()),this.storage=FI.getStorage(this.client.core.storage)}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e);case"wallet_sendCalls":return await this.sendCalls(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r);const n=this.chainId;this.chainId=parseInt(e),this.events.emit(LI.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${n}`})}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||UL(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new BI(new TL(n,ad("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const s=parseInt(Tde(r));e[s]=this.createHttpProvider(s,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(e){const r=e||this.chainId;return this.httpProviders[r]||(this.httpProviders=hA(fA({},this.httpProviders),{[r]:this.createHttpProvider(r)}),this.httpProviders[r])}async handleSwitchChain(e){var r,n;let s=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,s,i,o;const a=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),l=((o=u?.sessionProperties)==null?void 0:o.capabilities)||{},d=`${a}${c.join(",")}`,f=l?.[d];if(f)return f;let g;try{g=Dde(u,a,c)}catch(h){console.warn("Failed to extract capabilities from session",h)}if(g)return g;const p=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:hA(fA({},u.sessionProperties||{}),{capabilities:hA(fA({},l||{}),{[d]:p})})})}catch(h){console.warn("Failed to update session with capabilities",h)}return p}async getCallStatus(e){var r,n,s;const i=this.client.session.get(e.topic),o=(r=i.sessionProperties)==null?void 0:r.bundler_name;if(o){const u=this.getBundlerUrl(e.chainId,o);try{return await this.getUserOperationReceipt(u,e)}catch(l){console.warn("Failed to fetch call status from bundler",l,u)}}const a=(n=i.sessionProperties)==null?void 0:n.bundler_url;if(a)try{return await this.getUserOperationReceipt(a,e)}catch(u){console.warn("Failed to fetch call status from custom bundler",u,a)}const c=await Jde({resultId:(s=e.request.params)==null?void 0:s[0],storage:this.storage});if(c)try{return await Wde(c,this.getHttpProvider.bind(this))}catch(u){console.warn("Failed to fetch call status from stored send calls",u,c)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ai("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,r){return`${wde}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}async sendCalls(e){var r,n,s;const i=await this.client.request(e),o=(r=e.request.params)==null?void 0:r[0],a=i?.id,c=i?.capabilities||{},u=(n=c?.caip345)==null?void 0:n.caip2,l=(s=c?.caip345)==null?void 0:s.transactionHashes;return!a||!u||!(l!=null&&l.length)||await Zde({sendCalls:{request:o,result:i},storage:this.storage}),i}}var sfe=Object.defineProperty,ife=(t,e,r)=>e in t?sfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,El=(t,e,r)=>ife(t,typeof e!="symbol"?e+"":e,r);class ofe{constructor(e){El(this,"name",DL),El(this,"client"),El(this,"httpProviders"),El(this,"events"),El(this,"namespace"),El(this,"chainId"),this.namespace=e.namespace,this.events=ad("events"),this.client=ad("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r);const n=this.chainId;this.chainId=e,this.events.emit(LI.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${n}`})}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return Ko(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(s=>{var i,o;const a=Ko(s),c=(o=(i=this.namespace)==null?void 0:i.rpcMap)==null?void 0:o[`${a.namespace}:${a.reference}`];n[a.reference]=this.createHttpProvider(s,c)}),n}getHttpProvider(e){const r=Ko(e).reference,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||UL(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new BI(new TL(n,ad("disableProviderPing")))}}var afe=Object.defineProperty,cfe=Object.defineProperties,ufe=Object.getOwnPropertyDescriptors,mN=Object.getOwnPropertySymbols,lfe=Object.prototype.hasOwnProperty,dfe=Object.prototype.propertyIsEnumerable,wC=(t,e,r)=>e in t?afe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_f=(t,e)=>{for(var r in e||(e={}))lfe.call(e,r)&&wC(t,r,e[r]);if(mN)for(var r of mN(e))dfe.call(e,r)&&wC(t,r,e[r]);return t},Og=(t,e)=>cfe(t,ufe(e)),ss=(t,e,r)=>wC(t,typeof e!="symbol"?e+"":e,r);let ffe=class FL{constructor(e){ss(this,"client"),ss(this,"namespaces"),ss(this,"optionalNamespaces"),ss(this,"sessionProperties"),ss(this,"scopedProperties"),ss(this,"events",new rI),ss(this,"rpcProviders",{}),ss(this,"session"),ss(this,"providerOpts"),ss(this,"logger"),ss(this,"uri"),ss(this,"disableProviderPing",!1),ss(this,"connectParams");var r,n;this.providerOpts=e,this.logger=RI({logger:(r=e.logger)!=null?r:tN,name:(n=this.providerOpts.name)!=null?n:BL}),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const r=new FL(e);return await r.initialize(),r}async request(e,r,n){const[s,i]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:_f({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,s){const i=new Date().getTime();this.request(e,n,s).then(o=>r(null,qp(i,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Jt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.connectParams=e,this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:s}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const i=await s();if(this.session=i.session,this.session){const o=aN(this.session.namespaces);this.namespaces=Ng(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){var r,n;const{uri:s,approval:i}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties,authentication:(r=this.connectParams)==null?void 0:r.authentication,walletPay:(n=this.connectParams)==null?void 0:n.walletPay});s&&(this.uri=s,this.events.emit("display_uri",s));const o=await i();this.session=o;const a=aN(o.namespaces);return this.namespaces=Ng(this.namespaces,a),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,s]=this.validateChain(e);this.getProvider(n).setDefaultChain(s,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(!Yo(r))return;for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}catch(r){this.logger.warn(r,"Failed to cleanup pending pairings")}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,r;if(this.client=this.providerOpts.client||await Ble.init({core:this.providerOpts.core,logger:this.providerOpts.logger||tN,relayUrl:this.providerOpts.relayUrl||yde,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error(n,"Failed to get session"),new Error(`The provided session: ${(r=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:r.topic} doesn't exist in the Sign client`)}else{const n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>Jl(r)))];uA("client",this.client),uA("events",this.events),uA("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=Pde(r,this.session);if(n?.length===0)return;const s=ML(n),i=Ng(this.namespaces,this.optionalNamespaces),o=Og(_f({},i[r]),{accounts:n,chains:s});switch(r){case"eip155":this.rpcProviders[r]=new nfe({namespace:o});break;default:this.rpcProviders[r]=new ofe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var r;const{topic:n}=e;n===((r=this.session)==null?void 0:r.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var r;const{params:n,topic:s}=e;if(s!==((r=this.session)==null?void 0:r.topic))return;const{event:i}=n;if(i.name==="accountsChanged"){const o=i.data;o&&Yo(o)&&this.events.emit("accountsChanged",o.map(oN))}else if(i.name==="chainChanged"){const o=n.chainId,a=n.event.data,c=Jl(o),u=cA(o)!==cA(a)?`${c}:${cA(a)}`:o;this.onChainChanged({currentCaipChainId:u})}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n,s;if(e!==((n=this.session)==null?void 0:n.topic))return;const{namespaces:i}=r,o=(s=this.client)==null?void 0:s.session.get(e);this.session=Og(_f({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{var r;e.topic===((r=this.session)==null?void 0:r.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Og(_f({},Jt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(LI.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(Og(_f({},e),{internal:!0}))})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[DL]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r={},optionalNamespaces:n={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=Ng(r,n),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[r,n]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>Jl(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const s=Jl(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged({currentCaipChainId:e,previousCaipChainId:r,internal:n=!1}){if(!this.namespaces)return;const[s,i]=this.validateChain(e);i&&(this.updateNamespaceChain(s,i),n?(this.events.emit("chainChanged",i),this.emitAccountsChangedOnChainChange({namespace:s,currentCaipChainId:e,previousCaipChainId:r})):this.getProvider(s).setDefaultChain(i),await this.persist("namespaces",this.namespaces))}emitAccountsChangedOnChainChange({namespace:e,currentCaipChainId:r,previousCaipChainId:n}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(oN);if(!Yo(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn(o,"Failed to emit accountsChanged on chain change")}}updateNamespaceChain(e,r){if(!this.namespaces)return;const n=this.namespaces[e]?e:`${e}:${r}`,s={chains:[],methods:[],events:[],defaultChain:r};this.namespaces[n]?this.namespaces[n]&&(this.namespaces[n].defaultChain=r):this.namespaces[n]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.connectParams=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,r){var n;const s=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.setItem(`${Tg}/${e}${s}`,r)}async getFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";return await this.client.core.storage.getItem(`${Tg}/${e}${n}`)}async deleteFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.removeItem(`${Tg}/${e}${n}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const r=await this.client.core.storage.getKeys();for(const n of r)n.startsWith(Tg)&&await this.client.core.storage.removeItem(n)}catch(r){this.logger.warn(r,"Failed to cleanup storage")}}};const yN=2147483648,hfe={convertEVMChainIdToCoinType(t){if(t>=yN)throw new Error("Invalid chainId");return(yN|t)>>>0}},Ts=Kt({suggestions:[],loading:!1}),pfe={state:Ts,subscribe(t){return Wr(Ts,()=>t(Ts))},subscribeKey(t,e){return Kr(Ts,t,e)},async resolveName(t){try{return await He.lookupEnsName(t)}catch(e){const r=e;throw new Error(r?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(t){try{return await He.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Ts.loading=!0,Ts.suggestions=[];const e=await He.getEnsNameSuggestions(t);return Ts.suggestions=e.suggestions||[],Ts.suggestions}catch(e){const r=Wh.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(r)}finally{Ts.loading=!1}},async getNamesForAddress(t){try{if(!z.state.activeCaipNetwork)return[];const r=ie.getEnsFromCacheForAddress(t);if(r)return r;const n=await He.reverseLookupEnsName({address:t});return ie.updateEnsCache({address:t,ens:n,timestamp:Date.now()}),n}catch(e){const r=Wh.parseEnsApiError(e,"Error fetching names for address");throw new Error(r)}},async registerName(t){const e=z.state.activeCaipNetwork,r=z.getAccountData(e?.chainNamespace)?.address,n=ue.getAuthConnector();if(!e)throw new Error("Network not found");if(!r||!n)throw new Error("Address or auth connector not found");Ts.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Fe.pushTransactionStack({onCancel(){Fe.replace("RegisterAccountName")}});const i=await me.signMessage(s);Ts.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=hfe.convertEVMChainIdToCoinType(Number(o));await He.registerEnsName({coinType:a,address:r,signature:i,message:s}),z.setAccountProp("profileName",t,e.chainNamespace),ie.updateEnsCache({address:r,ens:[{name:t,registered_at:new Date().toISOString(),updated_at:void 0,addresses:{},attributes:[]}],timestamp:Date.now()}),Fe.replace("RegisterAccountNameSuccess")}catch(s){const i=Wh.parseEnsApiError(s,`Error registering name ${t}`);throw Fe.replace("RegisterAccountName"),new Error(i)}finally{Ts.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){return t?.reasons?.[0]?.description||e}},Wh=Fs(pfe);function EC(t){try{return new URL(t)}catch{return null}}function gfe(t){const e=t.split("/"),r=e.length>0&&e[0]!==void 0?e[0]:"",n=r.lastIndexOf(":");return n===-1?{host:r}:{host:r.slice(0,n),port:r.slice(n+1)}}function mfe(t){const e=t.indexOf("://");if(e===-1)return null;const r=t.slice(0,e),n=e+3;let s=t.indexOf("/",n);s===-1&&(s=t.length);const i=t.slice(n,s),o=i.lastIndexOf(":");return o===-1?{scheme:r,host:i}:{scheme:r,host:i.slice(0,o),port:i.slice(o+1)}}function yfe(t,e){if(e.includes("://")){const o=EC(e);return o?o.origin===t:!1}const{host:r,port:n}=gfe(e),s=t.indexOf("://");if(s!==-1){const o=s+3;let a=t.indexOf("/",o);a===-1&&(a=t.length);const c=t.slice(o,a);if(n!==void 0)return`${r}:${n}`===c;const u=c.split(":")[0];return r===u}const i=EC(t);return i?n!==void 0?r===i.hostname&&n===(i.port||void 0):r===i.hostname:!1}function bfe(t,e,r){let n=r,s;const i=n.indexOf("://");i!==-1&&(s=n.slice(0,i),n=n.slice(i+3));const o=n.indexOf("/");o!==-1&&(n=n.slice(0,o));let a=n,c;const u=a.lastIndexOf(":");u!==-1&&(c=a.slice(u+1),a=a.slice(0,u));const l=a.split(".");for(const h of l)if(h.includes("*")&&h!=="*")return!1;const d=t.protocol.replace(/:$/u,"");if(s&&s!==d||c!==void 0&&c!=="*"&&c!==t.port)return!1;const f=mfe(e),p=(f?f.host:t.hostname).split(".");if(l.length!==p.length)return!1;for(let h=l.length-1;h>=0;h-=1){const y=l[h],b=p[h];if(y!=="*"&&y!==b)return!1}return!0}const wfe={ton:["ton_sendMessage","ton_signData"],solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Zi={RPC_ERROR_CODE:{USER_REJECTED:5e3,USER_REJECTED_METHODS:5002},getMethodsByChainNamespace(t){return wfe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const r={...t},n=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>n.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>n.add(s)),e.events&&Object.keys(e.events).forEach(s=>n.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&n.add(i)}),n.forEach(s=>{r[s]||(r[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{r[s]&&(r[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{r[s]&&(r[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{r[s]&&(r[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!r[a]||(r[a].rpcMap||(r[a].rpcMap={}),s.has(a)||(r[a].rpcMap={},s.add(a)),r[a].rpcMap[c]=o)})}return r},createNamespaces(t,e){const r=t.reduce((n,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];n[o]||(n[o]=this.createDefaultNamespace(o));const u=`${o}:${i}`,l=n[o];switch(l.chains.push(u),u){case"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":l.chains.push("solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ");break;case"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1":l.chains.push("solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K");break}return l?.rpcMap&&c&&(l.rpcMap[i]=c),n},{});return this.applyNamespaceOverrides(r,e)},resolveReownName:async t=>{const e=await Wh.resolveName(t);return(e?.addresses?Object.values(e.addresses):[])[0]?.address||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const r=e.chains||[],n=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...r,...n]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isUserRejectedRequestError(t){try{if(typeof t=="object"&&t!==null){const e=t,r=typeof e.code=="number",n=r&&e.code===Zi.RPC_ERROR_CODE.USER_REJECTED_METHODS,s=r&&e.code===Zi.RPC_ERROR_CODE.USER_REJECTED;return n||s}return!1}catch{return!1}},isOriginAllowed(t,e,r){const n=[...e,...r];if(e.length===0)return!0;const s=EC(t);if(!s)return n.some(i=>!i.includes("*")&&i===t);if(s.hostname==="localhost"||s.hostname==="127.0.0.1")return!0;for(const i of n)if(i.includes("*")){if(bfe(s,t,i))return!0}else if(yfe(t,i))return!0;return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:r,onDisconnect:n,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){r&&t.on("connect",()=>{const a=Zi.getWalletConnectAccounts(t,e);r(a)}),n&&t.on("disconnect",()=>{n()}),s&&t.on("accountsChanged",a=>{try{const c=t.session?.namespaces?.[e]?.accounts||[],u=t.rpcProviders?.[e]?.getDefaultChain(),l=a.map(d=>{const f=c.find(h=>h.includes(`${e}:${u}:${d}`));if(!f)return;const{chainId:g,chainNamespace:p}=_r.parseCaipAddress(f);return{address:d,chainId:g,chainNamespace:p}}).filter(d=>d!==void 0);l.length>0&&s(l)}catch(c){console.warn("Failed to parse accounts for namespace on accountsChanged event",e,a,c)}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){const r=new Set,n=t?.session?.namespaces?.[e]?.accounts?.map(s=>_r.parseCaipAddress(s)).filter(({address:s})=>r.has(s.toLowerCase())?!1:(r.add(s.toLowerCase()),!0));return n&&n.length>0?n:[]}},Efe=[Q.CONNECTOR_ID.AUTH,Q.CONNECTOR_ID.WALLET_CONNECT];class qL{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=r=>z.getCaipNetworks(r),this.getConnectorId=r=>ue.getConnectorId(r),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:r}){const n=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===r?.toString());e&&n&&this.addConnection({connectorId:Q.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:n})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:Q.CONNECTOR_ID.AUTH,type:"AUTH",name:Q.CONNECTOR_NAMES.AUTH,provider:e,imageId:void 0,chain:this.namespace,chains:[]})}addConnector(...e){const r=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(n=>r.has(n.id)?!1:(r.add(n.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const r=new Set;this.availableConnections=[...e,...this.availableConnections].filter(n=>r.has(n.connectorId.toLowerCase())?!1:(r.add(n.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(r=>r.connectorId.toLowerCase()!==e.toLowerCase()),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,r){z.setAccountProp("status",e,r)}on(e,r){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(r)}off(e,r){const n=this.eventListeners.get(e);n&&n.delete(r)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,r){const n=this.eventListeners.get(e);n&&n.forEach(s=>s(r))}async connectWalletConnect(e){try{return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}catch(r){throw Zi.isUserRejectedRequestError(r)?new KC(r):r}}async switchNetwork(e){const{caipNetwork:r}=e,n=yt.getProviderId(r.chainNamespace),s=yt.getProvider(r.chainNamespace);if(!s)throw new Error("Provider not found");if(n==="WALLET_CONNECT"){s.setDefaultChain(r.caipNetworkId);return}if(n==="AUTH"){const i=ue.getAuthConnector()?.provider;if(!i)throw new Error("Auth provider not found");const o=En(r.chainNamespace);await i.switchNetwork({chainId:r.caipNetworkId});const a=await i.getUser({chainId:r.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(r=>r.id==="walletConnect");if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,r){if(e.length>0){const{address:n,chainId:s}=be.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===s?.toString()),o=this.connectors.find(a=>a.id===r);n&&(this.emit("accountChanged",{address:n,chainId:s,connector:o}),this.addConnection({connectorId:r,accounts:e.map(a=>{const{address:c}=be.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,r,n=!0){if(e.length>0){const{address:s}=be.getAccount(e[0]),i=this.getConnection({connectorId:r,connections:this.connections,connectors:this.connectors});s&&this.getConnectorId(Q.CHAIN.EVM)?.toLowerCase()===r.toLowerCase()&&this.emit("accountChanged",{address:s,chainId:i?.caipNetwork?.id,connector:i?.connector}),this.addConnection({connectorId:r,accounts:e.map(o=>{const{address:a}=be.getAccount(o);return{address:a}}),caipNetwork:i?.caipNetwork})}else n&&this.onDisconnect(r)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),this.getConnectorId(Q.CHAIN.EVM)?.toLowerCase()===e.toLowerCase()&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,r){const n=typeof e=="string"&&e.startsWith("0x")?parseInt(e,16).toString():e.toString(),s=this.getConnection({connectorId:r,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(o=>o.chainNamespace===this.namespace).find(o=>o.id.toString()===n);s&&this.addConnection({connectorId:r,accounts:s.accounts,caipNetwork:i}),this.getConnectorId(Q.CHAIN.EVM)?.toLowerCase()===r.toLowerCase()&&this.emit("switchNetwork",{chainId:n})}listenProviderEvents(e,r){if(Efe.includes(e))return;const n=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(r.on("disconnect",i),r.on("accountsChanged",n),r.on("chainChanged",s),this.providerHandlers[e]={provider:r,disconnect:i,accountsChanged:n,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:r,disconnect:n,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];r.removeListener("disconnect",n),r.removeListener("accountsChanged",s),r.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){const e=this.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[r]=e.accounts;this.emit("accountChanged",{address:r?.address,chainId:e.caipNetwork?.id,connector:e.connector})}}getConnection({address:e,connectorId:r,connections:n,connectors:s}){if(r){const o=n.find(u=>u.connectorId.toLowerCase()===r.toLowerCase());if(!o)return null;const a=s.find(u=>u.id.toLowerCase()===o.connectorId.toLowerCase()),c=e?o.accounts.find(u=>u.address.toLowerCase()===e.toLowerCase()):o.accounts[0];return{...o,account:c,connector:a}}const i=n.find(o=>o.accounts.length>0&&s.some(a=>a.id.toLowerCase()===o.connectorId.toLowerCase()));if(i){const[o]=i.accounts,a=s.find(c=>c.id.toLowerCase()===i.connectorId.toLowerCase());return{...i,account:o,connector:a}}return null}}let xc=null;const qn={getSIWX(){return ne.state.siwx},async initializeIfEnabled(t=z.getActiveCaipAddress()){const e=ne.state.siwx;if(!(e&&t))return;const[r,n,s]=t.split(":");if(z.checkIfSupportedNetwork(r,`${r}:${n}`))try{if(ne.state.remoteFeatures?.emailCapture){const o=z.getAccountData(r)?.user;await ot.open({view:"DataCapture",data:{email:o?.email??void 0}});return}if(xc&&await xc,(await e.getSessions(`${r}:${n}`,s)).length)return;await ot.open({view:"SIWXSignMessage"})}catch(i){console.error("SIWXUtil:initializeIfEnabled",i),Ye.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties(i)}),await me._getClient()?.disconnect().catch(console.error),Fe.reset("Connect"),zi.showError("A problem occurred while trying initialize authentication")}},async isAuthenticated(t=z.getActiveCaipAddress()){if(!ne.state.siwx||!t)return!0;const{chainNamespace:r,chainId:n,address:s}=_r.parseCaipAddress(t),i=`${r}:${n}`;return(await qn.getSessions({address:s,caipNetworkId:i})).length>0},async requestSignMessage(){const t=ne.state.siwx,e=be.getPlainAddress(z.getActiveCaipAddress()),r=xh();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!r)throw new Error("No ActiveCaipNetwork or client found");try{const n=await t.createMessage({chainId:r.caipNetworkId,accountAddress:e}),s=n.toString();let i="";t.signMessage?i=await t.signMessage({message:s,chainId:r.caipNetworkId,accountAddress:e}):(ue.getConnectorId(r.chainNamespace)===Q.CONNECTOR_ID.AUTH&&Fe.pushTransactionStack({}),i=await me.signMessage(s)||""),await t.addSession({data:n,message:s,signature:i}),z.setLastConnectedSIWECaipNetwork(r),ot.close(),Ye.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(n){(!ot.state.open||Fe.state.view==="ApproveTransaction")&&await ot.open({view:"SIWXSignMessage"}),zi.showError("Error signing message"),Ye.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties(n)}),console.error("SWIXUtil:requestSignMessage",n)}},async cancelSignMessage(){try{const t=this.getSIWX();if(t?.getRequired?.()){const r=z.getLastConnectedSIWECaipNetwork();if(r){const n=await t?.getSessions(r?.caipNetworkId,be.getPlainAddress(z.getActiveCaipAddress())||"");n&&n.length>0?await z.switchActiveNetwork(r):await me.disconnect()}else await me.disconnect()}else ot.close();ot.close(),Ye.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(t){console.error("SIWXUtil:cancelSignMessage",t)}},async getAllSessions(){const t=this.getSIWX(),e=z.getAllRequestedCaipNetworks(),r=[];return await Promise.all(e.map(async n=>{const s=await t?.getSessions(n.caipNetworkId,be.getPlainAddress(z.getActiveCaipAddress())||"");s&&r.push(...s)})),r},async getSessions(t){const e=ne.state.siwx;let r=t?.address;if(!r){const s=z.getActiveCaipAddress();r=be.getPlainAddress(s)}let n=t?.caipNetworkId;return n||(n=z.getActiveCaipNetwork()?.caipNetworkId),e&&r&&n?e.getSessions(n,r):[]},async isSIWXCloseDisabled(){const t=this.getSIWX();if(t){const e=Fe.state.view==="ApproveTransaction",r=Fe.state.view==="SIWXSignMessage";if(e||r)return t.getRequired?.()&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:r,preferredAccountType:n,chainNamespace:s}){const i=qn.getSIWX(),o=xh();if(!i||!s.includes(Q.CHAIN.EVM)||ne.state.remoteFeatures?.emailCapture){const d=await t.connect({chainId:e,socialUri:r,preferredAccountType:n});return{address:d.address,chainId:d.chainId,accounts:d.accounts}}const a=`${s}:${e}`,c=await i.createMessage({chainId:a,accountAddress:"<<AccountAddress>>"}),u={accountAddress:c.accountAddress,chainId:c.chainId,domain:c.domain,uri:c.uri,version:c.version,nonce:c.nonce,notBefore:c.notBefore,statement:c.statement,resources:c.resources,requestId:c.requestId,issuedAt:c.issuedAt,expirationTime:c.expirationTime,serializedMessage:c.toString()},l=await t.connect({chainId:e,socialUri:r,siwxMessage:u,preferredAccountType:n});return u.accountAddress=l.address,u.serializedMessage=l.message||"",l.signature&&l.message&&await qn.addEmbeddedWalletSession(u,l.message,l.signature),z.setLastConnectedSIWECaipNetwork(o),{address:l.address,chainId:l.chainId,accounts:l.accounts}},async addEmbeddedWalletSession(t,e,r){if(xc)return xc;const n=qn.getSIWX();return n?(xc=n.addSession({data:t,message:e,signature:r}).finally(()=>{xc=null}),xc):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:r}){const n=qn.getSIWX(),s=xh(),i=new Set(e.map(u=>u.split(":")[0]));if(!n||i.size!==1||!i.has("eip155"))return!1;const o=await n.createMessage({chainId:xh()?.caipNetworkId||"",accountAddress:""}),a=await t.authenticate({nonce:o.nonce,domain:o.domain,uri:o.uri,exp:o.expirationTime,iat:o.issuedAt,nbf:o.notBefore,requestId:o.requestId,version:o.version,resources:o.resources,statement:o.statement,chainId:o.chainId,methods:r,chains:[o.chainId,...e.filter(u=>u!==o.chainId)]});zi.showLoading("Authenticating...",{autoClose:!1});const c={...a.session.peer.metadata,name:a.session.peer.metadata.name,icon:a.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"};if(z.setAccountProp("connectedWalletInfo",c,Array.from(i)[0]),a?.auths?.length){const u=a.auths.map(l=>{const d=t.client.formatAuthMessage({request:l.p,iss:l.p.iss});return{data:{...l.p,accountAddress:l.p.iss.split(":").slice(-1).join(""),chainId:l.p.iss.split(":").slice(2,4).join(":"),uri:l.p.aud??"",version:l.p.version||o.version,expirationTime:l.p.exp,issuedAt:l.p.iat,notBefore:l.p.nbf},message:d,signature:l.s.s,cacao:l}});try{await n.setSessions(u),s&&z.setLastConnectedSIWECaipNetwork(s),Ye.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:qn.getSIWXEventProperties()})}catch(l){throw console.error("SIWX:universalProviderAuth - failed to set sessions",l),Ye.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:qn.getSIWXEventProperties(l)}),await t.disconnect().catch(console.error),l}finally{zi.hide()}}return!0},getSIWXEventProperties(t){const e=z.state.activeChain;if(!e)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:z.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:En(e)===yr.ACCOUNT_TYPES.SMART_ACCOUNT,message:t?be.parseError(t):void 0}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};class HL{constructor({provider:e,namespace:r}){this.id=Q.CONNECTOR_ID.WALLET_CONNECT,this.name="WalletConnect",this.type="WALLET_CONNECT",this.imageId="ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",this.getCaipNetworks=z.getCaipNetworks.bind(z),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=r}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const r=this.getCaipNetworks(),n=ne.state.universalProviderConfigOverride,s=Zi.createNamespaces(r,n);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(r=>r.caipNetworkId);return qn.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:vfe})}}const vfe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],Ks=Kt({message:"",variant:"info",open:!1}),_fe={state:Ks,subscribeKey(t,e){return Kr(Ks,t,e)},open(t,e){const{debug:r}=ne.state,{code:n,displayMessage:s,debugMessage:i}=t;s&&r&&(Ks.message=s,Ks.variant=e,Ks.open=!0),i&&console.error(typeof i=="function"?i():i,n?{code:n}:void 0)},warn(t,e,r){Ks.open=!0,Ks.message=t,Ks.variant="warning",e&&console.warn(e,r)},close(){Ks.open=!1,Ks.message="",Ks.variant="info"}},cn=Fs(_fe),Afe={eip155:{native:{assetNamespace:"slip44",assetReference:"60"},defaultTokenNamespace:"erc20"},solana:{native:{assetNamespace:"slip44",assetReference:"501"},defaultTokenNamespace:"token"}};class Cfe extends Error{}function Ife(){const{sdkType:t,sdkVersion:e,projectId:r}=ne.getSnapshot(),n=new URL("https://rpc.walletconnect.org/v1/json-rpc");return n.searchParams.set("projectId",r),n.searchParams.set("st",t),n.searchParams.set("sv",e),n.searchParams.set("source","fund-wallet"),n.toString()}async function qI(t,e){const r=Ife(),{projectId:n}=ne.getSnapshot(),s={jsonrpc:"2.0",id:1,method:t,params:{...e||{},projectId:n}},o=await(await fetch(r,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}})).json();if(o.error)throw new Cfe(o.error.message);return o}async function XEe(t){return(await qI("reown_getExchanges",t)).result}async function eve(t){return(await qI("reown_getExchangePayUrl",t)).result}async function tve(t){return(await qI("reown_getExchangeBuyStatus",t)).result}function rve(t,e){const{chainNamespace:r,chainId:n}=_r.parseCaipNetworkId(t),s=Afe[r];if(!s)throw new Error(`Unsupported chain namespace for CAIP-19 formatting: ${r}`);let i=s.native.assetNamespace,o=s.native.assetReference;return e!=="native"&&(i=s.defaultTokenNamespace,o=e),`${`${r}:${n}`}/${i}:${o}`}const Sfe={network:"eip155:1",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},Tfe={network:"eip155:8453",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},zL={network:"eip155:8453",asset:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},Pfe={asset:"0x036CbD53842c5426634e7929541eC2318f3dCF7e"},Nfe={network:"eip155:84532",asset:"native",metadata:{name:"Ethereum",symbol:"ETH",decimals:18}},Ofe={network:"eip155:1",asset:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},Rfe={network:"eip155:42161",asset:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},xfe={network:"eip155:137",asset:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},kfe={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",metadata:{name:"USD Coin",symbol:"USDC",decimals:6}},Bfe={network:"eip155:1",asset:"0xdAC17F958D2ee523a2206206994597C13D831ec7",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},jfe={network:"eip155:10",asset:"0x94b008aA00579c1307B0EF2c499aD98a8ce58e58",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},Dfe={network:"eip155:42161",asset:"0xFd086bC7CD5C481DCC9C85ebE478A1C0b69FCbb9",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},Ufe={network:"eip155:137",asset:"0xc2132d05d31c914a87c6611c10748aeb04b58e8f",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},Mfe={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB",metadata:{name:"Tether USD",symbol:"USDT",decimals:6}},Lfe={network:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",asset:"native",metadata:{name:"Solana",symbol:"SOL",decimals:9}},Ffe={ethereumETH:Sfe,baseETH:Tfe,baseUSDC:zL,baseSepoliaETH:Nfe,ethereumUSDC:Ofe,arbitrumUSDC:Rfe,polygonUSDC:xfe,solanaUSDC:kfe,ethereumUSDT:Bfe,optimismUSDT:jfe,arbitrumUSDT:Dfe,polygonUSDT:Ufe,solanaUSDT:Mfe,solanaSOL:Lfe};function nve(t){return Object.values(Ffe).filter(e=>e.network===t)}const it={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",OKX_CONNECTOR_NAME:"OKX Wallet",BINANCE_CONNECTOR_NAME:"Binance Wallet",EIP155:Q.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"AUTH",getSDKVersionWarningMessage(t,e){return`
     @@@@@@@           @@@@@@@@@@@@@@@@@@      
   @@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@   
  @@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@  
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@  
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@   @@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@   @@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@  @@@@@@@@@@@@@
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@   @@@@@@@@@@@@@    
 @@@@@@   @@@@@@  @@@@@@@@@@@   @@@@@@@@@@@@@@    
 @@@@@@   @@@@@@  @@@@@@@@@@@  @@@@@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@   @@@@@@@@@@@@@@@ 
 @@@@@@@@@@@@@@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@  
  @@@@@@@@@@@@@    @@@@@@@@@@@@@@@@@@@@@@@@@@  
   @@@@@@@@@@@      @@@@@@@@@@@@@@@@@@@@@@@@   
      @@@@@            @@@@@@@@@@@@@@@@@@  
      
AppKit SDK version ${t} is outdated. Latest version is ${e}. Please update to the latest version for bug fixes and new features.
            
Changelog: https://github.com/reown-com/appkit/releases
NPM Registry: https://www.npmjs.com/package/@reown/appkit`}},bs={ConnectorExplorerIds:{[Q.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Q.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Q.CONNECTOR_ID.BASE_ACCOUNT]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[Q.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[Q.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[Q.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[it.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[it.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[it.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[it.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[it.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[it.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[it.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[it.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[it.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[it.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[it.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13",[it.OKX_CONNECTOR_NAME]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[it.BINANCE_CONNECTOR_NAME]:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200","00000008819873e925422c1ff0f99f7c":"b3406e4a-bbfc-44fb-e3a6-89673c78b700","-239":"20f673c0-095e-49b2-07cf-eb5049dcf600","-3":"20f673c0-095e-49b2-07cf-eb5049dcf600"},ConnectorImageIds:{[Q.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Q.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Q.CONNECTOR_ID.BASE_ACCOUNT]:"bba2c8be-7fd1-463e-42b1-796ecb0ad200",[Q.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[Q.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[Q.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[Q.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[Q.CONNECTOR_ID.INJECTED]:"Browser Wallet",[Q.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[Q.CONNECTOR_ID.COINBASE]:"Coinbase",[Q.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[Q.CONNECTOR_ID.BASE_ACCOUNT]:"Base Account",[Q.CONNECTOR_ID.LEDGER]:"Ledger",[Q.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[Q.CONNECTOR_ID.INJECTED]:"INJECTED",[Q.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[Q.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[Q.CONNECTOR_ID.AUTH]:"AUTH",[it.CONNECTOR_TYPE_AUTH]:"AUTH"}},hi={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([r,n])=>{e[`${it.EIP155}:${r}`]=n}),e},isLowerCaseMatch(t,e){return t?.toLowerCase()===e?.toLowerCase()},getActiveNamespaceConnectedToAuth(){const t=z.state.activeChain;return Q.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>ue.getConnectorId(e)===Q.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:r}){let n=0;return new Promise(s=>{async function i(){return n+=1,await t()?s(!0):n>=r?s(!1):(setTimeout(i,e),null)}i()})},userChainIdToChainNamespace(t){if(typeof t=="number")return Q.CHAIN.EVM;const[e]=t.split(":");return e},getOtherAuthNamespaces(t){return t?Q.AUTH_CONNECTOR_SUPPORTED_CHAINS.filter(n=>n!==t):[]},getConnectorStorageInfo(t,e){const n=ie.getConnections()[e]??[];return{hasDisconnected:ie.isConnectorDisconnected(t,e),hasConnected:n.some(s=>hi.isLowerCaseMatch(s.connectorId,t))}}},qfe=new AbortController,un={EmbeddedWalletAbortController:qfe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{code:"APKT001",displayMessage:"Network Not Found",debugMessage:"The specified network is not recognized. Please ensure it is included in the `networks` array of your `createAppKit` configuration."},ORIGIN_NOT_ALLOWED:{code:"APKT002",displayMessage:"Invalid App Configuration",debugMessage:()=>`The origin ${Rh()?window.origin:"unknown"} is not in your allow list. Please update your allowed domains at https://dashboard.reown.com. [PID: ${ne.state.projectId}]`},IFRAME_LOAD_FAILED:{code:"APKT003",displayMessage:"Network Error: Wallet Load Failed",debugMessage:()=>"Failed to load the embedded wallet. This may be due to network issues or server downtime. Please check your network connection and try again shortly. Contact support if the issue persists."},IFRAME_REQUEST_TIMEOUT:{code:"APKT004",displayMessage:"Wallet Request Timeout",debugMessage:()=>"The request to the embedded wallet timed out. Please check your network connection and try again shortly. Contact support if the issue persists."},UNVERIFIED_DOMAIN:{code:"APKT005",displayMessage:"Unverified Domain",debugMessage:()=>"Embedded wallet load failed. Ensure your domain is verified in https://dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{code:"APKT006",displayMessage:"Session Expired",debugMessage:"Your session is invalid or expired. Please check your systemâ€™s date and time settings, then reconnect."},INVALID_PROJECT_ID:{code:"APKT007",displayMessage:"Invalid Project ID",debugMessage:"The specified project ID is invalid. Please visit https://dashboard.reown.com to obtain a valid project ID."},PROJECT_ID_NOT_CONFIGURED:{code:"APKT008",displayMessage:"Project ID Missing",debugMessage:"No project ID is configured. You can create and configure a project ID at https://dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{code:"APKT009",displayMessage:"Server Error",debugMessage:t=>`Unable to fetch App Configuration. ${t}. Please check your network connection and try again shortly. Contact support if the issue persists.`},RATE_LIMITED_APP_CONFIGURATION:{code:"APKT010",displayMessage:"Rate Limited",debugMessage:"You have been rate limited while retrieving App Configuration. Please wait a few minutes and try again. Contact support if the issue persists."}},ALERT_WARNINGS:{LOCAL_CONFIGURATION_IGNORED:{debugMessage:t=>`[Reown Config Notice] ${t}`},INACTIVE_NAMESPACE_NOT_CONNECTED:{code:"APKTW001",displayMessage:"Inactive Namespace Not Connected",debugMessage:(t,e)=>`An error occurred while connecting an inactive namespace ${t}: "${e}"`},INVALID_EMAIL:{code:"APKTW002",displayMessage:"Invalid Email Address",debugMessage:"Please enter a valid email address"}}},$L={TOKEN_ADDRESSES_BY_SYMBOL:{USDC:{8453:zL.asset,84532:Pfe.asset}},getTokenSymbolByAddress(t){if(!t)return;const[e]=Object.entries($L.TOKEN_ADDRESSES_BY_SYMBOL).find(([r,n])=>Object.values(n).includes(t))??[];return e}},Hfe={createLogger(t,e="error"){const r=YC({level:e}),{logger:n}=yE({opts:r});return n.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},n}},zfe="rpc.walletconnect.org";function bN(t,e){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",t),r.searchParams.set("projectId",e),r.toString()}const pA=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","eip155:80094","eip155:80069","eip155:560048","eip155:31","eip155:2818","eip155:57054","eip155:911867","eip155:534351","eip155:1112","eip155:534352","eip155:1111","eip155:146","eip155:130","eip155:1284","eip155:30","eip155:2810","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Gl={extendRpcUrlWithProjectId(t,e){let r=!1;try{r=new URL(t).host===zfe}catch{r=!1}if(r){const n=new URL(t);return n.searchParams.has("projectId")||n.searchParams.set("projectId",e),n.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:Q.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${Q.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,r){const n=t.rpcUrls?.default?.http?.[0];return pA.includes(e)?bN(e,r):n||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=t.rpcUrls?.default?.http?.[0],a=this.getDefaultRpcUrl(t,i,r),c=t?.rpcUrls?.chainDefault?.http?.[0]||o,u=n?.[i]?.map(f=>f.url)||[],l=[...u,...a?[a]:[]],d=[...u];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:bs.NetworkImageIds[t.id],imageUrl:e?.[t.id]},rpcUrls:{...t.rpcUrls,default:{http:l},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){return t.map(s=>Gl.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:n,projectId:r}))},getViemTransport(t,e,r){const n=[];return r?.forEach(s=>{n.push(cg(s.url,s.config))}),pA.includes(t.caipNetworkId)&&n.push(cg(bN(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),t?.rpcUrls?.default?.http?.forEach(s=>{n.push(cg(s))}),WT(n)},extendWagmiTransports(t,e,r){if(pA.includes(t.caipNetworkId)){const n=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return WT([r,cg(n)])}return r},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:Q.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){const e=ie.getActiveCaipNetworkId(),r=z.getAllRequestedCaipNetworks(),n=Array.from(z.state.chains?.keys()||[]),s=e?.split(":")[0],i=s?n.includes(s):!1,o=r?.find(c=>c.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||r?.[0]}};class Kh{constructor(){}static getInstance({projectId:e,chainId:r,enableLogger:n,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a}){const{metadata:c,sdkVersion:u,sdkType:l}=ne.getSnapshot();return Kh.instance||(Kh.instance=new jV({projectId:e,chainId:r,enableLogger:n,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:!!ne.state.remoteFeatures?.emailCapture,metadata:c,sdkVersion:u,sdkType:l})),Kh.instance}}var wN={};const $fe={ACCOUNT_TABS:[{label:"Tokens"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof wN<"u"?wN.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120},VIEWS_WITH_LEGAL_FOOTER:["Connect","ConnectWallets","OnRampTokenSelect","OnRampFiatSelect","OnRampProviders"],VIEWS_WITH_DEFAULT_FOOTER:["Networks"]},Vfe=[bs.ConnectorExplorerIds[Q.CONNECTOR_ID.COINBASE],bs.ConnectorExplorerIds[Q.CONNECTOR_ID.COINBASE_SDK],bs.ConnectorExplorerIds[Q.CONNECTOR_ID.BASE_ACCOUNT],bs.ConnectorExplorerIds[it.SOLFLARE_CONNECTOR_NAME],bs.ConnectorExplorerIds[it.PHANTOM_CONNECTOR_NAME],bs.ConnectorExplorerIds[it.BINANCE_CONNECTOR_NAME]],Dh={filterOutDuplicatesByRDNS(t){const e=ne.state.enableEIP6963?ue.state.connectors:[],r=ie.getRecentWallets(),n=e.map(a=>a.info?.rdns).filter(Boolean),s=r.map(a=>a.rdns).filter(Boolean),i=n.concat(s);if(i.includes("io.metamask.mobile")&&be.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a?.rdns&&i.includes(String(a.rdns))||!a?.rdns&&e.some(u=>u.name===a.name)))},filterOutDuplicatesByIds(t){const e=ue.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"||a.type==="MULTI_CHAIN"),r=ie.getRecentWallets(),n=e.map(a=>a.explorerId||a.explorerWallet?.id||a.id),s=r.map(a=>a.id),i=n.concat(s);return t.filter(a=>!i.includes(a?.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=ue.state,{featuredWalletIds:r}=ne.state,n=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>(a.info?.rdns&&(o[a.info.rdns]=!0),o),{});return t.map(o=>({...o,installed:!!o.rdns&&!!n[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(r?.length){const u=r.indexOf(o.id),l=r.indexOf(a.id);if(u!==-1&&l!==-1)return u-l;if(u!==-1)return-1;if(l!==-1)return 1}return 0})},getConnectOrderMethod(t,e){const r=t?.connectMethodsOrder||ne.state.features?.connectMethodsOrder,n=e||ue.state.connectors;if(r)return r;const{injected:s,announced:i}=p1.getConnectorsByType(n,ke.state.recommended,ke.state.featured),o=s.filter(p1.showConnector),a=i.filter(p1.showConnector);return o.length||a.length?["wallet","email","social"]:$fe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&ke.state.excludedWallets.some(n=>n.rdns===t.rdns),r=!!t.name&&ke.state.excludedWallets.some(n=>hi.isLowerCaseMatch(n.name,t.name));return e||r},markWalletsWithDisplayIndex(t){return t.map((e,r)=>({...e,display_index:r}))},filterWalletsByWcSupport(t){return me.state.wcBasic?t.filter(e=>e.supports_wc):be.isMobile()?t.filter(e=>e.supports_wc||Vfe.includes(e.id)):t}},p1={getConnectorsByType(t,e,r){const{customWallets:n}=ne.state,s=ie.getRecentWallets(),i=Dh.filterOutDuplicateWallets(e),o=Dh.filterOutDuplicateWallets(r),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),u=t.filter(d=>d.type==="INJECTED"),l=t.filter(d=>d.type==="EXTERNAL");return{custom:n,recent:s,external:l,multiChain:a,announced:c,injected:u,recommended:i,featured:o}},showConnector(t){const e=t.info?.rdns,r=!!e&&ke.state.excludedWallets.some(s=>!!s.rdns&&s.rdns===e),n=!!t.name&&ke.state.excludedWallets.some(s=>hi.isLowerCaseMatch(s.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!be.isMobile()||be.isMobile()&&!e&&!me.checkInstalled())||r||n)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(r||n))},getIsConnectedWithWC(){return Array.from(z.state.chains.values()).some(r=>ue.getConnectorId(r.namespace)===Q.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:r,recent:n,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=ne.state.features?.connectorTypeOrder??[]}){const l=[{type:"walletConnect",isEnabled:!0},{type:"recent",isEnabled:n.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:r&&r.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(p=>p.isEnabled),d=new Set(l.map(p=>p.type)),f=c.filter(p=>d.has(p)).map(p=>({type:p,isEnabled:!0})),g=l.filter(({type:p})=>!f.some(({type:y})=>y===p));return Array.from(new Set([...f,...g].map(({type:p})=>p)))},sortConnectorsByExplorerWallet(t){return[...t].sort((e,r)=>e.explorerWallet&&r.explorerWallet?(e.explorerWallet.order??0)-(r.explorerWallet.order??0):e.explorerWallet?-1:r.explorerWallet?1:0)},getAuthName({email:t,socialUsername:e,socialProvider:r}){return e?r&&r==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){try{if(t.name==="Browser Wallet"&&!be.isMobile())return{accounts:[],chainId:void 0};if(t.id===Q.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[e,r]=await Promise.all([t.provider?.request({method:"eth_accounts"}),t.provider?.request({method:"eth_chainId"}).then(n=>Number(n))]);return{accounts:e,chainId:r}}catch(e){return console.warn(`Failed to fetch provider data for ${t.name}`,e),{accounts:[],chainId:void 0}}},getFilteredCustomWallets(t){const e=ie.getRecentWallets(),r=ue.state.connectors.map(o=>o.info?.rdns).filter(Boolean),n=e.map(o=>o.rdns).filter(Boolean),s=r.concat(n);if(s.includes("io.metamask.mobile")&&be.isMobile()){const o=s.indexOf("io.metamask.mobile");s[o]="io.metamask"}return t.filter(o=>!s.includes(String(o?.rdns)))},hasWalletConnector(t){return ue.state.connectors.some(e=>e.id===t.id||e.name===t.name)},isWalletCompatibleWithCurrentChain(t){const e=z.state.activeChain;return e&&t.chains?t.chains.some(r=>{const n=r.split(":")[0];return e===n}):!0},getFilteredRecentWallets(){return ie.getRecentWallets().filter(r=>!Dh.isExcluded(r)).filter(r=>!this.hasWalletConnector(r)).filter(r=>this.isWalletCompatibleWithCurrentChain(r))},getCappedRecommendedWallets(t){const{connectors:e}=ue.state,{customWallets:r,featuredWalletIds:n}=ne.state,s=e.find(E=>E.id==="walletConnect"),i=e.filter(E=>E.type==="INJECTED"||E.type==="ANNOUNCED"||E.type==="MULTI_CHAIN");if(!s&&!i.length&&!r?.length)return[];const o=v2.isEmailEnabled(),a=v2.isSocialsEnabled(),c=i.filter(E=>E.name!=="Browser Wallet"&&E.name!=="WalletConnect"),u=n?.length||0,l=r?.length||0,d=c.length||0,f=o?1:0,g=a?1:0,p=u+l+d+f+g,y=Math.max(0,4-p);return y<=0?[]:Dh.filterOutDuplicateWallets(t).slice(0,y)}};const g1=globalThis,HI=g1.ShadowRoot&&(g1.ShadyCSS===void 0||g1.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,zI=Symbol(),EN=new WeakMap;let VL=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==zI)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(HI&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=EN.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&EN.set(r,e))}return e}toString(){return this.cssText}};const si=t=>new VL(typeof t=="string"?t:t+"",void 0,zI),za=(t,...e)=>{const r=t.length===1?t[0]:e.reduce(((n,s,i)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1]),t[0]);return new VL(r,t,zI)},Gfe=(t,e)=>{if(HI)t.adoptedStyleSheets=e.map((r=>r instanceof CSSStyleSheet?r:r.styleSheet));else for(const r of e){const n=document.createElement("style"),s=g1.litNonce;s!==void 0&&n.setAttribute("nonce",s),n.textContent=r.cssText,t.appendChild(n)}},vN=HI?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return si(r)})(t):t;const{is:Wfe,defineProperty:Kfe,getOwnPropertyDescriptor:Zfe,getOwnPropertyNames:Yfe,getOwnPropertySymbols:Jfe,getPrototypeOf:Qfe}=Object,LE=globalThis,_N=LE.trustedTypes,Xfe=_N?_N.emptyScript:"",ehe=LE.reactiveElementPolyfillSupport,Zh=(t,e)=>t,vC={toAttribute(t,e){switch(e){case Boolean:t=t?Xfe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},GL=(t,e)=>!Wfe(t,e),AN={attribute:!0,type:String,converter:vC,reflect:!1,useDefault:!1,hasChanged:GL};Symbol.metadata??=Symbol("metadata"),LE.litPropertyMetadata??=new WeakMap;let Wl=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=AN){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(e,r),!r.noAccessor){const n=Symbol(),s=this.getPropertyDescriptor(e,n,r);s!==void 0&&Kfe(this.prototype,e,s)}}static getPropertyDescriptor(e,r,n){const{get:s,set:i}=Zfe(this.prototype,e)??{get(){return this[r]},set(o){this[r]=o}};return{get:s,set(o){const a=s?.call(this);i?.call(this,o),this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??AN}static _$Ei(){if(this.hasOwnProperty(Zh("elementProperties")))return;const e=Qfe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Zh("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Zh("properties"))){const r=this.properties,n=[...Yfe(r),...Jfe(r)];for(const s of n)this.createProperty(s,r[s])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[n,s]of r)this.elementProperties.set(n,s)}this._$Eh=new Map;for(const[r,n]of this.elementProperties){const s=this._$Eu(r,n);s!==void 0&&this._$Eh.set(s,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const s of n)r.unshift(vN(s))}else e!==void 0&&r.push(vN(e));return r}static _$Eu(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const n of r.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Gfe(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$ET(e,r){const n=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,n);if(s!==void 0&&n.reflect===!0){const i=(n.converter?.toAttribute!==void 0?n.converter:vC).toAttribute(r,n.type);this._$Em=e,i==null?this.removeAttribute(s):this.setAttribute(s,i),this._$Em=null}}_$AK(e,r){const n=this.constructor,s=n._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const i=n.getPropertyOptions(s),o=typeof i.converter=="function"?{fromAttribute:i.converter}:i.converter?.fromAttribute!==void 0?i.converter:vC;this._$Em=s;const a=o.fromAttribute(r,i.type);this[s]=a??this._$Ej?.get(s)??a,this._$Em=null}}requestUpdate(e,r,n){if(e!==void 0){const s=this.constructor,i=this[e];if(n??=s.getPropertyOptions(e),!((n.hasChanged??GL)(i,r)||n.useDefault&&n.reflect&&i===this._$Ej?.get(e)&&!this.hasAttribute(s._$Eu(e,n))))return;this.C(e,r,n)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,r,{useDefault:n,reflect:s,wrapped:i},o){n&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,o??r??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||n||(r=void 0),this._$AL.set(e,r)),s===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[s,i]of this._$Ep)this[s]=i;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[s,i]of n){const{wrapped:o}=i,a=this[s];o!==!0||this._$AL.has(s)||a===void 0||this.C(s,void 0,i,a)}}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),this._$EO?.forEach((n=>n.hostUpdate?.())),this.update(r)):this._$EM()}catch(n){throw e=!1,this._$EM(),n}e&&this._$AE(r)}willUpdate(e){}_$AE(e){this._$EO?.forEach((r=>r.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach((r=>this._$ET(r,this[r]))),this._$EM()}updated(e){}firstUpdated(e){}};Wl.elementStyles=[],Wl.shadowRootOptions={mode:"open"},Wl[Zh("elementProperties")]=new Map,Wl[Zh("finalized")]=new Map,ehe?.({ReactiveElement:Wl}),(LE.reactiveElementVersions??=[]).push("2.1.1");const $I=globalThis,X1=$I.trustedTypes,CN=X1?X1.createPolicy("lit-html",{createHTML:t=>t}):void 0,WL="$lit$",$a=`lit$${Math.random().toFixed(9).slice(2)}$`,KL="?"+$a,the=`<${KL}>`,Fu=document,Hp=()=>Fu.createComment(""),zp=t=>t===null||typeof t!="object"&&typeof t!="function",VI=Array.isArray,rhe=t=>VI(t)||typeof t?.[Symbol.iterator]=="function",gA=`[ 	
\f\r]`,Af=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,IN=/-->/g,SN=/>/g,kc=RegExp(`>|${gA}(?:([^\\s"'>=/]+)(${gA}*=${gA}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),TN=/'/g,PN=/"/g,ZL=/^(?:script|style|textarea|title)$/i,YL=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),ove=YL(1),ave=YL(2),Td=Symbol.for("lit-noChange"),jr=Symbol.for("lit-nothing"),NN=new WeakMap,wu=Fu.createTreeWalker(Fu,129);function JL(t,e){if(!VI(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return CN!==void 0?CN.createHTML(e):e}const nhe=(t,e)=>{const r=t.length-1,n=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Af;for(let a=0;a<r;a++){const c=t[a];let u,l,d=-1,f=0;for(;f<c.length&&(o.lastIndex=f,l=o.exec(c),l!==null);)f=o.lastIndex,o===Af?l[1]==="!--"?o=IN:l[1]!==void 0?o=SN:l[2]!==void 0?(ZL.test(l[2])&&(s=RegExp("</"+l[2],"g")),o=kc):l[3]!==void 0&&(o=kc):o===kc?l[0]===">"?(o=s??Af,d=-1):l[1]===void 0?d=-2:(d=o.lastIndex-l[2].length,u=l[1],o=l[3]===void 0?kc:l[3]==='"'?PN:TN):o===PN||o===TN?o=kc:o===IN||o===SN?o=Af:(o=kc,s=void 0);const g=o===kc&&t[a+1].startsWith("/>")?" ":"";i+=o===Af?c+the:d>=0?(n.push(u),c.slice(0,d)+WL+c.slice(d)+$a+g):c+$a+(d===-2?a:g)}return[JL(t,i+(t[r]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]};class $p{constructor({strings:e,_$litType$:r},n){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[u,l]=nhe(e,r);if(this.el=$p.createElement(u,n),wu.currentNode=this.el.content,r===2||r===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=wu.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(WL)){const f=l[o++],g=s.getAttribute(d).split($a),p=/([.?@])?(.*)/.exec(f);c.push({type:1,index:i,name:p[2],strings:g,ctor:p[1]==="."?ihe:p[1]==="?"?ohe:p[1]==="@"?ahe:FE}),s.removeAttribute(d)}else d.startsWith($a)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(ZL.test(s.tagName)){const d=s.textContent.split($a),f=d.length-1;if(f>0){s.textContent=X1?X1.emptyScript:"";for(let g=0;g<f;g++)s.append(d[g],Hp()),wu.nextNode(),c.push({type:2,index:++i});s.append(d[f],Hp())}}}else if(s.nodeType===8)if(s.data===KL)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf($a,d+1))!==-1;)c.push({type:7,index:i}),d+=$a.length-1}i++}}static createElement(e,r){const n=Fu.createElement("template");return n.innerHTML=e,n}}function Pd(t,e,r=t,n){if(e===Td)return e;let s=n!==void 0?r._$Co?.[n]:r._$Cl;const i=zp(e)?void 0:e._$litDirective$;return s?.constructor!==i&&(s?._$AO?.(!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,r,n)),n!==void 0?(r._$Co??=[])[n]=s:r._$Cl=s),s!==void 0&&(e=Pd(t,s._$AS(t,e.values),s,n)),e}class she{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:n}=this._$AD,s=(e?.creationScope??Fu).importNode(r,!0);wu.currentNode=s;let i=wu.nextNode(),o=0,a=0,c=n[0];for(;c!==void 0;){if(o===c.index){let u;c.type===2?u=new g0(i,i.nextSibling,this,e):c.type===1?u=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(u=new che(i,this,e)),this._$AV.push(u),c=n[++a]}o!==c?.index&&(i=wu.nextNode(),o++)}return wu.currentNode=Fu,s}p(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class g0{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,r,n,s){this.type=2,this._$AH=jr,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&e?.nodeType===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Pd(this,e,r),zp(e)?e===jr||e==null||e===""?(this._$AH!==jr&&this._$AR(),this._$AH=jr):e!==this._$AH&&e!==Td&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):rhe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==jr&&zp(this._$AH)?this._$AA.nextSibling.data=e:this.T(Fu.createTextNode(e)),this._$AH=e}$(e){const{values:r,_$litType$:n}=e,s=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=$p.createElement(JL(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===s)this._$AH.p(r);else{const i=new she(s,this),o=i.u(this.options);i.p(r),this.T(o),this._$AH=i}}_$AC(e){let r=NN.get(e.strings);return r===void 0&&NN.set(e.strings,r=new $p(e)),r}k(e){VI(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,s=0;for(const i of e)s===r.length?r.push(n=new g0(this.O(Hp()),this.O(Hp()),this,this.options)):n=r[s],n._$AI(i),s++;s<r.length&&(this._$AR(n&&n._$AB.nextSibling,s),r.length=s)}_$AR(e=this._$AA.nextSibling,r){for(this._$AP?.(!1,!0,r);e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}}class FE{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,n,s,i){this.type=1,this._$AH=jr,this._$AN=void 0,this.element=e,this.name=r,this._$AM=s,this.options=i,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=jr}_$AI(e,r=this,n,s){const i=this.strings;let o=!1;if(i===void 0)e=Pd(this,e,r,0),o=!zp(e)||e!==this._$AH&&e!==Td,o&&(this._$AH=e);else{const a=e;let c,u;for(e=i[0],c=0;c<i.length-1;c++)u=Pd(this,a[n+c],r,c),u===Td&&(u=this._$AH[c]),o||=!zp(u)||u!==this._$AH[c],u===jr?e=jr:e!==jr&&(e+=(u??"")+i[c+1]),this._$AH[c]=u}o&&!s&&this.j(e)}j(e){e===jr?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class ihe extends FE{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===jr?void 0:e}}class ohe extends FE{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==jr)}}class ahe extends FE{constructor(e,r,n,s,i){super(e,r,n,s,i),this.type=5}_$AI(e,r=this){if((e=Pd(this,e,r,0)??jr)===Td)return;const n=this._$AH,s=e===jr&&n!==jr||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,i=e!==jr&&(n===jr||s);s&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class che{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Pd(this,e)}}const uhe=$I.litHtmlPolyfillSupport;uhe?.($p,g0),($I.litHtmlVersions??=[]).push("3.3.1");const lhe=(t,e,r)=>{const n=r?.renderBefore??e;let s=n._$litPart$;if(s===void 0){const i=r?.renderBefore??null;n._$litPart$=s=new g0(e.insertBefore(Hp(),i),i,void 0,r??{})}return s._$AI(t),s};const GI=globalThis;class m1 extends Wl{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=lhe(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Td}}m1._$litElement$=!0,m1.finalized=!0,GI.litElementHydrateSupport?.({LitElement:m1});const dhe=GI.litElementPolyfillSupport;dhe?.({LitElement:m1});(GI.litElementVersions??=[]).push("4.2.1");const fhe={black:"#202020",white:"#FFFFFF",white010:"rgba(255, 255, 255, 0.1)",accent010:"rgba(9, 136, 240, 0.1)",accent020:"rgba(9, 136, 240, 0.2)",accent030:"rgba(9, 136, 240, 0.3)",accent040:"rgba(9, 136, 240, 0.4)",accent050:"rgba(9, 136, 240, 0.5)",accent060:"rgba(9, 136, 240, 0.6)",accent070:"rgba(9, 136, 240, 0.7)",accent080:"rgba(9, 136, 240, 0.8)",accent090:"rgba(9, 136, 240, 0.9)",accent100:"rgba(9, 136, 240, 1.0)",accentSecondary010:"rgba(199, 185, 148, 0.1)",accentSecondary020:"rgba(199, 185, 148, 0.2)",accentSecondary030:"rgba(199, 185, 148, 0.3)",accentSecondary040:"rgba(199, 185, 148, 0.4)",accentSecondary050:"rgba(199, 185, 148, 0.5)",accentSecondary060:"rgba(199, 185, 148, 0.6)",accentSecondary070:"rgba(199, 185, 148, 0.7)",accentSecondary080:"rgba(199, 185, 148, 0.8)",accentSecondary090:"rgba(199, 185, 148, 0.9)",accentSecondary100:"rgba(199, 185, 148, 1.0)",productWalletKit:"#FFB800",productAppKit:"#FF573B",productCloud:"#0988F0",productDocumentation:"#008847",neutrals050:"#F6F6F6",neutrals100:"#F3F3F3",neutrals200:"#E9E9E9",neutrals300:"#D0D0D0",neutrals400:"#BBB",neutrals500:"#9A9A9A",neutrals600:"#6C6C6C",neutrals700:"#4F4F4F",neutrals800:"#363636",neutrals900:"#2A2A2A",neutrals1000:"#252525",semanticSuccess010:"rgba(48, 164, 107, 0.1)",semanticSuccess020:"rgba(48, 164, 107, 0.2)",semanticSuccess030:"rgba(48, 164, 107, 0.3)",semanticSuccess040:"rgba(48, 164, 107, 0.4)",semanticSuccess050:"rgba(48, 164, 107, 0.5)",semanticSuccess060:"rgba(48, 164, 107, 0.6)",semanticSuccess070:"rgba(48, 164, 107, 0.7)",semanticSuccess080:"rgba(48, 164, 107, 0.8)",semanticSuccess090:"rgba(48, 164, 107, 0.9)",semanticSuccess100:"rgba(48, 164, 107, 1.0)",semanticError010:"rgba(223, 74, 52, 0.1)",semanticError020:"rgba(223, 74, 52, 0.2)",semanticError030:"rgba(223, 74, 52, 0.3)",semanticError040:"rgba(223, 74, 52, 0.4)",semanticError050:"rgba(223, 74, 52, 0.5)",semanticError060:"rgba(223, 74, 52, 0.6)",semanticError070:"rgba(223, 74, 52, 0.7)",semanticError080:"rgba(223, 74, 52, 0.8)",semanticError090:"rgba(223, 74, 52, 0.9)",semanticError100:"rgba(223, 74, 52, 1.0)",semanticWarning010:"rgba(243, 161, 63, 0.1)",semanticWarning020:"rgba(243, 161, 63, 0.2)",semanticWarning030:"rgba(243, 161, 63, 0.3)",semanticWarning040:"rgba(243, 161, 63, 0.4)",semanticWarning050:"rgba(243, 161, 63, 0.5)",semanticWarning060:"rgba(243, 161, 63, 0.6)",semanticWarning070:"rgba(243, 161, 63, 0.7)",semanticWarning080:"rgba(243, 161, 63, 0.8)",semanticWarning090:"rgba(243, 161, 63, 0.9)",semanticWarning100:"rgba(243, 161, 63, 1.0)"},eE={core:{backgroundAccentPrimary:"#0988F0",backgroundAccentCertified:"#C7B994",backgroundWalletKit:"#FFB800",backgroundAppKit:"#FF573B",backgroundCloud:"#0988F0",backgroundDocumentation:"#008847",backgroundSuccess:"rgba(48, 164, 107, 0.20)",backgroundError:"rgba(223, 74, 52, 0.20)",backgroundWarning:"rgba(243, 161, 63, 0.20)",textAccentPrimary:"#0988F0",textAccentCertified:"#C7B994",textWalletKit:"#FFB800",textAppKit:"#FF573B",textCloud:"#0988F0",textDocumentation:"#008847",textSuccess:"#30A46B",textError:"#DF4A34",textWarning:"#F3A13F",borderAccentPrimary:"#0988F0",borderSecondary:"#C7B994",borderSuccess:"#30A46B",borderError:"#DF4A34",borderWarning:"#F3A13F",foregroundAccent010:"rgba(9, 136, 240, 0.1)",foregroundAccent020:"rgba(9, 136, 240, 0.2)",foregroundAccent040:"rgba(9, 136, 240, 0.4)",foregroundAccent060:"rgba(9, 136, 240, 0.6)",foregroundSecondary020:"rgba(199, 185, 148, 0.2)",foregroundSecondary040:"rgba(199, 185, 148, 0.4)",foregroundSecondary060:"rgba(199, 185, 148, 0.6)",iconAccentPrimary:"#0988F0",iconAccentCertified:"#C7B994",iconSuccess:"#30A46B",iconError:"#DF4A34",iconWarning:"#F3A13F",glass010:"rgba(255, 255, 255, 0.1)",zIndex:"9999"},dark:{overlay:"rgba(0, 0, 0, 0.50)",backgroundPrimary:"#202020",backgroundInvert:"#FFFFFF",textPrimary:"#FFFFFF",textSecondary:"#9A9A9A",textTertiary:"#BBBBBB",textInvert:"#202020",borderPrimary:"#2A2A2A",borderPrimaryDark:"#363636",borderSecondary:"#4F4F4F",foregroundPrimary:"#252525",foregroundSecondary:"#2A2A2A",foregroundTertiary:"#363636",iconDefault:"#9A9A9A",iconInverse:"#FFFFFF"},light:{overlay:"rgba(230 , 230, 230, 0.5)",backgroundPrimary:"#FFFFFF",borderPrimaryDark:"#E9E9E9",backgroundInvert:"#202020",textPrimary:"#202020",textSecondary:"#9A9A9A",textTertiary:"#6C6C6C",textInvert:"#FFFFFF",borderPrimary:"#E9E9E9",borderSecondary:"#D0D0D0",foregroundPrimary:"#F3F3F3",foregroundSecondary:"#E9E9E9",foregroundTertiary:"#D0D0D0",iconDefault:"#9A9A9A",iconInverse:"#202020"}},hhe={1:"4px",2:"8px",10:"10px",3:"12px",4:"16px",6:"24px",5:"20px",8:"32px",16:"64px",20:"80px",32:"128px",64:"256px",128:"512px",round:"9999px"},phe={0:"0px","01":"2px",1:"4px",2:"8px",3:"12px",4:"16px",5:"20px",6:"24px",7:"28px",8:"32px",9:"36px",10:"40px",12:"48px",14:"56px",16:"64px",20:"80px",32:"128px",64:"256px"},ghe={regular:"KHTeka",mono:"KHTekaMono"},mhe={regular:"400",medium:"500"},yhe={h1:"50px",h2:"44px",h3:"38px",h4:"32px",h5:"26px",h6:"20px",large:"16px",medium:"14px",small:"12px"},bhe={"h1-regular-mono":{lineHeight:"50px",letterSpacing:"-3px"},"h1-regular":{lineHeight:"50px",letterSpacing:"-1px"},"h1-medium":{lineHeight:"50px",letterSpacing:"-0.84px"},"h2-regular-mono":{lineHeight:"44px",letterSpacing:"-2.64px"},"h2-regular":{lineHeight:"44px",letterSpacing:"-0.88px"},"h2-medium":{lineHeight:"44px",letterSpacing:"-0.88px"},"h3-regular-mono":{lineHeight:"38px",letterSpacing:"-2.28px"},"h3-regular":{lineHeight:"38px",letterSpacing:"-0.76px"},"h3-medium":{lineHeight:"38px",letterSpacing:"-0.76px"},"h4-regular-mono":{lineHeight:"32px",letterSpacing:"-1.92px"},"h4-regular":{lineHeight:"32px",letterSpacing:"-0.32px"},"h4-medium":{lineHeight:"32px",letterSpacing:"-0.32px"},"h5-regular-mono":{lineHeight:"26px",letterSpacing:"-1.56px"},"h5-regular":{lineHeight:"26px",letterSpacing:"-0.26px"},"h5-medium":{lineHeight:"26px",letterSpacing:"-0.26px"},"h6-regular-mono":{lineHeight:"20px",letterSpacing:"-1.2px"},"h6-regular":{lineHeight:"20px",letterSpacing:"-0.6px"},"h6-medium":{lineHeight:"20px",letterSpacing:"-0.6px"},"lg-regular-mono":{lineHeight:"16px",letterSpacing:"-0.96px"},"lg-regular":{lineHeight:"18px",letterSpacing:"-0.16px"},"lg-medium":{lineHeight:"18px",letterSpacing:"-0.16px"},"md-regular-mono":{lineHeight:"14px",letterSpacing:"-0.84px"},"md-regular":{lineHeight:"16px",letterSpacing:"-0.14px"},"md-medium":{lineHeight:"16px",letterSpacing:"-0.14px"},"sm-regular-mono":{lineHeight:"12px",letterSpacing:"-0.72px"},"sm-regular":{lineHeight:"14px",letterSpacing:"-0.12px"},"sm-medium":{lineHeight:"14px",letterSpacing:"-0.12px"}},whe={"ease-out-power-2":"cubic-bezier(0.23, 0.09, 0.08, 1.13)","ease-out-power-1":"cubic-bezier(0.12, 0.04, 0.2, 1.06)","ease-in-power-2":"cubic-bezier(0.92, -0.13, 0.77, 0.91)","ease-in-power-1":"cubic-bezier(0.88, -0.06, 0.8, 0.96)","ease-inout-power-2":"cubic-bezier(0.77, 0.09, 0.23, 1.13)","ease-inout-power-1":"cubic-bezier(0.88, 0.04, 0.12, 1.06)"},Ehe={xl:"400ms",lg:"200ms",md:"125ms",sm:"75ms"},_C={colors:fhe,fontFamily:ghe,fontWeight:mhe,textSize:yhe,typography:bhe,tokens:{core:eE.core,theme:eE.dark},borderRadius:hhe,spacing:phe,durations:Ehe,easings:whe},ON="--apkt";function Rg(t){if(!t)return{};const e={};return e["font-family"]=t["--apkt-font-family"]??t["--w3m-font-family"]??"KHTeka",e.accent=t["--apkt-accent"]??t["--w3m-accent"]??"#0988F0",e["color-mix"]=t["--apkt-color-mix"]??t["--w3m-color-mix"]??"#000",e["color-mix-strength"]=t["--apkt-color-mix-strength"]??t["--w3m-color-mix-strength"]??0,e["font-size-master"]=t["--apkt-font-size-master"]??t["--w3m-font-size-master"]??"10px",e["border-radius-master"]=t["--apkt-border-radius-master"]??t["--w3m-border-radius-master"]??"4px",t["--apkt-z-index"]!==void 0?e["z-index"]=t["--apkt-z-index"]:t["--w3m-z-index"]!==void 0&&(e["z-index"]=t["--w3m-z-index"]),e}const Bo={createCSSVariables(t){const e={},r={};function n(i,o,a=""){for(const[c,u]of Object.entries(i)){const l=a?`${a}-${c}`:c;u&&typeof u=="object"&&Object.keys(u).length?(o[c]={},n(u,o[c],l)):typeof u=="string"&&(o[c]=`${ON}-${l}`)}}function s(i,o){for(const[a,c]of Object.entries(i))c&&typeof c=="object"?(o[a]={},s(c,o[a])):typeof c=="string"&&(o[a]=`var(${c})`)}return n(t,e),s(e,r),{cssVariables:e,cssVariablesVarPrefix:r}},assignCSSVariables(t,e){const r={};function n(s,i,o){for(const[a,c]of Object.entries(s)){const u=o?`${o}-${a}`:a,l=i[a];c&&typeof c=="object"?n(c,l,u):typeof l=="string"&&(r[`${ON}-${u}`]=l)}}return n(t,e),r},createRootStyles(t,e){const r={..._C,tokens:{..._C.tokens,theme:t==="light"?eE.light:eE.dark}},{cssVariables:n}=Bo.createCSSVariables(r),s=Bo.assignCSSVariables(n,r),i=Bo.generateW3MVariables(e),o=Bo.generateW3MOverrides(e),a=Bo.generateScaledVariables(e),c=Bo.generateBaseVariables(s),u={...s,...c,...i,...o,...a},l=Bo.applyColorMixToVariables(e,u),d={...u,...l};return`:root {${Object.entries(d).map(([g,p])=>`${g}:${p.replace("/[:;{}</>]/g","")};`).join("")}}`},generateW3MVariables(t){if(!t)return{};const e=Rg(t),r={};return r["--w3m-font-family"]=e["font-family"],r["--w3m-accent"]=e.accent,r["--w3m-color-mix"]=e["color-mix"],r["--w3m-color-mix-strength"]=`${e["color-mix-strength"]}%`,r["--w3m-font-size-master"]=e["font-size-master"],r["--w3m-border-radius-master"]=e["border-radius-master"],r},generateW3MOverrides(t){if(!t)return{};const e=Rg(t),r={};if(t["--apkt-accent"]||t["--w3m-accent"]){const n=e.accent;r["--apkt-tokens-core-iconAccentPrimary"]=n,r["--apkt-tokens-core-borderAccentPrimary"]=n,r["--apkt-tokens-core-textAccentPrimary"]=n,r["--apkt-tokens-core-backgroundAccentPrimary"]=n}return(t["--apkt-font-family"]||t["--w3m-font-family"])&&(r["--apkt-fontFamily-regular"]=e["font-family"]),e["z-index"]!==void 0&&(r["--apkt-tokens-core-zIndex"]=`${e["z-index"]}`),r},generateScaledVariables(t){if(!t)return{};const e=Rg(t),r={};if(t["--apkt-font-size-master"]||t["--w3m-font-size-master"]){const n=parseFloat(e["font-size-master"].replace("px",""));r["--apkt-textSize-h1"]=`${Number(n)*5}px`,r["--apkt-textSize-h2"]=`${Number(n)*4.4}px`,r["--apkt-textSize-h3"]=`${Number(n)*3.8}px`,r["--apkt-textSize-h4"]=`${Number(n)*3.2}px`,r["--apkt-textSize-h5"]=`${Number(n)*2.6}px`,r["--apkt-textSize-h6"]=`${Number(n)*2}px`,r["--apkt-textSize-large"]=`${Number(n)*1.6}px`,r["--apkt-textSize-medium"]=`${Number(n)*1.4}px`,r["--apkt-textSize-small"]=`${Number(n)*1.2}px`}if(t["--apkt-border-radius-master"]||t["--w3m-border-radius-master"]){const n=parseFloat(e["border-radius-master"].replace("px",""));r["--apkt-borderRadius-1"]=`${Number(n)}px`,r["--apkt-borderRadius-2"]=`${Number(n)*2}px`,r["--apkt-borderRadius-3"]=`${Number(n)*3}px`,r["--apkt-borderRadius-4"]=`${Number(n)*4}px`,r["--apkt-borderRadius-5"]=`${Number(n)*5}px`,r["--apkt-borderRadius-6"]=`${Number(n)*6}px`,r["--apkt-borderRadius-8"]=`${Number(n)*8}px`,r["--apkt-borderRadius-16"]=`${Number(n)*16}px`,r["--apkt-borderRadius-20"]=`${Number(n)*20}px`,r["--apkt-borderRadius-32"]=`${Number(n)*32}px`,r["--apkt-borderRadius-64"]=`${Number(n)*64}px`,r["--apkt-borderRadius-128"]=`${Number(n)*128}px`}return r},generateColorMixCSS(t,e){if(!t?.["--w3m-color-mix"]||!t["--w3m-color-mix-strength"])return"";const r=t["--w3m-color-mix"],n=t["--w3m-color-mix-strength"];if(!n||n===0)return"";const s=Object.keys(e||{}).filter(o=>{const a=o.includes("-tokens-core-background")||o.includes("-tokens-core-text")||o.includes("-tokens-core-border")||o.includes("-tokens-core-foreground")||o.includes("-tokens-core-icon")||o.includes("-tokens-theme-background")||o.includes("-tokens-theme-text")||o.includes("-tokens-theme-border")||o.includes("-tokens-theme-foreground")||o.includes("-tokens-theme-icon"),c=o.includes("-borderRadius-")||o.includes("-spacing-")||o.includes("-textSize-")||o.includes("-fontFamily-")||o.includes("-fontWeight-")||o.includes("-typography-")||o.includes("-duration-")||o.includes("-ease-")||o.includes("-path-")||o.includes("-width-")||o.includes("-height-")||o.includes("-visual-size-")||o.includes("-modal-width")||o.includes("-cover");return a&&!c});return s.length===0?"":` @supports (background: color-mix(in srgb, white 50%, black)) {
      :root {
        ${s.map(o=>{const a=e?.[o]||"";return a.includes("color-mix")||a.startsWith("#")||a.startsWith("rgb")?`${o}: color-mix(in srgb, ${r} ${n}%, ${a});`:`${o}: color-mix(in srgb, ${r} ${n}%, var(${o}-base, ${a}));`}).join("")}
      }
    }`},generateBaseVariables(t){const e={},r=t["--apkt-tokens-theme-backgroundPrimary"];r&&(e["--apkt-tokens-theme-backgroundPrimary-base"]=r);const n=t["--apkt-tokens-core-backgroundAccentPrimary"];return n&&(e["--apkt-tokens-core-backgroundAccentPrimary-base"]=n),e},applyColorMixToVariables(t,e){const r={};e?.["--apkt-tokens-theme-backgroundPrimary"]&&(r["--apkt-tokens-theme-backgroundPrimary"]="var(--apkt-tokens-theme-backgroundPrimary-base)"),e?.["--apkt-tokens-core-backgroundAccentPrimary"]&&(r["--apkt-tokens-core-backgroundAccentPrimary"]="var(--apkt-tokens-core-backgroundAccentPrimary-base)");const n=Rg(t),s=n["color-mix"],i=n["color-mix-strength"];if(!i||i===0)return r;const o=Object.keys(e||{}).filter(a=>{const c=a.includes("-tokens-core-background")||a.includes("-tokens-core-text")||a.includes("-tokens-core-border")||a.includes("-tokens-core-foreground")||a.includes("-tokens-core-icon")||a.includes("-tokens-theme-background")||a.includes("-tokens-theme-text")||a.includes("-tokens-theme-border")||a.includes("-tokens-theme-foreground")||a.includes("-tokens-theme-icon")||a.includes("-tokens-theme-overlay"),u=a.includes("-borderRadius-")||a.includes("-spacing-")||a.includes("-textSize-")||a.includes("-fontFamily-")||a.includes("-fontWeight-")||a.includes("-typography-")||a.includes("-duration-")||a.includes("-ease-")||a.includes("-path-")||a.includes("-width-")||a.includes("-height-")||a.includes("-visual-size-")||a.includes("-modal-width")||a.includes("-cover");return c&&!u});return o.length===0||o.forEach(a=>{const c=e?.[a]||"";a.endsWith("-base")||(a==="--apkt-tokens-theme-backgroundPrimary"||a==="--apkt-tokens-core-backgroundAccentPrimary"?r[a]=`color-mix(in srgb, ${s} ${i}%, var(${a}-base))`:c.includes("color-mix")||c.startsWith("#")||c.startsWith("rgb")?r[a]=`color-mix(in srgb, ${s} ${i}%, ${c})`:r[a]=`color-mix(in srgb, ${s} ${i}%, var(${a}-base, ${c}))`)}),r}},{cssVariablesVarPrefix:vhe}=Bo.createCSSVariables(_C);function cve(t,...e){return za(t,...e.map(r=>si(typeof r=="function"?r(vhe):r)))}let uu,Eu,Vi,ui,tE;const xo={"KHTeka-500-woff2":"https://fonts.reown.com/KHTeka-Medium.woff2","KHTeka-400-woff2":"https://fonts.reown.com/KHTeka-Regular.woff2","KHTeka-300-woff2":"https://fonts.reown.com/KHTeka-Light.woff2","KHTekaMono-400-woff2":"https://fonts.reown.com/KHTekaMono-Regular.woff2","KHTeka-500-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTeka-400-woff":"https://fonts.reown.com/KHTeka-Regular.woff","KHTeka-300-woff":"https://fonts.reown.com/KHTeka-Light.woff","KHTekaMono-400-woff":"https://fonts.reown.com/KHTekaMono-Regular.woff"};function rE(t,e="dark"){uu&&document.head.removeChild(uu),uu=document.createElement("style"),uu.textContent=Bo.createRootStyles(e,t),document.head.appendChild(uu)}function uve(t,e="dark"){if(tE=t,Eu=document.createElement("style"),Vi=document.createElement("style"),ui=document.createElement("style"),Eu.textContent=cd(t).core.cssText,Vi.textContent=cd(t).dark.cssText,ui.textContent=cd(t).light.cssText,document.head.appendChild(Eu),document.head.appendChild(Vi),document.head.appendChild(ui),rE(t,e),AC(e),!(t?.["--apkt-font-family"]||t?.["--w3m-font-family"]))for(const[n,s]of Object.entries(xo)){const i=document.createElement("link");i.rel="preload",i.href=s,i.as="font",i.type=n.includes("woff2")?"font/woff2":"font/woff",i.crossOrigin="anonymous",document.head.appendChild(i)}AC(e)}function AC(t="dark"){Vi&&ui&&uu&&(t==="light"?(rE(tE,t),Vi.removeAttribute("media"),ui.media="enabled"):(rE(tE,t),ui.removeAttribute("media"),Vi.media="enabled"))}function _he(t){if(tE=t,Eu&&Vi&&ui){Eu.textContent=cd(t).core.cssText,Vi.textContent=cd(t).dark.cssText,ui.textContent=cd(t).light.cssText;const e=t?.["--apkt-font-family"]||t?.["--w3m-font-family"];e&&(Eu.textContent=Eu.textContent?.replace("font-family: KHTeka",`font-family: ${e}`),Vi.textContent=Vi.textContent?.replace("font-family: KHTeka",`font-family: ${e}`),ui.textContent=ui.textContent?.replace("font-family: KHTeka",`font-family: ${e}`))}if(uu){const e=ui?.media==="enabled"?"light":"dark";rE(t,e)}}function cd(t){const e=!!(t?.["--apkt-font-family"]||t?.["--w3m-font-family"]);return{core:za`
      ${e?za``:za`
            @font-face {
              font-family: 'KHTeka';
              src:
                url(${si(xo["KHTeka-400-woff2"])}) format('woff2'),
                url(${si(xo["KHTeka-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
              font-display: swap;
            }

            @font-face {
              font-family: 'KHTeka';
              src:
                url(${si(xo["KHTeka-300-woff2"])}) format('woff2'),
                url(${si(xo["KHTeka-300-woff"])}) format('woff');
              font-weight: 300;
              font-style: normal;
            }

            @font-face {
              font-family: 'KHTekaMono';
              src:
                url(${si(xo["KHTekaMono-400-woff2"])}) format('woff2'),
                url(${si(xo["KHTekaMono-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
            }

            @font-face {
              font-family: 'KHTeka';
              src:
                url(${si(xo["KHTeka-400-woff2"])}) format('woff2'),
                url(${si(xo["KHTeka-400-woff"])}) format('woff');
              font-weight: 400;
              font-style: normal;
            }
          `}

      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --apkt-modal-width: 370px;

        --apkt-visual-size-inherit: inherit;
        --apkt-visual-size-sm: 40px;
        --apkt-visual-size-md: 55px;
        --apkt-visual-size-lg: 80px;

        --apkt-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --apkt-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --apkt-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --apkt-width-network-sm: 36px;
        --apkt-width-network-md: 48px;
        --apkt-width-network-lg: 86px;

        --apkt-duration-dynamic: 0ms;
        --apkt-height-network-sm: 40px;
        --apkt-height-network-md: 54px;
        --apkt-height-network-lg: 96px;
      }
    `,dark:za`
      :root {
      }
    `,light:za`
      :root {
      }
    `}}const lve=za`
  div,
  span,
  iframe,
  a,
  img,
  form,
  button,
  label,
  *::after,
  *::before {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    backface-visibility: hidden;
  }

  :host {
    font-family: var(--apkt-fontFamily-regular);
  }
`,dve=za`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;

    will-change: background-color, color, border, box-shadow, width, height, transform, opacity;
    outline: none;
    border: none;
    text-decoration: none;
    transition:
      background-color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      color var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      border var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      box-shadow var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      width var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      height var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      transform var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      opacity var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      scale var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2),
      border-radius var(--apkt-durations-lg) var(--apkt-easings-ease-out-power-2);
    will-change:
      background-color, color, border, box-shadow, width, height, transform, opacity, scale,
      border-radius;
  }

  a:active:not([disabled]),
  button:active:not([disabled]) {
    scale: 0.975;
    transform-origin: center;
  }

  button:disabled {
    cursor: default;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,Ga={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603};class Ahe extends qL{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new HL({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){const n=this.provider?.session?.namespaces?.[e]?.accounts?.map(s=>{const[,,i]=s.split(":");return i}).filter((s,i,o)=>o.indexOf(s)===i)||[];return Promise.resolve({accounts:n.map(s=>be.createAccount(e,s,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&ft.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};const n=z.getAccountData();if(n?.balanceLoading&&e.chainId===z.state.activeCaipNetwork?.id)return{balance:n?.balance||"0.00",symbol:n?.balanceSymbol||""};const i=(await z.fetchTokenBalance()).find(o=>o.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&o.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:i?.quantity.numeric||"0.00",symbol:i?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){const{provider:r,message:n,address:s}=e;if(!r)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return z.state.activeCaipNetwork?.chainNamespace===Q.CHAIN.SOLANA?i=(await r.request({method:"solana_signMessage",params:{message:Fd.encode(new TextEncoder().encode(n)),pubkey:s}},z.state.activeCaipNetwork?.caipNetworkId)).signature:i=await r.request({method:"personal_sign",params:[n,s]},z.state.activeCaipNetwork?.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){const{caipNetwork:r}=e,n=this.getWalletConnectConnector();if(r.chainNamespace===Q.CHAIN.EVM)try{await n.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:HT(r.id)}]})}catch(s){if(s.code===Ga.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||s.code===Ga.ERROR_INVALID_CHAIN_ID||s.code===Ga.ERROR_CODE_DEFAULT||s?.data?.originalError?.code===Ga.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await n.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:HT(r.id),rpcUrls:[r?.rpcUrls.chainDefault?.http],chainName:r.name,nativeCurrency:r.nativeCurrency,blockExplorerUrls:[r.blockExplorers?.default.url]}]})}catch{throw new Error("Chain is not supported")}}n.provider.setDefaultChain(r.caipNetworkId)}getWalletConnectProvider(){return this.connectors.find(n=>n.type==="WALLET_CONNECT")?.provider}}const Che=["email","socials","swaps","onramp","activity","reownBranding","multiWallet","emailCapture","payWithExchange","payments","reownAuthentication"],xg={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?ft.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(r=>r!=="email"):!1},processFallback:t=>t===void 0?ft.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?ft.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?ft.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?ft.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!t?.config)return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?ft.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?ft.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?ft.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?ft.DEFAULT_REMOTE_FEATURES.reownBranding:!!t},emailCapture:{apiFeatureName:"email_capture",localFeatureName:"emailCapture",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>t.isEnabled&&(t.config??[]),processFallback:t=>!1},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>ft.DEFAULT_REMOTE_FEATURES.multiWallet},payWithExchange:{apiFeatureName:"fund_from_exchange",localFeatureName:"payWithExchange",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>ft.DEFAULT_REMOTE_FEATURES.payWithExchange},payments:{apiFeatureName:"payments",localFeatureName:"payments",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>ft.DEFAULT_REMOTE_FEATURES.payments},reownAuthentication:{apiFeatureName:"reown_authentication",localFeatureName:"reownAuthentication",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>typeof t>"u"?ft.DEFAULT_REMOTE_FEATURES.reownAuthentication:!!t}},Ihe={localSettingsOverridden:new Set,getApiConfig(t,e){return e?.find(r=>r.id===t)},addWarning(t,e){if(t!==void 0){const r=xg[e],n=r.isLegacy?`"features.${r.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(n)}},processFeature(t,e,r,n,s){const i=xg[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(n){const a=this.getApiConfig(i.apiFeatureName,r);return a?.config===null?this.processFallbackFeature(t,o):a?.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return xg[t].processApi(e)},processFallbackFeature(t,e){return xg[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,r=t.features||{};this.localSettingsOverridden.clear();let n=null,s=!1;try{n=await ke.fetchProjectConfig(),s=n!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?ft.DEFAULT_REMOTE_FEATURES:ft.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of Che){const a=this.processFeature(o,r,n,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),ft.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;cn.open({debugMessage:un.ALERT_WARNINGS.LOCAL_CONFIGURATION_IGNORED.debugMessage(o)},"warning")}return i}};class She{constructor(e){this.chainNamespaces=[],this.features={},this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(r,n)=>{if(r){const s=z.getCaipNetworks(r)?.find(a=>a.id===n);if(s)return s;const i=z.getNetworkData(r)?.caipNetwork;return i||z.getRequestedCaipNetworks(r).filter(a=>a.chainNamespace===r)?.[0]}return z.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const r=this.getCaipNetwork();if(r)return r.id},this.getCaipNetworks=r=>z.getCaipNetworks(r),this.getActiveChainNamespace=()=>z.state.activeChain,this.setRequestedCaipNetworks=(r,n)=>{z.setRequestedCaipNetworks(r,n)},this.getApprovedCaipNetworkIds=()=>z.getAllApprovedCaipNetworkIds(),this.getCaipAddress=r=>z.state.activeChain===r||!r?z.state.activeCaipAddress:z.state.chains.get(r)?.accountState?.caipAddress,this.setClientId=r=>{He.setClientId(r)},this.getProvider=r=>yt.getProvider(r),this.getProviderType=r=>yt.getProviderId(r),this.getPreferredAccountType=r=>En(r),this.setCaipAddress=(r,n,s=!1)=>{z.setAccountProp("caipAddress",r,n,s),z.setAccountProp("address",be.getPlainAddress(r),n,s)},this.setBalance=(r,n,s)=>{z.setAccountProp("balance",r,s),z.setAccountProp("balanceSymbol",n,s)},this.setProfileName=(r,n)=>{z.setAccountProp("profileName",r,n)},this.setProfileImage=(r,n)=>{z.setAccountProp("profileImage",r,n)},this.setUser=(r,n)=>{z.setAccountProp("user",r,n)},this.resetAccount=r=>{z.resetAccount(r)},this.setCaipNetwork=r=>{z.setActiveCaipNetwork(r)},this.setCaipNetworkOfNamespace=(r,n)=>{z.setChainNetworkData(n,{caipNetwork:r})},this.setStatus=(r,n)=>{z.setAccountProp("status",r,n),ue.isConnected()?ie.setConnectionStatus("connected"):ie.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=r=>z.getAccountData(r)?.address,this.setConnectors=r=>{const n=[...ue.state.allConnectors,...r];ue.setConnectors(n)},this.setConnections=(r,n)=>{ie.setConnections(r,n),me.setConnections(r,n)},this.fetchIdentity=r=>He.fetchIdentity(r),this.getReownName=r=>Wh.getNamesForAddress(r),this.getConnectors=()=>ue.getConnectors(),this.getConnectorImage=r=>gD.getConnectorImage(r),this.getConnections=r=>this.remoteFeatures.multiWallet?B1.getConnectionsData(r).connections:(cn.open(Q.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=r=>this.remoteFeatures.multiWallet?B1.getConnectionsData(r).recentConnections:(cn.open(Q.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async r=>{if(!this.remoteFeatures.multiWallet){cn.open(Q.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await me.switchConnection(r)},this.deleteConnection=r=>{if(!this.remoteFeatures.multiWallet){cn.open(Q.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}ie.deleteAddressFromConnection(r),me.syncStorageConnections()},this.setConnectedWalletInfo=(r,n)=>{const s=yt.getProviderId(n),i=r?{...r,type:s}:void 0;z.setAccountProp("connectedWalletInfo",i,n)},this.getIsConnectedState=()=>!!z.state.activeCaipAddress,this.addAddressLabel=(r,n,s)=>{const i=z.getAccountData(s)?.addressLabels||{};z.setAccountProp("addressLabels",{...i,[r]:n},s)},this.removeAddressLabel=(r,n)=>{const s=z.getAccountData(n)?.addressLabels||{};z.setAccountProp("addressLabels",{...s,[r]:void 0},n)},this.getAddress=r=>{const n=r||z.state.activeChain;return z.getAccountData(n)?.address},this.resetNetwork=r=>{z.resetNetwork(r)},this.addConnector=r=>{ue.addConnector(r)},this.resetWcConnection=()=>{me.resetWcConnection()},this.setAddressExplorerUrl=(r,n)=>{z.setAccountProp("addressExplorerUrl",r,n)},this.setSmartAccountDeployed=(r,n)=>{z.setAccountProp("smartAccountDeployed",r,n)},this.setPreferredAccountType=(r,n)=>{z.setAccountProp("preferredAccountType",r,n)},this.setEIP6963Enabled=r=>{ne.setEIP6963Enabled(r)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,r){const n=e?.map(i=>i.namespace).filter(i=>!!i);if(n?.length)return[...new Set(n)];const s=r?.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){if(this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),ne.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),!e.basic&&!e.manualWCControl&&(this.remoteFeatures=await Ihe.fetchRemoteFeatures(e)),await ke.fetchUsage(),ne.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&I2.setOnrampProviders(this.remoteFeatures.onramp),(ne.state.remoteFeatures?.email||Array.isArray(ne.state.remoteFeatures?.socials)&&ne.state.remoteFeatures?.socials.length>0)&&await this.checkAllowedOrigins(),ne.state.features?.reownAuthentication||ne.state.remoteFeatures?.reownAuthentication){const{ReownAuthentication:r}=await $r(async()=>{const{ReownAuthentication:s}=await import("./features--lcXKnQa.js");return{ReownAuthentication:s}},[]),n=ne.state.siwx;n instanceof r||(n&&console.warn("ReownAuthentication option is enabled, SIWX configuration will be overridden."),ne.setSIWX(new r))}}async openSend(e){const r=e.namespace||z.state.activeChain,n=this.getCaipAddress(r),s=this.getCaipNetwork(r)?.id;if(!n)throw new Error("openSend: caipAddress not found");if(s?.toString()!==e.chainId.toString()){const i=z.getCaipNetworkById(e.chainId,r);if(!i)throw new Error(`openSend: caipNetwork with chainId ${e.chainId} not found`);await this.switchNetwork(i,{throwOnFailure:!0})}try{const i=$L.getTokenSymbolByAddress(e.assetAddress);i&&await ke.fetchTokenImages([i])}catch{}return await ot.open({view:"WalletSend",data:{send:e}}),new Promise((i,o)=>{const a=rt.subscribeKey("hash",l=>{l&&(u(),i({hash:l}))}),c=ot.subscribe(l=>{l.open||(u(),o(new Error("Modal closed")))}),u=this.createCleanupHandler([a,c])})}toModalOptions(){function e(n){return n?.view==="Swap"}function r(n){return n?.view==="WalletSend"}return{isSwap:e,isSend:r}}async checkAllowedOrigins(){try{const e=await ke.fetchAllowedOrigins();if(!be.isClient())return;const r=window.location.origin;Zi.isOriginAllowed(r,e,Q.DEFAULT_ALLOWED_ANCESTORS)||cn.open(un.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error))return;switch(e.message){case"RATE_LIMITED":cn.open(un.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const r=e.cause instanceof Error?e.cause:e;cn.open({displayMessage:un.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,debugMessage:un.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(r.message)},"error");break}}}}createCleanupHandler(e){return()=>{e.forEach(r=>{try{r()}catch{}})}}sendInitializeEvent(e){const{...r}=e;delete r.adapters,delete r.universalProvider,Ye.sendEvent({type:"track",event:"INITIALIZE",properties:{...r,networks:e.networks.map(n=>n.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initAdapterController(){bD.initialize(this.chainAdapters)}initializeThemeController(e){e.themeMode&&Un.setThemeMode(e.themeMode),e.themeVariables&&Un.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient)throw new Error("ConnectionControllerClient must be set");z.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient});const r=this.getDefaultNetwork();r&&z.setActiveCaipNetwork(r)}initializeConnectionController(e){me.initialize(e.adapters??[]),me.setWcBasic(e.basic??!1)}initializeConnectorController(){ue.initialize(this.chainNamespaces)}initializeProjectSettings(e){ne.setProjectId(e.projectId),ne.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){ne.setDebug(e.debug!==!1),ne.setEnableWalletGuide(e.enableWalletGuide!==!1),ne.setEnableWallets(e.enableWallets!==!1),ne.setEIP6963Enabled(e.enableEIP6963!==!1),ne.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),ne.setEnableReconnect(e.enableReconnect!==!1),ne.setEnableMobileFullScreen(e.enableMobileFullScreen===!0),ne.setCoinbasePreference(e.coinbasePreference),ne.setEnableAuthLogger(e.enableAuthLogger!==!1),ne.setCustomRpcUrls(e.customRpcUrls),ne.setEnableEmbedded(e.enableEmbedded),ne.setAllWallets(e.allWallets),ne.setIncludeWalletIds(e.includeWalletIds),ne.setExcludeWalletIds(e.excludeWalletIds),ne.setFeaturedWalletIds(e.featuredWalletIds),ne.setTokens(e.tokens),ne.setTermsConditionsUrl(e.termsConditionsUrl),ne.setPrivacyPolicyUrl(e.privacyPolicyUrl),ne.setCustomWallets(e.customWallets),ne.setFeatures(e.features),ne.setAllowUnsupportedChain(e.allowUnsupportedChain),ne.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),ne.setPreferUniversalLinks(e.experimental_preferUniversalLinks),ne.setDefaultAccountTypes(e.defaultAccountTypes);const r=this.getDefaultMetaData();if(!e.metadata&&r&&(e.metadata=r),ne.setMetadata(e.metadata),ne.setDisableAppend(e.disableAppend),ne.setEnableEmbedded(e.enableEmbedded),ne.setSIWX(e.siwx),this.features=ne.state.features??{},!e.projectId){cn.open(un.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(s=>s.namespace===Q.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ne.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return be.isClient()?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){const r=this.getActiveChainNamespace();if(r){const n=Gl.getUnsupportedNetwork(`${r}:${e}`);z.setActiveCaipNetwork(n)}}getDefaultNetwork(){return Gl.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,r){return Gl.extendCaipNetwork(e,{customNetworkImageUrls:r.chainImages,projectId:r.projectId})}extendCaipNetworks(e){return Gl.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const r=e.networks.find(s=>s.id===e.defaultNetwork?.id);return r?Gl.extendCaipNetwork(r,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectConnector(e,r){try{this.setLoading(!0,e);let n={connections:[]};const s=this.getAdapter(e);return(z.state.chains.get(e)?.accountState?.caipAddress||!ne.state.enableReconnect)&&s?.disconnect&&(n=await s.disconnect({id:r})),this.setLoading(!1,e),n}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{const e=z.state.activeChain,r=this.getAdapter(e),n=this.getCaipNetwork(e)?.id,s=me.getConnections(e),i=this.remoteFeatures.multiWallet,o=s.length>0;if(!r)throw new Error("Adapter not found");const a=await r.connectWalletConnect(n);(!o||!i)&&this.close(),this.setClientId(a?.clientId||null),ie.setConnectedNamespaces([...z.state.chains.keys()]),await this.syncWalletConnectAccount(),await qn.initializeIfEnabled()},connectExternal:async e=>{const r=await this.onConnectExternal(e);return await this.connectInactiveNamespaces(e,r),r?{address:r.address}:void 0},reconnectExternal:async({id:e,info:r,type:n,provider:s})=>{const i=z.state.activeChain,o=this.getAdapter(i);if(!i)throw new Error("reconnectExternal: namespace not found");if(!o)throw new Error("reconnectExternal: adapter not found");o?.reconnect&&(await o?.reconnect({id:e,info:r,type:n,provider:s,chainId:this.getCaipNetwork()?.id}),ie.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnectConnector:async e=>{await this.disconnectConnector(e.namespace,e.id)},disconnect:async e=>{const{id:r,chainNamespace:n,initialDisconnect:s}=e||{},i=n||z.state.activeChain,o=ue.getConnectorId(i),a=r===Q.CONNECTOR_ID.AUTH||o===Q.CONNECTOR_ID.AUTH,c=r===Q.CONNECTOR_ID.WALLET_CONNECT||o===Q.CONNECTOR_ID.WALLET_CONNECT;try{const u=Array.from(z.state.chains.keys());let l=n?[n]:u;(c||a)&&(l=u);const d=l.map(async p=>{const h=ue.getConnectorId(p),y=r||h,b=await this.disconnectConnector(p,y);b&&(a&&ie.deleteConnectedSocialProvider(),b.connections.forEach(E=>{ie.addDisconnectedConnectorId(E.connectorId,p)})),s&&this.onDisconnectNamespace({chainNamespace:p,closeModal:!1})}),f=await Promise.allSettled(d);rt.resetSend(),me.resetWcConnection(),qn.getSIWX()?.signOutOnDisconnect&&await qn.clearSessions(),ue.setFilterByNamespace(void 0),me.syncStorageConnections();const g=f.filter(p=>p.status==="rejected");if(g.length>0)throw new Error(g.map(p=>p.reason.message).join(", "));Ye.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:n||"all"}})}catch(u){throw new Error(`Failed to disconnect chains: ${u.message}`)}},checkInstalled:e=>e?e.some(r=>!!window.ethereum?.[String(r)]):!!window.ethereum,signMessage:async e=>{const r=z.state.activeChain,n=this.getAdapter(z.state.activeChain);if(!r)throw new Error("signMessage: namespace not found");if(!n)throw new Error("signMessage: adapter not found");const s=this.getAddress(r);if(!s)throw new Error("signMessage: address not found");return(await n?.signMessage({message:e,address:s,provider:yt.getProvider(r)}))?.signature||""},sendTransaction:async e=>{const r=e.chainNamespace;if(!r)throw new Error("sendTransaction: namespace not found");if(ft.SEND_SUPPORTED_NAMESPACES.includes(r)){const n=this.getAdapter(r);if(!n)throw new Error("sendTransaction: adapter not found");const s=yt.getProvider(r);return(await n?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}))?.hash||""}return""},estimateGas:async e=>{const r=e.chainNamespace;if(r===Q.CHAIN.EVM){const n=this.getAdapter(r);if(!n)throw new Error("estimateGas: adapter is required but got undefined");const s=yt.getProvider(r),i=this.getCaipNetwork();if(!i)throw new Error("estimateGas: caipNetwork is required but got undefined");return(await n?.estimateGas({...e,provider:s,caipNetwork:i}))?.gas||0n}return 0n},getEnsAvatar:async()=>{const e=z.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");const r=this.getAddress(e);if(!r)throw new Error("getEnsAvatar: address not found");return await this.syncIdentity({address:r,chainId:Number(this.getCaipNetwork()?.id),chainNamespace:e}),z.getAccountData()?.profileImage||!1},getEnsAddress:async e=>await Zi.resolveReownName(e),writeContract:async e=>{const r=z.state.activeChain,n=this.getAdapter(r);if(!r)throw new Error("writeContract: namespace is required but got undefined");if(!n)throw new Error("writeContract: adapter is required but got undefined");const s=this.getCaipNetwork(),i=this.getCaipAddress(),o=yt.getProvider(r);if(!s||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");return(await n?.writeContract({...e,caipNetwork:s,provider:o,caipAddress:i}))?.hash},parseUnits:(e,r)=>{const n=this.getAdapter(z.state.activeChain);if(!n)throw new Error("parseUnits: adapter is required but got undefined");return n?.parseUnits({value:e,decimals:r})??0n},formatUnits:(e,r)=>{const n=this.getAdapter(z.state.activeChain);if(!n)throw new Error("formatUnits: adapter is required but got undefined");return n?.formatUnits({value:e,decimals:r})??"0"},getCapabilities:async e=>{const r=this.getAdapter(z.state.activeChain);if(!r)throw new Error("getCapabilities: adapter is required but got undefined");return await r?.getCapabilities(e)},grantPermissions:async e=>{const r=this.getAdapter(z.state.activeChain);if(!r)throw new Error("grantPermissions: adapter is required but got undefined");return await r?.grantPermissions(e)},revokePermissions:async e=>{const r=this.getAdapter(z.state.activeChain);if(!r)throw new Error("revokePermissions: adapter is required but got undefined");return r?.revokePermissions?await r.revokePermissions(e):"0x"},walletGetAssets:async e=>{const r=this.getAdapter(z.state.activeChain);if(!r)throw new Error("walletGetAssets: adapter is required but got undefined");return await r?.walletGetAssets(e)??{}},updateBalance:e=>{const r=this.getAddress(e),n=this.getCaipNetwork(e);!n||!r||this.updateNativeBalance(r,n?.id,e)}},me.setClient(this.connectionControllerClient)}async onConnectExternal(e){const r=z.state.activeChain,n=e.chain||r,s=this.getAdapter(n);let i=!0;if(e.type===it.CONNECTOR_TYPE_AUTH&&Q.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(d=>ue.getConnectorId(d)===Q.CONNECTOR_ID.AUTH)&&e.chain!==r&&(i=!1),e.chain&&e.chain!==r&&!e.caipNetwork){const u=this.getCaipNetworks().find(l=>l.chainNamespace===e.chain);u&&i&&this.setCaipNetwork(u)}if(!n)throw new Error("connectExternal: namespace not found");if(!s)throw new Error("connectExternal: adapter not found");const o=this.getCaipNetwork(n),a=e.caipNetwork||o,c=await s.connect({id:e.id,address:e.address,info:e.info,type:e.type,provider:e.provider,socialUri:e.socialUri,chainId:e.caipNetwork?.id||o?.id,rpcUrl:e.caipNetwork?.rpcUrls?.default?.http?.[0]||o?.rpcUrls?.default?.http?.[0]});if(c)return ie.addConnectedNamespace(n),this.syncProvider({...c,chainNamespace:n}),this.setStatus("connected",n),this.syncConnectedWalletInfo(n),ie.removeDisconnectedConnectorId(e.id,n),{address:c.address,connectedCaipNetwork:a}}async connectInactiveNamespaces(e,r){const n=e.type===it.CONNECTOR_TYPE_AUTH,s=hi.getOtherAuthNamespaces(r?.connectedCaipNetwork?.chainNamespace),i=z.state.activeCaipNetwork,o=this.getAdapter(i?.chainNamespace);n&&(await Promise.all(s.map(async a=>{try{const c=yt.getProvider(a),u=this.getCaipNetwork(a);await this.getAdapter(a)?.connect({...e,provider:c,socialUri:void 0,chainId:u?.id,rpcUrl:u?.rpcUrls?.default?.http?.[0]})&&(ie.addConnectedNamespace(a),ie.removeDisconnectedConnectorId(e.id,a),this.setStatus("connected",a),this.syncConnectedWalletInfo(a))}catch(c){cn.warn(un.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.displayMessage,un.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.debugMessage(a,c instanceof Error?c.message:void 0),un.ALERT_WARNINGS.INACTIVE_NAMESPACE_NOT_CONNECTED.code)}})),i&&await o?.switchNetwork({caipNetwork:i}))}getApprovedCaipNetworksData(){if(yt.getProviderId(z.state.activeChain)===it.CONNECTOR_TYPE_WALLET_CONNECT){const r=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(r)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){const r=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=yt.getProviderId(r);if(e.chainNamespace===z.state.activeChain)await this.getAdapter(r)?.switchNetwork({caipNetwork:e});else if(this.setCaipNetwork(e),s===it.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const i=this.getAddressByChainNamespace(r);i&&this.syncAccount({address:i,chainId:e.id,chainNamespace:r})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(r=>{const n=r.chains||[],s=r.accounts.map(i=>{const{chainId:o,chainNamespace:a}=_r.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...n,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((r,n)=>{const s=e?.find(i=>i.namespace===n);return s?(s.construct({namespace:n,projectId:this.options?.projectId,networks:this.caipNetworks?.filter(({chainNamespace:i})=>i===n)}),r[n]=s):r[n]=new Ahe({namespace:n,networks:this.getCaipNetworks()}),r},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e);const r=this.getAdapter(e);if(!r)throw new Error("adapter not found");await r.syncConnectors(),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)})),this.initAdapterController()}onConnectors(e){this.getAdapter(e)?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const r=this.getAdapter(e);if(!r)return;const n=ie.getConnectionStatus();ne.state.enableReconnect===!1?this.setStatus("disconnected",e):n==="connected"?this.setStatus("connecting",e):n==="disconnected"?(ie.clearAddressCache(),this.setStatus(n,e)):this.setStatus(n,e),r.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(u=>u.id.toString()===i.toString()||u.caipNetworkId.toString()===i.toString()),a=z.state.activeChain===e,c=z.state.chains.get(e)?.accountState?.address;if(o){const u=a&&s?s:c;u&&this.syncAccount({address:u,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),r.on("disconnect",()=>{const s=this.remoteFeatures.multiWallet,i=Array.from(me.state.connections.values()).flat();this.onDisconnectNamespace({chainNamespace:e,closeModal:!s||i.length===0})}),r.on("connections",s=>{this.setConnections(s,e)}),r.on("pendingTransactions",()=>{const s=this.getAddress(e),i=z.state.activeCaipNetwork;!s||!i?.id||this.updateNativeBalance(s,i.id,i.chainNamespace)}),r.on("accountChanged",({address:s,chainId:i,connector:o})=>{this.handlePreviousConnectorConnection(o);const a=z.state.activeChain===e;o?.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o?.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e));const c=z.getNetworkData(e)?.caipNetwork?.id,u=i||c;a&&u?this.syncAccount({address:s,chainId:u,chainNamespace:e}):!a&&u?(this.syncAccountInfo(s,u,e),this.syncBalance({address:s,chainId:u,chainNamespace:e})):this.syncAccountInfo(s,i,e),ie.addConnectedNamespace(e)})}async handlePreviousConnectorConnection(e){const r=e?.chain,n=e?.id,s=ue.getConnectorId(r),i=ne.state.remoteFeatures?.multiWallet,a=r&&n&&s&&s!==n&&!i;try{a&&await me.disconnect({id:s,namespace:r})}catch(c){console.warn("Error disconnecting previous connector",c)}}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&await this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>me.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async reconnectWalletConnect(){await this.syncWalletConnectAccount();const e=this.getAddress();this.getCaipAddress()||ie.deleteRecentWallet();const r=ie.getRecentWallet();Ye.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:e,properties:{method:be.isMobile()?"mobile":"qrcode",name:r?.name||"Unknown",reconnect:!0,view:Fe.state.view,walletRank:r?.order}})}async syncNamespaceConnection(e){try{e===Q.CHAIN.EVM&&be.isSafeApp()&&ue.setConnectorId(Q.CONNECTOR_ID.SAFE,e);const r=ue.getConnectorId(e);switch(this.setStatus("connecting",e),r){case Q.CONNECTOR_ID.WALLET_CONNECT:await this.reconnectWalletConnect();break;case Q.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(r){console.warn("AppKit couldn't sync existing connection",r),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:r,closeModal:n}=e||{};z.resetAccount(r),z.resetNetwork(r),ie.removeConnectedNamespace(r);const s=Array.from(z.state.chains.keys());(r?[r]:s).forEach(o=>ie.addDisconnectedConnectorId(ue.getConnectorId(o)||"",o)),ue.removeConnectorId(r),yt.resetChain(r),this.setUser(null,r),this.setStatus("disconnected",r),this.setConnectedWalletInfo(null,r),n!==!1&&ot.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{const r=this.getAdapter(e),n=this.getCaipAddress(e),s=this.getCaipNetwork(e);return r?.syncConnections({connectToFirstConnector:!n,caipNetwork:s})}))}async syncAdapterConnection(e){const r=this.getAdapter(e),n=this.getCaipNetwork(e),s=ue.getConnectorId(e),o=ue.getConnectors(e).find(a=>a.id===s);try{if(!r||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!n?.id)throw new Error("CaipNetwork not found");const a=await r?.syncConnection({namespace:e,id:o.id,chainId:n.id,rpcUrl:n?.rpcUrls?.default?.http?.[0]});a?(this.syncProvider({...a,chainNamespace:e}),await this.syncAccount({...a,chainNamespace:e}),this.setStatus("connected",e),Ye.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:a.address,properties:{method:"browser",name:o.info?.name||o.name||"Unknown",reconnect:!0,view:Fe.state.view,walletRank:o?.explorerWallet?.order}})):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){const e=Object.keys(this.universalProvider?.session?.namespaces||{}),r=this.chainNamespaces.map(async n=>{const s=this.getAdapter(n);if(!s)return;const i=this.universalProvider?.session?.namespaces?.[n]?.accounts||[],o=z.state.activeCaipNetwork?.id,a=i.find(u=>{const{chainId:l}=_r.parseCaipAddress(u);return l===o?.toString()})||i[0];if(a){const u=_r.validateCaipAddress(a),{chainId:l,address:d}=_r.parseCaipAddress(u);if(yt.setProviderId(n,it.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&z.state.activeCaipNetwork&&s.namespace!==Q.CHAIN.EVM){const f=s.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:z.state.activeCaipNetwork});yt.setProvider(n,f)}else yt.setProvider(n,this.universalProvider);ue.setConnectorId(Q.CONNECTOR_ID.WALLET_CONNECT,n),ie.addConnectedNamespace(n),await this.syncAccount({address:d,chainId:l,chainNamespace:n})}else e.includes(n)&&this.setStatus("disconnected",n);const c=this.getApprovedCaipNetworksData();this.syncConnectedWalletInfo(n),z.setApprovedCaipNetworksData(n,{approvedCaipNetworkIds:c.approvedCaipNetworkIds,supportsAllNetworks:c.supportsAllNetworks})});await Promise.all(r)}syncProvider({type:e,provider:r,id:n,chainNamespace:s}){yt.setProviderId(s,e),yt.setProvider(s,r),ue.setConnectorId(n,s)}async syncAccount(e){const r=e.chainNamespace===z.state.activeChain,n=z.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=ie.getActiveNetworkProps(),c=n?.id||a,u=z.state.activeCaipNetwork?.name===Q.UNSUPPORTED_NETWORK_NAME,l=z.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(u&&!l)&&c){let d=this.getCaipNetworks().find(h=>h.id.toString()===c.toString()),f=this.getCaipNetworks().find(h=>h.chainNamespace===o);if(!l&&!d&&!f){const h=this.getApprovedCaipNetworkIds()||[],y=h.find(E=>_r.parseCaipNetworkId(E)?.chainId===c.toString()),b=h.find(E=>_r.parseCaipNetworkId(E)?.chainNamespace===o);d=this.getCaipNetworks().find(E=>E.caipNetworkId===y),f=this.getCaipNetworks().find(E=>E.caipNetworkId===b||"deprecatedCaipNetworkId"in E&&E.deprecatedCaipNetworkId===b)}const g=d||f;g?.chainNamespace===z.state.activeChain?ne.state.enableNetworkSwitch&&!ne.state.allowUnsupportedChain&&z.state.activeCaipNetwork?.name===Q.UNSUPPORTED_NETWORK_NAME?z.showUnsupportedChainUI():this.setCaipNetwork(g):r||n&&this.setCaipNetworkOfNamespace(n,o),this.syncConnectedWalletInfo(o);const p=this.getAddress(o);hi.isLowerCaseMatch(s,p)||this.syncAccountInfo(s,g?.id,o),r?await this.syncBalance({address:s,chainId:g?.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:n?.id,chainNamespace:o}),this.syncIdentity({address:s,chainId:i,chainNamespace:o})}}async syncAccountInfo(e,r,n){const s=this.getCaipAddress(n),i=r||s?.split(":")[1];if(!i)return;const o=`${n}:${i}:${e}`;this.setCaipAddress(o,n,!0),await this.syncIdentity({address:e,chainId:i,chainNamespace:n})}async syncReownName(e,r){try{const n=await this.getReownName(e);if(n[0]){const s=n[0];this.setProfileName(s.name,r)}else this.setProfileName(null,r)}catch{this.setProfileName(null,r)}}syncConnectedWalletInfo(e){const r=ue.getConnectorId(e),n=yt.getProviderId(e);if(n===it.CONNECTOR_TYPE_ANNOUNCED||n===it.CONNECTOR_TYPE_INJECTED){if(r){const i=this.getConnectors().find(o=>{const a=o.id===r,c=o.info?.rdns===r,u=o.connectors?.some(l=>l.id===r||l.info?.rdns===r);return a||c||!!u});if(i){const{info:o,name:a,imageUrl:c}=i,u=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:u,...o},e)}}}else if(n===it.CONNECTOR_TYPE_WALLET_CONNECT){const s=yt.getProvider(e);s?.session&&this.setConnectedWalletInfo({...s.session.peer.metadata,name:s.session.peer.metadata.name,icon:s.session.peer.metadata.icons?.[0]},e)}else if(r&&(r===Q.CONNECTOR_ID.COINBASE_SDK||r===Q.CONNECTOR_ID.COINBASE)){const s=this.getConnectors().find(c=>c.id===r),i=s?.name||"Coinbase Wallet",o=s?.imageUrl||this.getConnectorImage(s),a=s?.info;this.setConnectedWalletInfo({...a,name:i,icon:o},e)}}async syncBalance(e){!qj.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(n=>n.id.toString()===e.chainId?.toString())||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,r,n){const s=this.getAdapter(n),i=z.getCaipNetworkByNamespace(n,r);if(s){const o=await s.getBalance({address:e,chainId:r,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,n),o}}async initializeUniversalAdapter(){const e=Hfe.createLogger((s,...i)=>{s&&this.handleAlertError(s),console.error(...i)}),r={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};ne.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await ffe.init(r);const n=this.universalProvider.disconnect.bind(this.universalProvider);this.universalProvider.disconnect=async()=>{try{return await n()}catch(s){if(s instanceof Error&&s.message.includes("Missing or invalid. Record was recently deleted"))return;throw s}},ne.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{Zi.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:r=>{me.setUri(r)},onConnect:r=>{const{address:n}=be.getAccount(r[0]);me.finalizeWcConnection(n)},onDisconnect:()=>{z.state.noAdapters&&this.resetAccount(e),me.resetWcConnection()},onChainChanged:r=>{const n=z.state.activeChain,s=n&&ue.state.activeConnectorIds[n]===Q.CONNECTOR_ID.WALLET_CONNECT;if(n===e&&(z.state.noAdapters||s)){const i=this.getCaipNetworks().find(a=>a.id.toString()===r.toString()||a.caipNetworkId.toString()===r.toString()),o=this.getCaipNetwork();if(!i){this.setUnsupportedNetwork(r);return}o?.id.toString()!==i?.id.toString()&&o?.chainNamespace===i?.chainNamespace&&this.setCaipNetwork(i)}},onAccountsChanged:r=>{const n=z.state.activeChain,s=n&&ue.state.activeConnectorIds[n]===Q.CONNECTOR_ID.WALLET_CONNECT;if(n===e&&(z.state.noAdapters||s)){const i=r?.[0];i&&this.syncAccount({address:i.address,chainId:i.chainId,chainNamespace:i.chainNamespace})}}})})}createUniversalProvider(){return!this.universalProviderInitPromise&&be.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Ye.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}getDisabledCaipNetworks(){const e=z.getAllApprovedCaipNetworkIds(),r=z.getAllRequestedCaipNetworks();return be.sortRequestedNetworks(e,r).filter(s=>z.isCaipNetworkDisabled(s))}handleAlertError(e){const r=Object.entries(un.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[n,s]=r??[],{message:i,alertErrorKey:o}=s??{};if(n&&i&&!this.reportedAlertErrors[n]){const a=un.ALERT_ERRORS[o];a&&(cn.open(a,"error"),this.reportedAlertErrors[n]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;const r=e.namespace;if(!r)return;this.createClients();const n=e;n.namespace=r,n.construct({namespace:r,projectId:this.options?.projectId,networks:this.caipNetworks?.filter(({chainNamespace:s})=>s===r)}),this.chainNamespaces.includes(r)||this.chainNamespaces.push(r),this.chainAdapters&&(this.chainAdapters[r]=n)}async open(e){await this.injectModalUi(),e?.uri&&me.setUri(e.uri);const{isSwap:r,isSend:n}=this.toModalOptions();return r(e)?ot.open({...e,data:{swap:e.arguments}}):n(e)&&e.arguments?this.openSend(e.arguments):ot.open(e)}async close(){await this.injectModalUi(),ot.close()}setLoading(e,r){ot.setLoading(e,r)}async disconnect(e){await me.disconnect({namespace:e})}getSIWX(){return ne.state.siwx}getError(){return""}getChainId(){return z.state.activeCaipNetwork?.id}async switchNetwork(e,{throwOnFailure:r=!1}={}){const n=this.getCaipNetworks().find(s=>s.id===e.id);if(!n){cn.open(un.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await z.switchActiveNetwork(n,{throwOnFailure:r})}getWalletProvider(){return z.state.activeChain?yt.state.providers[z.state.activeChain]:null}getWalletProviderType(){return yt.getProviderId(z.state.activeChain)}subscribeProviders(e){return yt.subscribeProviders(e)}getThemeMode(){return Un.state.themeMode}getThemeVariables(){return Un.state.themeVariables}setThemeMode(e){Un.setThemeMode(e),AC(Un.state.themeMode)}setTermsConditionsUrl(e){ne.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){ne.setPrivacyPolicyUrl(e)}setThemeVariables(e){Un.setThemeVariables(e),_he(Un.state.themeVariables)}subscribeTheme(e){return Un.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?me.subscribe(e):(cn.open(Q.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){return e?z.state.chains.get(e)?.accountState?.connectedWalletInfo:z.getAccountData()?.connectedWalletInfo}getAccount(e){const r=e||z.state.activeChain,n=ue.getAuthConnector(r),s=z.getAccountData(r),i=ie.getConnectedConnectorId(z.state.activeChain),o=me.getConnections(r);if(!r)throw new Error("AppKit:getAccount - namespace is required");const a=o.flatMap(c=>c.accounts.map(({address:u,type:l,publicKey:d})=>be.createAccount(r,u,l||"eoa",d)));if(s)return{allAccounts:a,caipAddress:s.caipAddress,address:be.getPlainAddress(s.caipAddress),isConnected:!!s.caipAddress,status:s.status,embeddedWalletInfo:n&&i===Q.CONNECTOR_ID.AUTH?{user:s.user?{...s.user,username:ie.getConnectedSocialUsername()}:void 0,authProvider:s.socialProvider||"email",accountType:En(r),isSmartAccountDeployed:!!s.smartAccountDeployed}:void 0}}subscribeAccount(e,r){const n=()=>{const s=this.getAccount(r);s&&e(s)};r?z.subscribeChainProp("accountState",n,r):z.subscribe(n),ue.subscribe(n)}subscribeNetwork(e){return z.subscribe(({activeCaipNetwork:r})=>{e({caipNetwork:r,chainId:r?.id,caipNetworkId:r?.caipNetworkId})})}subscribeWalletInfo(e,r){return r?z.subscribeChainProp("accountState",n=>e(n?.connectedWalletInfo),r):z.subscribeChainProp("accountState",n=>e(n?.connectedWalletInfo))}subscribeShouldUpdateToAddress(e){z.subscribeChainProp("accountState",r=>e(r?.shouldUpdateToAddress))}subscribeCaipNetworkChange(e){z.subscribeKey("activeCaipNetwork",e)}getState(){return fi.state}getRemoteFeatures(){return ne.state.remoteFeatures}subscribeState(e){return fi.subscribe(e)}subscribeRemoteFeatures(e){return ne.subscribeKey("remoteFeatures",e)}showErrorMessage(e){zi.showError(e)}showSuccessMessage(e){zi.showSuccess(e)}getEvent(){return{...Ye.state}}subscribeEvents(e){return Ye.subscribe(e)}replace(e){Fe.replace(e)}redirect(e){Fe.push(e)}popTransactionStack(e){Fe.popTransactionStack(e)}isOpen(){return ot.state.open}isTransactionStackEmpty(){return Fe.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){ne.setFeatures(e)}updateRemoteFeatures(e){ne.setRemoteFeatures(e)}updateOptions(e){const n={...ne.state||{},...e};ne.setOptions(n)}setConnectMethodsOrder(e){ne.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){ne.setWalletFeaturesOrder(e)}setCollapseWallets(e){ne.setCollapseWallets(e)}setSocialsOrder(e){ne.setSocialsOrder(e)}getConnectMethodsOrder(){return Dh.getConnectOrderMethod(ne.state.features,ue.getConnectors())}addNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const n=this.extendCaipNetwork(r,this.options);this.getCaipNetworks().find(s=>s.id===n.id)||z.addNetwork(n)}removeNetwork(e,r){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===r)&&z.removeNetwork(e,r)}}let RN=!1;class The extends She{async onAuthProviderConnected(e){const r=hi.userChainIdToChainNamespace(e?.chainId);if(e.message&&e.signature&&e.siwxMessage&&await qn.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature),!r)throw new Error("AppKit:onAuthProviderConnected - namespace is required");const n=r===Q.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=ne.state.defaultAccountTypes[r],i=En(r),o=e.preferredAccountType||i||s;this.setCaipAddress(n,r);const{signature:a,siwxMessage:c,message:u,...l}=e,d=z.getAccountData(r);this.setUser({...d?.user||{},...l},r),this.setSmartAccountDeployed(!!e.smartAccountDeployed,r),this.setPreferredAccountType(o,r),await Promise.all([this.syncAuthConnectorTheme(this.authProvider),this.syncAccount({address:e.address,chainId:e.chainId,chainNamespace:r})]),this.setLoading(!1,r)}setupAuthConnectorListeners(e){e.onRpcRequest(r=>{ys.checkIfRequestExists(r)?ys.checkIfRequestIsSafe(r)||this.handleUnsafeRPCRequest():(this.open(),console.error(yr.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:r.method}),setTimeout(()=>{this.showErrorMessage(yr.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((r,n)=>{const s=ys.checkIfRequestIsSafe(n),i=this.getAddress(),o=z.state.activeCaipNetwork;s||(i&&o?.id&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const r=z.state.activeChain;if(!r)throw new Error("AppKit:onNotConnected - namespace is required");ue.getConnectorId(r)===Q.CONNECTOR_ID.AUTH&&(this.setCaipAddress(null,r),this.setLoading(!1,r))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:r,type:n})=>{const s=z.state.activeChain;if(!s)throw new Error("AppKit:onSetPreferredAccount - namespace is required");r&&this.setPreferredAccountType(n,s)})}async syncAuthConnectorTheme(e){if(!e)return;const r=Un.getSnapshot();await e.syncTheme({themeMode:r.themeMode,themeVariables:r.themeVariables,w3mThemeVariables:tp(r.themeVariables,r.themeMode)})}async syncAuthConnector(e,r){const n=Q.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r),s=r===z.state.activeChain;if(!n)return;this.setLoading(!0,r);const i=e.getLoginEmailUsed();this.setLoading(i,r),i&&this.setStatus("connecting",r);const o=e.getEmail(),a=e.getUsername(),c=z.getAccountData(r)?.user||{};this.setUser({...c,username:a,email:o},r),this.setupAuthConnectorListeners(e);const{isConnected:u}=await e.isConnected();if(r&&n&&s)if(u&&this.connectionControllerClient?.connectExternal){await e.init(),await this.syncAuthConnectorTheme(e),await this.connectionControllerClient?.connectExternal({id:Q.CONNECTOR_ID.AUTH,info:{name:Q.CONNECTOR_ID.AUTH},type:it.CONNECTOR_TYPE_AUTH,provider:e,chainId:z.getNetworkData(r)?.caipNetwork?.id,chain:r}),this.setStatus("connected",r);const l=ie.getConnectedSocialProvider();l?Ye.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",address:this.getAddress(),properties:{provider:l,reconnect:!0}}):Ye.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:this.getAddress(),properties:{method:"email",name:this.universalProvider?.session?.peer?.metadata?.name||"Unknown",reconnect:!0,view:Fe.state.view,walletRank:void 0}})}else ue.getConnectorId(r)===Q.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",r),ie.removeConnectedNamespace(r));this.setLoading(!1,r)}async checkExistingTelegramSocialConnection(e){try{if(!be.isTelegram())return;const r=ie.getTelegramSocialProvider();if(!r||!be.isClient())return;const s=new URL(window.location.href).searchParams.get("result_uri");if(!s)return;r&&z.setAccountProp("socialProvider",r,e),await this.authProvider?.init();const i=ue.getAuthConnector();r&&i&&(this.setLoading(!0,e),await me.connectExternal({id:i.id,type:i.type,socialUri:s},i.chain),ie.setConnectedSocialProvider(r),ie.removeTelegramSocialProvider(),Ye.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){if(!Q.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const n=this.remoteFeatures?.email,s=Array.isArray(this.remoteFeatures?.socials)&&this.remoteFeatures.socials.length>0,i=n||s,a=hi.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&this.options?.projectId&&i&&(this.authProvider=Kh.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:this.getCaipNetwork(a)?.caipNetworkId,abortController:un.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?cn.open(un.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?cn.open(un.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&cn.open(un.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:u=>xh(u),getCaipNetworks:u=>z.getCaipNetworks(u)}),fi.subscribeOpen(u=>{!u&&this.isTransactionStackEmpty()&&this.authProvider?.rejectRpcRequests()}));const c=e===z.state.activeChain&&ne.state.enableReconnect;ne.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){this.createAuthProvider(e),this.authProvider&&this.chainAdapters?.[e]?.setAuthProvider?.(this.authProvider)}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&ke.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){if(!e)return;const r=z.state.activeChain,n=e.chainNamespace,s=this.getAddressByChainNamespace(n);if(n===r&&z.getAccountData(n)?.caipAddress)await this.getAdapter(n)?.switchNetwork({caipNetwork:e}),this.setCaipNetwork(e);else{const a=yt.getProviderId(r)===it.CONNECTOR_TYPE_AUTH,c=yt.getProviderId(n),u=c===it.CONNECTOR_TYPE_AUTH,l=Q.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!n)throw new Error("AppKit:switchCaipNetwork - networkNamespace is required");if((a&&c===void 0||u)&&l)try{z.state.activeChain=e.chainNamespace,s?await this.getAdapter(n)?.switchNetwork({caipNetwork:e}):await this.connectionControllerClient?.connectExternal?.({id:Q.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:n,chainId:e.id,type:it.CONNECTOR_TYPE_AUTH,caipNetwork:e}),this.setCaipNetwork(e)}catch{await this.getAdapter(n)?.switchNetwork({caipNetwork:e})}else c===it.CONNECTOR_TYPE_WALLET_CONNECT?(z.state.noAdapters||await this.getAdapter(n)?.switchNetwork({caipNetwork:e}),this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:n}))}}async initialize(e){await super.initialize(e),this.chainNamespaces?.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),fi.set({initialized:!0})}async syncIdentity({address:e,chainId:r,chainNamespace:n}){const s=`${n}:${r}`;if(this.caipNetworks?.find(a=>a.caipNetworkId===s)?.testnet){this.setProfileName(null,n),this.setProfileImage(null,n);return}const o=ue.getConnectorId(n)===Q.CONNECTOR_ID.AUTH;try{const{name:a,avatar:c}=await this.fetchIdentity({address:e});!a&&o?await this.syncReownName(e,n):(this.setProfileName(a,n),this.setProfileImage(c,n))}catch{r!==1&&this.setProfileImage(null,n)}}syncConnectedWalletInfo(e){const r=yt.getProviderId(e);if(r===it.CONNECTOR_TYPE_AUTH){const n=this.authProvider;if(n){const s=ie.getConnectedSocialProvider()??"email",i=n.getEmail()??n.getUsername();this.setConnectedWalletInfo({name:r,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(be.isClient()&&!RN)try{const e={...ft.DEFAULT_FEATURES,...this.options.features},r=this.remoteFeatures;if(await this.loadModalComponents(e,r),be.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!ne.state.disableAppend&&!ne.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}RN=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,r){if(!be.isClient())return;const n=[];(r.email||r.socials&&r.socials.length>0)&&n.push($r(()=>import("./embedded-wallet-DmRikogm.js"),__vite__mapDeps([3,4,5,6,7,8,9,10,11,12,13,14,15]))),r.email&&n.push($r(()=>import("./email-BHg8Pujn.js"),__vite__mapDeps([16,4,17,14,8,13,6,7,12,18,10]))),r.socials&&n.push($r(()=>import("./socials-BFZDXFbI.js"),__vite__mapDeps([19,4,6,20,7,21,13,22,12,8,23,5,24]))),r.swaps&&r.swaps.length>0&&n.push($r(()=>import("./swaps-6QQFDFsa.js"),__vite__mapDeps([25,4,12,8,13,6,26,27,28,24,29,5,10,7]))),e.send&&n.push($r(()=>import("./send-SFZdfGLw.js"),__vite__mapDeps([30,4,12,8,13,6,31,7,32,14,29,5,24,28,10,33,34]))),e.receive&&n.push($r(()=>import("./receive-dPTgUkIl.js"),__vite__mapDeps([35,4,6,5,23]))),r.onramp&&r.onramp.length>0&&n.push($r(()=>import("./onramp-DrzJlRNO.js"),__vite__mapDeps([36,4,6,37,8,20,7,5,38,39,14,12,13,22,10]))),r.payWithExchange&&n.push($r(()=>import("./pay-with-exchange-Fgu96CqD.js"),__vite__mapDeps([40,4,6,5,11,37,8,24,12,32,7,14,41,13,10,33,31]))),r.activity&&n.push($r(()=>import("./transactions-DBOZ9t_v.js"),__vite__mapDeps([42,4,43,13,6,14,5,24]))),(e.pay||r.payments)&&n.push($r(()=>import("./index-BvX4TwJr.js"),__vite__mapDeps([44,4,6,12,8,45,11,5,37,46,31,47,13,22]))),r.emailCapture&&n.push($r(()=>import("./data-capture-B7nJcNd5.js"),__vite__mapDeps([48,4,17,14,8,49]))),await Promise.all([...n,$r(()=>import("./index-F2cybof2.js"),__vite__mapDeps([50,4,6,5,8,34,13,51,39,14,9,47,11,37,12,41,43,24,33,26,27,31,7,10,46,18,20,21,22,23,15,38])),$r(()=>import("./w3m-modal-BvMKYkzZ.js"),__vite__mapDeps([52,4,6,45,5,9,8,13,27,51,39,14,47,28,12]))])}}const Phe="1.8.14";function Nhe(t){return new The({...t,sdkVersion:be.generateSdkVersion(t.adapters??[],"html",Phe)})}const Ohe="6.16.0";function Rhe(t,e,r){const n=e.split("|").map(i=>i.trim());for(let i=0;i<n.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${r}`,s.value=t,s}async function bn(t){const e=Object.keys(t);return(await Promise.all(e.map(n=>Promise.resolve(t[n])))).reduce((n,s,i)=>(n[e[i]]=s,n),{})}function ze(t,e,r){for(let n in e){let s=e[n];const i=r?r[n]:null;i&&Rhe(s,i,n),Object.defineProperty(t,n,{enumerable:!0,value:s,writable:!1})}}function Xl(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(r=>Xl(r,e)).join(", ")+" ]";if(t instanceof Uint8Array){const r="0123456789abcdef";let n="0x";for(let s=0;s<t.length;s++)n+=r[t[s]>>4],n+=r[t[s]&15];return n}if(typeof t=="object"&&typeof t.toJSON=="function")return Xl(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const r=Object.keys(t);return r.sort(),"{ "+r.map(n=>`${Xl(n,e)}: ${Xl(t[n],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Gr(t,e){return t&&t.code===e}function WI(t){return Gr(t,"CALL_EXCEPTION")}function Yt(t,e,r){let n=t;{const i=[];if(r){if("message"in r||"code"in r||"name"in r)throw new Error(`value will overwrite populated values: ${Xl(r)}`);for(const o in r){if(o==="shortMessage")continue;const a=r[o];i.push(o+"="+Xl(a))}}i.push(`code=${e}`),i.push(`version=${Ohe}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return ze(s,{code:e}),r&&Object.assign(s,r),s.shortMessage==null&&ze(s,{shortMessage:n}),s}function oe(t,e,r,n){if(!t)throw Yt(e,r,n)}function W(t,e,r,n){oe(t,e,"INVALID_ARGUMENT",{argument:r,value:n})}function QL(t,e,r){r==null&&(r=""),r&&(r=": "+r),oe(t>=e,"missing argument"+r,"MISSING_ARGUMENT",{count:t,expectedCount:e}),oe(t<=e,"too many arguments"+r,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"Ã©".normalize("NFD")!=="eÌ")throw new Error("broken");t.push(e)}catch{}return t},[]);function m0(t,e,r){if(r==null&&(r=""),t!==e){let n=r,s="new";r&&(n+=".",s+=" "+r),oe(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function XL(t,e,r){if(t instanceof Uint8Array)return r?new Uint8Array(t):t;if(typeof t=="string"&&t.length%2===0&&t.match(/^0x[0-9a-f]*$/i)){const n=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<n.length;i++)n[i]=parseInt(t.substring(s,s+2),16),s+=2;return n}W(!1,"invalid BytesLike value",e||"value",t)}function nt(t,e){return XL(t,e,!1)}function wn(t,e){return XL(t,e,!0)}function Mt(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function KI(t){return Mt(t,!0)||t instanceof Uint8Array}const xN="0123456789abcdef";function Ee(t){const e=nt(t);let r="0x";for(let n=0;n<e.length;n++){const s=e[n];r+=xN[(s&240)>>4]+xN[s&15]}return r}function Qt(t){return"0x"+t.map(e=>Ee(e).substring(2)).join("")}function ud(t){return Mt(t,!0)?(t.length-2)/2:nt(t).length}function lr(t,e,r){const n=nt(t);return r!=null&&r>n.length&&oe(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r}),Ee(n.slice(e??0,r??n.length))}function e9(t,e,r){const n=nt(t);oe(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),r?s.set(n,e-n.length):s.set(n,0),Ee(s)}function na(t,e){return e9(t,e,!0)}function xhe(t,e){return e9(t,e,!1)}const y0=BigInt(0),li=BigInt(1),ed=9007199254740991;function nE(t,e){const r=qE(t,"value"),n=BigInt(Je(e,"width"));if(oe(r>>n===y0,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),r>>n-li){const s=(li<<n)-li;return-((~r&s)+li)}return r}function t9(t,e){let r=Ne(t,"value");const n=BigInt(Je(e,"width")),s=li<<n-li;if(r<y0){r=-r,oe(r<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(li<<n)-li;return(~r&i)+li}else oe(r<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return r}function vu(t,e){const r=qE(t,"value"),n=BigInt(Je(e,"bits"));return r&(li<<n)-li}function Ne(t,e){switch(typeof t){case"bigint":return t;case"number":return W(Number.isInteger(t),"underflow",e||"value",t),W(t>=-ed&&t<=ed,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(r){W(!1,`invalid BigNumberish string: ${r.message}`,e||"value",t)}}W(!1,"invalid BigNumberish value",e||"value",t)}function qE(t,e){const r=Ne(t,e);return oe(r>=y0,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),r}const kN="0123456789abcdef";function HE(t){if(t instanceof Uint8Array){let e="0x0";for(const r of t)e+=kN[r>>4],e+=kN[r&15];return BigInt(e)}return Ne(t)}function Je(t,e){switch(typeof t){case"bigint":return W(t>=-ed&&t<=ed,"overflow",e||"value",t),Number(t);case"number":return W(Number.isInteger(t),"underflow",e||"value",t),W(t>=-ed&&t<=ed,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Je(BigInt(t),e)}catch(r){W(!1,`invalid numeric string: ${r.message}`,e||"value",t)}}W(!1,"invalid numeric value",e||"value",t)}function khe(t){return Je(HE(t))}function tc(t,e){const r=qE(t,"value");let n=r.toString(16);if(e==null)n.length%2&&(n="0"+n);else{const s=Je(e,"width");if(s===0&&r===y0)return"0x";for(oe(s*2>=n.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});n.length<s*2;)n="0"+n}return"0x"+n}function Cr(t,e){const r=qE(t,"value");if(r===y0)return new Uint8Array(0);let n=r.toString(16);n.length%2&&(n="0"+n);const s=new Uint8Array(n.length/2);for(let i=0;i<s.length;i++){const o=i*2;s[i]=parseInt(n.substring(o,o+2),16)}return s}function ci(t){let e=Ee(KI(t)?t:Cr(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const BN="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const jN=BigInt(58);function Bhe(t){const e=nt(t);let r=HE(e),n="";for(;r;)n=BN[Number(r%jN)]+n,r/=jN;for(let s=0;s<e.length&&!e[s];s++)n=BN[0]+n;return n}function jhe(t){t=atob(t);const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return nt(e)}function Dhe(t){const e=nt(t);let r="";for(let n=0;n<e.length;n++)r+=String.fromCharCode(e[n]);return btoa(r)}class r9{filter;emitter;#e;constructor(e,r,n){this.#e=r,ze(this,{emitter:e,filter:n})}async removeListener(){this.#e!=null&&await this.emitter.off(this.filter,this.#e)}}function Uhe(t,e,r,n,s){W(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function n9(t,e,r,n,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<r.length&&r[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?r.length-e-1:0}function Mhe(t,e,r,n,s){return t==="OVERLONG"?(W(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),n.push(s),0):(n.push(65533),n9(t,e,r))}const Lhe=Object.freeze({error:Uhe,ignore:n9,replace:Mhe});function Fhe(t,e){e==null&&(e=Lhe.error);const r=nt(t,"bytes"),n=[];let s=0;for(;s<r.length;){const i=r[s++];if(i>>7===0){n.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,r,n):s+=e("BAD_PREFIX",s-1,r,n);continue}if(s-1+o>=r.length){s+=e("OVERRUN",s-1,r,n);continue}let c=i&(1<<8-o-1)-1;for(let u=0;u<o;u++){let l=r[s];if((l&192)!=128){s+=e("MISSING_CONTINUE",s,r,n),c=null;break}c=c<<6|l&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,r,n,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,r,n,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,r,n,c);continue}n.push(c)}}return n}function Yi(t,e){W(typeof t=="string","invalid string value","str",t);let r=[];for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);if(s<128)r.push(s);else if(s<2048)r.push(s>>6|192),r.push(s&63|128);else if((s&64512)==55296){n++;const i=t.charCodeAt(n);W(n<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(o&63|128)}else r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128)}return new Uint8Array(r)}function qhe(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function sE(t,e){return qhe(Fhe(t,e))}function s9(t){async function e(r,n){oe(n==null||!n.cancelled,"request cancelled before sending","CANCELLED");const s=r.url.split(":")[0].toLowerCase();oe(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),oe(s==="https"||!r.credentials||r.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=Yt("request timeout","TIMEOUT"),o.abort()},r.timeout);n&&n.addListener(()=>{i=Yt("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:r.method,headers:new Headers(Array.from(r)),body:r.body||void 0,signal:o.signal});let u;try{u=await fetch(r.url,c)}catch(g){throw clearTimeout(a),i||g}clearTimeout(a);const l={};u.headers.forEach((g,p)=>{l[p.toLowerCase()]=g});const d=await u.arrayBuffer(),f=d==null?null:new Uint8Array(d);return{statusCode:u.status,statusMessage:u.statusText,headers:l,body:f}}return e}const Hhe=12,zhe=250;let DN=s9();const $he=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Vhe=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let mA=!1;async function i9(t,e){try{const r=t.match($he);if(!r)throw new Error("invalid data");return new Ka(200,"OK",{"content-type":r[1]||"text/plain"},r[2]?jhe(r[3]):Whe(r[3]))}catch{return new Ka(599,"BAD REQUEST (invalid data: URI)",{},null,new eo(t))}}function o9(t){async function e(r,n){try{const s=r.match(Vhe);if(!s)throw new Error("invalid link");return new eo(`${t}${s[2]}`)}catch{return new Ka(599,"BAD REQUEST (invalid IPFS URI)",{},null,new eo(r))}}return e}const kg={data:i9,ipfs:o9("https://gateway.ipfs.io/ipfs/")},a9=new WeakMap;class Ghe{#e;#t;constructor(e){this.#e=[],this.#t=!1,a9.set(e,()=>{if(!this.#t){this.#t=!0;for(const r of this.#e)setTimeout(()=>{r()},0);this.#e=[]}})}addListener(e){oe(!this.#t,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#e.push(e)}get cancelled(){return this.#t}checkSignal(){oe(!this.cancelled,"cancelled","CANCELLED",{})}}function Bg(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}class eo{#e;#t;#r;#n;#s;#o;#i;#a;#d;#u;#p;#g;#c;#l;#f;get url(){return this.#o}set url(e){this.#o=String(e)}get body(){return this.#i==null?null:new Uint8Array(this.#i)}set body(e){if(e==null)this.#i=void 0,this.#a=void 0;else if(typeof e=="string")this.#i=Yi(e),this.#a="text/plain";else if(e instanceof Uint8Array)this.#i=e,this.#a="application/octet-stream";else if(typeof e=="object")this.#i=Yi(JSON.stringify(e)),this.#a="application/json";else throw new Error("invalid body")}hasBody(){return this.#i!=null}get method(){return this.#n?this.#n:this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),this.#n=String(e).toUpperCase()}get headers(){const e=Object.assign({},this.#r);return this.#d&&(e.authorization=`Basic ${Dhe(Yi(this.#d))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&this.#a&&(e["content-type"]=this.#a),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,r){this.#r[String(e).toLowerCase()]=String(r)}clearHeaders(){this.#r={}}[Symbol.iterator](){const e=this.headers,r=Object.keys(e);let n=0;return{next:()=>{if(n<r.length){const s=r[n++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#d||null}setCredentials(e,r){W(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#d=`${e}:${r}`}get allowGzip(){return this.#t}set allowGzip(e){this.#t=!!e}get allowInsecureAuthentication(){return!!this.#e}set allowInsecureAuthentication(e){this.#e=!!e}get timeout(){return this.#s}set timeout(e){W(e>=0,"timeout must be non-zero","timeout",e),this.#s=e}get preflightFunc(){return this.#u||null}set preflightFunc(e){this.#u=e}get processFunc(){return this.#p||null}set processFunc(e){this.#p=e}get retryFunc(){return this.#g||null}set retryFunc(e){this.#g=e}get getUrlFunc(){return this.#f||DN}set getUrlFunc(e){this.#f=e}constructor(e){this.#o=String(e),this.#e=!1,this.#t=!0,this.#r={},this.#n="",this.#s=3e5,this.#l={slotInterval:zhe,maxAttempts:Hhe},this.#f=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#i?Ee(this.#i):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(this.#l.slotInterval=e.slotInterval),e.maxAttempts!=null&&(this.#l.maxAttempts=e.maxAttempts)}async#h(e,r,n,s,i){if(e>=this.#l.maxAttempts)return i.makeServerError("exceeded maximum retry limit");oe(UN()<=r,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),n>0&&await Khe(n);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in kg){const l=await kg[a](o.url,Bg(s.#c));if(l instanceof Ka){let d=l;if(this.processFunc){Bg(s.#c);try{d=await this.processFunc(o,d)}catch(f){(f.throttle==null||typeof f.stall!="number")&&d.makeServerError("error in post-processing function",f).assertOk()}}return d}o=l}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,Bg(s.#c));let u=new Ka(c.statusCode,c.statusMessage,c.headers,c.body,s);if(u.statusCode===301||u.statusCode===302){try{const l=u.headers.location||"";return o.redirect(l).#h(e+1,r,0,s,u)}catch{}return u}else if(u.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,u,e))){const l=u.headers["retry-after"];let d=this.#l.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof l=="string"&&l.match(/^[1-9][0-9]*$/)&&(d=parseInt(l)),o.clone().#h(e+1,r,d,s,u)}if(this.processFunc){Bg(s.#c);try{u=await this.processFunc(o,u)}catch(l){(l.throttle==null||typeof l.stall!="number")&&u.makeServerError("error in post-processing function",l).assertOk();let d=this.#l.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return l.stall>=0&&(d=l.stall),o.clone().#h(e+1,r,d,s,u)}}return u}send(){return oe(this.#c==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#c=new Ghe(this),this.#h(0,UN()+this.timeout,0,this,new Ka(0,"",{},null,this))}cancel(){oe(this.#c!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=a9.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const r=this.url.split(":")[0].toLowerCase(),n=e.split(":")[0].toLowerCase();oe(this.method==="GET"&&(r!=="https"||n!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new eo(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,s.#r=Object.assign({},this.#r),this.#i&&(s.#i=new Uint8Array(this.#i)),s.#a=this.#a,s}clone(){const e=new eo(this.url);return e.#n=this.#n,this.#i&&(e.#i=this.#i),e.#a=this.#a,e.#r=Object.assign({},this.#r),e.#d=this.#d,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#u=this.#u,e.#p=this.#p,e.#g=this.#g,e.#l=Object.assign({},this.#l),e.#f=this.#f,e}static lockConfig(){mA=!0}static getGateway(e){return kg[e.toLowerCase()]||null}static registerGateway(e,r){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(mA)throw new Error("gateways locked");kg[e]=r}static registerGetUrl(e){if(mA)throw new Error("gateways locked");DN=e}static createGetUrlFunc(e){return s9(e)}static createDataGateway(){return i9}static createIpfsGatewayFunc(e){return o9(e)}}class Ka{#e;#t;#r;#n;#s;#o;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#n?Ee(this.#n):"null"}>`}get statusCode(){return this.#e}get statusMessage(){return this.#t}get headers(){return Object.assign({},this.#r)}get body(){return this.#n==null?null:new Uint8Array(this.#n)}get bodyText(){try{return this.#n==null?"":sE(this.#n)}catch{oe(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{oe(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,r=Object.keys(e);let n=0;return{next:()=>{if(n<r.length){const s=r[n++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,r,n,s,i){this.#e=e,this.#t=r,this.#r=Object.keys(n).reduce((o,a)=>(o[a.toLowerCase()]=String(n[a]),o),{}),this.#n=s==null?null:new Uint8Array(s),this.#s=i||null,this.#o={message:""}}makeServerError(e,r){let n;e?n=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,n=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new Ka(599,n,this.headers,this.body,this.#s||void 0);return s.#o={message:e,error:r},s}throwThrottleError(e,r){r==null?r=-1:W(Number.isInteger(r)&&r>=0,"invalid stall timeout","stall",r);const n=new Error(e||"throttling requests");throw ze(n,{stall:r,throttle:!0}),n}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return this.#n!=null}get request(){return this.#s}ok(){return this.#o.message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:r}=this.#o;e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let n=null;this.request&&(n=this.request.url);let s=null;try{this.#n&&(s=sE(this.#n))}catch{}oe(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:r,info:{requestUrl:n,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function UN(){return new Date().getTime()}function Whe(t){return Yi(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,r)=>String.fromCharCode(parseInt(r,16))))}function Khe(t){return new Promise(e=>setTimeout(e,t))}const Zhe=BigInt(-1),ni=BigInt(0),td=BigInt(1),Yhe=BigInt(5),vl={};let ld="0000";for(;ld.length<80;)ld+=ld;function Bc(t){let e=ld;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function Cf(t,e,r){const n=BigInt(e.width);if(e.signed){const s=td<<n-td;oe(r==null||t>=-s&&t<s,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:t}),t>ni?t=nE(vu(t,n),n):t=-nE(vu(-t,n),n)}else{const s=td<<n;oe(r==null||t>=0&&t<s,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:t}),t=(t%s+s)%s&s-td}return t}function yA(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,r=128,n=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const i=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);W(i,"invalid fixed format","format",t),e=i[1]!=="u",r=parseInt(i[2]),n=parseInt(i[3])}}else if(t){const i=t,o=(a,c,u)=>i[a]==null?u:(W(typeof i[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,i[a]),i[a]);e=o("signed","boolean",e),r=o("width","number",r),n=o("decimals","number",n)}W(r%8===0,"invalid FixedNumber width (not byte aligned)","format.width",r),W(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const s=(e?"":"u")+"fixed"+String(r)+"x"+String(n);return{signed:e,width:r,decimals:n,name:s}}function Jhe(t,e){let r="";t<ni&&(r="-",t*=Zhe);let n=t.toString();if(e===0)return r+n;for(;n.length<=e;)n=ld+n;const s=n.length-e;for(n=n.substring(0,s)+"."+n.substring(s);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return r+n}class Mo{format;#e;#t;#r;_value;constructor(e,r,n){m0(e,vl,"FixedNumber"),this.#t=r,this.#e=n;const s=Jhe(r,n.decimals);ze(this,{format:n.name,_value:s}),this.#r=Bc(n.decimals)}get signed(){return this.#e.signed}get width(){return this.#e.width}get decimals(){return this.#e.decimals}get value(){return this.#t}#n(e){W(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#s(e,r){return e=Cf(e,this.#e,r),new Mo(vl,e,this.#e)}#o(e,r){return this.#n(e),this.#s(this.#t+e.#t,r)}addUnsafe(e){return this.#o(e)}add(e){return this.#o(e,"add")}#i(e,r){return this.#n(e),this.#s(this.#t-e.#t,r)}subUnsafe(e){return this.#i(e)}sub(e){return this.#i(e,"sub")}#a(e,r){return this.#n(e),this.#s(this.#t*e.#t/this.#r,r)}mulUnsafe(e){return this.#a(e)}mul(e){return this.#a(e,"mul")}mulSignal(e){this.#n(e);const r=this.#t*e.#t;return oe(r%this.#r===ni,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#s(r/this.#r,"mulSignal")}#d(e,r){return oe(e.#t!==ni,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#n(e),this.#s(this.#t*this.#r/e.#t,r)}divUnsafe(e){return this.#d(e)}div(e){return this.#d(e,"div")}divSignal(e){oe(e.#t!==ni,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#n(e);const r=this.#t*this.#r;return oe(r%e.#t===ni,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#s(r/e.#t,"divSignal")}cmp(e){let r=this.value,n=e.value;const s=this.decimals-e.decimals;return s>0?n*=Bc(s):s<0&&(r*=Bc(-s)),r<n?-1:r>n?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#t;return this.#t<ni&&(e-=this.#r-td),e=this.#t/this.#r*this.#r,this.#s(e,"floor")}ceiling(){let e=this.#t;return this.#t>ni&&(e+=this.#r-td),e=this.#t/this.#r*this.#r,this.#s(e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const r=this.decimals-e,n=Yhe*Bc(r-1);let s=this.value+n;const i=Bc(r);return s=s/i*i,Cf(s,this.#e,"round"),new Mo(vl,s,this.#e)}isZero(){return this.#t===ni}isNegative(){return this.#t<ni}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Mo.fromString(this.toString(),e)}static fromValue(e,r,n){const s=r==null?0:Je(r),i=yA(n);let o=Ne(e,"value");const a=s-i.decimals;if(a>0){const c=Bc(a);oe(o%c===ni,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=c}else a<0&&(o*=Bc(-a));return Cf(o,i,"fromValue"),new Mo(vl,o,i)}static fromString(e,r){const n=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);W(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",e);const s=yA(r);let i=n[2]||"0",o=n[3]||"";for(;o.length<s.decimals;)o+=ld;oe(o.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,s.decimals);const a=BigInt(n[1]+i+o);return Cf(a,s,"fromString"),new Mo(vl,a,s)}static fromBytes(e,r){let n=HE(nt(e,"value"));const s=yA(r);return s.signed&&(n=nE(n,s.width)),Cf(n,s,"fromBytes"),new Mo(vl,n,s)}}function Qhe(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function MN(t,e,r){let n=0;for(let s=0;s<r;s++)n=n*256+t[e+s];return n}function LN(t,e,r,n){const s=[];for(;r<e+1+n;){const i=c9(t,r);s.push(i.result),r+=i.consumed,oe(r<=e+1+n,"child data too short","BUFFER_OVERRUN",{buffer:t,length:n,offset:e})}return{consumed:1+n,result:s}}function c9(t,e){oe(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const r=n=>{oe(n<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:n})};if(t[e]>=248){const n=t[e]-247;r(e+1+n);const s=MN(t,e+1,n);return r(e+1+n+s),LN(t,e,e+1+n,n+s)}else if(t[e]>=192){const n=t[e]-192;return r(e+1+n),LN(t,e,e+1,n)}else if(t[e]>=184){const n=t[e]-183;r(e+1+n);const s=MN(t,e+1,n);r(e+1+n+s);const i=Ee(t.slice(e+1+n,e+1+n+s));return{consumed:1+n+s,result:i}}else if(t[e]>=128){const n=t[e]-128;r(e+1+n);const s=Ee(t.slice(e+1,e+1+n));return{consumed:1+n,result:s}}return{consumed:1,result:Qhe(t[e])}}function b0(t){const e=nt(t,"data"),r=c9(e,0);return W(r.consumed===e.length,"unexpected junk after rlp payload","data",t),r.result}function FN(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function u9(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(i){n=n.concat(u9(i))}),n.length<=55)return n.unshift(192+n.length),n;const s=FN(n.length);return s.unshift(247+s.length),s.concat(n)}const e=Array.prototype.slice.call(nt(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=FN(e.length);return r.unshift(183+r.length),r.concat(e)}const qN="0123456789abcdef";function Jo(t){let e="0x";for(const r of u9(t))e+=qN[r>>4],e+=qN[r&15];return e}const l9=["wei","kwei","mwei","gwei","szabo","finney","ether"];function d9(t,e){let r=18;if(typeof e=="string"){const n=l9.indexOf(e);W(n>=0,"invalid unit","unit",e),r=3*n}else e!=null&&(r=Je(e,"unit"));return Mo.fromValue(t,r,{decimals:r,width:512}).toString()}function Xhe(t,e){W(typeof t=="string","value must be a string","value",t);let r=18;if(typeof e=="string"){const n=l9.indexOf(e);W(n>=0,"invalid unit","unit",e),r=3*n}else e!=null&&(r=Je(e,"unit"));return Mo.fromString(t,{decimals:r,width:512}).value}function epe(t){return d9(t,18)}const vn=32,CC=new Uint8Array(vn),tpe=["then"],jg={},f9=new WeakMap;function lu(t){return f9.get(t)}function HN(t,e){f9.set(t,e)}function If(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw r.error=e,r}function IC(t,e,r){return t.indexOf(null)>=0?e.map((n,s)=>n instanceof Vo?IC(lu(n),n,r):n):t.reduce((n,s,i)=>{let o=e.getValue(s);return s in n||(r&&o instanceof Vo&&(o=IC(lu(o),o,r)),n[s]=o),n},{})}class Vo extends Array{#e;constructor(...e){const r=e[0];let n=e[1],s=(e[2]||[]).slice(),i=!0;r!==jg&&(n=e,s=[],i=!1),super(n.length),n.forEach((c,u)=>{this[u]=c});const o=s.reduce((c,u)=>(typeof u=="string"&&c.set(u,(c.get(u)||0)+1),c),new Map);if(HN(this,Object.freeze(n.map((c,u)=>{const l=s[u];return l!=null&&o.get(l)===1?l:null}))),this.#e=[],this.#e==null&&this.#e,!i)return;Object.freeze(this);const a=new Proxy(this,{get:(c,u,l)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=Je(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const g=c[f];return g instanceof Error&&If(`index ${f}`,g),g}if(tpe.indexOf(u)>=0)return Reflect.get(c,u,l);const d=c[u];if(d instanceof Function)return function(...f){return d.apply(this===l?c:this,f)};if(!(u in c))return c.getValue.apply(this===l?c:this,[u])}return Reflect.get(c,u,l)}});return HN(a,lu(this)),a}toArray(e){const r=[];return this.forEach((n,s)=>{n instanceof Error&&If(`index ${s}`,n),e&&n instanceof Vo&&(n=n.toArray(e)),r.push(n)}),r}toObject(e){const r=lu(this);return r.reduce((n,s,i)=>(oe(s!=null,`value at index ${i} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),IC(r,this,e)),{})}slice(e,r){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const n=lu(this),s=[],i=[];for(let o=e;o<r;o++)s.push(this[o]),i.push(n[o]);return new Vo(jg,s,i)}filter(e,r){const n=lu(this),s=[],i=[];for(let o=0;o<this.length;o++){const a=this[o];a instanceof Error&&If(`index ${o}`,a),e.call(r,a,o,this)&&(s.push(a),i.push(n[o]))}return new Vo(jg,s,i)}map(e,r){const n=[];for(let s=0;s<this.length;s++){const i=this[s];i instanceof Error&&If(`index ${s}`,i),n.push(e.call(r,i,s,this))}return n}getValue(e){const r=lu(this).indexOf(e);if(r===-1)return;const n=this[r];return n instanceof Error&&If(`property ${JSON.stringify(e)}`,n.error),n}static fromItems(e,r){return new Vo(jg,e,r)}}function zN(t){let e=Cr(t);return oe(e.length<=vn,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:vn,offset:e.length}),e.length!==vn&&(e=wn(Qt([CC.slice(e.length%vn),e]))),e}class ia{name;type;localName;dynamic;constructor(e,r,n,s){ze(this,{name:e,type:r,localName:n,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,r){W(!1,e,this.localName,r)}}class SC{#e;#t;constructor(){this.#e=[],this.#t=0}get data(){return Qt(this.#e)}get length(){return this.#t}#r(e){return this.#e.push(e),this.#t+=e.length,e.length}appendWriter(e){return this.#r(wn(e.data))}writeBytes(e){let r=wn(e);const n=r.length%vn;return n&&(r=wn(Qt([r,CC.slice(n)]))),this.#r(r)}writeValue(e){return this.#r(zN(e))}writeUpdatableValue(){const e=this.#e.length;return this.#e.push(CC),this.#t+=vn,r=>{this.#e[e]=zN(r)}}}class ZI{allowLoose;#e;#t;#r;#n;#s;constructor(e,r,n){ze(this,{allowLoose:!!r}),this.#e=wn(e),this.#r=0,this.#n=null,this.#s=n??1024,this.#t=0}get data(){return Ee(this.#e)}get dataLength(){return this.#e.length}get consumed(){return this.#t}get bytes(){return new Uint8Array(this.#e)}#o(e){if(this.#n)return this.#n.#o(e);this.#r+=e,oe(this.#s<1||this.#r<=this.#s*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#s} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:wn(this.#e),offset:this.#t,length:e,info:{bytesRead:this.#r,dataLength:this.dataLength}})}#i(e,r,n){let s=Math.ceil(r/vn)*vn;return this.#t+s>this.#e.length&&(this.allowLoose&&n&&this.#t+r<=this.#e.length?s=r:oe(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:wn(this.#e),length:this.#e.length,offset:this.#t+s})),this.#e.slice(this.#t,this.#t+s)}subReader(e){const r=new ZI(this.#e.slice(this.#t+e),this.allowLoose,this.#s);return r.#n=this,r}readBytes(e,r){let n=this.#i(0,e,!!r);return this.#o(e),this.#t+=n.length,n.slice(0,e)}readValue(){return HE(this.readBytes(vn))}readIndex(){return khe(this.readBytes(vn))}}function iE(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function YI(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function rpe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");iE(t.outputLen),iE(t.blockLen)}function Nd(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function h9(t,e){YI(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const bA=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;const p9=t=>t instanceof Uint8Array,npe=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),wA=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),xi=(t,e)=>t<<32-e|t>>>e,spe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!spe)throw new Error("Non little-endian hardware is not supported");function ipe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function zE(t){if(typeof t=="string"&&(t=ipe(t)),!p9(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function ope(...t){const e=new Uint8Array(t.reduce((n,s)=>n+s.length,0));let r=0;return t.forEach(n=>{if(!p9(n))throw new Error("Uint8Array expected");e.set(n,r),r+=n.length}),e}let JI=class{clone(){return this._cloneInto()}};function QI(t){const e=n=>t().update(zE(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function ape(t=32){if(bA&&typeof bA.getRandomValues=="function")return bA.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class g9 extends JI{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,rpe(e);const n=zE(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Nd(this),this.iHash.update(e),this}digestInto(e){Nd(this),YI(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const m9=(t,e,r)=>new g9(t,e).update(r).digest();m9.create=(t,e)=>new g9(t,e);function cpe(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,u=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+u,a,n)}class y9 extends JI{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=wA(this.buffer)}update(e){Nd(this);const{view:r,buffer:n,blockLen:s}=this;e=zE(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=wA(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Nd(this),h9(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;cpe(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=wA(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)a.setUint32(4*d,l[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}}const upe=(t,e,r)=>t&e^~t&r,lpe=(t,e,r)=>t&e^t&r^e&r,dpe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ca=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ia=new Uint32Array(64);class fpe extends y9{constructor(){super(64,32,8,!1),this.A=Ca[0]|0,this.B=Ca[1]|0,this.C=Ca[2]|0,this.D=Ca[3]|0,this.E=Ca[4]|0,this.F=Ca[5]|0,this.G=Ca[6]|0,this.H=Ca[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,r,n,s,i,o,a,c]}set(e,r,n,s,i,o,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)Ia[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const f=Ia[d-15],g=Ia[d-2],p=xi(f,7)^xi(f,18)^f>>>3,h=xi(g,17)^xi(g,19)^g>>>10;Ia[d]=h+Ia[d-7]+p+Ia[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:l}=this;for(let d=0;d<64;d++){const f=xi(a,6)^xi(a,11)^xi(a,25),g=l+f+upe(a,c,u)+dpe[d]+Ia[d]|0,h=(xi(n,2)^xi(n,13)^xi(n,22))+lpe(n,s,i)|0;l=u,u=c,c=a,a=o+g|0,o=i,i=s,s=n,n=g+h|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,c,u,l)}roundClean(){Ia.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const b9=QI(()=>new fpe),Dg=BigInt(2**32-1),TC=BigInt(32);function w9(t,e=!1){return e?{h:Number(t&Dg),l:Number(t>>TC&Dg)}:{h:Number(t>>TC&Dg)|0,l:Number(t&Dg)|0}}function E9(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=w9(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const hpe=(t,e)=>BigInt(t>>>0)<<TC|BigInt(e>>>0),ppe=(t,e,r)=>t>>>r,gpe=(t,e,r)=>t<<32-r|e>>>r,mpe=(t,e,r)=>t>>>r|e<<32-r,ype=(t,e,r)=>t<<32-r|e>>>r,bpe=(t,e,r)=>t<<64-r|e>>>r-32,wpe=(t,e,r)=>t>>>r-32|e<<64-r,Epe=(t,e)=>e,vpe=(t,e)=>t,v9=(t,e,r)=>t<<r|e>>>32-r,_9=(t,e,r)=>e<<r|t>>>32-r,A9=(t,e,r)=>e<<r-32|t>>>64-r,C9=(t,e,r)=>t<<r-32|e>>>64-r;function _pe(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const Ape=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Cpe=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Ipe=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Spe=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,Tpe=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),Ppe=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,tt={fromBig:w9,split:E9,toBig:hpe,shrSH:ppe,shrSL:gpe,rotrSH:mpe,rotrSL:ype,rotrBH:bpe,rotrBL:wpe,rotr32H:Epe,rotr32L:vpe,rotlSH:v9,rotlSL:_9,rotlBH:A9,rotlBL:C9,add:_pe,add3L:Ape,add3H:Cpe,add4L:Ipe,add4H:Spe,add5H:Ppe,add5L:Tpe},[Npe,Ope]=tt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Sa=new Uint32Array(80),Ta=new Uint32Array(80);class Rpe extends y9{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:l,Fh:d,Fl:f,Gh:g,Gl:p,Hh:h,Hl:y}=this;return[e,r,n,s,i,o,a,c,u,l,d,f,g,p,h,y]}set(e,r,n,s,i,o,a,c,u,l,d,f,g,p,h,y){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=l|0,this.Fh=d|0,this.Fl=f|0,this.Gh=g|0,this.Gl=p|0,this.Hh=h|0,this.Hl=y|0}process(e,r){for(let w=0;w<16;w++,r+=4)Sa[w]=e.getUint32(r),Ta[w]=e.getUint32(r+=4);for(let w=16;w<80;w++){const m=Sa[w-15]|0,_=Ta[w-15]|0,C=tt.rotrSH(m,_,1)^tt.rotrSH(m,_,8)^tt.shrSH(m,_,7),I=tt.rotrSL(m,_,1)^tt.rotrSL(m,_,8)^tt.shrSL(m,_,7),P=Sa[w-2]|0,T=Ta[w-2]|0,R=tt.rotrSH(P,T,19)^tt.rotrBH(P,T,61)^tt.shrSH(P,T,6),U=tt.rotrSL(P,T,19)^tt.rotrBL(P,T,61)^tt.shrSL(P,T,6),k=tt.add4L(I,U,Ta[w-7],Ta[w-16]),O=tt.add4H(k,C,R,Sa[w-7],Sa[w-16]);Sa[w]=O|0,Ta[w]=k|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:l,Eh:d,El:f,Fh:g,Fl:p,Gh:h,Gl:y,Hh:b,Hl:E}=this;for(let w=0;w<80;w++){const m=tt.rotrSH(d,f,14)^tt.rotrSH(d,f,18)^tt.rotrBH(d,f,41),_=tt.rotrSL(d,f,14)^tt.rotrSL(d,f,18)^tt.rotrBL(d,f,41),C=d&g^~d&h,I=f&p^~f&y,P=tt.add5L(E,_,I,Ope[w],Ta[w]),T=tt.add5H(P,b,m,C,Npe[w],Sa[w]),R=P|0,U=tt.rotrSH(n,s,28)^tt.rotrBH(n,s,34)^tt.rotrBH(n,s,39),k=tt.rotrSL(n,s,28)^tt.rotrBL(n,s,34)^tt.rotrBL(n,s,39),O=n&i^n&a^i&a,B=s&o^s&c^o&c;b=h|0,E=y|0,h=g|0,y=p|0,g=d|0,p=f|0,{h:d,l:f}=tt.add(u|0,l|0,T|0,R|0),u=a|0,l=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const v=tt.add3L(R,k,B);n=tt.add3H(v,T,U,O),s=v|0}({h:n,l:s}=tt.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=tt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=tt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l}=tt.add(this.Dh|0,this.Dl|0,u|0,l|0),{h:d,l:f}=tt.add(this.Eh|0,this.El|0,d|0,f|0),{h:g,l:p}=tt.add(this.Fh|0,this.Fl|0,g|0,p|0),{h,l:y}=tt.add(this.Gh|0,this.Gl|0,h|0,y|0),{h:b,l:E}=tt.add(this.Hh|0,this.Hl|0,b|0,E|0),this.set(n,s,i,o,a,c,u,l,d,f,g,p,h,y,b,E)}roundClean(){Sa.fill(0),Ta.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const xpe=QI(()=>new Rpe);function kpe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const $N=kpe();$N.crypto||$N.msCrypto;function Bpe(t){switch(t){case"sha256":return b9.create();case"sha512":return xpe.create()}W(!1,"invalid hashing algorithm name","algorithm",t)}const[I9,S9,T9]=[[],[],[]],jpe=BigInt(0),Sf=BigInt(1),Dpe=BigInt(2),Upe=BigInt(7),Mpe=BigInt(256),Lpe=BigInt(113);for(let t=0,e=Sf,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],I9.push(2*(5*n+r)),S9.push((t+1)*(t+2)/2%64);let s=jpe;for(let i=0;i<7;i++)e=(e<<Sf^(e>>Upe)*Lpe)%Mpe,e&Dpe&&(s^=Sf<<(Sf<<BigInt(i))-Sf);T9.push(s)}const[Fpe,qpe]=E9(T9,!0),VN=(t,e,r)=>r>32?A9(t,e,r):v9(t,e,r),GN=(t,e,r)=>r>32?C9(t,e,r):_9(t,e,r);function Hpe(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=r[c],l=r[c+1],d=VN(u,l,1)^r[a],f=GN(u,l,1)^r[a+1];for(let g=0;g<50;g+=10)t[o+g]^=d,t[o+g+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=S9[o],c=VN(s,i,a),u=GN(s,i,a),l=I9[o];s=t[l],i=t[l+1],t[l]=c,t[l+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=Fpe[n],t[1]^=qpe[n]}r.fill(0)}class XI extends JI{constructor(e,r,n,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,iE(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=npe(this.state)}keccak(){Hpe(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Nd(this);const{blockLen:r,state:n}=this;e=zE(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Nd(this,!1),YI(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return iE(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(h9(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new XI(r,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const zpe=(t,e,r)=>QI(()=>new XI(e,t,r)),$pe=zpe(1,136,256/8);let P9=!1;const N9=function(t){return $pe(t)};let O9=N9;function Ar(t){const e=nt(t,"data");return Ee(O9(e))}Ar._=N9;Ar.lock=function(){P9=!0};Ar.register=function(t){if(P9)throw new TypeError("keccak256 is locked");O9=t};Object.freeze(Ar);const R9=function(t){return Bpe("sha256").update(t).digest()};let x9=R9,k9=!1;function zd(t){const e=nt(t,"data");return Ee(x9(e))}zd._=R9;zd.lock=function(){k9=!0};zd.register=function(t){if(k9)throw new Error("sha256 is locked");x9=t};Object.freeze(zd);Object.freeze(zd);const B9=BigInt(0),$E=BigInt(1),Vpe=BigInt(2),VE=t=>t instanceof Uint8Array,Gpe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Od(t){if(!VE(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=Gpe[t[r]];return e}function j9(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function eS(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Rd(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(e/2);for(let n=0;n<r.length;n++){const s=n*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");r[n]=o}return r}function Nu(t){return eS(Od(t))}function tS(t){if(!VE(t))throw new Error("Uint8Array expected");return eS(Od(Uint8Array.from(t).reverse()))}function xd(t,e){return Rd(t.toString(16).padStart(e*2,"0"))}function rS(t,e){return xd(t,e).reverse()}function Wpe(t){return Rd(j9(t))}function ii(t,e,r){let n;if(typeof e=="string")try{n=Rd(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(VE(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(`${t} expected ${r} bytes, got ${s}`);return n}function Vp(...t){const e=new Uint8Array(t.reduce((n,s)=>n+s.length,0));let r=0;return t.forEach(n=>{if(!VE(n))throw new Error("Uint8Array expected");e.set(n,r),r+=n.length}),e}function Kpe(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Zpe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Ype(t){let e;for(e=0;t>B9;t>>=$E,e+=1);return e}function Jpe(t,e){return t>>BigInt(e)&$E}const Qpe=(t,e,r)=>t|(r?$E:B9)<<BigInt(e),nS=t=>(Vpe<<BigInt(t-1))-$E,EA=t=>new Uint8Array(t),WN=t=>Uint8Array.from(t);function D9(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=EA(t),s=EA(t),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...d)=>r(s,n,...d),c=(d=EA())=>{s=a(WN([0]),d),n=a(),d.length!==0&&(s=a(WN([1]),d),n=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const f=[];for(;d<e;){n=a();const g=n.slice();f.push(g),d+=n.length}return Vp(...f)};return(d,f)=>{o(),c(d);let g;for(;!(g=f(u()));)c();return o(),g}}const Xpe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function w0(t,e,r={}){const n=(s,i,o)=>{const a=Xpe[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(r))n(s,i,!0);return t}const e0e=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Jpe,bitLen:Ype,bitMask:nS,bitSet:Qpe,bytesToHex:Od,bytesToNumberBE:Nu,bytesToNumberLE:tS,concatBytes:Vp,createHmacDrbg:D9,ensureBytes:ii,equalBytes:Kpe,hexToBytes:Rd,hexToNumber:eS,numberToBytesBE:xd,numberToBytesLE:rS,numberToHexUnpadded:j9,numberToVarBytesBE:Wpe,utf8ToBytes:Zpe,validateObject:w0},Symbol.toStringTag,{value:"Module"}));const Ur=BigInt(0),mr=BigInt(1),du=BigInt(2),t0e=BigInt(3),PC=BigInt(4),KN=BigInt(5),ZN=BigInt(8);BigInt(9);BigInt(16);function Hn(t,e){const r=t%e;return r>=Ur?r:e+r}function r0e(t,e,r){if(r<=Ur||e<Ur)throw new Error("Expected power/modulo > 0");if(r===mr)return Ur;let n=mr;for(;e>Ur;)e&mr&&(n=n*t%r),t=t*t%r,e>>=mr;return n}function Ps(t,e,r){let n=t;for(;e-- >Ur;)n*=n,n%=r;return n}function NC(t,e){if(t===Ur||e<=Ur)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=Hn(t,e),n=e,s=Ur,i=mr;for(;r!==Ur;){const a=n/r,c=n%r,u=s-i*a;n=r,r=c,s=i,i=u}if(n!==mr)throw new Error("invert: does not exist");return Hn(s,e)}function n0e(t){const e=(t-mr)/du;let r,n,s;for(r=t-mr,n=0;r%du===Ur;r/=du,n++);for(s=du;s<t&&r0e(s,e,t)!==t-mr;s++);if(n===1){const o=(t+mr)/PC;return function(c,u){const l=c.pow(u,o);if(!c.eql(c.sqr(l),u))throw new Error("Cannot find square root");return l}}const i=(r+mr)/du;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,l=a.pow(a.mul(a.ONE,s),r),d=a.pow(c,i),f=a.pow(c,r);for(;!a.eql(f,a.ONE);){if(a.eql(f,a.ZERO))return a.ZERO;let g=1;for(let h=a.sqr(f);g<u&&!a.eql(h,a.ONE);g++)h=a.sqr(h);const p=a.pow(l,mr<<BigInt(u-g-1));l=a.sqr(p),d=a.mul(d,p),f=a.mul(f,l),u=g}return d}}function s0e(t){if(t%PC===t0e){const e=(t+mr)/PC;return function(n,s){const i=n.pow(s,e);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%ZN===KN){const e=(t-KN)/ZN;return function(n,s){const i=n.mul(s,du),o=n.pow(i,e),a=n.mul(s,o),c=n.mul(n.mul(a,du),o),u=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),s))throw new Error("Cannot find square root");return u}}return n0e(t)}const i0e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function o0e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=i0e.reduce((n,s)=>(n[s]="function",n),e);return w0(t,r)}function a0e(t,e,r){if(r<Ur)throw new Error("Expected power > 0");if(r===Ur)return t.ONE;if(r===mr)return e;let n=t.ONE,s=e;for(;r>Ur;)r&mr&&(n=t.mul(n,s)),s=t.sqr(s),r>>=mr;return n}function c0e(t,e){const r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function U9(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function u0e(t,e,r=!1,n={}){if(t<=Ur)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=U9(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=s0e(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:nS(s),ZERO:Ur,ONE:mr,create:c=>Hn(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Ur<=c&&c<t},is0:c=>c===Ur,isOdd:c=>(c&mr)===mr,neg:c=>Hn(-c,t),eql:(c,u)=>c===u,sqr:c=>Hn(c*c,t),add:(c,u)=>Hn(c+u,t),sub:(c,u)=>Hn(c-u,t),mul:(c,u)=>Hn(c*u,t),pow:(c,u)=>a0e(a,c,u),div:(c,u)=>Hn(c*NC(u,t),t),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>NC(c,t),sqrt:n.sqrt||(c=>o(a,c)),invertBatch:c=>c0e(a,c),cmov:(c,u,l)=>l?u:c,toBytes:c=>r?rS(c,i):xd(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return r?tS(c):Nu(c)}});return Object.freeze(a)}function M9(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function L9(t){const e=M9(t);return e+Math.ceil(e/2)}function l0e(t,e,r=!1){const n=t.length,s=M9(e),i=L9(e);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const o=r?Nu(t):tS(t),a=Hn(o,e-mr)+mr;return r?rS(a,s):xd(a,s)}const d0e=BigInt(0),vA=BigInt(1);function f0e(t,e){const r=(s,i)=>{const o=i.negate();return s?o:i},n=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:r,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>d0e;)i&vA&&(o=o.add(a)),a=a.double(),i>>=vA;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=n(i),c=[];let u=s,l=u;for(let d=0;d<o;d++){l=u,c.push(l);for(let f=1;f<a;f++)l=l.add(u),c.push(l);u=l.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=n(s);let u=t.ZERO,l=t.BASE;const d=BigInt(2**s-1),f=2**s,g=BigInt(s);for(let p=0;p<a;p++){const h=p*c;let y=Number(o&d);o>>=g,y>c&&(y-=f,o+=vA);const b=h,E=h+Math.abs(y)-1,w=p%2!==0,m=y<0;y===0?l=l.add(r(w,i[b])):u=u.add(r(m,i[E]))}return{p:u,f:l}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let u=i.get(s);return u||(u=this.precomputeWindow(s,c),c!==1&&i.set(s,a(u))),this.wNAF(c,u,o)}}}function F9(t){return o0e(t.Fp),w0(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...U9(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function h0e(t){const e=F9(t);w0(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:p0e,hexToBytes:g0e}=e0e,_u={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=_u;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:p0e(n),l:t.subarray(r+2)}},toSig(t){const{Err:e}=_u,r=typeof t=="string"?g0e(t):t;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=_u._parseInt(r.subarray(2)),{d:o,l:a}=_u._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=u=>Number.parseInt(u[0],16)&8?"00"+u:u,r=u=>{const l=u.toString(16);return l.length&1?`0${l}`:l},n=e(r(t.s)),s=e(r(t.r)),i=n.length/2,o=s.length/2,a=r(i),c=r(o);return`30${r(o+i+4)}02${c}${s}02${a}${n}`}},qo=BigInt(0),js=BigInt(1);BigInt(2);const YN=BigInt(3);BigInt(4);function m0e(t){const e=h0e(t),{Fp:r}=e,n=e.toBytes||((p,h,y)=>{const b=h.toAffine();return Vp(Uint8Array.from([4]),r.toBytes(b.x),r.toBytes(b.y))}),s=e.fromBytes||(p=>{const h=p.subarray(1),y=r.fromBytes(h.subarray(0,r.BYTES)),b=r.fromBytes(h.subarray(r.BYTES,2*r.BYTES));return{x:y,y:b}});function i(p){const{a:h,b:y}=e,b=r.sqr(p),E=r.mul(b,p);return r.add(r.add(E,r.mul(p,h)),y)}if(!r.eql(r.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&qo<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:h,nByteLength:y,wrapPrivateKey:b,n:E}=e;if(h&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=Od(p)),typeof p!="string"||!h.includes(p.length))throw new Error("Invalid key");p=p.padStart(y*2,"0")}let w;try{w=typeof p=="bigint"?p:Nu(ii("private key",p,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof p}`)}return b&&(w=Hn(w,E)),a(w),w}const u=new Map;function l(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(h,y,b){if(this.px=h,this.py=y,this.pz=b,h==null||!r.isValid(h))throw new Error("x required");if(y==null||!r.isValid(y))throw new Error("y required");if(b==null||!r.isValid(b))throw new Error("z required")}static fromAffine(h){const{x:y,y:b}=h||{};if(!h||!r.isValid(y)||!r.isValid(b))throw new Error("invalid affine point");if(h instanceof d)throw new Error("projective point not allowed");const E=w=>r.eql(w,r.ZERO);return E(y)&&E(b)?d.ZERO:new d(y,b,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(h){const y=r.invertBatch(h.map(b=>b.pz));return h.map((b,E)=>b.toAffine(y[E])).map(d.fromAffine)}static fromHex(h){const y=d.fromAffine(s(ii("pointHex",h)));return y.assertValidity(),y}static fromPrivateKey(h){return d.BASE.multiply(c(h))}_setWindowSize(h){this._WINDOW_SIZE=h,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:h,y}=this.toAffine();if(!r.isValid(h)||!r.isValid(y))throw new Error("bad point: x or y not FE");const b=r.sqr(y),E=i(h);if(!r.eql(b,E))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:h}=this.toAffine();if(r.isOdd)return!r.isOdd(h);throw new Error("Field doesn't support isOdd")}equals(h){l(h);const{px:y,py:b,pz:E}=this,{px:w,py:m,pz:_}=h,C=r.eql(r.mul(y,_),r.mul(w,E)),I=r.eql(r.mul(b,_),r.mul(m,E));return C&&I}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){const{a:h,b:y}=e,b=r.mul(y,YN),{px:E,py:w,pz:m}=this;let _=r.ZERO,C=r.ZERO,I=r.ZERO,P=r.mul(E,E),T=r.mul(w,w),R=r.mul(m,m),U=r.mul(E,w);return U=r.add(U,U),I=r.mul(E,m),I=r.add(I,I),_=r.mul(h,I),C=r.mul(b,R),C=r.add(_,C),_=r.sub(T,C),C=r.add(T,C),C=r.mul(_,C),_=r.mul(U,_),I=r.mul(b,I),R=r.mul(h,R),U=r.sub(P,R),U=r.mul(h,U),U=r.add(U,I),I=r.add(P,P),P=r.add(I,P),P=r.add(P,R),P=r.mul(P,U),C=r.add(C,P),R=r.mul(w,m),R=r.add(R,R),P=r.mul(R,U),_=r.sub(_,P),I=r.mul(R,T),I=r.add(I,I),I=r.add(I,I),new d(_,C,I)}add(h){l(h);const{px:y,py:b,pz:E}=this,{px:w,py:m,pz:_}=h;let C=r.ZERO,I=r.ZERO,P=r.ZERO;const T=e.a,R=r.mul(e.b,YN);let U=r.mul(y,w),k=r.mul(b,m),O=r.mul(E,_),B=r.add(y,b),v=r.add(w,m);B=r.mul(B,v),v=r.add(U,k),B=r.sub(B,v),v=r.add(y,E);let A=r.add(w,_);return v=r.mul(v,A),A=r.add(U,O),v=r.sub(v,A),A=r.add(b,E),C=r.add(m,_),A=r.mul(A,C),C=r.add(k,O),A=r.sub(A,C),P=r.mul(T,v),C=r.mul(R,O),P=r.add(C,P),C=r.sub(k,P),P=r.add(k,P),I=r.mul(C,P),k=r.add(U,U),k=r.add(k,U),O=r.mul(T,O),v=r.mul(R,v),k=r.add(k,O),O=r.sub(U,O),O=r.mul(T,O),v=r.add(v,O),U=r.mul(k,v),I=r.add(I,U),U=r.mul(A,v),C=r.mul(B,C),C=r.sub(C,U),U=r.mul(B,k),P=r.mul(A,P),P=r.add(P,U),new d(C,I,P)}subtract(h){return this.add(h.negate())}is0(){return this.equals(d.ZERO)}wNAF(h){return g.wNAFCached(this,u,h,y=>{const b=r.invertBatch(y.map(E=>E.pz));return y.map((E,w)=>E.toAffine(b[w])).map(d.fromAffine)})}multiplyUnsafe(h){const y=d.ZERO;if(h===qo)return y;if(a(h),h===js)return this;const{endo:b}=e;if(!b)return g.unsafeLadder(this,h);let{k1neg:E,k1:w,k2neg:m,k2:_}=b.splitScalar(h),C=y,I=y,P=this;for(;w>qo||_>qo;)w&js&&(C=C.add(P)),_&js&&(I=I.add(P)),P=P.double(),w>>=js,_>>=js;return E&&(C=C.negate()),m&&(I=I.negate()),I=new d(r.mul(I.px,b.beta),I.py,I.pz),C.add(I)}multiply(h){a(h);let y=h,b,E;const{endo:w}=e;if(w){const{k1neg:m,k1:_,k2neg:C,k2:I}=w.splitScalar(y);let{p:P,f:T}=this.wNAF(_),{p:R,f:U}=this.wNAF(I);P=g.constTimeNegate(m,P),R=g.constTimeNegate(C,R),R=new d(r.mul(R.px,w.beta),R.py,R.pz),b=P.add(R),E=T.add(U)}else{const{p:m,f:_}=this.wNAF(y);b=m,E=_}return d.normalizeZ([b,E])[0]}multiplyAndAddUnsafe(h,y,b){const E=d.BASE,w=(_,C)=>C===qo||C===js||!_.equals(E)?_.multiplyUnsafe(C):_.multiply(C),m=w(this,y).add(w(h,b));return m.is0()?void 0:m}toAffine(h){const{px:y,py:b,pz:E}=this,w=this.is0();h==null&&(h=w?r.ONE:r.inv(E));const m=r.mul(y,h),_=r.mul(b,h),C=r.mul(E,h);if(w)return{x:r.ZERO,y:r.ZERO};if(!r.eql(C,r.ONE))throw new Error("invZ was invalid");return{x:m,y:_}}isTorsionFree(){const{h,isTorsionFree:y}=e;if(h===js)return!0;if(y)return y(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h,clearCofactor:y}=e;return h===js?this:y?y(d,this):this.multiplyUnsafe(e.h)}toRawBytes(h=!0){return this.assertValidity(),n(d,this,h)}toHex(h=!0){return Od(this.toRawBytes(h))}}d.BASE=new d(e.Gx,e.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);const f=e.nBitLength,g=f0e(d,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function y0e(t){const e=F9(t);return w0(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function b0e(t){const e=y0e(t),{Fp:r,n}=e,s=r.BYTES+1,i=2*r.BYTES+1;function o(v){return qo<v&&v<r.ORDER}function a(v){return Hn(v,n)}function c(v){return NC(v,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:l,weierstrassEquation:d,isWithinCurveOrder:f}=m0e({...e,toBytes(v,A,S){const j=A.toAffine(),N=r.toBytes(j.x),x=Vp;return S?x(Uint8Array.from([A.hasEvenY()?2:3]),N):x(Uint8Array.from([4]),N,r.toBytes(j.y))},fromBytes(v){const A=v.length,S=v[0],j=v.subarray(1);if(A===s&&(S===2||S===3)){const N=Nu(j);if(!o(N))throw new Error("Point is not on curve");const x=d(N);let D=r.sqrt(x);const M=(D&js)===js;return(S&1)===1!==M&&(D=r.neg(D)),{x:N,y:D}}else if(A===i&&S===4){const N=r.fromBytes(j.subarray(0,r.BYTES)),x=r.fromBytes(j.subarray(r.BYTES,2*r.BYTES));return{x:N,y:x}}else throw new Error(`Point of length ${A} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),g=v=>Od(xd(v,e.nByteLength));function p(v){const A=n>>js;return v>A}function h(v){return p(v)?a(-v):v}const y=(v,A,S)=>Nu(v.slice(A,S));class b{constructor(A,S,j){this.r=A,this.s=S,this.recovery=j,this.assertValidity()}static fromCompact(A){const S=e.nByteLength;return A=ii("compactSignature",A,S*2),new b(y(A,0,S),y(A,S,2*S))}static fromDER(A){const{r:S,s:j}=_u.toSig(ii("DER",A));return new b(S,j)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(A){return new b(this.r,this.s,A)}recoverPublicKey(A){const{r:S,s:j,recovery:N}=this,x=I(ii("msgHash",A));if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");const D=N===2||N===3?S+e.n:S;if(D>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const M=(N&1)===0?"02":"03",L=u.fromHex(M+g(D)),F=c(D),q=a(-x*F),$=a(j*F),V=u.BASE.multiplyAndAddUnsafe(L,q,$);if(!V)throw new Error("point at infinify");return V.assertValidity(),V}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Rd(this.toDERHex())}toDERHex(){return _u.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Rd(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const E={isValidPrivateKey(v){try{return l(v),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const v=L9(e.n);return l0e(e.randomBytes(v),e.n)},precompute(v=8,A=u.BASE){return A._setWindowSize(v),A.multiply(BigInt(3)),A}};function w(v,A=!0){return u.fromPrivateKey(v).toRawBytes(A)}function m(v){const A=v instanceof Uint8Array,S=typeof v=="string",j=(A||S)&&v.length;return A?j===s||j===i:S?j===2*s||j===2*i:v instanceof u}function _(v,A,S=!0){if(m(v))throw new Error("first arg must be private key");if(!m(A))throw new Error("second arg must be public key");return u.fromHex(A).multiply(l(v)).toRawBytes(S)}const C=e.bits2int||function(v){const A=Nu(v),S=v.length*8-e.nBitLength;return S>0?A>>BigInt(S):A},I=e.bits2int_modN||function(v){return a(C(v))},P=nS(e.nBitLength);function T(v){if(typeof v!="bigint")throw new Error("bigint expected");if(!(qo<=v&&v<P))throw new Error(`bigint expected < 2^${e.nBitLength}`);return xd(v,e.nByteLength)}function R(v,A,S=U){if(["recovered","canonical"].some(Y=>Y in S))throw new Error("sign() legacy options not supported");const{hash:j,randomBytes:N}=e;let{lowS:x,prehash:D,extraEntropy:M}=S;x==null&&(x=!0),v=ii("msgHash",v),D&&(v=ii("prehashed msgHash",j(v)));const L=I(v),F=l(A),q=[T(F),T(L)];if(M!=null){const Y=M===!0?N(r.BYTES):M;q.push(ii("extraEntropy",Y))}const $=Vp(...q),V=L;function J(Y){const Z=C(Y);if(!f(Z))return;const ee=c(Z),le=u.BASE.multiply(Z).toAffine(),X=a(le.x);if(X===qo)return;const se=a(ee*a(V+X*F));if(se===qo)return;let fe=(le.x===X?0:2)|Number(le.y&js),Oe=se;return x&&p(se)&&(Oe=h(se),fe^=1),new b(X,Oe,fe)}return{seed:$,k2sig:J}}const U={lowS:e.lowS,prehash:!1},k={lowS:e.lowS,prehash:!1};function O(v,A,S=U){const{seed:j,k2sig:N}=R(v,A,S),x=e;return D9(x.hash.outputLen,x.nByteLength,x.hmac)(j,N)}u.BASE._setWindowSize(8);function B(v,A,S,j=k){const N=v;if(A=ii("msgHash",A),S=ii("publicKey",S),"strict"in j)throw new Error("options.strict was renamed to lowS");const{lowS:x,prehash:D}=j;let M,L;try{if(typeof N=="string"||N instanceof Uint8Array)try{M=b.fromDER(N)}catch(le){if(!(le instanceof _u.Err))throw le;M=b.fromCompact(N)}else if(typeof N=="object"&&typeof N.r=="bigint"&&typeof N.s=="bigint"){const{r:le,s:X}=N;M=new b(le,X)}else throw new Error("PARSE");L=u.fromHex(S)}catch(le){if(le.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(x&&M.hasHighS())return!1;D&&(A=e.hash(A));const{r:F,s:q}=M,$=I(A),V=c(q),J=a($*V),Y=a(F*V),Z=u.BASE.multiplyAndAddUnsafe(L,J,Y)?.toAffine();return Z?a(Z.x)===F:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:_,sign:O,verify:B,ProjectivePoint:u,Signature:b,utils:E}}function w0e(t){return{hash:t,hmac:(e,...r)=>m9(t,e,ope(...r)),randomBytes:ape}}function E0e(t,e){const r=n=>b0e({...t,...w0e(n)});return Object.freeze({...r(e),create:r})}const q9=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),JN=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),v0e=BigInt(1),OC=BigInt(2),QN=(t,e)=>(t+e/OC)/e;function _0e(t){const e=q9,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,d=Ps(l,r,e)*l%e,f=Ps(d,r,e)*l%e,g=Ps(f,OC,e)*u%e,p=Ps(g,s,e)*g%e,h=Ps(p,i,e)*p%e,y=Ps(h,a,e)*h%e,b=Ps(y,c,e)*y%e,E=Ps(b,a,e)*h%e,w=Ps(E,r,e)*l%e,m=Ps(w,o,e)*p%e,_=Ps(m,n,e)*u%e,C=Ps(_,OC,e);if(!RC.eql(RC.sqr(C),t))throw new Error("Cannot find square root");return C}const RC=u0e(q9,void 0,void 0,{sqrt:_0e}),ja=E0e({a:BigInt(0),b:BigInt(7),Fp:RC,n:JN,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=JN,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-v0e*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),a=QN(i*t,e),c=QN(-n*t,e);let u=Hn(t-a*r-c*s,e),l=Hn(-a*n-c*i,e);const d=u>o,f=l>o;if(d&&(u=e-u),f&&(l=e-l),u>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:u,k2neg:f,k2:l}}}},b9);BigInt(0);ja.ProjectivePoint;const Gp="0x0000000000000000000000000000000000000000",XN="0x0000000000000000000000000000000000000000000000000000000000000000",eO=BigInt(0),tO=BigInt(1),xC=BigInt(2),rO=BigInt(27),nO=BigInt(28),Ug=BigInt(35),H9=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),A0e=H9/xC,C0e=Symbol.for("nodejs.util.inspect.custom"),jc={};function _A(t){return na(Cr(t),32)}let Us=class ti{#e;#t;#r;#n;get r(){return this.#e}set r(e){W(ud(e)===32,"invalid r","value",e),this.#e=Ee(e)}get s(){return W(parseInt(this.#t.substring(0,3))<8,"non-canonical s; use ._s","s",this.#t),this.#t}set s(e){W(ud(e)===32,"invalid s","value",e),this.#t=Ee(e)}get _s(){return this.#t}isValid(){return BigInt(this.#t)<=A0e}get v(){return this.#r}set v(e){const r=Je(e,"value");W(r===27||r===28,"invalid v","v",e),this.#r=r}get networkV(){return this.#n}get legacyChainId(){const e=this.networkV;return e==null?null:ti.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=nt(this.s);return this.yParity&&(e[0]|=128),Ee(e)}get compactSerialized(){return Qt([this.r,this.yParityAndS])}get serialized(){return Qt([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,r,n,s){m0(e,jc,"Signature"),this.#e=r,this.#t=n,this.#r=s,this.#n=null}getCanonical(){if(this.isValid())return this;const e=H9-BigInt(this._s),r=55-this.v,n=new ti(jc,this.r,_A(e),r);return this.networkV&&(n.#n=this.networkV),n}clone(){const e=new ti(jc,this.r,this._s,this.v);return this.networkV&&(e.#n=this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}[C0e](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){const r=Ne(e,"v");return r==rO||r==nO?eO:(W(r>=Ug,"invalid EIP-155 v","v",e),(r-Ug)/xC)}static getChainIdV(e,r){return Ne(e)*xC+BigInt(35+r-27)}static getNormalizedV(e){const r=Ne(e);return r===eO||r===rO?27:r===tO||r===nO?28:(W(r>=Ug,"invalid v","v",e),r&tO?27:28)}static from(e){function r(u,l){W(u,l,"signature",e)}if(e==null)return new ti(jc,XN,XN,27);if(typeof e=="string"){const u=nt(e,"signature");if(u.length===64){const l=Ee(u.slice(0,32)),d=u.slice(32,64),f=d[0]&128?28:27;return d[0]&=127,new ti(jc,l,Ee(d),f)}if(u.length===65){const l=Ee(u.slice(0,32)),d=Ee(u.slice(32,64)),f=ti.getNormalizedV(u[64]);return new ti(jc,l,d,f)}r(!1,"invalid raw signature length")}if(e instanceof ti)return e.clone();const n=e.r;r(n!=null,"missing r");const s=_A(n),i=(function(u,l){if(u!=null)return _A(u);if(l!=null){r(Mt(l,32),"invalid yParityAndS");const d=nt(l);return d[0]&=127,Ee(d)}r(!1,"missing s")})(e.s,e.yParityAndS),{networkV:o,v:a}=(function(u,l,d){if(u!=null){const f=Ne(u);return{networkV:f>=Ug?f:void 0,v:ti.getNormalizedV(f)}}if(l!=null)return r(Mt(l,32),"invalid yParityAndS"),{v:nt(l)[0]&128?28:27};if(d!=null){switch(Je(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}r(!1,"invalid yParity")}r(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),c=new ti(jc,s,i,a);return o&&(c.#n=o),r(e.yParity==null||Je(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),r(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};class Ho{#e;constructor(e){W(ud(e)===32,"invalid private key","privateKey","[REDACTED]"),this.#e=Ee(e)}get privateKey(){return this.#e}get publicKey(){return Ho.computePublicKey(this.#e)}get compressedPublicKey(){return Ho.computePublicKey(this.#e,!0)}sign(e){W(ud(e)===32,"invalid digest length","digest",e);const r=ja.sign(wn(e),wn(this.#e),{lowS:!0});return Us.from({r:tc(r.r,32),s:tc(r.s,32),v:r.recovery?28:27})}computeSharedSecret(e){const r=Ho.computePublicKey(e);return Ee(ja.getSharedSecret(wn(this.#e),nt(r),!1))}static computePublicKey(e,r){let n=nt(e,"key");if(n.length===32){const i=ja.getPublicKey(n,!!r);return Ee(i)}if(n.length===64){const i=new Uint8Array(65);i[0]=4,i.set(n,1),n=i}const s=ja.ProjectivePoint.fromHex(n);return Ee(s.toRawBytes(r))}static recoverPublicKey(e,r){W(ud(e)===32,"invalid digest length","digest",e);const n=Us.from(r);let s=ja.Signature.fromCompact(wn(Qt([n.r,n.s])));s=s.addRecoveryBit(n.yParity);const i=s.recoverPublicKey(wn(e));return W(i!=null,"invalid signature for digest","signature",r),"0x"+i.toHex(!1)}static addPoints(e,r,n){const s=ja.ProjectivePoint.fromHex(Ho.computePublicKey(e).substring(2)),i=ja.ProjectivePoint.fromHex(Ho.computePublicKey(r).substring(2));return"0x"+s.add(i).toHex(!!n)}}const I0e=BigInt(0),S0e=BigInt(36);function sO(t){t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let s=0;s<40;s++)r[s]=e[s].charCodeAt(0);const n=nt(Ar(r));for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(n[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const sS={};for(let t=0;t<10;t++)sS[String(t)]=String(t);for(let t=0;t<26;t++)sS[String.fromCharCode(65+t)]=String(10+t);const iO=15;function T0e(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>sS[n]).join("");for(;e.length>=iO;){let n=e.substring(0,iO);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}const P0e=(function(){const t={};for(let e=0;e<36;e++){const r="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[r]=BigInt(e)}return t})();function N0e(t){t=t.toLowerCase();let e=I0e;for(let r=0;r<t.length;r++)e=e*S0e+P0e[t[r]];return e}function St(t){if(W(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=sO(t);return W(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){W(t.substring(2,4)===T0e(t),"bad icap checksum","address",t);let e=N0e(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return sO("0x"+e)}W(!1,"invalid address","address",t)}function O0e(t){const e=St(t.from);let n=Ne(t.nonce,"tx.nonce").toString(16);return n==="0"?n="0x":n.length%2?n="0x0"+n:n="0x"+n,St(lr(Ar(Jo([e,n])),12))}function z9(t){return t&&typeof t.getAddress=="function"}async function AA(t,e){const r=await e;return(r==null||r==="0x0000000000000000000000000000000000000000")&&(oe(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),W(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),St(r)}function _n(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?St(t):(oe(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),AA(t,e.resolveName(t)));if(z9(t))return AA(t,t.getAddress());if(t&&typeof t.then=="function")return AA(t,t);W(!1,"unsupported addressable value","target",t)}const jo={};function Te(t,e){let r=!1;return e<0&&(r=!0,e*=-1),new dr(jo,`${r?"":"u"}int${e}`,t,{signed:r,width:e})}function _t(t,e){return new dr(jo,`bytes${e||""}`,t,{size:e})}const oO=Symbol.for("_ethers_typed");class dr{type;value;#e;_typedSymbol;constructor(e,r,n,s){s==null&&(s=null),m0(jo,e,"Typed"),ze(this,{_typedSymbol:oO,type:r,value:n}),this.#e=s,this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return this.#e}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return this.#e===!0?-1:this.#e===!1?this.value.length:null}static from(e,r){return new dr(jo,e,r)}static uint8(e){return Te(e,8)}static uint16(e){return Te(e,16)}static uint24(e){return Te(e,24)}static uint32(e){return Te(e,32)}static uint40(e){return Te(e,40)}static uint48(e){return Te(e,48)}static uint56(e){return Te(e,56)}static uint64(e){return Te(e,64)}static uint72(e){return Te(e,72)}static uint80(e){return Te(e,80)}static uint88(e){return Te(e,88)}static uint96(e){return Te(e,96)}static uint104(e){return Te(e,104)}static uint112(e){return Te(e,112)}static uint120(e){return Te(e,120)}static uint128(e){return Te(e,128)}static uint136(e){return Te(e,136)}static uint144(e){return Te(e,144)}static uint152(e){return Te(e,152)}static uint160(e){return Te(e,160)}static uint168(e){return Te(e,168)}static uint176(e){return Te(e,176)}static uint184(e){return Te(e,184)}static uint192(e){return Te(e,192)}static uint200(e){return Te(e,200)}static uint208(e){return Te(e,208)}static uint216(e){return Te(e,216)}static uint224(e){return Te(e,224)}static uint232(e){return Te(e,232)}static uint240(e){return Te(e,240)}static uint248(e){return Te(e,248)}static uint256(e){return Te(e,256)}static uint(e){return Te(e,256)}static int8(e){return Te(e,-8)}static int16(e){return Te(e,-16)}static int24(e){return Te(e,-24)}static int32(e){return Te(e,-32)}static int40(e){return Te(e,-40)}static int48(e){return Te(e,-48)}static int56(e){return Te(e,-56)}static int64(e){return Te(e,-64)}static int72(e){return Te(e,-72)}static int80(e){return Te(e,-80)}static int88(e){return Te(e,-88)}static int96(e){return Te(e,-96)}static int104(e){return Te(e,-104)}static int112(e){return Te(e,-112)}static int120(e){return Te(e,-120)}static int128(e){return Te(e,-128)}static int136(e){return Te(e,-136)}static int144(e){return Te(e,-144)}static int152(e){return Te(e,-152)}static int160(e){return Te(e,-160)}static int168(e){return Te(e,-168)}static int176(e){return Te(e,-176)}static int184(e){return Te(e,-184)}static int192(e){return Te(e,-192)}static int200(e){return Te(e,-200)}static int208(e){return Te(e,-208)}static int216(e){return Te(e,-216)}static int224(e){return Te(e,-224)}static int232(e){return Te(e,-232)}static int240(e){return Te(e,-240)}static int248(e){return Te(e,-248)}static int256(e){return Te(e,-256)}static int(e){return Te(e,-256)}static bytes1(e){return _t(e,1)}static bytes2(e){return _t(e,2)}static bytes3(e){return _t(e,3)}static bytes4(e){return _t(e,4)}static bytes5(e){return _t(e,5)}static bytes6(e){return _t(e,6)}static bytes7(e){return _t(e,7)}static bytes8(e){return _t(e,8)}static bytes9(e){return _t(e,9)}static bytes10(e){return _t(e,10)}static bytes11(e){return _t(e,11)}static bytes12(e){return _t(e,12)}static bytes13(e){return _t(e,13)}static bytes14(e){return _t(e,14)}static bytes15(e){return _t(e,15)}static bytes16(e){return _t(e,16)}static bytes17(e){return _t(e,17)}static bytes18(e){return _t(e,18)}static bytes19(e){return _t(e,19)}static bytes20(e){return _t(e,20)}static bytes21(e){return _t(e,21)}static bytes22(e){return _t(e,22)}static bytes23(e){return _t(e,23)}static bytes24(e){return _t(e,24)}static bytes25(e){return _t(e,25)}static bytes26(e){return _t(e,26)}static bytes27(e){return _t(e,27)}static bytes28(e){return _t(e,28)}static bytes29(e){return _t(e,29)}static bytes30(e){return _t(e,30)}static bytes31(e){return _t(e,31)}static bytes32(e){return _t(e,32)}static address(e){return new dr(jo,"address",e)}static bool(e){return new dr(jo,"bool",!!e)}static bytes(e){return new dr(jo,"bytes",e)}static string(e){return new dr(jo,"string",e)}static array(e,r){throw new Error("not implemented yet")}static tuple(e,r){throw new Error("not implemented yet")}static overrides(e){return new dr(jo,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===oO}static dereference(e,r){if(dr.isTyped(e)){if(e.type!==r)throw new Error(`invalid type: expecetd ${r}, got ${e.type}`);return e.value}return e}}class R0e extends ia{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,r){let n=dr.dereference(r,"string");try{n=St(n)}catch(s){return this._throwError(s.message,r)}return e.writeValue(n)}decode(e){return St(tc(e.readValue(),20))}}class x0e extends ia{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,r){return this.coder.encode(e,r)}decode(e){return this.coder.decode(e)}}function $9(t,e,r){let n=[];if(Array.isArray(r))n=r;else if(r&&typeof r=="object"){let c={};n=e.map(u=>{const l=u.localName;return oe(l,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:r}),oe(!c[l],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:r}),c[l]=!0,r[l]})}else W(!1,"invalid tuple value","tuple",r);W(e.length===n.length,"types/value length mismatch","tuple",r);let s=new SC,i=new SC,o=[];e.forEach((c,u)=>{let l=n[u];if(c.dynamic){let d=i.length;c.encode(i,l);let f=s.writeUpdatableValue();o.push(g=>{f(g+d)})}else c.encode(s,l)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function V9(t,e){let r=[],n=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(u){if(Gr(u,"BUFFER_OVERRUN"))throw u;o=u,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(Gr(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");r.push(o),n.push(i.localName||null)}),Vo.fromItems(r,n)}class k0e extends ia{coder;length;constructor(e,r,n){const s=e.type+"["+(r>=0?r:"")+"]",i=r===-1||e.dynamic;super("array",s,n,i),ze(this,{coder:e,length:r})}defaultValue(){const e=this.coder.defaultValue(),r=[];for(let n=0;n<this.length;n++)r.push(e);return r}encode(e,r){const n=dr.dereference(r,"array");Array.isArray(n)||this._throwError("expected array value",n);let s=this.length;s===-1&&(s=n.length,e.writeValue(n.length)),QL(n.length,s,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let o=0;o<n.length;o++)i.push(this.coder);return $9(e,i,n)}decode(e){let r=this.length;r===-1&&(r=e.readIndex(),oe(r*vn<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:r*vn,length:e.dataLength}));let n=[];for(let s=0;s<r;s++)n.push(new x0e(this.coder));return V9(e,n)}}class B0e extends ia{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,r){const n=dr.dereference(r,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}}class G9 extends ia{constructor(e,r){super(e,e,r,!0)}defaultValue(){return"0x"}encode(e,r){r=wn(r);let n=e.writeValue(r.length);return n+=e.writeBytes(r),n}decode(e){return e.readBytes(e.readIndex(),!0)}}class j0e extends G9{constructor(e){super("bytes",e)}decode(e){return Ee(super.decode(e))}}class D0e extends ia{size;constructor(e,r){let n="bytes"+String(e);super(n,n,r,!1),ze(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,r){let n=wn(dr.dereference(r,this.type));return n.length!==this.size&&this._throwError("incorrect data length",r),e.writeBytes(n)}decode(e){return Ee(e.readBytes(this.size))}}const U0e=new Uint8Array([]);class M0e extends ia{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,r){return r!=null&&this._throwError("not null",r),e.writeBytes(U0e)}decode(e){return e.readBytes(0),null}}const L0e=BigInt(0),F0e=BigInt(1),q0e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class H0e extends ia{size;signed;constructor(e,r,n){const s=(r?"int":"uint")+e*8;super(s,s,n,!1),ze(this,{size:e,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,r){let n=Ne(dr.dereference(r,this.type)),s=vu(q0e,vn*8);if(this.signed){let i=vu(s,this.size*8-1);(n>i||n<-(i+F0e))&&this._throwError("value out-of-bounds",r),n=t9(n,8*vn)}else(n<L0e||n>vu(s,this.size*8))&&this._throwError("value out-of-bounds",r);return e.writeValue(n)}decode(e){let r=vu(e.readValue(),this.size*8);return this.signed&&(r=nE(r,this.size*8)),r}}class z0e extends G9{constructor(e){super("string",e)}defaultValue(){return""}encode(e,r){return super.encode(e,Yi(dr.dereference(r,"string")))}decode(e){return sE(super.decode(e))}}class Mg extends ia{coders;constructor(e,r){let n=!1;const s=[];e.forEach(o=>{o.dynamic&&(n=!0),s.push(o.type)});const i="tuple("+s.join(",")+")";super("tuple",i,r,n),ze(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const r=this.coders.reduce((n,s)=>{const i=s.localName;return i&&(n[i]||(n[i]=0),n[i]++),n},{});return this.coders.forEach((n,s)=>{let i=n.localName;!i||r[i]!==1||(i==="length"&&(i="_length"),e[i]==null&&(e[i]=e[s]))}),Object.freeze(e)}encode(e,r){const n=dr.dereference(r,"tuple");return $9(e,this.coders,n)}decode(e){return V9(e,this.coders)}}function CA(t,e){return{address:St(t),storageKeys:e.map((r,n)=>(W(Mt(r,32),"invalid slot",`storageKeys[${n}]`,r),r.toLowerCase()))}}function Xu(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(W(r.length===2,"invalid slot set",`value[${n}]`,r),CA(r[0],r[1])):(W(r!=null&&typeof r=="object","invalid address-slot set","value",t),CA(r.address,r.storageKeys)));W(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(r=>{const n=t[r].reduce((s,i)=>(s[i]=!0,s),{});return CA(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function W9(t){return{address:St(t.address),nonce:Ne(t.nonce!=null?t.nonce:0),chainId:Ne(t.chainId!=null?t.chainId:0),signature:Us.from(t.signature)}}function $0e(t){let e;return typeof t=="string"?e=Ho.computePublicKey(t,!1):e=t.publicKey,St(Ar("0x"+e.substring(4)).substring(26))}function V0e(t,e){return $0e(Ho.recoverPublicKey(t,e))}const Br=BigInt(0),G0e=BigInt(2),W0e=BigInt(27),K0e=BigInt(28),Z0e=BigInt(35),Y0e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),J0e=Symbol.for("nodejs.util.inspect.custom"),IA=4096*32,y1=128;function Q0e(t){return{blobToKzgCommitment:n=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return nt(t.blobToKzgCommitment(Ee(n)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return nt(t.blobToKzgCommitment(n));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return nt(t.blobToKZGCommitment(Ee(n)));W(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(n,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return nt(t.computeBlobProof(Ee(n),Ee(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(n,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return nt(t.computeBlobKZGProof(Ee(n),Ee(s)));W(!1,"unsupported KZG library","kzg",t)}}}function aO(t,e){let r=t.toString(16);for(;r.length<2;)r="0"+r;return r+=zd(e).substring(4),"0x"+r}function $d(t){return t==="0x"?null:St(t)}function GE(t,e){try{return Xu(t)}catch(r){W(!1,r.message,e,t)}}function X0e(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const r=[];for(let n=0;n<t.length;n++){const s=t[n];if(!Array.isArray(s))throw new Error(`authorization[${n}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${n}]: wrong length`);if(!s[1])throw new Error(`authorization[${n}]: null address`);r.push({address:$d(s[1]),nonce:xt(s[2],"nonce"),chainId:xt(s[0],"chainId"),signature:Us.from({yParity:el(s[3],"yParity"),r:na(s[4],32),s:na(s[5],32)})})}return r}catch(r){W(!1,r.message,e,t)}}function el(t,e){return t==="0x"?0:Je(t,e)}function xt(t,e){if(t==="0x")return Br;const r=Ne(t,e);return W(r<=Y0e,"value exceeds uint size",e,r),r}function ht(t,e){const r=Ne(t,"value"),n=Cr(r);return W(n.length<=32,"value too large",`tx.${e}`,r),n}function WE(t){return Xu(t).map(e=>[e.address,e.storageKeys])}function ege(t){return t.map(e=>[ht(e.chainId,"chainId"),e.address,ht(e.nonce,"nonce"),ht(e.signature.yParity,"yParity"),Cr(e.signature.r),Cr(e.signature._s)])}function tge(t,e){W(Array.isArray(t),`invalid ${e}`,"value",t);for(let r=0;r<t.length;r++)W(Mt(t[r],32),"invalid ${ param } hash",`value[${r}]`,t[r]);return t}function rge(t){const e=b0(t);W(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const r={type:0,nonce:el(e[0],"nonce"),gasPrice:xt(e[1],"gasPrice"),gasLimit:xt(e[2],"gasLimit"),to:$d(e[3]),value:xt(e[4],"value"),data:Ee(e[5]),chainId:Br};if(e.length===6)return r;const n=xt(e[6],"v"),s=xt(e[7],"r"),i=xt(e[8],"s");if(s===Br&&i===Br)r.chainId=n;else{let o=(n-Z0e)/G0e;o<Br&&(o=Br),r.chainId=o,W(o!==Br||n===W0e||n===K0e,"non-canonical legacy v","v",e[6]),r.signature=Us.from({r:na(e[7],32),s:na(e[8],32),v:n})}return r}function nge(t,e){const r=[ht(t.nonce,"nonce"),ht(t.gasPrice||0,"gasPrice"),ht(t.gasLimit,"gasLimit"),t.to||"0x",ht(t.value,"value"),t.data];let n=Br;if(t.chainId!=Br)n=Ne(t.chainId,"tx.chainId"),W(!e||e.networkV==null||e.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(n=i)}if(!e)return n!==Br&&(r.push(Cr(n)),r.push("0x"),r.push("0x")),Jo(r);let s=BigInt(27+e.yParity);return n!==Br?s=Us.getChainIdV(n,e.v):BigInt(e.v)!==s&&W(!1,"tx.chainId/sig.v mismatch","sig",e),r.push(Cr(s)),r.push(Cr(e.r)),r.push(Cr(e._s)),Jo(r)}function KE(t,e){let r;try{if(r=el(e[0],"yParity"),r!==0&&r!==1)throw new Error("bad yParity")}catch{W(!1,"invalid yParity","yParity",e[0])}const n=na(e[1],32),s=na(e[2],32),i=Us.from({r:n,s,yParity:r});t.signature=i}function sge(t){const e=b0(nt(t).slice(1));W(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Ee(t));const r={type:2,chainId:xt(e[0],"chainId"),nonce:el(e[1],"nonce"),maxPriorityFeePerGas:xt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:xt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:xt(e[4],"gasLimit"),to:$d(e[5]),value:xt(e[6],"value"),data:Ee(e[7]),accessList:GE(e[8],"accessList")};return e.length===9||KE(r,e.slice(9)),r}function ige(t,e){const r=[ht(t.chainId,"chainId"),ht(t.nonce,"nonce"),ht(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ht(t.maxFeePerGas||0,"maxFeePerGas"),ht(t.gasLimit,"gasLimit"),t.to||"0x",ht(t.value,"value"),t.data,WE(t.accessList||[])];return e&&(r.push(ht(e.yParity,"yParity")),r.push(Cr(e.r)),r.push(Cr(e.s))),Qt(["0x02",Jo(r)])}function oge(t){const e=b0(nt(t).slice(1));W(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Ee(t));const r={type:1,chainId:xt(e[0],"chainId"),nonce:el(e[1],"nonce"),gasPrice:xt(e[2],"gasPrice"),gasLimit:xt(e[3],"gasLimit"),to:$d(e[4]),value:xt(e[5],"value"),data:Ee(e[6]),accessList:GE(e[7],"accessList")};return e.length===8||KE(r,e.slice(8)),r}function age(t,e){const r=[ht(t.chainId,"chainId"),ht(t.nonce,"nonce"),ht(t.gasPrice||0,"gasPrice"),ht(t.gasLimit,"gasLimit"),t.to||"0x",ht(t.value,"value"),t.data,WE(t.accessList||[])];return e&&(r.push(ht(e.yParity,"recoveryParam")),r.push(Cr(e.r)),r.push(Cr(e.s))),Qt(["0x01",Jo(r)])}function cge(t){let e=b0(nt(t).slice(1)),r="3",n=null,s=null;if(e.length===4&&Array.isArray(e[0])){r="3 (network format)";const o=e[1],a=e[2],c=e[3];W(Array.isArray(o),"invalid network format: blobs not an array","fields[1]",o),W(Array.isArray(a),"invalid network format: commitments not an array","fields[2]",a),W(Array.isArray(c),"invalid network format: proofs not an array","fields[3]",c),W(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),W(o.length===c.length,"invalid network format: blobs/proofs length mismatch","fields",e),s=[];for(let u=0;u<e[1].length;u++)s.push({data:o[u],commitment:a[u],proof:c[u]});e=e[0]}else if(e.length===5&&Array.isArray(e[0])){r="3 (EIP-7594 network format)",n=Je(e[1]);const o=e[2],a=e[3],c=e[4];W(n===1,`unsupported EIP-7594 network format version: ${n}`,"fields[1]",n),W(Array.isArray(o),"invalid EIP-7594 network format: blobs not an array","fields[2]",o),W(Array.isArray(a),"invalid EIP-7594 network format: commitments not an array","fields[3]",a),W(Array.isArray(c),"invalid EIP-7594 network format: proofs not an array","fields[4]",c),W(o.length===a.length,"invalid network format: blobs/commitments length mismatch","fields",e),W(o.length*y1===c.length,"invalid network format: blobs/proofs length mismatch","fields",e),s=[];for(let u=0;u<o.length;u++){const l=[];for(let d=0;d<y1;d++)l.push(c[u*y1+d]);s.push({data:o[u],commitment:a[u],proof:Qt(l)})}e=e[0]}W(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${r}`,"data",Ee(t));const i={type:3,chainId:xt(e[0],"chainId"),nonce:el(e[1],"nonce"),maxPriorityFeePerGas:xt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:xt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:xt(e[4],"gasLimit"),to:$d(e[5]),value:xt(e[6],"value"),data:Ee(e[7]),accessList:GE(e[8],"accessList"),maxFeePerBlobGas:xt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10],blobWrapperVersion:n};s&&(i.blobs=s),W(i.to!=null,`invalid address for transaction type: ${r}`,"data",t),W(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let o=0;o<i.blobVersionedHashes.length;o++)W(Mt(i.blobVersionedHashes[o],32),`invalid blobVersionedHash at index ${o}: must be length 32`,"data",t);return e.length===11||KE(i,e.slice(11)),i}function uge(t,e,r){const n=[ht(t.chainId,"chainId"),ht(t.nonce,"nonce"),ht(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ht(t.maxFeePerGas||0,"maxFeePerGas"),ht(t.gasLimit,"gasLimit"),t.to||Gp,ht(t.value,"value"),t.data,WE(t.accessList||[]),ht(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),tge(t.blobVersionedHashes||[],"blobVersionedHashes")];if(e&&(n.push(ht(e.yParity,"yParity")),n.push(Cr(e.r)),n.push(Cr(e.s)),r)){if(t.blobWrapperVersion!=null){const s=Cr(t.blobWrapperVersion),i=[];for(const{proof:o}of r){const a=nt(o),c=a.length/y1;for(let u=0;u<a.length;u+=c)i.push(a.subarray(u,u+c))}return Qt(["0x03",Jo([n,s,r.map(o=>o.data),r.map(o=>o.commitment),i])])}return Qt(["0x03",Jo([n,r.map(s=>s.data),r.map(s=>s.commitment),r.map(s=>s.proof)])])}return Qt(["0x03",Jo(n)])}function lge(t){const e=b0(nt(t).slice(1));W(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Ee(t));const r={type:4,chainId:xt(e[0],"chainId"),nonce:el(e[1],"nonce"),maxPriorityFeePerGas:xt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:xt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:xt(e[4],"gasLimit"),to:$d(e[5]),value:xt(e[6],"value"),data:Ee(e[7]),accessList:GE(e[8],"accessList"),authorizationList:X0e(e[9],"authorizationList")};return e.length===10||KE(r,e.slice(10)),r}function dge(t,e){const r=[ht(t.chainId,"chainId"),ht(t.nonce,"nonce"),ht(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ht(t.maxFeePerGas||0,"maxFeePerGas"),ht(t.gasLimit,"gasLimit"),t.to||"0x",ht(t.value,"value"),t.data,WE(t.accessList||[]),ege(t.authorizationList||[])];return e&&(r.push(ht(e.yParity,"yParity")),r.push(Cr(e.r)),r.push(Cr(e.s))),Qt(["0x04",Jo(r)])}class oi{#e;#t;#r;#n;#s;#o;#i;#a;#d;#u;#p;#g;#c;#l;#f;#h;#b;#m;get type(){return this.#e}set type(e){switch(e){case null:this.#e=null;break;case 0:case"legacy":this.#e=0;break;case 1:case"berlin":case"eip-2930":this.#e=1;break;case 2:case"london":case"eip-1559":this.#e=2;break;case 3:case"cancun":case"eip-4844":this.#e=3;break;case 4:case"pectra":case"eip-7702":this.#e=4;break;default:W(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=this.#t;return e==null&&this.type===3?Gp:e}set to(e){this.#t=e==null?null:St(e)}get nonce(){return this.#n}set nonce(e){this.#n=Je(e,"value")}get gasLimit(){return this.#s}set gasLimit(e){this.#s=Ne(e)}get gasPrice(){const e=this.#o;return e==null&&(this.type===0||this.type===1)?Br:e}set gasPrice(e){this.#o=e==null?null:Ne(e,"gasPrice")}get maxPriorityFeePerGas(){const e=this.#i;return e??(this.type===2||this.type===3?Br:null)}set maxPriorityFeePerGas(e){this.#i=e==null?null:Ne(e,"maxPriorityFeePerGas")}get maxFeePerGas(){const e=this.#a;return e??(this.type===2||this.type===3?Br:null)}set maxFeePerGas(e){this.#a=e==null?null:Ne(e,"maxFeePerGas")}get data(){return this.#r}set data(e){this.#r=Ee(e)}get value(){return this.#d}set value(e){this.#d=Ne(e,"value")}get chainId(){return this.#u}set chainId(e){this.#u=Ne(e)}get signature(){return this.#p||null}set signature(e){this.#p=e==null?null:Us.from(e)}isValid(){const e=this.signature;if(e&&!e.isValid())return!1;const r=this.authorizationList;if(r){for(const n of r)if(!n.signature.isValid())return!1}return!0}get accessList(){const e=this.#g||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){this.#g=e==null?null:Xu(e)}get authorizationList(){const e=this.#b||null;return e==null&&this.type===4?[]:e}set authorizationList(e){this.#b=e==null?null:e.map(r=>W9(r))}get maxFeePerBlobGas(){const e=this.#c;return e==null&&this.type===3?Br:e}set maxFeePerBlobGas(e){this.#c=e==null?null:Ne(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#l;return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){W(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let r=0;r<e.length;r++)W(Mt(e[r],32),"invalid blobVersionedHash",`value[${r}]`,e[r])}this.#l=e}get blobs(){return this.#h==null?null:this.#h.map(e=>Object.assign({},e))}set blobs(e){if(e==null){this.#h=null;return}const r=[],n=[];for(let s=0;s<e.length;s++){const i=e[s];if(KI(i)){oe(this.#f,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=nt(i);if(W(o.length<=IA,"blob is too large",`blobs[${s}]`,i),o.length!==IA){const u=new Uint8Array(IA);u.set(o),o=u}const a=this.#f.blobToKzgCommitment(o),c=Ee(this.#f.computeBlobKzgProof(o,a));r.push({data:Ee(o),commitment:Ee(a),proof:c}),n.push(aO(1,a))}else{const o=Ee(i.data),a=Ee(i.commitment),c=Ee(i.proof);r.push({data:o,commitment:a,proof:c}),n.push(aO(1,a))}}this.#h=r,this.#l=n}get kzg(){return this.#f}set kzg(e){e==null?this.#f=null:this.#f=Q0e(e)}get blobWrapperVersion(){return this.#m}set blobWrapperVersion(e){this.#m=e}constructor(){this.#e=null,this.#t=null,this.#n=0,this.#s=Br,this.#o=null,this.#i=null,this.#a=null,this.#r="0x",this.#d=Br,this.#u=Br,this.#p=null,this.#g=null,this.#c=null,this.#l=null,this.#f=null,this.#h=null,this.#b=null,this.#m=null}get hash(){return this.signature==null?null:Ar(this.#y(!0,!1))}get unsignedHash(){return Ar(this.unsignedSerialized)}get from(){return this.signature==null?null:V0e(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){return this.signature==null?null:Ho.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}#y(e,r){oe(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=e?this.signature:null;switch(this.inferType()){case 0:return nge(this,n);case 1:return age(this,n);case 2:return ige(this,n);case 3:return uge(this,n,r?this.blobs:null);case 4:return dge(this,n)}oe(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#y(!0,!0)}get unsignedSerialized(){return this.#y(!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,r=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,s=this.#c!=null||this.#l;this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&oe(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),oe(!r||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),oe(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):r?i.push(2):e?(i.push(1),n||i.push(0)):n?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return oi.from(this)}toJSON(){const e=r=>r==null?null:r.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[J0e](){return this.toString()}toString(){const e=[],r=s=>{let i=this[s];typeof i=="string"&&(i=JSON.stringify(i)),e.push(`${s}: ${i}`)};this.type&&r("type"),r("to"),r("data"),r("nonce"),r("gasLimit"),r("value"),this.chainId!=null&&r("chainId"),this.signature&&(r("from"),e.push(`signature: ${this.signature.toString()}`));const n=this.authorizationList;if(n){const s=[];for(const i of n){const o=[];o.push(`address: ${JSON.stringify(i.address)}`),i.nonce!=null&&o.push(`nonce: ${i.nonce}`),i.chainId!=null&&o.push(`chainId: ${i.chainId}`),i.signature&&o.push(`signature: ${i.signature.toString()}`),s.push(`Authorization { ${o.join(", ")} }`)}e.push(`authorizations: [ ${s.join(", ")} ]`)}return`Transaction { ${e.join(", ")} }`}static from(e){if(e==null)return new oi;if(typeof e=="string"){const n=nt(e);if(n[0]>=127)return oi.from(rge(n));switch(n[0]){case 1:return oi.from(oge(n));case 2:return oi.from(sge(n));case 3:return oi.from(cge(n));case 4:return oi.from(lge(n))}oe(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const r=new oi;return e.type!=null&&(r.type=e.type),e.to!=null&&(r.to=e.to),e.nonce!=null&&(r.nonce=e.nonce),e.gasLimit!=null&&(r.gasLimit=e.gasLimit),e.gasPrice!=null&&(r.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(r.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(r.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(r.data=e.data),e.value!=null&&(r.value=e.value),e.chainId!=null&&(r.chainId=e.chainId),e.signature!=null&&(r.signature=Us.from(e.signature)),e.accessList!=null&&(r.accessList=e.accessList),e.authorizationList!=null&&(r.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(r.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(r.kzg=e.kzg),e.blobWrapperVersion!=null&&(r.blobWrapperVersion=e.blobWrapperVersion),e.blobs!=null&&(r.blobs=e.blobs),e.hash!=null&&(W(r.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),W(r.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(W(r.isSigned(),"unsigned transaction cannot define '.from'","tx",e),W(r.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),r}}function qu(t){return Ar(Yi(t))}var fge="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const cO=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),uO=4;function hge(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),s=1,i=[0,1];for(let _=1;_<n;_++)i.push(s+=r());let o=r(),a=e;e+=o;let c=0,u=0;function l(){return c==0&&(u=u<<8|t[e++],c=8),u>>--c&1}const d=31,f=2**d,g=f>>>1,p=g>>1,h=f-1;let y=0;for(let _=0;_<d;_++)y=y<<1|l();let b=[],E=0,w=f;for(;;){let _=Math.floor(((y-E+1)*s-1)/w),C=0,I=n;for(;I-C>1;){let R=C+I>>>1;_<i[R]?I=R:C=R}if(C==0)break;b.push(C);let P=E+Math.floor(w*i[C]/s),T=E+Math.floor(w*i[C+1]/s)-1;for(;((P^T)&g)==0;)y=y<<1&h|l(),P=P<<1&h,T=T<<1&h|1;for(;P&~T&p;)y=y&g|y<<1&h>>>1|l(),P=P<<1^g,T=(T^g)<<1|g|1;E=P,w=1+T-P}let m=n-4;return b.map(_=>{switch(_-m){case 3:return m+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return m+256+(t[a++]<<8|t[a++]);case 1:return m+t[a++];default:return _-1}})}function pge(t){let e=0;return()=>t[e++]}function K9(t){return pge(hge(gge(t)))}function gge(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let r=t.length,n=new Uint8Array(6*r>>3);for(let s=0,i=0,o=0,a=0;s<r;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(n[i++]=a>>(o-=8));return n}function mge(t){return t&1?~t>>1:t>>1}function yge(t,e){let r=Array(t);for(let n=0,s=0;n<t;n++)r[n]=s+=mge(e());return r}function Wp(t,e=0){let r=[];for(;;){let n=t(),s=t();if(!s)break;e+=n;for(let i=0;i<s;i++)r.push(e+i);e+=s+1}return r}function Z9(t){return Kp(()=>{let e=Wp(t);if(e.length)return e})}function Y9(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(bge(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(wge(r,t))}return e.flat()}function Kp(t){let e=[];for(;;){let r=t(e.length);if(!r)break;e.push(r)}return e}function J9(t,e,r){let n=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)yge(t,r).forEach((i,o)=>n[o].push(i));return n}function bge(t,e){let r=1+e(),n=e(),s=Kp(e);return J9(s.length,1+t,e).flatMap((o,a)=>{let[c,...u]=o;return Array(s[a]).fill().map((l,d)=>{let f=d*n;return[c+d*r,u.map(g=>g+f)]})})}function wge(t,e){let r=1+e();return J9(r,1+t,e).map(s=>[s[0],s.slice(1)])}function Ege(t){let e=[],r=Wp(t);return s(n([]),[]),e;function n(i){let o=t(),a=Kp(()=>{let c=Wp(t).map(u=>r[u]);if(c.length)return n(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let u of o)for(let l of u.Q)s(u,[...a,l],c)}}}function vge(t){return t.toString(16).toUpperCase().padStart(2,"0")}function Q9(t){return`{${vge(t)}}`}function _ge(t){let e=[];for(let r=0,n=t.length;r<n;){let s=t.codePointAt(r);r+=s<65536?1:2,e.push(s)}return e}function kd(t){let r=t.length;if(r<4096)return String.fromCodePoint(...t);let n=[];for(let s=0;s<r;)n.push(String.fromCodePoint(...t.slice(s,s+=4096)));return n.join("")}function Age(t,e){let r=t.length,n=r-e.length;for(let s=0;n==0&&s<r;s++)n=t[s]-e[s];return n}var Cge="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const Zp=44032,oE=4352,aE=4449,cE=4519,X9=19,eF=21,Bd=28,uE=eF*Bd,Ige=X9*uE,Sge=Zp+Ige,Tge=oE+X9,Pge=aE+eF,Nge=cE+Bd;function Uh(t){return t>>24&255}function tF(t){return t&16777215}let kC,lO,BC,b1;function Oge(){let t=K9(Cge);kC=new Map(Z9(t).flatMap((e,r)=>e.map(n=>[n,r+1<<24]))),lO=new Set(Wp(t)),BC=new Map,b1=new Map;for(let[e,r]of Y9(t)){if(!lO.has(e)&&r.length==2){let[n,s]=r,i=b1.get(n);i||(i=new Map,b1.set(n,i)),i.set(s,e)}BC.set(e,r.reverse())}}function rF(t){return t>=Zp&&t<Sge}function Rge(t,e){if(t>=oE&&t<Tge&&e>=aE&&e<Pge)return Zp+(t-oE)*uE+(e-aE)*Bd;if(rF(t)&&e>cE&&e<Nge&&(t-Zp)%Bd==0)return t+(e-cE);{let r=b1.get(t);return r&&(r=r.get(e),r)?r:-1}}function nF(t){kC||Oge();let e=[],r=[],n=!1;function s(i){let o=kC.get(i);o&&(n=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(rF(i)){let o=i-Zp,a=o/uE|0,c=o%uE/Bd|0,u=o%Bd;s(oE+a),s(aE+c),u>0&&s(cE+u)}else{let o=BC.get(i);o?r.push(...o):s(i)}if(!r.length)break;i=r.pop()}if(n&&e.length>1){let i=Uh(e[0]);for(let o=1;o<e.length;o++){let a=Uh(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let u=e[c+1];if(e[c+1]=e[c],e[c]=u,!c||(i=Uh(e[--c]),i<=a))break}i=Uh(e[o])}}return e}function xge(t){let e=[],r=[],n=-1,s=0;for(let i of t){let o=Uh(i),a=tF(i);if(n==-1)o==0?n=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(n,...r),r.length=0,n=a):r.push(a),s=o;else{let c=Rge(n,a);c>=0?n=c:s==0&&o==0?(e.push(n),n=a):(r.push(a),s=o)}}return n>=0&&e.push(n,...r),e}function sF(t){return nF(t).map(tF)}function kge(t){return xge(nF(t))}const dO=45,iF=".",oF=65039,aF=1,lE=t=>Array.from(t);function Yp(t,e){return t.P.has(e)||t.Q.has(e)}class Bge extends Array{get is_emoji(){return!0}}let jC,cF,Au,DC,uF,dd,SA,Kl,iu,fO,UC;function iS(){if(jC)return;let t=K9(fge);const e=()=>Wp(t),r=()=>new Set(e()),n=(l,d)=>d.forEach(f=>l.add(f));jC=new Map(Y9(t)),cF=r(),Au=e(),DC=new Set(e().map(l=>Au[l])),Au=new Set(Au),uF=r(),r();let s=Z9(t),i=t();const o=()=>{let l=new Set;return e().forEach(d=>n(l,s[d])),n(l,e()),l};dd=Kp(l=>{let d=Kp(t).map(f=>f+96);if(d.length){let f=l>=i;d[0]-=32,d=kd(d),f&&(d=`Restricted[${d}]`);let g=o(),p=o(),h=!t();return{N:d,P:g,Q:p,M:h,R:f}}}),SA=r(),Kl=new Map;let a=e().concat(lE(SA)).sort((l,d)=>l-d);a.forEach((l,d)=>{let f=t(),g=a[d]=f?a[d-f]:{V:[],M:new Map};g.V.push(l),SA.has(l)||Kl.set(l,g)});for(let{V:l,M:d}of new Set(Kl.values())){let f=[];for(let p of l){let h=dd.filter(b=>Yp(b,p)),y=f.find(({G:b})=>h.some(E=>b.has(E)));y||(y={G:new Set,V:[]},f.push(y)),y.V.push(p),n(y.G,h)}let g=f.flatMap(p=>lE(p.G));for(let{G:p,V:h}of f){let y=new Set(g.filter(b=>!p.has(b)));for(let b of h)d.set(b,y)}}iu=new Set;let c=new Set;const u=l=>iu.has(l)?c.add(l):iu.add(l);for(let l of dd){for(let d of l.P)u(d);for(let d of l.Q)u(d)}for(let l of iu)!Kl.has(l)&&!c.has(l)&&Kl.set(l,aF);n(iu,sF(iu)),fO=Ege(t).map(l=>Bge.from(l)).sort(Age),UC=new Map;for(let l of fO){let d=[UC];for(let f of l){let g=d.map(p=>{let h=p.get(f);return h||(h=new Map,p.set(f,h)),h});f===oF?d.push(...g):d=g}for(let f of d)f.V=l}}function oS(t){return(lF(t)?"":`${aS(ZE([t]))} `)+Q9(t)}function aS(t){return`"${t}"â€Ž`}function jge(t){if(t.length>=4&&t[2]==dO&&t[3]==dO)throw new Error(`invalid label extension: "${kd(t.slice(0,4))}"`)}function Dge(t){for(let r=t.lastIndexOf(95);r>0;)if(t[--r]!==95)throw new Error("underscore allowed only at start")}function Uge(t){let e=t[0],r=cO.get(e);if(r)throw Yh(`leading ${r}`);let n=t.length,s=-1;for(let i=1;i<n;i++){e=t[i];let o=cO.get(e);if(o){if(s==i)throw Yh(`${r} + ${o}`);s=i+1,r=o}}if(s==n)throw Yh(`trailing ${r}`)}function ZE(t,e=1/0,r=Q9){let n=[];Mge(t[0])&&n.push("â—Œ"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];lF(a)&&(n.push(kd(t.slice(s,o))),n.push(r(a)),s=o+1)}return n.push(kd(t.slice(s,i))),n.join("")}function Mge(t){return iS(),Au.has(t)}function lF(t){return iS(),uF.has(t)}function Lge(t){return zge(Fge(t,kge,Gge))}function Fge(t,e,r){if(!t)return[];iS();let n=0;return t.split(iF).map(s=>{let i=_ge(s),o={input:i,offset:n};n+=i.length+1;try{let a=o.tokens=Vge(i,e,r),c=a.length,u;if(!c)throw new Error("empty label");let l=o.output=a.flat();if(Dge(l),!(o.emoji=c>1||a[0].is_emoji)&&l.every(f=>f<128))jge(l),u="ASCII";else{let f=a.flatMap(g=>g.is_emoji?[]:g);if(!f.length)u="Emoji";else{if(Au.has(l[0]))throw Yh("leading combining mark");for(let h=1;h<c;h++){let y=a[h];if(!y.is_emoji&&Au.has(y[0]))throw Yh(`emoji + combining mark: "${kd(a[h-1])} + ${ZE([y[0]])}"`)}Uge(l);let g=lE(new Set(f)),[p]=Hge(g);$ge(p,f),qge(p,g),u=p.N}}o.type=u}catch(a){o.error=a}return o})}function qge(t,e){let r,n=[];for(let s of e){let i=Kl.get(s);if(i===aF)return;if(i){let o=i.M.get(s);if(r=r?r.filter(a=>o.has(a)):lE(o),!r.length)return}else n.push(s)}if(r){for(let s of r)if(n.every(i=>Yp(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function Hge(t){let e=dd;for(let r of t){let n=e.filter(s=>Yp(s,r));if(!n.length)throw dd.some(s=>Yp(s,r))?fF(e[0],r):dF(r);if(e=n,n.length==1)break}return e}function zge(t){return t.map(({input:e,error:r,output:n})=>{if(r){let s=r.message;throw new Error(t.length==1?s:`Invalid label ${aS(ZE(e,63))}: ${s}`)}return kd(n)}).join(iF)}function dF(t){return new Error(`disallowed character: ${oS(t)}`)}function fF(t,e){let r=oS(e),n=dd.find(s=>s.P.has(e));return n&&(r=`${n.N} ${r}`),new Error(`illegal mixture: ${t.N} + ${r}`)}function Yh(t){return new Error(`illegal placement: ${t}`)}function $ge(t,e){for(let r of e)if(!Yp(t,r))throw fF(t,r);if(t.M){let r=sF(e);for(let n=1,s=r.length;n<s;n++)if(DC.has(r[n])){let i=n+1;for(let o;i<s&&DC.has(o=r[i]);i++)for(let a=n;a<i;a++)if(r[a]==o)throw new Error(`duplicate non-spacing marks: ${oS(o)}`);if(i-n>uO)throw new Error(`excessive non-spacing marks: ${aS(ZE(r.slice(n-1,i)))} (${i-n}/${uO})`);n=i}}}function Vge(t,e,r){let n=[],s=[];for(t=t.slice().reverse();t.length;){let i=Wge(t);if(i)s.length&&(n.push(e(s)),s=[]),n.push(r(i));else{let o=t.pop();if(iu.has(o))s.push(o);else{let a=jC.get(o);if(a)s.push(...a);else if(!cF.has(o))throw dF(o)}}}return s.length&&n.push(e(s)),n}function Gge(t){return t.filter(e=>e!=oF)}function Wge(t,e){let r=UC,n,s=t.length;for(;s&&(r=r.get(t[--s]),!!r);){let{V:i}=r;i&&(n=i,t.length=s)}return n}const hF=new Uint8Array(32);hF.fill(0);function hO(t){return W(t.length!==0,"invalid ENS name; empty component","comp",t),t}function pF(t){const e=Yi(Kge(t)),r=[];if(t.length===0)return r;let n=0;for(let s=0;s<e.length;s++)e[s]===46&&(r.push(hO(e.slice(n,s))),n=s+1);return W(n<e.length,"invalid ENS name; empty component","name",t),r.push(hO(e.slice(n))),r}function Kge(t){try{if(t.length===0)throw new Error("empty label");return Lge(t)}catch(e){W(!1,`invalid ENS name (${e.message})`,"name",t)}}function MC(t){W(typeof t=="string","invalid ENS name; not a string","name",t),W(t.length,"invalid ENS name (empty label)","name",t);let e=hF;const r=pF(t);for(;r.length;)e=Ar(Qt([e,Ar(r.pop())]));return Ee(e)}function Zge(t,e){const r=e;return W(r<=255,"DNS encoded label cannot exceed 255","length",r),Ee(Qt(pF(t).map(n=>{W(n.length<=r,`label ${JSON.stringify(t)} exceeds ${r} bytes`,"name",t);const s=new Uint8Array(n.length+1);return s.set(n,1),s[0]=s.length-1,s})))+"00"}const gF=new Uint8Array(32);gF.fill(0);const Yge=BigInt(-1),mF=BigInt(0),yF=BigInt(1),Jge=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Qge(t){const e=nt(t),r=e.length%32;return r?Qt([e,gF.slice(r)]):Ee(e)}const Xge=tc(yF,32),eme=tc(mF,32),pO={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},TA=["name","version","chainId","verifyingContract","salt"];function gO(t){return function(e){return W(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const tme={name:gO("name"),version:gO("version"),chainId:function(t){const e=Ne(t,"domain.chainId");return W(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):ci(e)},verifyingContract:function(t){try{return St(t).toLowerCase()}catch{}W(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=nt(t,"domain.salt");return W(e.length===32,'invalid domain value "salt"',"domain.salt",t),Ee(e)}};function PA(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const r=e[1]==="",n=parseInt(e[2]);W(n%8===0&&n!==0&&n<=256&&e[2]===String(n),"invalid numeric width","type",t);const s=vu(Jge,r?n-1:n),i=r?(s+yF)*Yge:mF;return function(o){const a=Ne(o,"value");return W(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),tc(r?t9(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return W(r!==0&&r<=32&&e[1]===String(r),"invalid bytes width","type",t),function(n){const s=nt(n);return W(s.length===r,`invalid length for ${t}`,"value",n),Qge(n)}}}switch(t){case"address":return function(e){return na(St(e),32)};case"bool":return function(e){return e?Xge:eme};case"bytes":return function(e){return Ar(e)};case"string":return function(e){return qu(e)}}return null}function mO(t,e){return`${t}(${e.map(({name:r,type:n})=>n+" "+r).join(",")})`}function Lg(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}class fs{primaryType;#e;get types(){return JSON.parse(this.#e)}#t;#r;constructor(e){this.#t=new Map,this.#r=new Map;const r=new Map,n=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:u,type:l})=>{let{base:d,index:f}=Lg(l);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:u,type:d+(f||"")}}),r.set(c,new Set),n.set(c,[]),s.set(c,new Set)}),this.#e=JSON.stringify(i);for(const c in i){const u=new Set;for(const l of i[c]){W(!u.has(l.name),`duplicate variable name ${JSON.stringify(l.name)} in ${JSON.stringify(c)}`,"types",e),u.add(l.name);const d=Lg(l.type).base;W(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!PA(d)&&(W(n.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),n.get(d).push(c),r.get(c).add(d))}}const o=Array.from(n.keys()).filter(c=>n.get(c).length===0);W(o.length!==0,"missing primary type","types",e),W(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),ze(this,{primaryType:o[0]});function a(c,u){W(!u.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),u.add(c);for(const l of r.get(c))if(n.has(l)){a(l,u);for(const d of u)s.get(d).add(l)}u.delete(c)}a(this.primaryType,new Set);for(const[c,u]of s){const l=Array.from(u);l.sort(),this.#t.set(c,mO(c,i[c])+l.map(d=>mO(d,i[d])).join(""))}}getEncoder(e){let r=this.#r.get(e);return r||(r=this.#n(e),this.#r.set(e,r)),r}#n(e){{const s=PA(e);if(s)return s}const r=Lg(e).array;if(r){const s=r.prefix,i=this.getEncoder(s);return o=>{W(r.count===-1||r.count===o.length,`array length mismatch; expected length ${r.count}`,"value",o);let a=o.map(i);return this.#t.has(s)&&(a=a.map(Ar)),Ar(Qt(a))}}const n=this.types[e];if(n){const s=qu(this.#t.get(e));return i=>{const o=n.map(({name:a,type:c})=>{const u=this.getEncoder(c)(i[a]);return this.#t.has(c)?Ar(u):u});return o.unshift(s),Qt(o)}}W(!1,`unknown type: ${e}`,"type",e)}encodeType(e){const r=this.#t.get(e);return W(r,`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return Ar(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,n){if(PA(e))return n(e,r);const s=Lg(e).array;if(s)return W(s.count===-1||s.count===r.length,`array length mismatch; expected length ${s.count}`,"value",r),r.map(o=>this._visit(s.prefix,o,n));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,r[a],n),o),{});W(!1,`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new fs(e)}static getPrimaryType(e){return fs.from(e).primaryType}static hashStruct(e,r,n){return fs.from(r).hashStruct(e,n)}static hashDomain(e){const r=[];for(const n in e){if(e[n]==null)continue;const s=pO[n];W(s,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),r.push({name:n,type:s})}return r.sort((n,s)=>TA.indexOf(n.name)-TA.indexOf(s.name)),fs.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,n){return Qt(["0x1901",fs.hashDomain(e),fs.from(r).hash(n)])}static hash(e,r,n){return Ar(fs.encode(e,r,n))}static async resolveNames(e,r,n,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!Mt(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=fs.from(r);o.visit(n,(a,c)=>(a==="address"&&!Mt(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),n=o.visit(n,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:n}}static getPayload(e,r,n){fs.hashDomain(e);const s={},i=[];TA.forEach(c=>{const u=e[c];u!=null&&(s[c]=tme[c](u),i.push({name:c,type:pO[c]}))});const o=fs.from(r);r=o.types;const a=Object.assign({},r);return W(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",r),a.EIP712Domain=i,o.encode(n),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(n,(c,u)=>{if(c.match(/^bytes(\d*)/))return Ee(nt(u));if(c.match(/^u?int/))return Ne(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return W(typeof u=="string","invalid string","value",u),u}W(!1,"unsupported type","type",c)})}}}function An(t){const e=new Set;return t.forEach(r=>e.add(r)),Object.freeze(e)}const rme="external public payable override",nme=An(rme.split(" ")),bF="constant external internal payable private public pure view override",sme=An(bF.split(" ")),wF="constructor error event fallback function receive struct",EF=An(wF.split(" ")),vF="calldata memory storage payable indexed",ime=An(vF.split(" ")),ome="tuple returns",ame=[wF,vF,ome,bF].join(" "),cme=An(ame.split(" ")),ume={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},lme=new RegExp("^(\\s*)"),dme=new RegExp("^([0-9]+)"),fme=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),_F=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),AF=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class Ls{#e;#t;get offset(){return this.#e}get length(){return this.#t.length-this.#e}constructor(e){this.#e=0,this.#t=e.slice()}clone(){return new Ls(this.#t)}reset(){this.#e=0}#r(e=0,r=0){return new Ls(this.#t.slice(e,r).map(n=>Object.freeze(Object.assign({},n,{match:n.match-e,linkBack:n.linkBack-e,linkNext:n.linkNext-e}))))}popKeyword(e){const r=this.peek();if(r.type!=="KEYWORD"||!e.has(r.text))throw new Error(`expected keyword ${r.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const r=this.peek();throw new Error(`expected ${e}; got ${r.type} ${JSON.stringify(r.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const r=this.#r(this.#e+1,e.match+1);return this.#e=e.match+1,r}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const r=[];for(;this.#e<e.match-1;){const n=this.peek().linkNext;r.push(this.#r(this.#e+1,n)),this.#e=n}return this.#e=e.match+1,r}peek(){if(this.#e>=this.#t.length)throw new Error("out-of-bounds");return this.#t[this.#e]}peekKeyword(e){const r=this.peekType("KEYWORD");return r!=null&&e.has(r)?r:null}peekType(e){if(this.length===0)return null;const r=this.peek();return r.type===e?r.text:null}pop(){const e=this.peek();return this.#e++,e}toString(){const e=[];for(let r=this.#e;r<this.#t.length;r++){const n=this.#t[r];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}}function ic(t){const e=[],r=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let n=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(lme);a&&(i+=a[1].length,o=t.substring(i));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let u=ume[o[0]]||"";if(u){if(c.type=u,c.text=o[0],i++,u==="OPEN_PAREN")n.push(e.length-1),s.push(e.length-1);else if(u=="CLOSE_PAREN")n.length===0&&r("no matching open bracket"),c.match=n.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(u==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(u==="OPEN_BRACKET")c.type="BRACKET";else if(u==="CLOSE_BRACKET"){let l=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;l=d+l,e[e.length-1].value=Je(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=l}continue}if(a=o.match(fme),a){if(c.text=a[1],i+=c.text.length,cme.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(AF)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(dme),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Ls(e.map(o=>Object.freeze(o)))}function yO(t,e){let r=[];for(const n in e.keys())t.has(n)&&r.push(n);if(r.length>1)throw new Error(`conflicting types: ${r.join(", ")}`)}function YE(t,e){if(e.peekKeyword(EF)){const r=e.pop().text;if(r!==t)throw new Error(`expected ${t}, got ${r}`)}return e.popType("ID")}function sa(t,e){const r=new Set;for(;;){const n=t.peekType("KEYWORD");if(n==null||e&&!e.has(n))break;if(t.pop(),r.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);r.add(n)}return Object.freeze(r)}function CF(t){let e=sa(t,sme);return yO(e,An("constant payable nonpayable".split(" "))),yO(e,An("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Qo(t,e){return t.popParams().map(r=>$t.from(r,e))}function IF(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Ne(t.pop().text);throw new Error("invalid gas")}return null}function Hu(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const hme=new RegExp(/^(.*)\[([0-9]*)\]$/);function bO(t){const e=t.match(AF);if(W(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const r=parseInt(e[2]);W(r!==0&&r<=32,"invalid bytes length","type",t)}else if(e[3]){const r=parseInt(e[3]);W(r!==0&&r<=256&&r%8===0,"invalid numeric width","type",t)}return t}const ir={},Wn=Symbol.for("_ethers_internal"),wO="_ParamTypeInternal",EO="_ErrorInternal",vO="_EventInternal",_O="_ConstructorInternal",AO="_FallbackInternal",CO="_FunctionInternal",IO="_StructInternal";class $t{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,r,n,s,i,o,a,c){if(m0(e,ir,"ParamType"),Object.defineProperty(this,Wn,{value:wO}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");ze(this,{name:r,type:n,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const n=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=n,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let r="";return this.isArray()?(r+=this.arrayChildren.format(e),r+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?r+="("+this.components.map(n=>n.format(e)).join(e==="full"?", ":",")+")":r+=this.type,e!=="sighash"&&(this.indexed===!0&&(r+=" indexed"),e==="full"&&this.name&&(r+=" "+this.name)),r}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,r){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map(s=>n.arrayChildren.walk(s,r))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map((s,i)=>n.components[i].walk(s,r))}return r(this.type,e)}#e(e,r,n,s){if(this.isArray()){if(!Array.isArray(r))throw new Error("invalid array value");if(this.arrayLength!==-1&&r.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=r.slice();a.forEach((c,u)=>{o.#e(e,c,n,l=>{a[u]=l})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(r))a=r.slice();else{if(r==null||typeof r!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in r))throw new Error(`missing value for component ${c.name}`);return r[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,u)=>{o[u].#e(e,c,n,l=>{a[u]=l})}),s(a);return}const i=n(this.type,r);i.then?e.push((async function(){s(await i)})()):s(i)}async walkAsync(e,r){const n=[],s=[e];return this.#e(n,e,r,i=>{s[0]=i}),n.length&&await Promise.all(n),s[0]}static from(e,r){if($t.isParamType(e))return e;if(typeof e=="string")try{return $t.from(ic(e),r)}catch{W(!1,"invalid param type","obj",e)}else if(e instanceof Ls){let a="",c="",u=null;sa(e,An(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",u=e.popParams().map(h=>$t.from(h)),a=`tuple(${u.map(h=>h.format()).join(",")})`):(a=bO(e.popType("TYPE")),c=a);let l=null,d=null;for(;e.length&&e.peekType("BRACKET");){const h=e.pop();l=new $t(ir,"",a,c,null,u,d,l),d=h.value,a+=h.text,c="array",u=null}let f=null;if(sa(e,ime).has("indexed")){if(!r)throw new Error("");f=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new $t(ir,p,a,c,f,u,d,l)}const n=e.name;W(!n||typeof n=="string"&&n.match(_F),"invalid name","obj.name",n);let s=e.indexed;s!=null&&(W(r,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(hme);if(o){const a=parseInt(o[2]||"-1"),c=$t.from({type:o[1],components:e.components});return new $t(ir,n||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(u=>$t.from(u)):null;return new $t(ir,n||"",i,"tuple",s,a,null,null)}return i=bO(e.type),new $t(ir,n||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[Wn]===wO}}class zu{type;inputs;constructor(e,r,n){m0(e,ir,"Fragment"),n=Object.freeze(n.slice()),ze(this,{type:r,inputs:n})}static from(e){if(typeof e=="string"){try{zu.from(JSON.parse(e))}catch{}return zu.from(ic(e))}if(e instanceof Ls)switch(e.peekKeyword(EF)){case"constructor":return Go.from(e);case"error":return zn.from(e);case"event":return qi.from(e);case"fallback":case"receive":return Lo.from(e);case"function":return Hi.from(e);case"struct":return Ou.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Go.from(e);case"error":return zn.from(e);case"event":return qi.from(e);case"fallback":case"receive":return Lo.from(e);case"function":return Hi.from(e);case"struct":return Ou.from(e)}oe(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}W(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Go.isFragment(e)}static isError(e){return zn.isFragment(e)}static isEvent(e){return qi.isFragment(e)}static isFunction(e){return Hi.isFragment(e)}static isStruct(e){return Ou.isFragment(e)}}class JE extends zu{name;constructor(e,r,n,s){super(e,r,s),W(typeof n=="string"&&n.match(_F),"invalid identifier","name",n),s=Object.freeze(s.slice()),ze(this,{name:n})}}function Jp(t,e){return"("+e.map(r=>r.format(t)).join(t==="full"?", ":",")+")"}class zn extends JE{constructor(e,r,n){super(e,"error",r,n),Object.defineProperty(this,Wn,{value:EO})}get selector(){return qu(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});const r=[];return e!=="sighash"&&r.push("error"),r.push(this.name+Jp(e,this.inputs)),r.join(" ")}static from(e){if(zn.isFragment(e))return e;if(typeof e=="string")return zn.from(ic(e));if(e instanceof Ls){const r=YE("error",e),n=Qo(e);return Hu(e),new zn(ir,r,n)}return new zn(ir,e.name,e.inputs?e.inputs.map($t.from):[])}static isFragment(e){return e&&e[Wn]===EO}}class qi extends JE{anonymous;constructor(e,r,n,s){super(e,"event",r,n),Object.defineProperty(this,Wn,{value:vO}),ze(this,{anonymous:s})}get topicHash(){return qu(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});const r=[];return e!=="sighash"&&r.push("event"),r.push(this.name+Jp(e,this.inputs)),e!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(e,r){return r=(r||[]).map(s=>$t.from(s)),new qi(ir,e,r,!1).topicHash}static from(e){if(qi.isFragment(e))return e;if(typeof e=="string")try{return qi.from(ic(e))}catch{W(!1,"invalid event fragment","obj",e)}else if(e instanceof Ls){const r=YE("event",e),n=Qo(e,!0),s=!!sa(e,An(["anonymous"])).has("anonymous");return Hu(e),new qi(ir,r,n,s)}return new qi(ir,e.name,e.inputs?e.inputs.map(r=>$t.from(r,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[Wn]===vO}}class Go extends zu{payable;gas;constructor(e,r,n,s,i){super(e,r,n),Object.defineProperty(this,Wn,{value:_O}),ze(this,{payable:s,gas:i})}format(e){if(oe(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});const r=[`constructor${Jp(e,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(e){if(Go.isFragment(e))return e;if(typeof e=="string")try{return Go.from(ic(e))}catch{W(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof Ls){sa(e,An(["constructor"]));const r=Qo(e),n=!!sa(e,nme).has("payable"),s=IF(e);return Hu(e),new Go(ir,"constructor",r,n,s)}return new Go(ir,"constructor",e.inputs?e.inputs.map($t.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Wn]===_O}}class Lo extends zu{payable;constructor(e,r,n){super(e,"fallback",r),Object.defineProperty(this,Wn,{value:AO}),ze(this,{payable:n})}format(e){const r=this.inputs.length===0?"receive":"fallback";if(e==="json"){const n=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:n})}return`${r}()${this.payable?" payable":""}`}static from(e){if(Lo.isFragment(e))return e;if(typeof e=="string")try{return Lo.from(ic(e))}catch{W(!1,"invalid fallback fragment","obj",e)}else if(e instanceof Ls){const r=e.toString(),n=e.peekKeyword(An(["fallback","receive"]));if(W(n,"type must be fallback or receive","obj",r),e.popKeyword(An(["fallback","receive"]))==="receive"){const a=Qo(e);return W(a.length===0,"receive cannot have arguments","obj.inputs",a),sa(e,An(["payable"])),Hu(e),new Lo(ir,[],!0)}let i=Qo(e);i.length?W(i.length===1&&i[0].type==="bytes","invalid fallback inputs","obj.inputs",i.map(a=>a.format("minimal")).join(", ")):i=[$t.from("bytes")];const o=CF(e);if(W(o==="nonpayable"||o==="payable","fallback cannot be constants","obj.stateMutability",o),sa(e,An(["returns"])).has("returns")){const a=Qo(e);W(a.length===1&&a[0].type==="bytes","invalid fallback outputs","obj.outputs",a.map(c=>c.format("minimal")).join(", "))}return Hu(e),new Lo(ir,i,o==="payable")}if(e.type==="receive")return new Lo(ir,[],!0);if(e.type==="fallback"){const r=[$t.from("bytes")],n=e.stateMutability==="payable";return new Lo(ir,r,n)}W(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[Wn]===AO}}class Hi extends JE{constant;outputs;stateMutability;payable;gas;constructor(e,r,n,s,i,o){super(e,"function",r,s),Object.defineProperty(this,Wn,{value:CO}),i=Object.freeze(i.slice()),ze(this,{constant:n==="view"||n==="pure",gas:o,outputs:i,payable:n==="payable",stateMutability:n})}get selector(){return qu(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});const r=[];return e!=="sighash"&&r.push("function"),r.push(this.name+Jp(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(Jp(e,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(e,r){return r=(r||[]).map(s=>$t.from(s)),new Hi(ir,e,"view",r,[],null).selector}static from(e){if(Hi.isFragment(e))return e;if(typeof e=="string")try{return Hi.from(ic(e))}catch{W(!1,"invalid function fragment","obj",e)}else if(e instanceof Ls){const n=YE("function",e),s=Qo(e),i=CF(e);let o=[];sa(e,An(["returns"])).has("returns")&&(o=Qo(e));const a=IF(e);return Hu(e),new Hi(ir,n,i,s,o,a)}let r=e.stateMutability;return r==null&&(r="payable",typeof e.constant=="boolean"?(r="view",e.constant||(r="payable",typeof e.payable=="boolean"&&!e.payable&&(r="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(r="nonpayable")),new Hi(ir,e.name,r,e.inputs?e.inputs.map($t.from):[],e.outputs?e.outputs.map($t.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[Wn]===CO}}class Ou extends JE{constructor(e,r,n){super(e,"struct",r,n),Object.defineProperty(this,Wn,{value:IO})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return Ou.from(ic(e))}catch{W(!1,"invalid struct fragment","obj",e)}else if(e instanceof Ls){const r=YE("struct",e),n=Qo(e);return Hu(e),new Ou(ir,r,n)}return new Ou(ir,e.name,e.inputs?e.inputs.map($t.from):[])}static isFragment(e){return e&&e[Wn]===IO}}const wi=new Map;wi.set(0,"GENERIC_PANIC");wi.set(1,"ASSERT_FALSE");wi.set(17,"OVERFLOW");wi.set(18,"DIVIDE_BY_ZERO");wi.set(33,"ENUM_RANGE_ERROR");wi.set(34,"BAD_STORAGE_DATA");wi.set(49,"STACK_UNDERFLOW");wi.set(50,"ARRAY_RANGE_ERROR");wi.set(65,"OUT_OF_MEMORY");wi.set(81,"UNINITIALIZED_FUNCTION_CALL");const pme=new RegExp(/^bytes([0-9]*)$/),gme=new RegExp(/^(u?int)([0-9]*)$/);let NA=null,SO=1024;function mme(t,e,r,n){let s="missing revert data",i=null;const o=null;let a=null;if(r){s="execution reverted";const u=nt(r);if(r=Ee(r),u.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(u.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(Ee(u.slice(0,4))==="0x08c379a0")try{i=n.decode(["string"],u.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(Ee(u.slice(0,4))==="0x4e487b71")try{const l=Number(n.decode(["uint256"],u.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[l]},i=`Panic due to ${wi.get(l)||"UNKNOWN"}(${l})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?St(e.to):null,data:e.data||"0x"};return e.from&&(c.from=St(e.from)),Yt(s,"CALL_EXCEPTION",{action:t,data:r,reason:i,transaction:c,invocation:o,revert:a})}class jd{#e(e){if(e.isArray())return new k0e(this.#e(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new Mg(e.components.map(n=>this.#e(n)),e.name);switch(e.baseType){case"address":return new R0e(e.name);case"bool":return new B0e(e.name);case"string":return new z0e(e.name);case"bytes":return new j0e(e.name);case"":return new M0e(e.name)}let r=e.type.match(gme);if(r){let n=parseInt(r[2]||"256");return W(n!==0&&n<=256&&n%8===0,"invalid "+r[1]+" bit length","param",e),new H0e(n/8,r[1]==="int",e.name)}if(r=e.type.match(pme),r){let n=parseInt(r[1]);return W(n!==0&&n<=32,"invalid bytes length","param",e),new D0e(n,e.name)}W(!1,"invalid type","type",e.type)}getDefaultValue(e){const r=e.map(s=>this.#e($t.from(s)));return new Mg(r,"_").defaultValue()}encode(e,r){QL(r.length,e.length,"types/values length mismatch");const n=e.map(o=>this.#e($t.from(o))),s=new Mg(n,"_"),i=new SC;return s.encode(i,r),i.data}decode(e,r,n){const s=e.map(o=>this.#e($t.from(o)));return new Mg(s,"_").decode(new ZI(r,n,SO))}static _setDefaultMaxInflation(e){W(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),SO=e}static defaultAbiCoder(){return NA==null&&(NA=new jd),NA}static getBuiltinCallException(e,r,n){return mme(e,r,n,jd.defaultAbiCoder())}}class yme{fragment;name;signature;topic;args;constructor(e,r,n){const s=e.name,i=e.format();ze(this,{fragment:e,name:s,signature:i,topic:r,args:n})}}class bme{fragment;name;args;signature;selector;value;constructor(e,r,n,s){const i=e.name,o=e.format();ze(this,{fragment:e,name:i,args:n,signature:o,selector:r,value:s})}}class wme{fragment;name;args;signature;selector;constructor(e,r,n){const s=e.name,i=e.format();ze(this,{fragment:e,name:s,args:n,signature:i,selector:r})}}class TO{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){ze(this,{hash:e,_isIndexed:!0})}}const PO={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},NO={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&PO[t.toString()]&&(e=PO[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};class fu{fragments;deploy;fallback;receive;#e;#t;#r;#n;constructor(e){let r=[];typeof e=="string"?r=JSON.parse(e):r=e,this.#r=new Map,this.#e=new Map,this.#t=new Map;const n=[];for(const o of r)try{n.push(zu.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}ze(this,{fragments:Object.freeze(n)});let s=null,i=!1;this.#n=this.getAbiCoder(),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}ze(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(W(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=this.#r;break;case"event":c=this.#t;break;case"error":c=this.#e;break;default:return}const u=o.format();c.has(u)||c.set(u,o)}),this.deploy||ze(this,{deploy:Go.from("constructor()")}),ze(this,{fallback:s,receive:i})}format(e){const r=e?"minimal":"full";return this.fragments.map(s=>s.format(r))}formatJson(){const e=this.fragments.map(r=>r.format("json"));return JSON.stringify(e.map(r=>JSON.parse(r)))}getAbiCoder(){return jd.defaultAbiCoder()}#s(e,r,n){if(Mt(e)){const i=e.toLowerCase();for(const o of this.#r.values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of this.#r)o.split("(")[0]===e&&i.push(a);if(r){const o=r.length>0?r[r.length-1]:null;let a=r.length,c=!0;dr.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let u=i.length-1;u>=0;u--){const l=i[u].inputs.length;l!==a&&(!c||l!==a-1)&&i.splice(u,1)}for(let u=i.length-1;u>=0;u--){const l=i[u].inputs;for(let d=0;d<r.length;d++)if(dr.isTyped(r[d])){if(d>=l.length){if(r[d].type==="overrides")continue;i.splice(u,1);break}if(r[d].type!==l[d].baseType){i.splice(u,1);break}}}}if(i.length===1&&r&&r.length!==i[0].inputs.length){const o=r[r.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");W(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=this.#r.get(Hi.from(e).format());return s||null}getFunctionName(e){const r=this.#s(e,null,!1);return W(r,"no matching function","key",e),r.name}hasFunction(e){return!!this.#s(e,null,!1)}getFunction(e,r){return this.#s(e,r||null,!0)}forEachFunction(e){const r=Array.from(this.#r.keys());r.sort((n,s)=>n.localeCompare(s));for(let n=0;n<r.length;n++){const s=r[n];e(this.#r.get(s),n)}}#o(e,r,n){if(Mt(e)){const i=e.toLowerCase();for(const o of this.#t.values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of this.#t)o.split("(")[0]===e&&i.push(a);if(r){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<r.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<r.length;c++)if(dr.isTyped(r[c])&&r[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");W(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=this.#t.get(qi.from(e).format());return s||null}getEventName(e){const r=this.#o(e,null,!1);return W(r,"no matching event","key",e),r.name}hasEvent(e){return!!this.#o(e,null,!1)}getEvent(e,r){return this.#o(e,r||null,!0)}forEachEvent(e){const r=Array.from(this.#t.keys());r.sort((n,s)=>n.localeCompare(s));for(let n=0;n<r.length;n++){const s=r[n];e(this.#t.get(s),n)}}getError(e,r){if(Mt(e)){const s=e.toLowerCase();if(NO[s])return zn.from(NO[s].signature);for(const i of this.#e.values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of this.#e)i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?zn.from("error Error(string)"):e==="Panic"?zn.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");W(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=zn.from(e).format(),e==="Error(string)")return zn.from("error Error(string)");if(e==="Panic(uint256)")return zn.from("error Panic(uint256)");const n=this.#e.get(e);return n||null}forEachError(e){const r=Array.from(this.#e.keys());r.sort((n,s)=>n.localeCompare(s));for(let n=0;n<r.length;n++){const s=r[n];e(this.#e.get(s),n)}}_decodeParams(e,r){return this.#n.decode(e,r)}_encodeParams(e,r){return this.#n.encode(e,r)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,r){if(typeof e=="string"){const n=this.getError(e);W(n,"unknown error","fragment",e),e=n}return W(lr(r,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",r),this._decodeParams(e.inputs,lr(r,4))}encodeErrorResult(e,r){if(typeof e=="string"){const n=this.getError(e);W(n,"unknown error","fragment",e),e=n}return Qt([e.selector,this._encodeParams(e.inputs,r||[])])}decodeFunctionData(e,r){if(typeof e=="string"){const n=this.getFunction(e);W(n,"unknown function","fragment",e),e=n}return W(lr(r,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",r),this._decodeParams(e.inputs,lr(r,4))}encodeFunctionData(e,r){if(typeof e=="string"){const n=this.getFunction(e);W(n,"unknown function","fragment",e),e=n}return Qt([e.selector,this._encodeParams(e.inputs,r||[])])}decodeFunctionResult(e,r){if(typeof e=="string"){const i=this.getFunction(e);W(i,"unknown function","fragment",e),e=i}let n="invalid length for result data";const s=wn(r);if(s.length%32===0)try{return this.#n.decode(e.outputs,s)}catch{n="could not decode result data"}oe(!1,n,"BAD_DATA",{value:Ee(s),info:{method:e.name,signature:e.format()}})}makeError(e,r){const n=nt(e,"data"),s=jd.getBuiltinCallException("call",r,n);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=Ee(n.slice(0,4)),c=this.getError(a);if(c)try{const u=this.#n.decode(c.inputs,n.slice(4));s.revert={name:c.name,signature:c.format(),args:u},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(r);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,r){if(typeof e=="string"){const n=this.getFunction(e);W(n,"unknown function","fragment",e),e=n}return Ee(this.#n.encode(e.outputs,r||[]))}encodeFilterTopics(e,r){if(typeof e=="string"){const i=this.getEvent(e);W(i,"unknown event","eventFragment",e),e=i}oe(r.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:r.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const s=(i,o)=>i.type==="string"?qu(o):i.type==="bytes"?Ar(Ee(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=tc(o):i.type.match(/^bytes/)?o=xhe(o,32):i.type==="address"&&this.#n.encode(["address"],[o]),na(Ee(o),32));for(r.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){W(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?W(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?n.push(i.map(c=>s(a,c))):n.push(s(a,i))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,r){if(typeof e=="string"){const o=this.getEvent(e);W(o,"unknown event","eventFragment",e),e=o}const n=[],s=[],i=[];return e.anonymous||n.push(e.topicHash),W(r.length===e.inputs.length,"event arguments/values mismatch","values",r),e.inputs.forEach((o,a)=>{const c=r[a];if(o.indexed)if(o.type==="string")n.push(qu(c));else if(o.type==="bytes")n.push(Ar(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(this.#n.encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:this.#n.encode(s,i),topics:n}}decodeEventLog(e,r,n){if(typeof e=="string"){const g=this.getEvent(e);W(g,"unknown event","eventFragment",e),e=g}if(n!=null&&!e.anonymous){const g=e.topicHash;W(Mt(n[0],32)&&n[0].toLowerCase()===g,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((g,p)=>{g.indexed?g.type==="string"||g.type==="bytes"||g.baseType==="tuple"||g.baseType==="array"?(s.push($t.from({type:"bytes32",name:g.name})),o.push(!0)):(s.push(g),o.push(!1)):(i.push(g),o.push(!1))});const a=n!=null?this.#n.decode(s,Qt(n)):null,c=this.#n.decode(i,r,!0),u=[],l=[];let d=0,f=0;return e.inputs.forEach((g,p)=>{let h=null;if(g.indexed)if(a==null)h=new TO(null);else if(o[p])h=new TO(a[f++]);else try{h=a[f++]}catch(y){h=y}else try{h=c[d++]}catch(y){h=y}u.push(h),l.push(g.name||null)}),Vo.fromItems(u,l)}parseTransaction(e){const r=nt(e.data,"tx.data"),n=Ne(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(Ee(r.slice(0,4)));if(!s)return null;const i=this.#n.decode(s.inputs,r.slice(4));return new bme(s,s.selector,i,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const r=this.getEvent(e.topics[0]);return!r||r.anonymous?null:new yme(r,r.topicHash,this.decodeEventLog(r,e.data,e.topics))}parseError(e){const r=Ee(e),n=this.getError(lr(r,0,4));if(!n)return null;const s=this.#n.decode(n.inputs,lr(r,4));return new wme(n,n.selector,s)}static from(e){return e instanceof fu?e:typeof e=="string"?new fu(JSON.parse(e)):typeof e.formatJson=="function"?new fu(e.formatJson()):typeof e.format=="function"?new fu(e.format("json")):new fu(e)}}const SF=BigInt(0);function fd(t){return t??null}function pr(t){return t==null?null:t.toString()}class OO{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,r,n){ze(this,{gasPrice:fd(e),maxFeePerGas:fd(r),maxPriorityFeePerGas:fd(n)})}toJSON(){const{gasPrice:e,maxFeePerGas:r,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:pr(e),maxFeePerGas:pr(r),maxPriorityFeePerGas:pr(n)}}}function dE(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Ee(t.data));const r="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=Ne(t[s],`request.${s}`));const n="type,nonce".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Je(t[s],`request.${s}`));return t.accessList&&(e.accessList=Xu(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobWrapperVersion"in t&&(e.blobWrapperVersion=t.blobWrapperVersion),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>KI(s)?Ee(s):Object.assign({},s))),e}class Eme{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#e;constructor(e,r){this.#e=e.transactions.map(n=>typeof n!="string"?new v0(n,r):n),ze(this,{provider:r,hash:fd(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:fd(e.prevRandao),extraData:e.extraData,baseFeePerGas:fd(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#e.map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=this.#e.slice();return e.length===0?[]:(oe(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:r,extraData:n,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:u,number:l,parentHash:d,parentBeaconBlockRoot:f,stateRoot:g,receiptsRoot:p,timestamp:h,transactions:y}=this;return{_type:"Block",baseFeePerGas:pr(e),difficulty:pr(r),extraData:n,gasLimit:pr(s),gasUsed:pr(i),blobGasUsed:pr(this.blobGasUsed),excessBlobGas:pr(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:u,number:l,parentHash:d,timestamp:h,parentBeaconBlockRoot:f,stateRoot:g,receiptsRoot:p,transactions:y}}[Symbol.iterator](){let e=0;const r=this.transactions;return{next:()=>e<this.length?{value:r[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#e.length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let r;if(typeof e=="number")r=this.#e[e];else{const n=e.toLowerCase();for(const s of this.#e)if(typeof s=="string"){if(s!==n)continue;r=s;break}else{if(s.hash!==n)continue;r=s;break}}if(r==null)throw new Error("no such tx");return typeof r=="string"?await this.provider.getTransaction(r):r}getPrefetchedTransaction(e){const r=this.prefetchedTransactions;if(typeof e=="number")return r[e];e=e.toLowerCase();for(const n of r)if(n.hash===e)return n;W(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return vme(this)}}class E0{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,r){this.provider=r;const n=Object.freeze(e.topics.slice());ze(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:r,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:u}=this;return{_type:"log",address:e,blockHash:r,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:u}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return oe(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return oe(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return oe(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return _me(this)}}class TF{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#e;constructor(e,r){this.#e=Object.freeze(e.logs.map(s=>new E0(s,r)));let n=SF;e.effectiveGasPrice!=null?n=e.effectiveGasPrice:e.gasPrice!=null&&(n=e.gasPrice),ze(this,{provider:r,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:n,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#e}toJSON(){const{to:e,from:r,contractAddress:n,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:u,status:l,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:n,cumulativeGasUsed:pr(this.cumulativeGasUsed),from:r,gasPrice:pr(this.gasPrice),blobGasUsed:pr(this.blobGasUsed),blobGasPrice:pr(this.blobGasPrice),gasUsed:pr(this.gasUsed),hash:s,index:i,logs:u,logsBloom:c,root:d,status:l,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return NF(this)}reorderedEvent(e){return oe(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),PF(this,e)}}class v0{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#e;constructor(e,r){this.provider=r,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,this.#e=-1}toJSON(){const{blockNumber:e,blockHash:r,index:n,hash:s,type:i,to:o,from:a,nonce:c,data:u,signature:l,accessList:d,blobVersionedHashes:f}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:r,blobVersionedHashes:f,chainId:pr(this.chainId),data:u,from:a,gasLimit:pr(this.gasLimit),gasPrice:pr(this.gasPrice),hash:s,maxFeePerGas:pr(this.maxFeePerGas),maxPriorityFeePerGas:pr(this.maxPriorityFeePerGas),maxFeePerBlobGas:pr(this.maxFeePerBlobGas),nonce:c,signature:l,to:o,index:n,type:i,value:pr(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const n=await this.getTransaction();n&&(e=n.blockNumber)}if(e==null)return null;const r=this.provider.getBlock(e);if(r==null)throw new Error("TODO");return r}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:r,blockNumber:n}=await bn({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return r==null||r.blockNumber==null?0:n-r.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,r){const n=e??1,s=r??0;let i=this.#e,o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:f,nonce:g}=await bn({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(g<this.nonce){i=f;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<this.#e&&(o=this.#e));o<=f;){if(a)return null;const h=await this.provider.getBlock(o,!0);if(h==null)return;for(const y of h)if(y===this.hash)return;for(let y=0;y<h.length;y++){const b=await h.getTransaction(y);if(b.from===this.from&&b.nonce===this.nonce){if(a)return null;const E=await this.provider.getTransactionReceipt(b.hash);if(E==null||f-E.blockNumber+1<n)return;let w="replaced";b.data===this.data&&b.to===this.to&&b.value===this.value?w="repriced":b.data==="0x"&&b.from===b.to&&b.value===SF&&(w="cancelled"),oe(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:w==="replaced"||w==="cancelled",reason:w,replacement:b.replaceableTransaction(i),hash:b.hash,receipt:E})}}o++}},u=f=>{if(f==null||f.status!==0)return f;oe(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:f.to,from:f.from,data:""},receipt:f})},l=await this.provider.getTransactionReceipt(this.hash);if(n===0)return u(l);if(l){if(n===1||await l.confirmations()>=n)return u(l)}else if(await c(),n===0)return null;return await new Promise((f,g)=>{const p=[],h=()=>{p.forEach(b=>b())};if(p.push(()=>{a=!0}),s>0){const b=setTimeout(()=>{h(),g(Yt("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(b)})}const y=async b=>{if(await b.confirmations()>=n){h();try{f(u(b))}catch(E){g(E)}}};if(p.push(()=>{this.provider.off(this.hash,y)}),this.provider.on(this.hash,y),i>=0){const b=async()=>{try{await c()}catch(E){if(Gr(E,"TRANSACTION_REPLACED")){h(),g(E);return}}a||this.provider.once("block",b)};p.push(()=>{this.provider.off("block",b)}),this.provider.once("block",b)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return oe(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),NF(this)}reorderedEvent(e){return oe(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),oe(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),PF(this,e)}replaceableTransaction(e){W(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const r=new v0(this,this.provider);return r.#e=e,r}}function vme(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function PF(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function NF(t){return{orphan:"drop-transaction",tx:t}}function _me(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class cS extends E0{interface;fragment;args;constructor(e,r,n){super(e,e.provider);const s=r.decodeEventLog(n,e.data,e.topics);ze(this,{args:s,fragment:n,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class OF extends E0{error;constructor(e,r){super(e,e.provider),ze(this,{error:r})}}class Ame extends TF{#e;constructor(e,r,n){super(n,r),this.#e=e}get logs(){return super.logs.map(e=>{const r=e.topics.length?this.#e.getEvent(e.topics[0]):null;if(r)try{return new cS(e,this.#e,r)}catch(n){return new OF(e,n)}return e})}}class uS extends v0{#e;constructor(e,r,n){super(n,r),this.#e=e}async wait(e,r){const n=await super.wait(e,r);return n==null?null:new Ame(this.#e,this.provider,n)}}class RF extends r9{log;constructor(e,r,n,s){super(e,r,n),ze(this,{log:s})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Cme extends RF{constructor(e,r,n,s,i){super(e,r,n,new cS(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);ze(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const RO=BigInt(0);function xF(t){return t&&typeof t.call=="function"}function kF(t){return t&&typeof t.estimateGas=="function"}function QE(t){return t&&typeof t.resolveName=="function"}function BF(t){return t&&typeof t.sendTransaction=="function"}function jF(t){if(t!=null){if(QE(t))return t;if(t.provider)return t.provider}}class Ime{#e;fragment;constructor(e,r,n){if(ze(this,{fragment:r}),r.inputs.length<n.length)throw new Error("too many arguments");const s=$u(e.runner,"resolveName"),i=QE(s)?s:null;this.#e=(async function(){const o=await Promise.all(r.inputs.map((a,c)=>n[c]==null?null:a.walkAsync(n[c],(l,d)=>l==="address"?Array.isArray(d)?Promise.all(d.map(f=>_n(f,i))):_n(d,i):d)));return e.interface.encodeFilterTopics(r,o)})()}getTopicFilter(){return this.#e}}function $u(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Cu(t){return t==null?null:t.provider||null}async function DF(t,e){const r=dr.dereference(t,"overrides");W(typeof r=="object","invalid overrides parameter","overrides",t);const n=dE(r);return W(n.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),W(n.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function Sme(t,e,r){const n=$u(t,"resolveName"),s=QE(n)?n:null;return await Promise.all(e.map((i,o)=>i.walkAsync(r[o],(a,c)=>(c=dr.dereference(c,a),a==="address"?_n(c,s):c))))}function Tme(t){const e=async function(o){const a=await DF(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await _n(a.from,jF(t.runner)));const c=t.interface,u=Ne(a.value||RO,"overrides.value")===RO,l=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!l&&!u&&W(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),W(c.fallback||l,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return W(d||u,"cannot send value to non-payable fallback","overrides.value",a.value),W(c.fallback||l,"cannot send data to receive-only contract","overrides.data",a.data),a},r=async function(o){const a=$u(t.runner,"call");oe(xF(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(u){throw WI(u)&&u.data?t.interface.makeError(u.data,c):u}},n=async function(o){const a=t.runner;oe(BF(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),u=Cu(t.runner);return new uS(t.interface,u,c)},s=async function(o){const a=$u(t.runner,"estimateGas");return oe(kF(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await n(o);return ze(i,{_contract:t,estimateGas:s,populateTransaction:e,send:n,staticCall:r}),i}function Pme(t,e){const r=function(...u){const l=t.interface.getFunction(e,u);return oe(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:u}}),l},n=async function(...u){const l=r(...u);let d={};if(l.inputs.length+1===u.length&&(d=await DF(u.pop()),d.from&&(d.from=await _n(d.from,jF(t.runner)))),l.inputs.length!==u.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const f=await Sme(t.runner,l.inputs,u);return Object.assign({},d,await bn({to:t.getAddress(),data:t.interface.encodeFunctionData(l,f)}))},s=async function(...u){const l=await a(...u);return l.length===1?l[0]:l},i=async function(...u){const l=t.runner;oe(BF(l),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await l.sendTransaction(await n(...u)),f=Cu(t.runner);return new uS(t.interface,f,d)},o=async function(...u){const l=$u(t.runner,"estimateGas");return oe(kF(l),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await l.estimateGas(await n(...u))},a=async function(...u){const l=$u(t.runner,"call");oe(xF(l),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await n(...u);let f="0x";try{f=await l.call(d)}catch(p){throw WI(p)&&p.data?t.interface.makeError(p.data,d):p}const g=r(...u);return t.interface.decodeFunctionResult(g,f)},c=async(...u)=>r(...u).constant?await s(...u):await i(...u);return ze(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:r,estimateGas:o,populateTransaction:n,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const u=t.interface.getFunction(e);return oe(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),u}}),c}function Nme(t,e){const r=function(...s){const i=t.interface.getEvent(e,s);return oe(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},n=function(...s){return new Ime(t,r(...s),s)};return ze(n,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:r}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return oe(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),n}const fE=Symbol.for("_ethersInternal_contract"),UF=new WeakMap;function Ome(t,e){UF.set(t[fE],e)}function hs(t){return UF.get(t[fE])}function Rme(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function lS(t,e){let r,n=null;if(Array.isArray(e)){const i=function(o){if(Mt(o,32))return o;const a=t.interface.getEvent(o);return W(a,"unknown fragment","name",o),a.topicHash};r=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?r=[null]:typeof e=="string"?Mt(e,32)?r=[e]:(n=t.interface.getEvent(e),W(n,"unknown fragment","event",e),r=[n.topicHash]):Rme(e)?r=await e.getTopicFilter():"fragment"in e?(n=e.fragment,r=[n.topicHash]):W(!1,"unknown event name","event",e);r=r.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=r.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:n,tag:s,topics:r}}async function Mh(t,e){const{subs:r}=hs(t);return r.get((await lS(t,e)).tag)||null}async function xO(t,e,r){const n=Cu(t.runner);oe(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await lS(t,r),{addr:a,subs:c}=hs(t);let u=c.get(i);if(!u){const d={address:a||t,topics:o},f=y=>{let b=s;if(b==null)try{b=t.interface.getEvent(y.topics[0])}catch{}if(b){const E=b,w=s?t.interface.decodeEventLog(s,y.data,y.topics):[];FC(t,r,w,m=>new Cme(t,m,r,E,y))}else FC(t,r,[],E=>new RF(t,E,r,y))};let g=[];u={tag:i,listeners:[],start:()=>{g.length||g.push(n.on(d,f))},stop:async()=>{if(g.length==0)return;let y=g;g=[],await Promise.all(y),n.off(d,f)}},c.set(i,u)}return u}let LC=Promise.resolve();async function xme(t,e,r,n){await LC;const s=await Mh(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(r);n&&c.push(n(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),hs(t).subs.delete(s.tag)),i>0}async function FC(t,e,r,n){try{await LC}catch{}const s=xme(t,e,r,n);return LC=s,await s}const Fg=["then"];class Jh{target;interface;runner;filters;[fE];fallback;constructor(e,r,n,s){W(typeof e=="string"||z9(e),"invalid value for Contract target","target",e),n==null&&(n=null);const i=fu.from(r);ze(this,{target:e,runner:n,interface:i}),Object.defineProperty(this,fE,{value:{}});let o,a=null,c=null;if(s){const d=Cu(n);c=new uS(this.interface,d,s)}let u=new Map;if(typeof e=="string")if(Mt(e))a=e,o=Promise.resolve(e);else{const d=$u(n,"resolveName");if(!QE(d))throw Yt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(f=>{if(f==null)throw Yt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return hs(this).addr=f,f})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return hs(this).addr=d,d});Ome(this,{addrPromise:o,addr:a,deployTx:c,subs:u});const l=new Proxy({},{get:(d,f,g)=>{if(typeof f=="symbol"||Fg.indexOf(f)>=0)return Reflect.get(d,f,g);try{return this.getEvent(f)}catch(p){if(!Gr(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,f)=>Fg.indexOf(f)>=0?Reflect.has(d,f):Reflect.has(d,f)||this.interface.hasEvent(String(f))});return ze(this,{filters:l}),ze(this,{fallback:i.receive||i.fallback?Tme(this):null}),new Proxy(this,{get:(d,f,g)=>{if(typeof f=="symbol"||f in d||Fg.indexOf(f)>=0)return Reflect.get(d,f,g);try{return d.getFunction(f)}catch(p){if(!Gr(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,f)=>typeof f=="symbol"||f in d||Fg.indexOf(f)>=0?Reflect.has(d,f):d.interface.hasFunction(f)})}connect(e){return new Jh(this.target,this.interface,e)}attach(e){return new Jh(e,this.interface,this.runner)}async getAddress(){return await hs(this).addrPromise}async getDeployedCode(){const e=Cu(this.runner);oe(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const r=await e.getCode(await this.getAddress());return r==="0x"?null:r}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const n=Cu(this.runner);return oe(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);n.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return hs(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),Pme(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),Nme(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,r,n){r==null&&(r=0),n==null&&(n="latest");const{addr:s,addrPromise:i}=hs(this),o=s||await i,{fragment:a,topics:c}=await lS(this,e),u={address:o,topics:c,fromBlock:r,toBlock:n},l=Cu(this.runner);return oe(l,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await l.getLogs(u)).map(d=>{let f=a;if(f==null)try{f=this.interface.getEvent(d.topics[0])}catch{}if(f)try{return new cS(d,this.interface,f)}catch(g){return new OF(d,g)}return new E0(d,l)})}async on(e,r){const n=await xO(this,"on",e);return n.listeners.push({listener:r,once:!1}),n.start(),this}async once(e,r){const n=await xO(this,"once",e);return n.listeners.push({listener:r,once:!0}),n.start(),this}async emit(e,...r){return await FC(this,e,r,null)}async listenerCount(e){if(e){const s=await Mh(this,e);return s?s.listeners.length:0}const{subs:r}=hs(this);let n=0;for(const{listeners:s}of r.values())n+=s.length;return n}async listeners(e){if(e){const s=await Mh(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:r}=hs(this);let n=[];for(const{listeners:s}of r.values())n=n.concat(s.map(({listener:i})=>i));return n}async off(e,r){const n=await Mh(this,e);if(!n)return this;if(r){const s=n.listeners.map(({listener:i})=>i).indexOf(r);s>=0&&n.listeners.splice(s,1)}return(r==null||n.listeners.length===0)&&(n.stop(),hs(this).subs.delete(n.tag)),this}async removeAllListeners(e){if(e){const r=await Mh(this,e);if(!r)return this;r.stop(),hs(this).subs.delete(r.tag)}else{const{subs:r}=hs(this);for(const{tag:n,stop:s}of r.values())s(),r.delete(n)}return this}async addListener(e,r){return await this.on(e,r)}async removeListener(e,r){return await this.off(e,r)}static buildClass(e){class r extends Jh{constructor(s,i=null){super(s,e,i)}}return r}static from(e,r,n){return n==null&&(n=null),new this(e,r,n)}}function kme(){return Jh}class hd extends kme(){}function OA(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):W(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class Bme{name;constructor(e){ze(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,r){throw new Error("unsupported coin")}async decodeAddress(e,r){throw new Error("unsupported coin")}}const MF=new RegExp("^(ipfs)://(.*)$","i"),kO=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),MF,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class pd{provider;address;name;#e;#t;constructor(e,r,n){ze(this,{provider:e,address:r,name:n}),this.#e=null,this.#t=new hd(r,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return this.#e==null&&(this.#e=(async()=>{try{return await this.#t.supportsInterface("0x9061b923")}catch(e){if(Gr(e,"CALL_EXCEPTION"))return!1;throw this.#e=null,e}})()),await this.#e}async#r(e,r){r=(r||[]).slice();const n=this.#t.interface;r.unshift(MC(this.name));let s=null;await this.supportsWildcard()&&(s=n.getFunction(e),oe(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),r=[Zge(this.name,255),n.encodeFunctionData(s,r)],e="resolve(bytes,bytes)"),r.push({enableCcipRead:!0});try{const i=await this.#t[e](...r);return s?n.decodeFunctionResult(s,i)[0]:i}catch(i){if(!Gr(i,"CALL_EXCEPTION"))throw i}return null}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await this.#r("addr(bytes32)");return i==null||i===Gp?null:i}catch(i){if(Gr(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await this.#r("addr(bytes32,uint)",[i]);if(Mt(o,20))return St(o)}let r=null;for(const i of this.provider.plugins)if(i instanceof Bme&&i.supportsCoinType(e)){r=i;break}if(r==null)return null;const n=await this.#r("addr(bytes32,uint)",[e]);if(n==null||n==="0x")return null;const s=await r.decodeAddress(e,n);if(s!=null)return s;oe(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:n}})}async getText(e){const r=await this.#r("text(bytes32,string)",[e]);return r==null||r==="0x"?null:r}async getContentHash(){const e=await this.#r("contenthash(bytes32)");if(e==null||e==="0x")return null;const r=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const s=r[1]==="e3010170"?"ipfs":"ipns",i=parseInt(r[4],16);if(r[5].length===i*2)return`${s}://${Bhe("0x"+r[2])}`}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===64)return`bzz://${n[1]}`;oe(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const r=await this.getText("avatar");if(r==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:r});for(let n=0;n<kO.length;n++){const s=r.match(kO[n]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:r}),{linkage:e,url:r};case"ipfs":{const o=OA(r);return e.push({type:"ipfs",value:r}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:r});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const u=c[1],l=new hd(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const h=await l.ownerOf(u);if(a!==h)return e.push({type:"!owner",value:h}),{url:null,linkage:e};e.push({type:"owner",value:h})}else if(i==="erc1155"){const h=await l.balanceOf(a,u);if(!h)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:h.toString()})}let d=await l[o](u);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",tc(u,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=OA(d)),e.push({type:"metadata-url",value:d});let f={};const g=await new eo(d).send();g.assertOk();try{f=g.bodyJson}catch{try{e.push({type:"!metadata",value:g.bodyText})}catch{const b=g.body;return b&&e.push({type:"!metadata",value:Ee(b)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!f)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(f)});let p=f.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(MF)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=OA(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const r=await e.getNetwork(),n=r.getPlugin("org.ethers.plugins.network.Ens");return oe(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:r}}),n.address}static async#n(e,r){const n=await pd.getEnsAddress(e);try{const i=await new hd(n,["function resolver(bytes32) view returns (address)"],e).resolver(MC(r),{enableCcipRead:!0});return i===Gp?null:i}catch(s){throw s}return null}static async fromName(e,r){let n=r;for(;;){if(n===""||n==="."||r!=="eth"&&n==="eth")return null;const s=await pd.#n(e,n);if(s!=null){const i=new pd(e,s,r);return n!==r&&!await i.supportsWildcard()?null:i}n=n.split(".").slice(1).join(".")}}}const BO=BigInt(0);function dt(t,e){return(function(r){return r==null?e:t(r)})}function Qp(t,e){return(r=>{if(e&&r==null)return null;if(!Array.isArray(r))throw new Error("not an array");return r.map(n=>t(n))})}function _0(t,e){return(r=>{const n={};for(const s in t){let i=s;if(e&&s in e&&!(i in r)){for(const o of e[s])if(o in r){i=o;break}}try{const o=t[s](r[i]);o!==void 0&&(n[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";oe(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:r})}}return n})}function jme(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}W(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function Dd(t){return W(Mt(t,!0),"invalid data","value",t),t}function Vr(t){return W(Mt(t,32),"invalid hash","value",t),t}const Dme=_0({address:St,blockHash:Vr,blockNumber:Je,data:Dd,index:Je,removed:dt(jme,!1),topics:Qp(Vr),transactionHash:Vr,transactionIndex:Je},{index:["logIndex"]});function Ume(t){return Dme(t)}const Mme=_0({hash:dt(Vr),parentHash:Vr,parentBeaconBlockRoot:dt(Vr,null),number:Je,timestamp:Je,nonce:dt(Dd),difficulty:Ne,gasLimit:Ne,gasUsed:Ne,stateRoot:dt(Vr,null),receiptsRoot:dt(Vr,null),blobGasUsed:dt(Ne,null),excessBlobGas:dt(Ne,null),miner:dt(St),prevRandao:dt(Vr,null),extraData:Dd,baseFeePerGas:dt(Ne)},{prevRandao:["mixHash"]});function Lme(t){const e=Mme(t);return e.transactions=t.transactions.map(r=>typeof r=="string"?r:LF(r)),e}const Fme=_0({transactionIndex:Je,blockNumber:Je,transactionHash:Vr,address:St,topics:Qp(Vr),data:Dd,index:Je,blockHash:Vr},{index:["logIndex"]});function qme(t){return Fme(t)}const Hme=_0({to:dt(St,null),from:dt(St,null),contractAddress:dt(St,null),index:Je,root:dt(Ee),gasUsed:Ne,blobGasUsed:dt(Ne,null),logsBloom:dt(Dd),blockHash:Vr,hash:Vr,logs:Qp(qme),blockNumber:Je,cumulativeGasUsed:Ne,effectiveGasPrice:dt(Ne),blobGasPrice:dt(Ne,null),status:dt(Je),type:dt(Je,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function zme(t){return Hme(t)}function LF(t){t.to&&Ne(t.to)===BO&&(t.to="0x0000000000000000000000000000000000000000");const e=_0({hash:Vr,index:dt(Je,void 0),type:r=>r==="0x"||r==null?0:Je(r),accessList:dt(Xu,null),blobVersionedHashes:dt(Qp(Vr,!0),null),authorizationList:dt(Qp(r=>{let n;if(r.signature)n=r.signature;else{let s=r.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),n=Object.assign({},r,{yParity:s})}return{address:St(r.address),chainId:Ne(r.chainId),nonce:Ne(r.nonce),signature:Us.from(n)}},!1),null),blockHash:dt(Vr,null),blockNumber:dt(Je,null),transactionIndex:dt(Je,null),from:St,gasPrice:dt(Ne),maxPriorityFeePerGas:dt(Ne),maxFeePerGas:dt(Ne),maxFeePerBlobGas:dt(Ne,null),gasLimit:Ne,to:dt(St,null),value:Ne,nonce:Je,data:Dd,creates:dt(St,null),chainId:dt(Ne,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=O0e(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=Us.from(t.signature):e.signature=Us.from(t),e.chainId==null){const r=e.signature.legacyChainId;r!=null&&(e.chainId=r)}return e.blockHash&&Ne(e.blockHash)===BO&&(e.blockHash=null),e}const $me="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class A0{name;constructor(e){ze(this,{name:e})}clone(){return new A0(this.name)}}class XE extends A0{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,r){e==null&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);const n={effectiveBlock:e};function s(i,o){let a=(r||{})[i];a==null&&(a=o),W(typeof a=="number",`invalud value for ${i}`,"costs",r),n[i]=a}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),ze(this,n)}clone(){return new XE(this.effectiveBlock,this)}}class ev extends A0{address;targetNetwork;constructor(e,r){super("org.ethers.plugins.network.Ens"),ze(this,{address:e||$me,targetNetwork:r??1})}clone(){return new ev(this.address,this.targetNetwork)}}class Vme extends A0{#e;#t;get url(){return this.#e}get processFunc(){return this.#t}constructor(e,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#e=e,this.#t=r}clone(){return this}}const RA=new Map;class Es{#e;#t;#r;constructor(e,r){this.#e=e,this.#t=Ne(r),this.#r=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#e}set name(e){this.#e=e}get chainId(){return this.#t}set chainId(e){this.#t=Ne(e,"chainId")}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Ne(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Ne(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Ne(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(this.#r.values())}attachPlugin(e){if(this.#r.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#r.set(e.name,e.clone()),this}getPlugin(e){return this.#r.get(e)||null}getPlugins(e){return this.plugins.filter(r=>r.name.split("#")[0]===e)}clone(){const e=new Es(this.name,this.chainId);return this.plugins.forEach(r=>{e.attachPlugin(r.clone())}),e}computeIntrinsicGas(e){const r=this.getPlugin("org.ethers.plugins.network.GasCost")||new XE;let n=r.txBase;if(e.to==null&&(n+=r.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?n+=r.txDataZero:n+=r.txDataNonzero;if(e.accessList){const s=Xu(e.accessList);for(const i in s)n+=r.txAccessListAddress+r.txAccessListStorageKey*s[i].storageKeys.length}return n}static from(e){if(Gme(),e==null)return Es.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const r=RA.get(e);if(r)return r();if(typeof e=="bigint")return new Es("unknown",e);W(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){W(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const r=new Es(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&r.attachPlugin(new ev(e.ensAddress,e.ensNetwork)),r}W(!1,"invalid network","network",e)}static register(e,r){typeof e=="number"&&(e=BigInt(e));const n=RA.get(e);n&&W(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",e),RA.set(e,r)}}function jO(t,e){const r=String(t);if(!r.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const n=r.split(".");if(n.length===1&&n.push(""),n.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;n[1].length<e;)n[1]+="0";if(n[1].length>9){let s=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||s++,n[1]=s.toString()}return BigInt(n[0]+n[1])}function DO(t){return new Vme(t,async(e,r,n)=>{n.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([n.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:jO(a.maxFee,9),maxPriorityFeePerGas:jO(a.maxPriorityFee,9)}}catch(i){oe(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:s,error:i})}})}let UO=!1;function Gme(){if(UO)return;UO=!0;function t(e,r,n){const s=function(){const i=new Es(e,r);return n.ensNetwork!=null&&i.attachPlugin(new ev(null,n.ensNetwork)),i.attachPlugin(new XE),(n.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Es.register(e,s),Es.register(r,s),n.altNames&&n.altNames.forEach(i=>{Es.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("filecoin",314,{}),t("filecoin-calibration",314159,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[DO("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[DO("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function qC(t){return JSON.parse(JSON.stringify(t))}class Wme{#e;#t;#r;#n;constructor(e){this.#e=e,this.#t=null,this.#r=4e3,this.#n=-2}get pollingInterval(){return this.#r}set pollingInterval(e){this.#r=e}async#s(){try{const e=await this.#e.getBlockNumber();if(this.#n===-2){this.#n=e;return}if(e!==this.#n){for(let r=this.#n+1;r<=e;r++){if(this.#t==null)return;await this.#e.emit("block",r)}this.#n=e}}catch{}this.#t!=null&&(this.#t=this.#e._setTimeout(this.#s.bind(this),this.#r))}start(){this.#t||(this.#t=this.#e._setTimeout(this.#s.bind(this),this.#r),this.#s())}stop(){this.#t&&(this.#e._clearTimeout(this.#t),this.#t=null)}pause(e){this.stop(),e&&(this.#n=-2)}resume(){this.start()}}class dS{#e;#t;#r;constructor(e){this.#e=e,this.#r=!1,this.#t=r=>{this._poll(r,this.#e)}}async _poll(e,r){throw new Error("sub-classes must override this")}start(){this.#r||(this.#r=!0,this.#t(-2),this.#e.on("block",this.#t))}stop(){this.#r&&(this.#r=!1,this.#e.off("block",this.#t))}pause(e){this.stop()}resume(){this.start()}}class Kme extends dS{#e;#t;constructor(e,r){super(e),this.#e=r,this.#t=-2}pause(e){e&&(this.#t=-2),super.pause(e)}async _poll(e,r){const n=await r.getBlock(this.#e);n!=null&&(this.#t===-2?this.#t=n.number:n.number>this.#t&&(r.emit(this.#e,n.number),this.#t=n.number))}}class Zme extends dS{#e;constructor(e,r){super(e),this.#e=qC(r)}async _poll(e,r){throw new Error("@TODO")}}class Yme extends dS{#e;constructor(e,r){super(e),this.#e=r}async _poll(e,r){const n=await r.getTransactionReceipt(this.#e);n&&r.emit(this.#e,n)}}class fS{#e;#t;#r;#n;#s;constructor(e,r){this.#e=e,this.#t=qC(r),this.#r=this.#o.bind(this),this.#n=!1,this.#s=-2}async#o(e){if(this.#s===-2)return;const r=qC(this.#t);r.fromBlock=this.#s+1,r.toBlock=e;const n=await this.#e.getLogs(r);if(n.length===0){this.#s<e-60&&(this.#s=e-60);return}for(const s of n)this.#e.emit(this.#t,s),this.#s=s.blockNumber}start(){this.#n||(this.#n=!0,this.#s===-2&&this.#e.getBlockNumber().then(e=>{this.#s=e}),this.#e.on("block",this.#r))}stop(){this.#n&&(this.#n=!1,this.#e.off("block",this.#r))}pause(e){this.stop(),e&&(this.#s=-2)}resume(){this.start()}}const Jme=BigInt(2),Qme=10;function qg(t){return t&&typeof t.then=="function"}function w1(t,e){return t+":"+JSON.stringify(e,(r,n)=>{if(n==null)return"null";if(typeof n=="bigint")return`bigint:${n.toString()}`;if(typeof n=="string")return n.toLowerCase();if(typeof n=="object"&&!Array.isArray(n)){const s=Object.keys(n);return s.sort(),s.reduce((i,o)=>(i[o]=n[o],i),{})}return n})}class FF{name;constructor(e){ze(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function Xme(t){return JSON.parse(JSON.stringify(t))}function HC(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function xA(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(Mt(t,32)){const r=t.toLowerCase();return{type:"transaction",tag:w1("tx",{hash:r}),hash:r}}if(t.orphan){const r=t;return{type:"orphan",tag:w1("orphan",r),filter:Xme(r)}}if(t.address||t.topics){const r=t,n={topics:(r.topics||[]).map(s=>s==null?null:Array.isArray(s)?HC(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(r.address){const s=[],i=[],o=a=>{Mt(a)?s.push(a):i.push((async()=>{s.push(await _n(a,e))})())};Array.isArray(r.address)?r.address.forEach(o):o(r.address),i.length&&await Promise.all(i),n.address=HC(s.map(a=>a.toLowerCase()))}return{filter:n,tag:w1("event",n),type:"event"}}W(!1,"unknown ProviderEvent","event",t)}function kA(){return new Date().getTime()}const eye={cacheTimeout:250,pollingInterval:4e3};class tye{#e;#t;#r;#n;#s;#o;#i;#a;#d;#u;#p;#g;constructor(e,r){if(this.#g=Object.assign({},eye,r||{}),e==="any")this.#o=!0,this.#s=null;else if(e){const n=Es.from(e);this.#o=!1,this.#s=Promise.resolve(n),setTimeout(()=>{this.emit("network",n,null)},0)}else this.#o=!1,this.#s=null;this.#a=-1,this.#i=new Map,this.#e=new Map,this.#t=new Map,this.#r=null,this.#n=!1,this.#d=1,this.#u=new Map,this.#p=!1}get pollingInterval(){return this.#g.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#t.values())}attachPlugin(e){if(this.#t.get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return this.#t.set(e.name,e.connect(this)),this}getPlugin(e){return this.#t.get(e)||null}get disableCcipRead(){return this.#p}set disableCcipRead(e){this.#p=!!e}async#c(e){const r=this.#g.cacheTimeout;if(r<0)return await this._perform(e);const n=w1(e.method,e);let s=this.#i.get(n);return s||(s=this._perform(e),this.#i.set(n,s),setTimeout(()=>{this.#i.get(n)===s&&this.#i.delete(n)},r)),await s}async ccipReadFetch(e,r,n){if(this.disableCcipRead||n.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=r.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const c=n[a],u=c.replace("{sender}",s).replace("{data}",i),l=new eo(u);c.indexOf("{data}")===-1&&(l.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:l,index:a,urls:n});let d="unknown error",f;try{f=await l.send()}catch(g){o.push(g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:{error:g}});continue}try{const g=f.bodyJson;if(g.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:l,result:g}),g.data;g.message&&(d=g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:g})}catch{}oe(f.statusCode<400||f.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}oe(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:n,errorMessages:o}})}_wrapBlock(e,r){return new Eme(Lme(e),this)}_wrapLog(e,r){return new E0(Ume(e),this)}_wrapTransactionReceipt(e,r){return new TF(zme(e),this)}_wrapTransactionResponse(e,r){return new v0(LF(e),this)}_detectNetwork(){oe(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){oe(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Je(await this.#c({method:"getBlockNumber"}),"%response");return this.#a>=0&&(this.#a=e),e}_getAddress(e){return _n(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Mt(e))return Mt(e,32)?e:ci(e);if(typeof e=="bigint"&&(e=Je(e,"blockTag")),typeof e=="number")return e>=0?ci(e):this.#a>=0?ci(this.#a+e):this.getBlockNumber().then(r=>ci(r+e));W(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const r=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?HC(c.map(u=>u.toLowerCase())):c.toLowerCase()),n="blockHash"in e?e.blockHash:void 0,s=(c,u,l)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(n&&(u!=null||l!=null))throw new Error("invalid filter");const f={};return d&&(f.address=d),r.length&&(f.topics=r),u&&(f.fromBlock=u),l&&(f.toBlock=l),n&&(f.blockHash=n),f};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const r=dE(e),n=[];if(["to","from"].forEach(s=>{if(r[s]==null)return;const i=_n(r[s],this);qg(i)?n.push((async function(){r[s]=await i})()):r[s]=i}),r.blockTag!=null){const s=this._getBlockTag(r.blockTag);qg(s)?n.push((async function(){r.blockTag=await s})()):r.blockTag=s}return n.length?(async function(){return await Promise.all(n),r})():r}async getNetwork(){if(this.#s==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw this.#s===s&&(this.#s=null),i}})();return this.#s=s,(await s).clone()}const e=this.#s,[r,n]=await Promise.all([e,this._detectNetwork()]);return r.chainId!==n.chainId&&(this.#o?(this.emit("network",n,r),this.#s===e&&(this.#s=Promise.resolve(n))):oe(!1,`network changed: ${r.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),r.clone()}async getFeeData(){const e=await this.getNetwork(),r=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await bn({_block:this.#b("latest",!1),gasPrice:(async()=>{try{const l=await this.#c({method:"getGasPrice"});return Ne(l,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const l=await this.#c({method:"getPriorityFee"});return Ne(l,"%response")}catch{}return null})()});let a=null,c=null;const u=this._wrapBlock(s,e);return u&&u.baseFeePerGas&&(c=o??BigInt("1000000000"),a=u.baseFeePerGas*Jme+c),new OO(i,a,c)},n=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const s=new eo(n.url),i=await n.processFunc(r,this,s);return new OO(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await r()}async estimateGas(e){let r=this._getTransactionRequest(e);return qg(r)&&(r=await r),Ne(await this.#c({method:"estimateGas",transaction:r}),"%response")}async#l(e,r,n){oe(n<Qme,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:r,enableCcipRead:!0})});const s=dE(e);try{return Ee(await this._perform({method:"call",transaction:s,blockTag:r}))}catch(i){if(!this.disableCcipRead&&WI(i)&&i.data&&n>=0&&r==="latest"&&s.to!=null&&lr(i.data,0,4)==="0x556f1830"){const o=i.data,a=await _n(s.to,this);let c;try{c=oye(lr(i.data,4))}catch(d){oe(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}oe(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const u=await this.ccipReadFetch(s,c.calldata,c.urls);oe(u!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const l={to:a,data:Qt([c.selector,iye([u,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:l});try{const d=await this.#l(l,r,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},l),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},l),error:d}),d}}throw i}}async#f(e){const{value:r}=await bn({network:this.getNetwork(),value:e});return r}async call(e){const{tx:r,blockTag:n}=await bn({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#f(this.#l(r,n,e.enableCcipRead?0:-1))}async#h(e,r,n){let s=this._getAddress(r),i=this._getBlockTag(n);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await this.#f(this.#c(Object.assign(e,{address:s,blockTag:i})))}async getBalance(e,r){return Ne(await this.#h({method:"getBalance"},e,r),"%response")}async getTransactionCount(e,r){return Je(await this.#h({method:"getTransactionCount"},e,r),"%response")}async getCode(e,r){return Ee(await this.#h({method:"getCode"},e,r))}async getStorage(e,r,n){const s=Ne(r,"position");return Ee(await this.#h({method:"getStorage",position:s},e,n))}async broadcastTransaction(e){const{blockNumber:r,hash:n,network:s}=await bn({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=oi.from(e);if(i.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(r)}async#b(e,r){if(Mt(e,32))return await this.#c({method:"getBlock",blockHash:e,includeTransactions:r});let n=this._getBlockTag(e);return typeof n!="string"&&(n=await n),await this.#c({method:"getBlock",blockTag:n,includeTransactions:r})}async getBlock(e,r){const{network:n,params:s}=await bn({network:this.getNetwork(),params:this.#b(e,!!r)});return s==null?null:this._wrapBlock(s,n)}async getTransaction(e){const{network:r,params:n}=await bn({network:this.getNetwork(),params:this.#c({method:"getTransaction",hash:e})});return n==null?null:this._wrapTransactionResponse(n,r)}async getTransactionReceipt(e){const{network:r,params:n}=await bn({network:this.getNetwork(),params:this.#c({method:"getTransactionReceipt",hash:e})});if(n==null)return null;if(n.gasPrice==null&&n.effectiveGasPrice==null){const s=await this.#c({method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(n,r)}async getTransactionResult(e){const{result:r}=await bn({network:this.getNetwork(),result:this.#c({method:"getTransactionResult",hash:e})});return r==null?null:Ee(r)}async getLogs(e){let r=this._getFilter(e);qg(r)&&(r=await r);const{network:n,params:s}=await bn({network:this.getNetwork(),params:this.#c({method:"getLogs",filter:r})});return s.map(i=>this._wrapLog(i,n))}_getProvider(e){oe(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await pd.fromName(this,e)}async getAvatar(e){const r=await this.getResolver(e);return r?await r.getAvatar():null}async resolveName(e){const r=await this.getResolver(e);return r?await r.getAddress():null}async lookupAddress(e){e=St(e);const r=MC(e.substring(2).toLowerCase()+".addr.reverse");try{const n=await pd.getEnsAddress(this),i=await new hd(n,["function resolver(bytes32) view returns (address)"],this).resolver(r);if(i==null||i===Gp)return null;const a=await new hd(i,["function name(bytes32) view returns (string)"],this).name(r);return await this.resolveName(a)!==e?null:a}catch(n){if(Gr(n,"BAD_DATA")&&n.value==="0x"||Gr(n,"CALL_EXCEPTION"))return null;throw n}return null}async waitForTransaction(e,r,n){const s=r??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=(async u=>{try{const l=await this.getTransactionReceipt(e);if(l!=null&&u-l.blockNumber+1>=s){i(l),a&&(clearTimeout(a),a=null);return}}catch(l){console.log("EEE",l)}this.once("block",c)});n!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(Yt("timeout","TIMEOUT",{reason:"timeout"})))},n)),c(await this.getBlockNumber())})}async waitForBlock(e){oe(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const r=this.#u.get(e);r&&(r.timer&&clearTimeout(r.timer),this.#u.delete(e))}_setTimeout(e,r){r==null&&(r=0);const n=this.#d++,s=()=>{this.#u.delete(n),e()};if(this.paused)this.#u.set(n,{timer:null,func:s,time:r});else{const i=setTimeout(s,r);this.#u.set(n,{timer:i,func:s,time:kA()})}return n}_forEachSubscriber(e){for(const r of this.#e.values())e(r.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new FF(e.type);case"block":{const r=new Wme(this);return r.pollingInterval=this.pollingInterval,r}case"safe":case"finalized":return new Kme(this,e.type);case"event":return new fS(this,e.filter);case"transaction":return new Yme(this,e.hash);case"orphan":return new Zme(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,r){for(const n of this.#e.values())if(n.subscriber===e){n.started&&n.subscriber.stop(),n.subscriber=r,n.started&&r.start(),this.#r!=null&&r.pause(this.#r);break}}async#m(e,r){let n=await xA(e,this);return n.type==="event"&&r&&r.length>0&&r[0].removed===!0&&(n=await xA({orphan:"drop-log",log:r[0]},this)),this.#e.get(n.tag)||null}async#y(e){const r=await xA(e,this),n=r.tag;let s=this.#e.get(n);return s||(s={subscriber:this._getSubscriber(r),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#e.set(n,s)),s}async on(e,r){const n=await this.#y(e);return n.listeners.push({listener:r,once:!1}),n.started||(n.subscriber.start(),n.started=!0,this.#r!=null&&n.subscriber.pause(this.#r)),this}async once(e,r){const n=await this.#y(e);return n.listeners.push({listener:r,once:!0}),n.started||(n.subscriber.start(),n.started=!0,this.#r!=null&&n.subscriber.pause(this.#r)),this}async emit(e,...r){const n=await this.#m(e,r);if(!n||n.listeners.length===0)return!1;const s=n.listeners.length;return n.listeners=n.listeners.filter(({listener:i,once:o})=>{const a=new r9(this,o?null:i,e);try{i.call(this,...r,a)}catch{}return!o}),n.listeners.length===0&&(n.started&&n.subscriber.stop(),this.#e.delete(n.tag)),s>0}async listenerCount(e){if(e){const n=await this.#m(e);return n?n.listeners.length:0}let r=0;for(const{listeners:n}of this.#e.values())r+=n.length;return r}async listeners(e){if(e){const n=await this.#m(e);return n?n.listeners.map(({listener:s})=>s):[]}let r=[];for(const{listeners:n}of this.#e.values())r=r.concat(n.map(({listener:s})=>s));return r}async off(e,r){const n=await this.#m(e);if(!n)return this;if(r){const s=n.listeners.map(({listener:i})=>i).indexOf(r);s>=0&&n.listeners.splice(s,1)}return(!r||n.listeners.length===0)&&(n.started&&n.subscriber.stop(),this.#e.delete(n.tag)),this}async removeAllListeners(e){if(e){const{tag:r,started:n,subscriber:s}=await this.#y(e);n&&s.stop(),this.#e.delete(r)}else for(const[r,{started:n,subscriber:s}]of this.#e)n&&s.stop(),this.#e.delete(r);return this}async addListener(e,r){return await this.on(e,r)}async removeListener(e,r){return this.off(e,r)}get destroyed(){return this.#n}destroy(){this.removeAllListeners();for(const e of this.#u.keys())this._clearTimeout(e);this.#n=!0}get paused(){return this.#r!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#a=-1,this.#r!=null){if(this.#r==!!e)return;oe(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(r=>r.pause(e)),this.#r=!!e;for(const r of this.#u.values())r.timer&&clearTimeout(r.timer),r.time=kA()-r.time}resume(){if(this.#r!=null){this._forEachSubscriber(e=>e.resume()),this.#r=null;for(const e of this.#u.values()){let r=e.time;r<0&&(r=0),e.time=kA(),setTimeout(e.func,r)}}}}function rye(t,e){try{const r=zC(t,e);if(r)return sE(r)}catch{}return null}function zC(t,e){if(t==="0x")return null;try{const r=Je(lr(t,e,e+32)),n=Je(lr(t,r,r+32));return lr(t,r+32,r+32+n)}catch{}return null}function MO(t){const e=Cr(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function nye(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const sye=new Uint8Array([]);function iye(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(sye),r+=32;for(let n=0;n<t.length;n++){const s=nt(t[n]);e[n]=MO(r),e.push(MO(s.length)),e.push(nye(s)),r+=32+Math.ceil(s.length/32)*32}return Qt(e)}const LO="0x0000000000000000000000000000000000000000000000000000000000000000";function oye(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};oe(ud(t)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const r=lr(t,0,32);oe(lr(r,0,12)===lr(LO,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=lr(r,12);try{const n=[],s=Je(lr(t,32,64)),i=Je(lr(t,s,s+32)),o=lr(t,s+32);for(let a=0;a<i;a++){const c=rye(o,a*32);if(c==null)throw new Error("abort");n.push(c)}e.urls=n}catch{oe(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=zC(t,64);if(n==null)throw new Error("abort");e.calldata=n}catch{oe(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}oe(lr(t,100,128)===lr(LO,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=lr(t,96,100);try{const n=zC(t,128);if(n==null)throw new Error("abort");e.extraData=n}catch{oe(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>e[n]),e}function Dc(t,e){if(t.provider)return t.provider;oe(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function FO(t,e){let r=dE(e);if(r.to!=null&&(r.to=_n(r.to,t)),r.from!=null){const n=r.from;r.from=Promise.all([t.getAddress(),_n(n,t)]).then(([s,i])=>(W(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else r.from=t.getAddress();return await bn(r)}class aye{provider;constructor(e){ze(this,{provider:e||null})}async getNonce(e){return Dc(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await FO(this,e)}async populateTransaction(e){const r=Dc(this,"populateTransaction"),n=await FO(this,e);n.nonce==null&&(n.nonce=await this.getNonce("pending")),n.gasLimit==null&&(n.gasLimit=await this.estimateGas(n));const s=await this.provider.getNetwork();if(n.chainId!=null){const o=Ne(n.chainId);W(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else n.chainId=s.chainId;const i=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||i)?W(!1,"eip-1559 transaction do not support gasPrice","tx",e):(n.type===0||n.type===1)&&i&&W(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1){const o=await r.getFeeData();oe(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice)}else{const o=await r.getFeeData();if(n.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(n.authorizationList&&n.authorizationList.length?n.type=4:n.type=2,n.gasPrice!=null){const a=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=a,n.maxPriorityFeePerGas=a}else n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(oe(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice),n.type=0):oe(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(n.type===2||n.type===3||n.type===4)&&(n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await bn(n)}async populateAuthorization(e){const r=Object.assign({},e);return r.chainId==null&&(r.chainId=(await Dc(this,"getNetwork").getNetwork()).chainId),r.nonce==null&&(r.nonce=await this.getNonce()),r}async estimateGas(e){return Dc(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Dc(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Dc(this,"resolveName").resolveName(e)}async sendTransaction(e){const r=Dc(this,"sendTransaction"),n=await this.populateTransaction(e);delete n.from;const s=oi.from(n);return await r.broadcastTransaction(await this.signTransaction(s))}authorize(e){oe(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function cye(t){return JSON.parse(JSON.stringify(t))}class qF{#e;#t;#r;#n;#s;#o;constructor(e){this.#e=e,this.#t=null,this.#r=this.#i.bind(this),this.#n=!1,this.#s=null,this.#o=!1}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,r){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}async#i(e){try{this.#t==null&&(this.#t=this._subscribe(this.#e));let r=null;try{r=await this.#t}catch(i){if(!Gr(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(r==null){this.#t=null,this.#e._recoverSubscriber(this,this._recover(this.#e));return}const n=await this.#e.getNetwork();if(this.#s||(this.#s=n),this.#s.chainId!==n.chainId)throw new Error("chaid changed");if(this.#o)return;const s=await this.#e.send("eth_getFilterChanges",[r]);await this._emitResults(this.#e,s)}catch(r){console.log("@TODO",r)}this.#e.once("block",this.#r)}#a(){const e=this.#t;e&&(this.#t=null,e.then(r=>{this.#e.destroyed||this.#e.send("eth_uninstallFilter",[r])}))}start(){this.#n||(this.#n=!0,this.#i(-2))}stop(){this.#n&&(this.#n=!1,this.#o=!0,this.#a(),this.#e.off("block",this.#r))}pause(e){e&&this.#a(),this.#e.off("block",this.#r)}resume(){this.start()}}class uye extends qF{#e;constructor(e,r){super(e),this.#e=cye(r)}_recover(e){return new fS(e,this.#e)}async _subscribe(e){return await e.send("eth_newFilter",[this.#e])}async _emitResults(e,r){for(const n of r)e.emit(this.#e,e._wrapLog(n,e._network))}}class lye extends qF{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,r){for(const n of r)e.emit("pending",n)}}const dye="bigint,boolean,function,number,string,symbol".split(/,/g);function E1(t){if(t==null||dye.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(E1);if(typeof t=="object")return Object.keys(t).reduce((e,r)=>(e[r]=t[r],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function fye(t){return new Promise(e=>{setTimeout(e,t)})}function _l(t){return t&&t.toLowerCase()}function qO(t){return t&&typeof t.pollingInterval=="number"}const HF={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class gd extends aye{address;constructor(e,r){super(e),r=St(r),ze(this,{address:r})}connect(e){oe(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const r=E1(e),n=[];if(r.from){const i=r.from;n.push((async()=>{const o=await _n(i,this.provider);W(o!=null&&o.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),r.from=o})())}else r.from=this.address;if(r.gasLimit==null&&n.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const i=r.to;n.push((async()=>{r.to=await _n(i,this.provider)})())}n.length&&await Promise.all(n);const s=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[s])}async sendTransaction(e){const r=await this.provider.getBlockNumber(),n=await this.sendUncheckedTransaction(e);return await new Promise((s,i)=>{const o=[1e3,100];let a=0;const c=async()=>{try{const u=await this.provider.getTransaction(n);if(u!=null){s(u.replaceableTransaction(r));return}}catch(u){if(Gr(u,"CANCELLED")||Gr(u,"BAD_DATA")||Gr(u,"NETWORK_ERROR")||Gr(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=n,i(u);return}if(Gr(u,"INVALID_ARGUMENT")&&(a++,u.info==null&&(u.info={}),u.info.sendTransactionHash=n,a>10)){i(u);return}this.provider.emit("error",Yt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{c()},o.pop()||4e3)};c()})}async signTransaction(e){const r=E1(e);if(r.from){const s=await _n(r.from,this.provider);W(s!=null&&s.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),r.from=s}else r.from=this.address;const n=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[n])}async signMessage(e){const r=typeof e=="string"?Yi(e):e;return await this.provider.send("personal_sign",[Ee(r),this.address.toLowerCase()])}async signTypedData(e,r,n){const s=E1(n),i=await fs.resolveNames(e,r,s,async o=>{const a=await _n(o);return W(a!=null,"TypedData does not support null address","value",o),a});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(fs.getPayload(i.domain,r,i.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const r=typeof e=="string"?Yi(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Ee(r)])}}class hye extends tye{#e;#t;#r;#n;#s;#o;#i;#a(){if(this.#n)return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");this.#n=setTimeout(()=>{this.#n=null;const r=this.#r;for(this.#r=[];r.length;){const n=[r.shift()];for(;r.length&&n.length!==this.#e.batchMaxCount;)if(n.push(r.shift()),JSON.stringify(n.map(i=>i.payload)).length>this.#e.batchMaxSize){r.unshift(n.pop());break}(async()=>{const s=n.length===1?n[0].payload:n.map(i=>i.payload);this.emit("debug",{action:"sendRpcPayload",payload:s});try{const i=await this._send(s);this.emit("debug",{action:"receiveRpcResult",result:i});for(const{resolve:o,reject:a,payload:c}of n){if(this.destroyed){a(Yt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:c.method}));continue}const u=i.filter(l=>l.id===c.id)[0];if(u==null){const l=Yt("missing response for request","BAD_DATA",{value:i,info:{payload:c}});this.emit("error",l),a(l);continue}if("error"in u){a(this.getRpcError(c,u));continue}o(u.result)}}catch(i){this.emit("debug",{action:"receiveRpcError",error:i});for(const{reject:o}of n)o(i)}})()}},e)}constructor(e,r){super(e,r),this.#t=1,this.#e=Object.assign({},HF,r||{}),this.#r=[],this.#n=null,this.#o=null,this.#i=null;{let s=null;const i=new Promise(o=>{s=o});this.#s={promise:i,resolve:s}}const n=this._getOption("staticNetwork");typeof n=="boolean"?(W(!n||e!=="any","staticNetwork cannot be used on special network 'any'","options",r),n&&e!=null&&(this.#o=Es.from(e))):n&&(W(e==null||n.matches(e),"staticNetwork MUST match network object","options",r),this.#o=n)}_getOption(e){return this.#e[e]}get _network(){return oe(this.#o,"network is not available yet","NETWORK_ERROR"),this.#o}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let n=e.transaction;if(n&&n.type!=null&&Ne(n.type)&&n.maxFeePerGas==null&&n.maxPriorityFeePerGas==null){const s=await this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},n,{type:void 0})}))}}const r=this.getRpcRequest(e);return r!=null?await this.send(r.method,r.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)if(e===!0){if(this.#o)return this.#o}else return e;return this.#i?await this.#i:this.ready?(this.#i=(async()=>{try{const r=Es.from(Ne(await this.send("eth_chainId",[])));return this.#i=null,r}catch(r){throw this.#i=null,r}})(),await this.#i):(this.#i=(async()=>{const r={id:this.#t++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let n;try{n=(await this._send(r))[0],this.#i=null}catch(s){throw this.#i=null,this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:n}),"result"in n)return Es.from(Ne(n.result));throw this.getRpcError(r,n)})(),await this.#i)}_start(){this.#s==null||this.#s.resolve==null||(this.#s.resolve(),this.#s=null,(async()=>{for(;this.#o==null&&!this.destroyed;)try{this.#o=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Yt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await fye(1e3)}this.#a()})())}async _waitUntilReady(){if(this.#s!=null)return await this.#s.promise}_getSubscriber(e){return e.type==="pending"?new lye(this):e.type==="event"?this._getOption("polling")?new fS(this,e.filter):new uye(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new FF("orphan"):super._getSubscriber(e)}get ready(){return this.#s==null}getRpcTransaction(e){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(n=>{if(e[n]==null)return;let s=n;n==="gasLimit"&&(s="gas"),r[s]=ci(Ne(e[n],`tx.${n}`))}),["from","to","data"].forEach(n=>{e[n]!=null&&(r[n]=Ee(e[n]))}),e.accessList&&(r.accessList=Xu(e.accessList)),e.blobVersionedHashes&&(r.blobVersionedHashes=e.blobVersionedHashes.map(n=>n.toLowerCase())),e.authorizationList&&(r.authorizationList=e.authorizationList.map(n=>{const s=W9(n);return{address:s.address,nonce:ci(s.nonce),chainId:ci(s.chainId),yParity:ci(s.signature.yParity),r:ci(s.signature.r),s:ci(s.signature.s)}})),r}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[_l(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[_l(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[_l(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[_l(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(_l):e.filter.address=_l(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,r){const{method:n}=e,{error:s}=r;if(n==="eth_estimateGas"&&s.message){const a=s.message;if(!a.match(/revert/i)&&a.match(/insufficient funds/i))return Yt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:s}});if(a.match(/nonce/i)&&a.match(/too low/i))return Yt("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:s}})}if(n==="eth_call"||n==="eth_estimateGas"){const a=$C(s),c=jd.getBuiltinCallException(n==="eth_call"?"call":"estimateGas",e.params[0],a?a.data:null);return c.info={error:s,payload:e},c}const i=JSON.stringify(gye(s));if(typeof s.message=="string"&&s.message.match(/user denied|ethers-user-denied/i))return Yt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[n]||"unknown",reason:"rejected",info:{payload:e,error:s}});if(n==="eth_sendRawTransaction"||n==="eth_sendTransaction"){const a=e.params[0];if(i.match(/insufficient funds|base fee exceeds gas limit/i))return Yt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:a,info:{error:s}});if(i.match(/nonce/i)&&i.match(/too low/i))return Yt("nonce has already been used","NONCE_EXPIRED",{transaction:a,info:{error:s}});if(i.match(/replacement transaction/i)&&i.match(/underpriced/i))return Yt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:a,info:{error:s}});if(i.match(/only replay-protected/i))return Yt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:n,info:{transaction:a,info:{error:s}}})}let o=!!i.match(/the method .* does not exist/i);return o||s&&s.details&&s.details.startsWith("Unauthorized method:")&&(o=!0),o?Yt("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:s,payload:e}}):Yt("could not coalesce error","UNKNOWN_ERROR",{error:s,payload:e})}send(e,r){if(this.destroyed)return Promise.reject(Yt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const n=this.#t++,s=new Promise((i,o)=>{this.#r.push({resolve:i,reject:o,payload:{method:e,params:r,id:n,jsonrpc:"2.0"}})});return this.#a(),s}async getSigner(e){e==null&&(e=0);const r=this.send("eth_accounts",[]);if(typeof e=="number"){const s=await r;if(e>=s.length)throw new Error("no such account");return new gd(this,s[e])}const{accounts:n}=await bn({network:this.getNetwork(),accounts:r});e=St(e);for(const s of n)if(St(s)===e)return new gd(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new gd(this,r))}destroy(){this.#n&&(clearTimeout(this.#n),this.#n=null);for(const{payload:e,reject:r}of this.#r)r(Yt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#r=[],super.destroy()}}class zF extends hye{#e;constructor(e,r){super(e,r);let n=this._getOption("pollingInterval");n==null&&(n=HF.pollingInterval),this.#e=n}_getSubscriber(e){const r=super._getSubscriber(e);return qO(r)&&(r.pollingInterval=this.#e),r}get pollingInterval(){return this.#e}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");this.#e=e,this._forEachSubscriber(r=>{qO(r)&&(r.pollingInterval=this.#e)})}}class pye extends zF{#e;constructor(e,r,n){e==null&&(e="http://localhost:8545"),super(r,n),typeof e=="string"?this.#e=new eo(e):this.#e=e.clone()}_getConnection(){return this.#e.clone()}async send(e,r){return await this._start(),await super.send(e,r)}async _send(e){const r=this._getConnection();r.body=JSON.stringify(e),r.setHeader("content-type","application/json");const n=await r.send();n.assertOk();let s=n.bodyJson;return Array.isArray(s)||(s=[s]),s}}function $C(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&Mt(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const r=$C(t[e]);if(r)return r}return null}if(typeof t=="string")try{return $C(JSON.parse(t))}catch{}return null}function VC(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const r in t)VC(t[r],e);if(typeof t=="string")try{return VC(JSON.parse(t),e)}catch{}}}function gye(t){const e=[];return VC(t,e),e}class zo extends zF{#e;#t;constructor(e,r,n){const s=Object.assign({},n??{},{batchMaxCount:1});W(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(r,s),this.#t=null,n&&n.providerInfo&&(this.#t=n.providerInfo),this.#e=async(i,o)=>{const a={method:i,params:o};this.emit("debug",{action:"sendEip1193Request",payload:a});try{const c=await e.request(a);return this.emit("debug",{action:"receiveEip1193Result",result:c}),c}catch(c){const u=new Error(c.message);throw u.code=c.code,u.data=c.data,u.payload=a,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}}}get providerInfo(){return this.#t}async send(e,r){return await this._start(),await super.send(e,r)}async _send(e){W(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const r=await this.#e(e.method,e.params||[]);return[{id:e.id,result:r}]}catch(r){return[{id:e.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(e,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(e,r)}async hasSigner(e){e==null&&(e=0);const r=await this.send("eth_accounts",[]);return typeof e=="number"?r.length>e:(e=e.toLowerCase(),r.filter(n=>n.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await this.#e("eth_requestAccounts",[])}catch(r){const n=r.payload;throw this.getRpcError(n,{id:n.id,error:r})}return await super.getSigner(e)}static async discover(e){if(e==null&&(e={}),e.provider)return new zo(e.provider);const r=e.window?e.window:typeof window<"u"?window:null;if(r==null)return null;const n=e.anyProvider;if(n&&r.ethereum)return new zo(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const s=e.timeout?e.timeout:300;return s===0?null:await new Promise((i,o)=>{let a=[];const c=d=>{a.push(d.detail),n&&u()},u=()=>{if(clearTimeout(l),a.length)if(e&&e.filter){const d=e.filter(a.map(f=>Object.assign({},f.info)));if(d==null)i(null);else if(d instanceof zo)i(d);else{let f=null;if(d.uuid&&(f=a.filter(p=>d.uuid===p.info.uuid)[0]),f){const{provider:g,info:p}=f;i(new zo(g,void 0,{providerInfo:p}))}else o(Yt("filter returned unknown info","UNSUPPORTED_OPERATION",{value:d}))}}else{const{provider:d,info:f}=a[0];i(new zo(d,void 0,{providerInfo:f}))}else i(null);r.removeEventListener("eip6963:announceProvider",c)},l=setTimeout(()=>{u()},s);r.addEventListener("eip6963:announceProvider",c),r.dispatchEvent(new Event("eip6963:requestProvider"))})}}const md={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,r]=await Promise.all([md.getAddresses(t),md.getChainId(t)]);return{chainId:r,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){const r=e.rpcUrls.chainDefault?.http||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:md.numberToHexString(e.id),rpcUrls:[...r],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[e.blockExplorers?.default.url],iconUrls:[bs.NetworkImageIds[e.id]]}]})}};class hS{constructor(){this.initialized=!1}async getProvider(){return Promise.resolve(this.provider)}}class mye extends hS{async initialize(){const e=z.getCaipNetworks(),{metadata:r,coinbasePreference:n}=ne.state;try{const{createBaseAccountSDK:s}=await $r(async()=>{const{createBaseAccountSDK:o}=await import("./index-e3Vx0u7D.js");return{createBaseAccountSDK:o}},__vite__mapDeps([53,1,2]));if(typeof window>"u")return Promise.resolve();const i=s({appName:r?.name,appLogoUrl:r?.icons[0],appChainIds:e?.map(o=>o.id)||[1,84532],preference:{options:n??"all"}});return this.provider=i.getProvider(),this.initialized=!0,Promise.resolve()}catch(s){return console.error("Failed to import Coinbase Wallet SDK:",s),Promise.resolve()}}async getProvider(){return Promise.resolve(this.provider)}}var BA={},Tf={},ho={},Al={},Uc={},Pf={},Nf={},HO;function $F(){if(HO)return Nf;HO=1,Object.defineProperty(Nf,"__esModule",{value:!0}),Nf.getSDKVersion=void 0;const t=()=>"9.1.0";return Nf.getSDKVersion=t,Nf}var Of={},zO;function yye(){if(zO)return Of;zO=1,Object.defineProperty(Of,"__esModule",{value:!0}),Of.generateRequestId=void 0;const t=n=>n.toString(16).padStart(2,"0"),e=n=>{const s=new Uint8Array(n/2);return window.crypto.getRandomValues(s),Array.from(s,t).join("")},r=()=>typeof window<"u"?e(10):new Date().getTime().toString(36);return Of.generateRequestId=r,Of}var $O;function VF(){if($O)return Pf;$O=1,Object.defineProperty(Pf,"__esModule",{value:!0}),Pf.MessageFormatter=void 0;const t=$F(),e=yye();class r{}return Pf.MessageFormatter=r,r.makeRequest=(n,s)=>({id:(0,e.generateRequestId)(),method:n,params:s,env:{sdkVersion:(0,t.getSDKVersion)()}}),r.makeResponse=(n,s,i)=>({id:n,success:!0,version:i,data:s}),r.makeErrorResponse=(n,s,i)=>({id:n,success:!1,error:s,version:i}),Pf}var Mc={},VO;function tl(){if(VO)return Mc;VO=1,Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.RestrictedMethods=Mc.Methods=void 0;var t;(function(r){r.sendTransactions="sendTransactions",r.rpcCall="rpcCall",r.getChainInfo="getChainInfo",r.getSafeInfo="getSafeInfo",r.getTxBySafeTxHash="getTxBySafeTxHash",r.getSafeBalances="getSafeBalances",r.signMessage="signMessage",r.signTypedMessage="signTypedMessage",r.getEnvironmentInfo="getEnvironmentInfo",r.getOffChainSignature="getOffChainSignature",r.requestAddressBook="requestAddressBook",r.wallet_getPermissions="wallet_getPermissions",r.wallet_requestPermissions="wallet_requestPermissions"})(t||(Mc.Methods=t={}));var e;return(function(r){r.requestAddressBook="requestAddressBook"})(e||(Mc.RestrictedMethods=e={})),Mc}var GO;function bye(){return GO||(GO=1,(function(t){var e=Uc&&Uc.__createBinding||(Object.create?(function(i,o,a,c){c===void 0&&(c=a);var u=Object.getOwnPropertyDescriptor(o,a);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(i,c,u)}):(function(i,o,a,c){c===void 0&&(c=a),i[c]=o[a]})),r=Uc&&Uc.__exportStar||function(i,o){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&e(o,i,a)};Object.defineProperty(t,"__esModule",{value:!0});const n=VF();class s{constructor(o=null,a=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:c,data:u,source:l})=>{const d=!u,f=!this.isServer&&l===window.parent,g=typeof u.version<"u"&&parseInt(u.version.split(".")[0]),p=typeof g=="number"&&g>=1;let h=!0;return Array.isArray(this.allowedOrigins)&&(h=this.allowedOrigins.find(y=>y.test(c))!==void 0),!d&&f&&p&&h},this.logIncomingMessage=c=>{console.info(`Safe Apps SDK v1: A message was received from origin ${c.origin}. `,c.data)},this.onParentMessage=c=>{this.isValidMessage(c)&&(this.debugMode&&this.logIncomingMessage(c),this.handleIncomingMessage(c.data))},this.handleIncomingMessage=c=>{const{id:u}=c,l=this.callbacks.get(u);l&&(l(c),this.callbacks.delete(u))},this.send=(c,u)=>{const l=n.MessageFormatter.makeRequest(c,u);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(l,"*"),new Promise((d,f)=>{this.callbacks.set(l.id,g=>{if(!g.success){f(new Error(g.error));return}d(g)})})},this.allowedOrigins=o,this.debugMode=a,this.isServer||window.addEventListener("message",this.onParentMessage)}}t.default=s,r(tl(),t)})(Uc)),Uc}var Rf={},Lc={},xf={},WO;function wye(){if(WO)return xf;WO=1,Object.defineProperty(xf,"__esModule",{value:!0}),xf.isObjectEIP712TypedData=void 0;const t=e=>typeof e=="object"&&e!=null&&"domain"in e&&"types"in e&&"message"in e;return xf.isObjectEIP712TypedData=t,xf}var jA={},KO;function Eye(){return KO||(KO=1,Object.defineProperty(jA,"__esModule",{value:!0})),jA}var DA={},Fc={},qc={},po={},ZO;function vye(){if(ZO)return po;ZO=1;var t=po&&po.__awaiter||function(c,u,l,d){function f(g){return g instanceof l?g:new l(function(p){p(g)})}return new(l||(l=Promise))(function(g,p){function h(E){try{b(d.next(E))}catch(w){p(w)}}function y(E){try{b(d.throw(E))}catch(w){p(w)}}function b(E){E.done?g(E.value):f(E.value).then(h,y)}b((d=d.apply(c,u||[])).next())})};Object.defineProperty(po,"__esModule",{value:!0}),po.insertParams=n,po.stringifyQuery=s,po.fetchData=o,po.getData=a;const e=c=>typeof c=="object"&&c!==null&&("code"in c||"statusCode"in c)&&"message"in c;function r(c,u,l){return c.replace(new RegExp(`\\{${u}\\}`,"g"),l)}function n(c,u){return u?Object.keys(u).reduce((l,d)=>r(l,d,String(u[d])),c):c}function s(c){if(!c)return"";const u=new URLSearchParams;Object.keys(c).forEach(d=>{c[d]!=null&&u.append(d,String(c[d]))});const l=u.toString();return l?`?${l}`:""}function i(c){return t(this,void 0,void 0,function*(){var u;let l;try{l=yield c.json()}catch{l={}}if(!c.ok){const d=e(l)?`CGW error - ${(u=l.code)!==null&&u!==void 0?u:l.statusCode}: ${l.message}`:`CGW error - status ${c.statusText}`;throw new Error(d)}return l})}function o(c,u,l,d,f){return t(this,void 0,void 0,function*(){const g=Object.assign({"Content-Type":"application/json"},d),p={method:u??"POST",headers:g};f&&(p.credentials=f),l!=null&&(p.body=typeof l=="string"?l:JSON.stringify(l));const h=yield fetch(c,p);return i(h)})}function a(c,u,l){return t(this,void 0,void 0,function*(){const d={method:"GET"};u&&(d.headers=Object.assign(Object.assign({},u),{"Content-Type":"application/json"})),l&&(d.credentials=l);const f=yield fetch(c,d);return i(f)})}return po}var YO;function _ye(){if(YO)return qc;YO=1,Object.defineProperty(qc,"__esModule",{value:!0}),qc.postEndpoint=r,qc.putEndpoint=n,qc.deleteEndpoint=s,qc.getEndpoint=i;const t=vye();function e(o,a,c,u){const l=(0,t.insertParams)(a,c),d=(0,t.stringifyQuery)(u);return`${o}${l}${d}`}function r(o,a,c){const u=e(o,a,c?.path,c?.query);return(0,t.fetchData)(u,"POST",c?.body,c?.headers,c?.credentials)}function n(o,a,c){const u=e(o,a,c?.path,c?.query);return(0,t.fetchData)(u,"PUT",c?.body,c?.headers,c?.credentials)}function s(o,a,c){const u=e(o,a,c?.path,c?.query);return(0,t.fetchData)(u,"DELETE",c?.body,c?.headers,c?.credentials)}function i(o,a,c,u){if(u)return(0,t.getData)(u,void 0,c?.credentials);const l=e(o,a,c?.path,c?.query);return(0,t.getData)(l,c?.headers,c?.credentials)}return qc}var kf={},JO;function Aye(){return JO||(JO=1,Object.defineProperty(kf,"__esModule",{value:!0}),kf.DEFAULT_BASE_URL=void 0,kf.DEFAULT_BASE_URL="https://safe-client.safe.global"),kf}var Bf={},QO;function Cye(){if(QO)return Bf;QO=1,Object.defineProperty(Bf,"__esModule",{value:!0}),Bf.ImplementationVersionState=void 0;var t;return(function(e){e.UP_TO_DATE="UP_TO_DATE",e.OUTDATED="OUTDATED",e.UNKNOWN="UNKNOWN"})(t||(Bf.ImplementationVersionState=t={})),Bf}var go={},XO;function Iye(){if(XO)return go;XO=1,Object.defineProperty(go,"__esModule",{value:!0}),go.SafeAppSocialPlatforms=go.SafeAppFeatures=go.SafeAppAccessPolicyTypes=void 0;var t;(function(n){n.NoRestrictions="NO_RESTRICTIONS",n.DomainAllowlist="DOMAIN_ALLOWLIST"})(t||(go.SafeAppAccessPolicyTypes=t={}));var e;(function(n){n.BATCHED_TRANSACTIONS="BATCHED_TRANSACTIONS"})(e||(go.SafeAppFeatures=e={}));var r;return(function(n){n.TWITTER="TWITTER",n.GITHUB="GITHUB",n.DISCORD="DISCORD",n.TELEGRAM="TELEGRAM"})(r||(go.SafeAppSocialPlatforms=r={})),go}var jt={},eR;function Sye(){if(eR)return jt;eR=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.LabelValue=jt.StartTimeValue=jt.DurationType=jt.DetailedExecutionInfoType=jt.TransactionListItemType=jt.ConflictType=jt.TransactionInfoType=jt.SettingsInfoType=jt.TransactionTokenType=jt.TransferDirection=jt.TransactionStatus=jt.Operation=void 0;var t;(function(f){f[f.CALL=0]="CALL",f[f.DELEGATE=1]="DELEGATE"})(t||(jt.Operation=t={}));var e;(function(f){f.AWAITING_CONFIRMATIONS="AWAITING_CONFIRMATIONS",f.AWAITING_EXECUTION="AWAITING_EXECUTION",f.CANCELLED="CANCELLED",f.FAILED="FAILED",f.SUCCESS="SUCCESS"})(e||(jt.TransactionStatus=e={}));var r;(function(f){f.INCOMING="INCOMING",f.OUTGOING="OUTGOING",f.UNKNOWN="UNKNOWN"})(r||(jt.TransferDirection=r={}));var n;(function(f){f.ERC20="ERC20",f.ERC721="ERC721",f.NATIVE_COIN="NATIVE_COIN"})(n||(jt.TransactionTokenType=n={}));var s;(function(f){f.SET_FALLBACK_HANDLER="SET_FALLBACK_HANDLER",f.ADD_OWNER="ADD_OWNER",f.REMOVE_OWNER="REMOVE_OWNER",f.SWAP_OWNER="SWAP_OWNER",f.CHANGE_THRESHOLD="CHANGE_THRESHOLD",f.CHANGE_IMPLEMENTATION="CHANGE_IMPLEMENTATION",f.ENABLE_MODULE="ENABLE_MODULE",f.DISABLE_MODULE="DISABLE_MODULE",f.SET_GUARD="SET_GUARD",f.DELETE_GUARD="DELETE_GUARD"})(s||(jt.SettingsInfoType=s={}));var i;(function(f){f.TRANSFER="Transfer",f.SETTINGS_CHANGE="SettingsChange",f.CUSTOM="Custom",f.CREATION="Creation",f.SWAP_ORDER="SwapOrder",f.TWAP_ORDER="TwapOrder",f.SWAP_TRANSFER="SwapTransfer",f.NATIVE_STAKING_DEPOSIT="NativeStakingDeposit",f.NATIVE_STAKING_VALIDATORS_EXIT="NativeStakingValidatorsExit",f.NATIVE_STAKING_WITHDRAW="NativeStakingWithdraw"})(i||(jt.TransactionInfoType=i={}));var o;(function(f){f.NONE="None",f.HAS_NEXT="HasNext",f.END="End"})(o||(jt.ConflictType=o={}));var a;(function(f){f.TRANSACTION="TRANSACTION",f.LABEL="LABEL",f.CONFLICT_HEADER="CONFLICT_HEADER",f.DATE_LABEL="DATE_LABEL"})(a||(jt.TransactionListItemType=a={}));var c;(function(f){f.MULTISIG="MULTISIG",f.MODULE="MODULE"})(c||(jt.DetailedExecutionInfoType=c={}));var u;(function(f){f.AUTO="AUTO",f.LIMIT_DURATION="LIMIT_DURATION"})(u||(jt.DurationType=u={}));var l;(function(f){f.AT_MINING_TIME="AT_MINING_TIME",f.AT_EPOCH="AT_EPOCH"})(l||(jt.StartTimeValue=l={}));var d;return(function(f){f.Queued="Queued",f.Next="Next"})(d||(jt.LabelValue=d={})),jt}var mo={},tR;function Tye(){if(tR)return mo;tR=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.FEATURES=mo.GAS_PRICE_TYPE=mo.RPC_AUTHENTICATION=void 0;var t;(function(n){n.API_KEY_PATH="API_KEY_PATH",n.NO_AUTHENTICATION="NO_AUTHENTICATION",n.UNKNOWN="UNKNOWN"})(t||(mo.RPC_AUTHENTICATION=t={}));var e;(function(n){n.ORACLE="ORACLE",n.FIXED="FIXED",n.FIXED_1559="FIXED1559",n.UNKNOWN="UNKNOWN"})(e||(mo.GAS_PRICE_TYPE=e={}));var r;return(function(n){n.ERC721="ERC721",n.SAFE_APPS="SAFE_APPS",n.CONTRACT_INTERACTION="CONTRACT_INTERACTION",n.DOMAIN_LOOKUP="DOMAIN_LOOKUP",n.SPENDING_LIMIT="SPENDING_LIMIT",n.EIP1559="EIP1559",n.SAFE_TX_GAS_OPTIONAL="SAFE_TX_GAS_OPTIONAL",n.TX_SIMULATION="TX_SIMULATION",n.EIP1271="EIP1271"})(r||(mo.FEATURES=r={})),mo}var jf={},rR;function Pye(){if(rR)return jf;rR=1,Object.defineProperty(jf,"__esModule",{value:!0}),jf.TokenType=void 0;var t;return(function(e){e.ERC20="ERC20",e.ERC721="ERC721",e.NATIVE_TOKEN="NATIVE_TOKEN",e.UNKNOWN="UNKNOWN"})(t||(jf.TokenType=t={})),jf}var UA={},nR;function Nye(){return nR||(nR=1,Object.defineProperty(UA,"__esModule",{value:!0})),UA}var Hc={},sR;function Oye(){if(sR)return Hc;sR=1,Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.NativeStakingStatus=Hc.ConfirmationViewTypes=void 0;var t;(function(r){r.GENERIC="GENERIC",r.COW_SWAP_ORDER="COW_SWAP_ORDER",r.COW_SWAP_TWAP_ORDER="COW_SWAP_TWAP_ORDER",r.KILN_NATIVE_STAKING_DEPOSIT="KILN_NATIVE_STAKING_DEPOSIT",r.KILN_NATIVE_STAKING_VALIDATORS_EXIT="KILN_NATIVE_STAKING_VALIDATORS_EXIT",r.KILN_NATIVE_STAKING_WITHDRAW="KILN_NATIVE_STAKING_WITHDRAW"})(t||(Hc.ConfirmationViewTypes=t={}));var e;return(function(r){r.NOT_STAKED="NOT_STAKED",r.ACTIVATING="ACTIVATING",r.DEPOSIT_IN_PROGRESS="DEPOSIT_IN_PROGRESS",r.ACTIVE="ACTIVE",r.EXIT_REQUESTED="EXIT_REQUESTED",r.EXITING="EXITING",r.EXITED="EXITED",r.SLASHED="SLASHED"})(e||(Hc.NativeStakingStatus=e={})),Hc}var zc={},iR;function Rye(){if(iR)return zc;iR=1,Object.defineProperty(zc,"__esModule",{value:!0}),zc.SafeMessageStatus=zc.SafeMessageListItemType=void 0;var t;(function(r){r.DATE_LABEL="DATE_LABEL",r.MESSAGE="MESSAGE"})(t||(zc.SafeMessageListItemType=t={}));var e;return(function(r){r.NEEDS_CONFIRMATION="NEEDS_CONFIRMATION",r.CONFIRMED="CONFIRMED"})(e||(zc.SafeMessageStatus=e={})),zc}var Df={},oR;function xye(){if(oR)return Df;oR=1,Object.defineProperty(Df,"__esModule",{value:!0}),Df.DeviceType=void 0;var t;return(function(e){e.ANDROID="ANDROID",e.IOS="IOS",e.WEB="WEB"})(t||(Df.DeviceType=t={})),Df}var MA={},aR;function kye(){return aR||(aR=1,Object.defineProperty(MA,"__esModule",{value:!0})),MA}var cR;function Bye(){return cR||(cR=1,(function(t){var e=Fc&&Fc.__createBinding||(Object.create?(function(re,ce,ye,De){De===void 0&&(De=ye);var tr=Object.getOwnPropertyDescriptor(ce,ye);(!tr||("get"in tr?!ce.__esModule:tr.writable||tr.configurable))&&(tr={enumerable:!0,get:function(){return ce[ye]}}),Object.defineProperty(re,De,tr)}):(function(re,ce,ye,De){De===void 0&&(De=ye),re[De]=ce[ye]})),r=Fc&&Fc.__exportStar||function(re,ce){for(var ye in re)ye!=="default"&&!Object.prototype.hasOwnProperty.call(ce,ye)&&e(ce,re,ye)};Object.defineProperty(t,"__esModule",{value:!0}),t.setBaseUrl=void 0,t.relayTransaction=a,t.getRelayCount=c,t.getSafeInfo=u,t.getIncomingTransfers=l,t.getModuleTransactions=d,t.getMultisigTransactions=f,t.getBalances=g,t.getFiatCurrencies=p,t.getOwnedSafes=h,t.getAllOwnedSafes=y,t.getCollectibles=b,t.getCollectiblesPage=E,t.getTransactionHistory=w,t.getTransactionQueue=m,t.getTransactionDetails=_,t.deleteTransaction=C,t.postSafeGasEstimation=I,t.getNonces=P,t.proposeTransaction=T,t.getConfirmationView=R,t.getTxPreview=U,t.getChainsConfig=k,t.getChainConfig=O,t.getSafeApps=B,t.getMasterCopies=v,t.getDecodedData=A,t.getSafeMessages=S,t.getSafeMessage=j,t.proposeSafeMessage=N,t.confirmSafeMessage=x,t.getDelegates=D,t.registerDevice=M,t.unregisterSafe=L,t.unregisterDevice=F,t.registerEmail=q,t.changeEmail=$,t.resendEmailVerificationCode=V,t.verifyEmail=J,t.getRegisteredEmail=Y,t.deleteRegisteredEmail=Z,t.registerRecoveryModule=ee,t.unsubscribeSingle=le,t.unsubscribeAll=X,t.getSafeOverviews=se,t.getContract=fe,t.getAuthNonce=Oe,t.verifyAuth=Re,t.createAccount=Me,t.getAccount=Ze,t.deleteAccount=de,t.getAccountDataTypes=te,t.getAccountDataSettings=Pt,t.putAccountDataSettings=Ft,t.getIndexingStatus=en;const n=_ye(),s=Aye();r(Cye(),t),r(Iye(),t),r(Sye(),t),r(Tye(),t),r(Pye(),t),r(Nye(),t),r(Oye(),t),r(Rye(),t),r(xye(),t),r(kye(),t);let i=s.DEFAULT_BASE_URL;const o=re=>{i=re};t.setBaseUrl=o;function a(re,ce){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/relay",{path:{chainId:re},body:ce})}function c(re,ce){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/relay/{address}",{path:{chainId:re,address:ce}})}function u(re,ce){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}",{path:{chainId:re,address:ce}})}function l(re,ce,ye,De){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}/incoming-transfers/",{path:{chainId:re,address:ce},query:ye},De)}function d(re,ce,ye,De){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}/module-transactions/",{path:{chainId:re,address:ce},query:ye},De)}function f(re,ce,ye,De){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}/multisig-transactions/",{path:{chainId:re,address:ce},query:ye},De)}function g(re,ce,ye="usd",De={}){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}/balances/{currency}",{path:{chainId:re,address:ce,currency:ye},query:De})}function p(){return(0,n.getEndpoint)(i,"/v1/balances/supported-fiat-codes")}function h(re,ce){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/owners/{address}/safes",{path:{chainId:re,address:ce}})}function y(re){return(0,n.getEndpoint)(i,"/v1/owners/{address}/safes",{path:{address:re}})}function b(re,ce,ye={}){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:re,address:ce},query:ye})}function E(re,ce,ye={},De){return(0,n.getEndpoint)(i,"/v2/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:re,address:ce},query:ye},De)}function w(re,ce,ye={},De){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/transactions/history",{path:{chainId:re,safe_address:ce},query:ye},De)}function m(re,ce,ye={},De){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/transactions/queued",{path:{chainId:re,safe_address:ce},query:ye},De)}function _(re,ce){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/transactions/{transactionId}",{path:{chainId:re,transactionId:ce}})}function C(re,ce,ye){return(0,n.deleteEndpoint)(i,"/v1/chains/{chainId}/transactions/{safeTxHash}",{path:{chainId:re,safeTxHash:ce},body:{signature:ye}})}function I(re,ce,ye){return(0,n.postEndpoint)(i,"/v2/chains/{chainId}/safes/{safe_address}/multisig-transactions/estimations",{path:{chainId:re,safe_address:ce},body:ye})}function P(re,ce){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/nonces",{path:{chainId:re,safe_address:ce}})}function T(re,ce,ye){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/transactions/{safe_address}/propose",{path:{chainId:re,safe_address:ce},body:ye})}function R(re,ce,ye,De,tr,tn){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/views/transaction-confirmation",{path:{chainId:re,safe_address:ce},body:{operation:ye,data:De,to:tr,value:tn}})}function U(re,ce,ye,De,tr,tn){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/transactions/{safe_address}/preview",{path:{chainId:re,safe_address:ce},body:{operation:ye,data:De,to:tr,value:tn}})}function k(re){return(0,n.getEndpoint)(i,"/v1/chains",{query:re})}function O(re){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}",{path:{chainId:re}})}function B(re,ce={}){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safe-apps",{path:{chainId:re},query:ce})}function v(re){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/about/master-copies",{path:{chainId:re}})}function A(re,ce,ye,De){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/data-decoder",{path:{chainId:re},body:{operation:ce,data:ye,to:De}})}function S(re,ce,ye){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:re,safe_address:ce},query:{}},ye)}function j(re,ce){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/messages/{message_hash}",{path:{chainId:re,message_hash:ce}})}function N(re,ce,ye){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:re,safe_address:ce},body:ye})}function x(re,ce,ye){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/messages/{message_hash}/signatures",{path:{chainId:re,message_hash:ce},body:ye})}function D(re,ce={}){return(0,n.getEndpoint)(i,"/v2/chains/{chainId}/delegates",{path:{chainId:re},query:ce})}function M(re){return(0,n.postEndpoint)(i,"/v1/register/notifications",{body:re})}function L(re,ce,ye){return(0,n.deleteEndpoint)(i,"/v1/chains/{chainId}/notifications/devices/{uuid}/safes/{safe_address}",{path:{chainId:re,safe_address:ce,uuid:ye}})}function F(re,ce){return(0,n.deleteEndpoint)(i,"/v1/chains/{chainId}/notifications/devices/{uuid}",{path:{chainId:re,uuid:ce}})}function q(re,ce,ye,De){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails",{path:{chainId:re,safe_address:ce},body:ye,headers:De})}function $(re,ce,ye,De,tr){return(0,n.putEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:re,safe_address:ce,signer:ye},body:De,headers:tr})}function V(re,ce,ye){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify-resend",{path:{chainId:re,safe_address:ce,signer:ye},body:""})}function J(re,ce,ye,De){return(0,n.putEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify",{path:{chainId:re,safe_address:ce,signer:ye},body:De})}function Y(re,ce,ye,De){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:re,safe_address:ce,signer:ye},headers:De})}function Z(re,ce,ye,De){return(0,n.deleteEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:re,safe_address:ce,signer:ye},headers:De})}function ee(re,ce,ye){return(0,n.postEndpoint)(i,"/v1/chains/{chainId}/safes/{safe_address}/recovery",{path:{chainId:re,safe_address:ce},body:ye})}function le(re){return(0,n.deleteEndpoint)(i,"/v1/subscriptions",{query:re})}function X(re){return(0,n.deleteEndpoint)(i,"/v1/subscriptions/all",{query:re})}function se(re,ce){return(0,n.getEndpoint)(i,"/v1/safes",{query:Object.assign(Object.assign({},ce),{safes:re.join(",")})})}function fe(re,ce){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/contracts/{contractAddress}",{path:{chainId:re,contractAddress:ce}})}function Oe(){return(0,n.getEndpoint)(i,"/v1/auth/nonce",{credentials:"include"})}function Re(re){return(0,n.postEndpoint)(i,"/v1/auth/verify",{body:re,credentials:"include"})}function Me(re){return(0,n.postEndpoint)(i,"/v1/accounts",{body:re,credentials:"include"})}function Ze(re){return(0,n.getEndpoint)(i,"/v1/accounts/{address}",{path:{address:re},credentials:"include"})}function de(re){return(0,n.deleteEndpoint)(i,"/v1/accounts/{address}",{path:{address:re},credentials:"include"})}function te(){return(0,n.getEndpoint)(i,"/v1/accounts/data-types")}function Pt(re){return(0,n.getEndpoint)(i,"/v1/accounts/{address}/data-settings",{path:{address:re},credentials:"include"})}function Ft(re,ce){return(0,n.putEndpoint)(i,"/v1/accounts/{address}/data-settings",{path:{address:re},body:ce,credentials:"include"})}function en(re){return(0,n.getEndpoint)(i,"/v1/chains/{chainId}/about/indexing",{path:{chainId:re}})}})(Fc)),Fc}var uR;function jye(){return uR||(uR=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TransferDirection=t.TransactionStatus=t.TokenType=t.Operation=void 0;var e=Bye();Object.defineProperty(t,"Operation",{enumerable:!0,get:function(){return e.Operation}}),Object.defineProperty(t,"TokenType",{enumerable:!0,get:function(){return e.TokenType}}),Object.defineProperty(t,"TransactionStatus",{enumerable:!0,get:function(){return e.TransactionStatus}}),Object.defineProperty(t,"TransferDirection",{enumerable:!0,get:function(){return e.TransferDirection}})})(DA)),DA}var LA={},lR;function Dye(){return lR||(lR=1,Object.defineProperty(LA,"__esModule",{value:!0}),tl()),LA}var dR;function pS(){return dR||(dR=1,(function(t){var e=Lc&&Lc.__createBinding||(Object.create?(function(n,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,o,a)}):(function(n,s,i,o){o===void 0&&(o=i),n[o]=s[i]})),r=Lc&&Lc.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(wye(),t),r(Eye(),t),r(jye(),t),r(Dye(),t)})(Lc)),Lc}var fR;function Uye(){if(fR)return Rf;fR=1,Object.defineProperty(Rf,"__esModule",{value:!0}),Rf.TXs=void 0;const t=tl(),e=pS();class r{constructor(s){this.communicator=s}async getBySafeTxHash(s){if(!s)throw new Error("Invalid safeTxHash");return(await this.communicator.send(t.Methods.getTxBySafeTxHash,{safeTxHash:s})).data}async signMessage(s){const i={message:s};return(await this.communicator.send(t.Methods.signMessage,i)).data}async signTypedMessage(s){if(!(0,e.isObjectEIP712TypedData)(s))throw new Error("Invalid typed data");return(await this.communicator.send(t.Methods.signTypedMessage,{typedData:s})).data}async send({txs:s,params:i}){if(!s||!s.length)throw new Error("No transactions were passed");const o={txs:s,params:i};return(await this.communicator.send(t.Methods.sendTransactions,o)).data}}return Rf.TXs=r,Rf}var Uf={},Mf={},hR;function gS(){return hR||(hR=1,Object.defineProperty(Mf,"__esModule",{value:!0}),Mf.RPC_CALLS=void 0,Mf.RPC_CALLS={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"}),Mf}var pR;function Mye(){if(pR)return Uf;pR=1,Object.defineProperty(Uf,"__esModule",{value:!0}),Uf.Eth=void 0;const t=gS(),e=tl(),r={defaultBlockParam:(s="latest")=>s,returnFullTxObjectParam:(s=!1)=>s,blockNumberToHex:s=>Number.isInteger(s)?`0x${s.toString(16)}`:s};class n{constructor(i){this.communicator=i,this.call=this.buildRequest({call:t.RPC_CALLS.eth_call,formatters:[null,r.defaultBlockParam]}),this.getBalance=this.buildRequest({call:t.RPC_CALLS.eth_getBalance,formatters:[null,r.defaultBlockParam]}),this.getCode=this.buildRequest({call:t.RPC_CALLS.eth_getCode,formatters:[null,r.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:t.RPC_CALLS.eth_getStorageAt,formatters:[null,r.blockNumberToHex,r.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:t.RPC_CALLS.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:t.RPC_CALLS.eth_getBlockByHash,formatters:[null,r.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:t.RPC_CALLS.eth_getBlockByNumber,formatters:[r.blockNumberToHex,r.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:t.RPC_CALLS.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:t.RPC_CALLS.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:t.RPC_CALLS.eth_getTransactionCount,formatters:[null,r.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:t.RPC_CALLS.eth_gasPrice}),this.getEstimateGas=o=>this.buildRequest({call:t.RPC_CALLS.eth_estimateGas})([o]),this.setSafeSettings=this.buildRequest({call:t.RPC_CALLS.safe_setSettings})}buildRequest(i){const{call:o,formatters:a}=i;return async c=>{a&&Array.isArray(c)&&a.forEach((d,f)=>{d&&(c[f]=d(c[f]))});const u={call:o,params:c||[]};return(await this.communicator.send(e.Methods.rpcCall,u)).data}}}return Uf.Eth=n,Uf}var yo={},FA={},qA={},Lf={},Ff={},gR;function Lye(){return gR||(gR=1,Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.version=void 0,Ff.version="1.1.0"),Ff}var mR;function Vd(){if(mR)return Lf;mR=1,Object.defineProperty(Lf,"__esModule",{value:!0}),Lf.BaseError=void 0;const t=Lye();class e extends Error{constructor(n,s={}){const i=s.cause instanceof e?s.cause.details:s.cause?.message?s.cause.message:s.details,o=s.cause instanceof e&&s.cause.docsPath||s.docsPath,a=[n||"An error occurred.","",...s.metaMessages?[...s.metaMessages,""]:[],...o?[`Docs: https://abitype.dev${o}`]:[],...i?[`Details: ${i}`]:[],`Version: abitype@${t.version}`].join(`
`);super(a),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),s.cause&&(this.cause=s.cause),this.details=i,this.docsPath=o,this.metaMessages=s.metaMessages,this.shortMessage=n}}return Lf.BaseError=e,Lf}var Hg={},yR;function Fye(){if(yR)return Hg;yR=1,Object.defineProperty(Hg,"__esModule",{value:!0}),Hg.narrow=t;function t(e){return e}return Hg}var zg={},$g={},Vg={},Gg={},ki={},bR;function tv(){if(bR)return ki;bR=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.isTupleRegex=ki.integerRegex=ki.bytesRegex=void 0,ki.execTyped=t;function t(e,r){return e.exec(r)?.groups}return ki.bytesRegex=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,ki.integerRegex=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,ki.isTupleRegex=/^\(.+?\).*?$/,ki}var wR;function GF(){if(wR)return Gg;wR=1,Object.defineProperty(Gg,"__esModule",{value:!0}),Gg.formatAbiParameter=r;const t=tv(),e=/^tuple(?<array>(\[(\d*)\])*)$/;function r(n){let s=n.type;if(e.test(n.type)&&"components"in n){s="(";const i=n.components.length;for(let a=0;a<i;a++){const c=n.components[a];s+=r(c),a<i-1&&(s+=", ")}const o=(0,t.execTyped)(e,n.type);return s+=`)${o?.array??""}`,r({...n,type:s})}return"indexed"in n&&n.indexed&&(s=`${s} indexed`),n.name?`${s} ${n.name}`:s}return Gg}var ER;function WF(){if(ER)return Vg;ER=1,Object.defineProperty(Vg,"__esModule",{value:!0}),Vg.formatAbiParameters=e;const t=GF();function e(r){let n="";const s=r.length;for(let i=0;i<s;i++){const o=r[i];n+=(0,t.formatAbiParameter)(o),i!==s-1&&(n+=", ")}return n}return Vg}var vR;function KF(){if(vR)return $g;vR=1,Object.defineProperty($g,"__esModule",{value:!0}),$g.formatAbiItem=e;const t=WF();function e(r){return r.type==="function"?`function ${r.name}(${(0,t.formatAbiParameters)(r.inputs)})${r.stateMutability&&r.stateMutability!=="nonpayable"?` ${r.stateMutability}`:""}${r.outputs?.length?` returns (${(0,t.formatAbiParameters)(r.outputs)})`:""}`:r.type==="event"?`event ${r.name}(${(0,t.formatAbiParameters)(r.inputs)})`:r.type==="error"?`error ${r.name}(${(0,t.formatAbiParameters)(r.inputs)})`:r.type==="constructor"?`constructor(${(0,t.formatAbiParameters)(r.inputs)})${r.stateMutability==="payable"?" payable":""}`:r.type==="fallback"?`fallback() external${r.stateMutability==="payable"?" payable":""}`:"receive() external payable"}return $g}var _R;function qye(){if(_R)return zg;_R=1,Object.defineProperty(zg,"__esModule",{value:!0}),zg.formatAbi=e;const t=KF();function e(r){const n=[],s=r.length;for(let i=0;i<s;i++){const o=r[i],a=(0,t.formatAbiItem)(o);n.push(a)}return n}return zg}var Wg={},ur={},AR;function Gd(){if(AR)return ur;AR=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.functionModifiers=ur.eventModifiers=ur.modifiers=void 0,ur.isErrorSignature=r,ur.execErrorSignature=n,ur.isEventSignature=i,ur.execEventSignature=o,ur.isFunctionSignature=c,ur.execFunctionSignature=u,ur.isStructSignature=d,ur.execStructSignature=f,ur.isConstructorSignature=p,ur.execConstructorSignature=h,ur.isFallbackSignature=b,ur.execFallbackSignature=E,ur.isReceiveSignature=m;const t=tv(),e=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function r(_){return e.test(_)}function n(_){return(0,t.execTyped)(e,_)}const s=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function i(_){return s.test(_)}function o(_){return(0,t.execTyped)(s,_)}const a=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function c(_){return a.test(_)}function u(_){return(0,t.execTyped)(a,_)}const l=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function d(_){return l.test(_)}function f(_){return(0,t.execTyped)(l,_)}const g=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function p(_){return g.test(_)}function h(_){return(0,t.execTyped)(g,_)}const y=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function b(_){return y.test(_)}function E(_){return(0,t.execTyped)(y,_)}const w=/^receive\(\) external payable$/;function m(_){return w.test(_)}return ur.modifiers=new Set(["memory","indexed","storage","calldata"]),ur.eventModifiers=new Set(["indexed"]),ur.functionModifiers=new Set(["calldata","memory","storage"]),ur}var Kg={},bo={},CR;function rv(){if(CR)return bo;CR=1,Object.defineProperty(bo,"__esModule",{value:!0}),bo.UnknownSolidityTypeError=bo.UnknownTypeError=bo.InvalidAbiItemError=void 0;const t=Vd();class e extends t.BaseError{constructor({signature:i}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(i,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}bo.InvalidAbiItemError=e;class r extends t.BaseError{constructor({type:i}){super("Unknown type.",{metaMessages:[`Type "${i}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}bo.UnknownTypeError=r;class n extends t.BaseError{constructor({type:i}){super("Unknown type.",{metaMessages:[`Type "${i}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}return bo.UnknownSolidityTypeError=n,bo}var zr={},IR;function C0(){if(IR)return zr;IR=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.InvalidAbiTypeParameterError=zr.InvalidFunctionModifierError=zr.InvalidModifierError=zr.SolidityProtectedKeywordError=zr.InvalidParameterError=zr.InvalidAbiParametersError=zr.InvalidAbiParameterError=void 0;const t=Vd();class e extends t.BaseError{constructor({param:u}){super("Failed to parse ABI parameter.",{details:`parseAbiParameter(${JSON.stringify(u,null,2)})`,docsPath:"/api/human#parseabiparameter-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParameterError"})}}zr.InvalidAbiParameterError=e;class r extends t.BaseError{constructor({params:u}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(u,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}zr.InvalidAbiParametersError=r;class n extends t.BaseError{constructor({param:u}){super("Invalid ABI parameter.",{details:u}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}zr.InvalidParameterError=n;class s extends t.BaseError{constructor({param:u,name:l}){super("Invalid ABI parameter.",{details:u,metaMessages:[`"${l}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}zr.SolidityProtectedKeywordError=s;class i extends t.BaseError{constructor({param:u,type:l,modifier:d}){super("Invalid ABI parameter.",{details:u,metaMessages:[`Modifier "${d}" not allowed${l?` in "${l}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}zr.InvalidModifierError=i;class o extends t.BaseError{constructor({param:u,type:l,modifier:d}){super("Invalid ABI parameter.",{details:u,metaMessages:[`Modifier "${d}" not allowed${l?` in "${l}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${d}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}zr.InvalidFunctionModifierError=o;class a extends t.BaseError{constructor({abiParameter:u}){super("Invalid ABI parameter.",{details:JSON.stringify(u,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}return zr.InvalidAbiTypeParameterError=a,zr}var wo={},SR;function mS(){if(SR)return wo;SR=1,Object.defineProperty(wo,"__esModule",{value:!0}),wo.InvalidStructSignatureError=wo.UnknownSignatureError=wo.InvalidSignatureError=void 0;const t=Vd();class e extends t.BaseError{constructor({signature:i,type:o}){super(`Invalid ${o} signature.`,{details:i}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}wo.InvalidSignatureError=e;class r extends t.BaseError{constructor({signature:i}){super("Unknown signature.",{details:i}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}wo.UnknownSignatureError=r;class n extends t.BaseError{constructor({signature:i}){super("Invalid struct signature.",{details:i,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}return wo.InvalidStructSignatureError=n,wo}var qf={},TR;function ZF(){if(TR)return qf;TR=1,Object.defineProperty(qf,"__esModule",{value:!0}),qf.CircularReferenceError=void 0;const t=Vd();class e extends t.BaseError{constructor({type:n}){super("Circular reference detected.",{metaMessages:[`Struct "${n}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}return qf.CircularReferenceError=e,qf}var kn={},Hf={},PR;function YF(){if(PR)return Hf;PR=1,Object.defineProperty(Hf,"__esModule",{value:!0}),Hf.InvalidParenthesisError=void 0;const t=Vd();class e extends t.BaseError{constructor({current:n,depth:s}){super("Unbalanced parentheses.",{metaMessages:[`"${n.trim()}" has too many ${s>0?"opening":"closing"} parentheses.`],details:`Depth "${s}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}return Hf.InvalidParenthesisError=e,Hf}var Cl={},NR;function Hye(){if(NR)return Cl;NR=1,Object.defineProperty(Cl,"__esModule",{value:!0}),Cl.parameterCache=void 0,Cl.getParameterCacheKey=t;function t(e,r,n){let s="";if(n)for(const i of Object.entries(n)){if(!i)continue;let o="";for(const a of i[1])o+=`[${a.type}${a.name?`:${a.name}`:""}]`;s+=`(${i[0]}{${o}})`}return r?`${r}:${e}${s}`:e}return Cl.parameterCache=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]),Cl}var OR;function Ud(){if(OR)return kn;OR=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.parseSignature=a,kn.parseFunctionSignature=c,kn.parseEventSignature=u,kn.parseErrorSignature=l,kn.parseConstructorSignature=d,kn.parseFallbackSignature=f,kn.parseAbiParameter=y,kn.splitParameters=b,kn.isSolidityType=E,kn.isSolidityKeyword=m,kn.isValidDataLocation=_;const t=tv(),e=rv(),r=C0(),n=mS(),s=YF(),i=Hye(),o=Gd();function a(C,I={}){if((0,o.isFunctionSignature)(C))return c(C,I);if((0,o.isEventSignature)(C))return u(C,I);if((0,o.isErrorSignature)(C))return l(C,I);if((0,o.isConstructorSignature)(C))return d(C,I);if((0,o.isFallbackSignature)(C))return f(C);if((0,o.isReceiveSignature)(C))return{type:"receive",stateMutability:"payable"};throw new n.UnknownSignatureError({signature:C})}function c(C,I={}){const P=(0,o.execFunctionSignature)(C);if(!P)throw new n.InvalidSignatureError({signature:C,type:"function"});const T=b(P.parameters),R=[],U=T.length;for(let O=0;O<U;O++)R.push(y(T[O],{modifiers:o.functionModifiers,structs:I,type:"function"}));const k=[];if(P.returns){const O=b(P.returns),B=O.length;for(let v=0;v<B;v++)k.push(y(O[v],{modifiers:o.functionModifiers,structs:I,type:"function"}))}return{name:P.name,type:"function",stateMutability:P.stateMutability??"nonpayable",inputs:R,outputs:k}}function u(C,I={}){const P=(0,o.execEventSignature)(C);if(!P)throw new n.InvalidSignatureError({signature:C,type:"event"});const T=b(P.parameters),R=[],U=T.length;for(let k=0;k<U;k++)R.push(y(T[k],{modifiers:o.eventModifiers,structs:I,type:"event"}));return{name:P.name,type:"event",inputs:R}}function l(C,I={}){const P=(0,o.execErrorSignature)(C);if(!P)throw new n.InvalidSignatureError({signature:C,type:"error"});const T=b(P.parameters),R=[],U=T.length;for(let k=0;k<U;k++)R.push(y(T[k],{structs:I,type:"error"}));return{name:P.name,type:"error",inputs:R}}function d(C,I={}){const P=(0,o.execConstructorSignature)(C);if(!P)throw new n.InvalidSignatureError({signature:C,type:"constructor"});const T=b(P.parameters),R=[],U=T.length;for(let k=0;k<U;k++)R.push(y(T[k],{structs:I,type:"constructor"}));return{type:"constructor",stateMutability:P.stateMutability??"nonpayable",inputs:R}}function f(C){const I=(0,o.execFallbackSignature)(C);if(!I)throw new n.InvalidSignatureError({signature:C,type:"fallback"});return{type:"fallback",stateMutability:I.stateMutability??"nonpayable"}}const g=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,p=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,h=/^u?int$/;function y(C,I){const P=(0,i.getParameterCacheKey)(C,I?.type,I?.structs);if(i.parameterCache.has(P))return i.parameterCache.get(P);const T=t.isTupleRegex.test(C),R=(0,t.execTyped)(T?p:g,C);if(!R)throw new r.InvalidParameterError({param:C});if(R.name&&m(R.name))throw new r.SolidityProtectedKeywordError({param:C,name:R.name});const U=R.name?{name:R.name}:{},k=R.modifier==="indexed"?{indexed:!0}:{},O=I?.structs??{};let B,v={};if(T){B="tuple";const S=b(R.type),j=[],N=S.length;for(let x=0;x<N;x++)j.push(y(S[x],{structs:O}));v={components:j}}else if(R.type in O)B="tuple",v={components:O[R.type]};else if(h.test(R.type))B=`${R.type}256`;else if(R.type==="address payable")B="address";else if(B=R.type,I?.type!=="struct"&&!E(B))throw new e.UnknownSolidityTypeError({type:B});if(R.modifier){if(!I?.modifiers?.has?.(R.modifier))throw new r.InvalidModifierError({param:C,type:I?.type,modifier:R.modifier});if(o.functionModifiers.has(R.modifier)&&!_(B,!!R.array))throw new r.InvalidFunctionModifierError({param:C,type:I?.type,modifier:R.modifier})}const A={type:`${B}${R.array??""}`,...U,...k,...v};return i.parameterCache.set(P,A),A}function b(C,I=[],P="",T=0){const R=C.trim().length;for(let U=0;U<R;U++){const k=C[U],O=C.slice(U+1);switch(k){case",":return T===0?b(O,[...I,P.trim()]):b(O,I,`${P}${k}`,T);case"(":return b(O,I,`${P}${k}`,T+1);case")":return b(O,I,`${P}${k}`,T-1);default:return b(O,I,`${P}${k}`,T)}}if(P==="")return I;if(T!==0)throw new s.InvalidParenthesisError({current:P,depth:T});return I.push(P.trim()),I}function E(C){return C==="address"||C==="bool"||C==="function"||C==="string"||t.bytesRegex.test(C)||t.integerRegex.test(C)}const w=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function m(C){return C==="address"||C==="bool"||C==="function"||C==="string"||C==="tuple"||t.bytesRegex.test(C)||t.integerRegex.test(C)||w.test(C)}function _(C,I){return I||C==="bytes"||C==="string"||C==="tuple"}return kn}var RR;function nv(){if(RR)return Kg;RR=1,Object.defineProperty(Kg,"__esModule",{value:!0}),Kg.parseStructs=a;const t=tv(),e=rv(),r=C0(),n=mS(),s=ZF(),i=Gd(),o=Ud();function a(l){const d={},f=l.length;for(let y=0;y<f;y++){const b=l[y];if(!(0,i.isStructSignature)(b))continue;const E=(0,i.execStructSignature)(b);if(!E)throw new n.InvalidSignatureError({signature:b,type:"struct"});const w=E.properties.split(";"),m=[],_=w.length;for(let C=0;C<_;C++){const P=w[C].trim();if(!P)continue;const T=(0,o.parseAbiParameter)(P,{type:"struct"});m.push(T)}if(!m.length)throw new n.InvalidStructSignatureError({signature:b});d[E.name]=m}const g={},p=Object.entries(d),h=p.length;for(let y=0;y<h;y++){const[b,E]=p[y];g[b]=u(E,d)}return g}const c=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function u(l,d,f=new Set){const g=[],p=l.length;for(let h=0;h<p;h++){const y=l[h];if(t.isTupleRegex.test(y.type))g.push(y);else{const E=(0,t.execTyped)(c,y.type);if(!E?.type)throw new r.InvalidAbiTypeParameterError({abiParameter:y});const{array:w,type:m}=E;if(m in d){if(f.has(m))throw new s.CircularReferenceError({type:m});g.push({...y,type:`tuple${w??""}`,components:u(d[m]??[],d,new Set([...f,m]))})}else if((0,o.isSolidityType)(m))g.push(y);else throw new e.UnknownTypeError({type:m})}}return g}return Kg}var xR;function zye(){if(xR)return Wg;xR=1,Object.defineProperty(Wg,"__esModule",{value:!0}),Wg.parseAbi=n;const t=Gd(),e=nv(),r=Ud();function n(s){const i=(0,e.parseStructs)(s),o=[],a=s.length;for(let c=0;c<a;c++){const u=s[c];(0,t.isStructSignature)(u)||o.push((0,r.parseSignature)(u,i))}return o}return Wg}var Zg={},kR;function $ye(){if(kR)return Zg;kR=1,Object.defineProperty(Zg,"__esModule",{value:!0}),Zg.parseAbiItem=s;const t=rv(),e=Gd(),r=nv(),n=Ud();function s(i){let o;if(typeof i=="string")o=(0,n.parseSignature)(i);else{const a=(0,r.parseStructs)(i),c=i.length;for(let u=0;u<c;u++){const l=i[u];if(!(0,e.isStructSignature)(l)){o=(0,n.parseSignature)(l,a);break}}}if(!o)throw new t.InvalidAbiItemError({signature:i});return o}return Zg}var Yg={},BR;function Vye(){if(BR)return Yg;BR=1,Object.defineProperty(Yg,"__esModule",{value:!0}),Yg.parseAbiParameter=s;const t=C0(),e=Gd(),r=nv(),n=Ud();function s(i){let o;if(typeof i=="string")o=(0,n.parseAbiParameter)(i,{modifiers:e.modifiers});else{const a=(0,r.parseStructs)(i),c=i.length;for(let u=0;u<c;u++){const l=i[u];if(!(0,e.isStructSignature)(l)){o=(0,n.parseAbiParameter)(l,{modifiers:e.modifiers,structs:a});break}}}if(!o)throw new t.InvalidAbiParameterError({param:i});return o}return Yg}var Jg={},jR;function Gye(){if(jR)return Jg;jR=1,Object.defineProperty(Jg,"__esModule",{value:!0}),Jg.parseAbiParameters=i;const t=C0(),e=Gd(),r=nv(),n=Ud(),s=Ud();function i(o){const a=[];if(typeof o=="string"){const c=(0,n.splitParameters)(o),u=c.length;for(let l=0;l<u;l++)a.push((0,s.parseAbiParameter)(c[l],{modifiers:e.modifiers}))}else{const c=(0,r.parseStructs)(o),u=o.length;for(let l=0;l<u;l++){const d=o[l];if((0,e.isStructSignature)(d))continue;const f=(0,n.splitParameters)(d),g=f.length;for(let p=0;p<g;p++)a.push((0,s.parseAbiParameter)(f[p],{modifiers:e.modifiers,structs:c}))}}if(a.length===0)throw new t.InvalidAbiParametersError({params:o});return a}return Jg}var DR;function oc(){return DR||(DR=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CircularReferenceError=t.InvalidParenthesisError=t.UnknownSignatureError=t.InvalidSignatureError=t.InvalidStructSignatureError=t.InvalidAbiParameterError=t.InvalidAbiParametersError=t.InvalidParameterError=t.SolidityProtectedKeywordError=t.InvalidModifierError=t.InvalidFunctionModifierError=t.InvalidAbiTypeParameterError=t.UnknownSolidityTypeError=t.InvalidAbiItemError=t.UnknownTypeError=t.parseAbiParameters=t.parseAbiParameter=t.parseAbiItem=t.parseAbi=t.formatAbiParameters=t.formatAbiParameter=t.formatAbiItem=t.formatAbi=t.narrow=t.BaseError=void 0;var e=Vd();Object.defineProperty(t,"BaseError",{enumerable:!0,get:function(){return e.BaseError}});var r=Fye();Object.defineProperty(t,"narrow",{enumerable:!0,get:function(){return r.narrow}});var n=qye();Object.defineProperty(t,"formatAbi",{enumerable:!0,get:function(){return n.formatAbi}});var s=KF();Object.defineProperty(t,"formatAbiItem",{enumerable:!0,get:function(){return s.formatAbiItem}});var i=GF();Object.defineProperty(t,"formatAbiParameter",{enumerable:!0,get:function(){return i.formatAbiParameter}});var o=WF();Object.defineProperty(t,"formatAbiParameters",{enumerable:!0,get:function(){return o.formatAbiParameters}});var a=zye();Object.defineProperty(t,"parseAbi",{enumerable:!0,get:function(){return a.parseAbi}});var c=$ye();Object.defineProperty(t,"parseAbiItem",{enumerable:!0,get:function(){return c.parseAbiItem}});var u=Vye();Object.defineProperty(t,"parseAbiParameter",{enumerable:!0,get:function(){return u.parseAbiParameter}});var l=Gye();Object.defineProperty(t,"parseAbiParameters",{enumerable:!0,get:function(){return l.parseAbiParameters}});var d=rv();Object.defineProperty(t,"UnknownTypeError",{enumerable:!0,get:function(){return d.UnknownTypeError}}),Object.defineProperty(t,"InvalidAbiItemError",{enumerable:!0,get:function(){return d.InvalidAbiItemError}}),Object.defineProperty(t,"UnknownSolidityTypeError",{enumerable:!0,get:function(){return d.UnknownSolidityTypeError}});var f=C0();Object.defineProperty(t,"InvalidAbiTypeParameterError",{enumerable:!0,get:function(){return f.InvalidAbiTypeParameterError}}),Object.defineProperty(t,"InvalidFunctionModifierError",{enumerable:!0,get:function(){return f.InvalidFunctionModifierError}}),Object.defineProperty(t,"InvalidModifierError",{enumerable:!0,get:function(){return f.InvalidModifierError}}),Object.defineProperty(t,"SolidityProtectedKeywordError",{enumerable:!0,get:function(){return f.SolidityProtectedKeywordError}}),Object.defineProperty(t,"InvalidParameterError",{enumerable:!0,get:function(){return f.InvalidParameterError}}),Object.defineProperty(t,"InvalidAbiParametersError",{enumerable:!0,get:function(){return f.InvalidAbiParametersError}}),Object.defineProperty(t,"InvalidAbiParameterError",{enumerable:!0,get:function(){return f.InvalidAbiParameterError}});var g=mS();Object.defineProperty(t,"InvalidStructSignatureError",{enumerable:!0,get:function(){return g.InvalidStructSignatureError}}),Object.defineProperty(t,"InvalidSignatureError",{enumerable:!0,get:function(){return g.InvalidSignatureError}}),Object.defineProperty(t,"UnknownSignatureError",{enumerable:!0,get:function(){return g.UnknownSignatureError}});var p=YF();Object.defineProperty(t,"InvalidParenthesisError",{enumerable:!0,get:function(){return p.InvalidParenthesisError}});var h=ZF();Object.defineProperty(t,"CircularReferenceError",{enumerable:!0,get:function(){return h.CircularReferenceError}})})(qA)),qA}var Il={},Qg={},UR;function bt(){if(UR)return Qg;UR=1,Object.defineProperty(Qg,"__esModule",{value:!0}),Qg.getAction=t;function t(e,r,n){const s=e[r.name];if(typeof s=="function")return s;const i=e[n];return typeof i=="function"?i:o=>r(e,o)}return Qg}var Xg={},em={},Le={},zf={},MR;function oa(){if(MR)return zf;MR=1,Object.defineProperty(zf,"__esModule",{value:!0}),zf.formatAbiItem=e,zf.formatAbiParams=r;const t=er();function e(s,{includeName:i=!1}={}){if(s.type!=="function"&&s.type!=="event"&&s.type!=="error")throw new t.InvalidDefinitionTypeError(s.type);return`${s.name}(${r(s.inputs,{includeName:i})})`}function r(s,{includeName:i=!1}={}){return s?s.map(o=>n(o,{includeName:i})).join(i?", ":","):""}function n(s,{includeName:i}){return s.type.startsWith("tuple")?`(${r(s.components,{includeName:i})})${s.type.slice(5)}`:s.type+(i&&s.name?` ${s.name}`:"")}return zf}var tm={},rm={},LR;function Pn(){if(LR)return rm;LR=1,Object.defineProperty(rm,"__esModule",{value:!0}),rm.isHex=t;function t(e,{strict:r=!0}={}){return!e||typeof e!="string"?!1:r?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}return rm}var FR;function Jn(){if(FR)return tm;FR=1,Object.defineProperty(tm,"__esModule",{value:!0}),tm.size=e;const t=Pn();function e(r){return(0,t.isHex)(r,{strict:!1})?Math.ceil((r.length-2)/2):r.length}return tm}var Sl={},$f={},qR;function Wye(){return qR||(qR=1,Object.defineProperty($f,"__esModule",{value:!0}),$f.version=void 0,$f.version="2.41.2"),$f}var HR;function Ke(){if(HR)return Sl;HR=1,Object.defineProperty(Sl,"__esModule",{value:!0}),Sl.BaseError=void 0,Sl.setErrorConfig=r;const t=Wye();let e={getDocsUrl:({docsBaseUrl:i,docsPath:o="",docsSlug:a})=>o?`${i??"https://viem.sh"}${o}${a?`#${a}`:""}`:void 0,version:`viem@${t.version}`};function r(i){e=i}class n extends Error{constructor(o,a={}){const c=a.cause instanceof n?a.cause.details:a.cause?.message?a.cause.message:a.details,u=a.cause instanceof n&&a.cause.docsPath||a.docsPath,l=e.getDocsUrl?.({...a,docsPath:u}),d=[o||"An error occurred.","",...a.metaMessages?[...a.metaMessages,""]:[],...l?[`Docs: ${l}`]:[],...c?[`Details: ${c}`]:[],...e.version?[`Version: ${e.version}`]:[]].join(`
`);super(d,a.cause?{cause:a.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=c,this.docsPath=u,this.metaMessages=a.metaMessages,this.name=a.name??this.name,this.shortMessage=o,this.version=t.version}walk(o){return s(this,o)}}Sl.BaseError=n;function s(i,o){return o?.(i)?i:i&&typeof i=="object"&&"cause"in i&&i.cause!==void 0?s(i.cause,o):o?null:i}return Sl}var zR;function er(){if(zR)return Le;zR=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.UnsupportedPackedAbiType=Le.InvalidDefinitionTypeError=Le.InvalidArrayError=Le.InvalidAbiDecodingTypeError=Le.InvalidAbiEncodingTypeError=Le.DecodeLogTopicsMismatch=Le.DecodeLogDataMismatch=Le.BytesSizeMismatchError=Le.AbiItemAmbiguityError=Le.AbiFunctionSignatureNotFoundError=Le.AbiFunctionOutputsNotFoundError=Le.AbiFunctionNotFoundError=Le.AbiEventNotFoundError=Le.AbiEventSignatureNotFoundError=Le.AbiEventSignatureEmptyTopicsError=Le.AbiErrorSignatureNotFoundError=Le.AbiErrorNotFoundError=Le.AbiErrorInputsNotFoundError=Le.AbiEncodingLengthMismatchError=Le.AbiEncodingBytesSizeMismatchError=Le.AbiEncodingArrayLengthMismatchError=Le.AbiDecodingZeroDataError=Le.AbiDecodingDataSizeTooSmallError=Le.AbiDecodingDataSizeInvalidError=Le.AbiConstructorParamsNotFoundError=Le.AbiConstructorNotFoundError=void 0;const t=oa(),e=Jn(),r=Ke();class n extends r.BaseError{constructor({docsPath:B}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:B,name:"AbiConstructorNotFoundError"})}}Le.AbiConstructorNotFoundError=n;class s extends r.BaseError{constructor({docsPath:B}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:B,name:"AbiConstructorParamsNotFoundError"})}}Le.AbiConstructorParamsNotFoundError=s;class i extends r.BaseError{constructor({data:B,size:v}){super([`Data size of ${v} bytes is invalid.`,"Size must be in increments of 32 bytes (size % 32 === 0)."].join(`
`),{metaMessages:[`Data: ${B} (${v} bytes)`],name:"AbiDecodingDataSizeInvalidError"})}}Le.AbiDecodingDataSizeInvalidError=i;class o extends r.BaseError{constructor({data:B,params:v,size:A}){super([`Data size of ${A} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${(0,t.formatAbiParams)(v,{includeName:!0})})`,`Data:   ${B} (${A} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=B,this.params=v,this.size=A}}Le.AbiDecodingDataSizeTooSmallError=o;class a extends r.BaseError{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}Le.AbiDecodingZeroDataError=a;class c extends r.BaseError{constructor({expectedLength:B,givenLength:v,type:A}){super([`ABI encoding array length mismatch for type ${A}.`,`Expected length: ${B}`,`Given length: ${v}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}Le.AbiEncodingArrayLengthMismatchError=c;class u extends r.BaseError{constructor({expectedSize:B,value:v}){super(`Size of bytes "${v}" (bytes${(0,e.size)(v)}) does not match expected size (bytes${B}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}Le.AbiEncodingBytesSizeMismatchError=u;class l extends r.BaseError{constructor({expectedLength:B,givenLength:v}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${B}`,`Given length (values): ${v}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}Le.AbiEncodingLengthMismatchError=l;class d extends r.BaseError{constructor(B,{docsPath:v}){super([`Arguments (\`args\`) were provided to "${B}", but "${B}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:v,name:"AbiErrorInputsNotFoundError"})}}Le.AbiErrorInputsNotFoundError=d;class f extends r.BaseError{constructor(B,{docsPath:v}={}){super([`Error ${B?`"${B}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:v,name:"AbiErrorNotFoundError"})}}Le.AbiErrorNotFoundError=f;class g extends r.BaseError{constructor(B,{docsPath:v}){super([`Encoded error signature "${B}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${B}.`].join(`
`),{docsPath:v,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=B}}Le.AbiErrorSignatureNotFoundError=g;class p extends r.BaseError{constructor({docsPath:B}){super("Cannot extract event signature from empty topics.",{docsPath:B,name:"AbiEventSignatureEmptyTopicsError"})}}Le.AbiEventSignatureEmptyTopicsError=p;class h extends r.BaseError{constructor(B,{docsPath:v}){super([`Encoded event signature "${B}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${B}.`].join(`
`),{docsPath:v,name:"AbiEventSignatureNotFoundError"})}}Le.AbiEventSignatureNotFoundError=h;class y extends r.BaseError{constructor(B,{docsPath:v}={}){super([`Event ${B?`"${B}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:v,name:"AbiEventNotFoundError"})}}Le.AbiEventNotFoundError=y;class b extends r.BaseError{constructor(B,{docsPath:v}={}){super([`Function ${B?`"${B}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:v,name:"AbiFunctionNotFoundError"})}}Le.AbiFunctionNotFoundError=b;class E extends r.BaseError{constructor(B,{docsPath:v}){super([`Function "${B}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:v,name:"AbiFunctionOutputsNotFoundError"})}}Le.AbiFunctionOutputsNotFoundError=E;class w extends r.BaseError{constructor(B,{docsPath:v}){super([`Encoded function signature "${B}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${B}.`].join(`
`),{docsPath:v,name:"AbiFunctionSignatureNotFoundError"})}}Le.AbiFunctionSignatureNotFoundError=w;class m extends r.BaseError{constructor(B,v){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${B.type}\` in \`${(0,t.formatAbiItem)(B.abiItem)}\`, and`,`\`${v.type}\` in \`${(0,t.formatAbiItem)(v.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}Le.AbiItemAmbiguityError=m;class _ extends r.BaseError{constructor({expectedSize:B,givenSize:v}){super(`Expected bytes${B}, got bytes${v}.`,{name:"BytesSizeMismatchError"})}}Le.BytesSizeMismatchError=_;class C extends r.BaseError{constructor({abiItem:B,data:v,params:A,size:S}){super([`Data size of ${S} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${(0,t.formatAbiParams)(A,{includeName:!0})})`,`Data:   ${v} (${S} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=B,this.data=v,this.params=A,this.size=S}}Le.DecodeLogDataMismatch=C;class I extends r.BaseError{constructor({abiItem:B,param:v}){super([`Expected a topic for indexed event parameter${v.name?` "${v.name}"`:""} on event "${(0,t.formatAbiItem)(B,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=B}}Le.DecodeLogTopicsMismatch=I;class P extends r.BaseError{constructor(B,{docsPath:v}){super([`Type "${B}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:v,name:"InvalidAbiEncodingType"})}}Le.InvalidAbiEncodingTypeError=P;class T extends r.BaseError{constructor(B,{docsPath:v}){super([`Type "${B}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:v,name:"InvalidAbiDecodingType"})}}Le.InvalidAbiDecodingTypeError=T;class R extends r.BaseError{constructor(B){super([`Value "${B}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}Le.InvalidArrayError=R;class U extends r.BaseError{constructor(B){super([`"${B}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}Le.InvalidDefinitionTypeError=U;class k extends r.BaseError{constructor(B){super(`Type "${B}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}return Le.UnsupportedPackedAbiType=k,Le}var Vf={},$R;function JF(){if($R)return Vf;$R=1,Object.defineProperty(Vf,"__esModule",{value:!0}),Vf.FilterTypeNotSupportedError=void 0;const t=Ke();class e extends t.BaseError{constructor(n){super(`Filter type "${n}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}return Vf.FilterTypeNotSupportedError=e,Vf}var Pa={},Tl={},Eo={},VR;function sv(){if(VR)return Eo;VR=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.InvalidBytesLengthError=Eo.SizeExceedsPaddingSizeError=Eo.SliceOffsetOutOfBoundsError=void 0;const t=Ke();class e extends t.BaseError{constructor({offset:i,position:o,size:a}){super(`Slice ${o==="start"?"starting":"ending"} at offset "${i}" is out-of-bounds (size: ${a}).`,{name:"SliceOffsetOutOfBoundsError"})}}Eo.SliceOffsetOutOfBoundsError=e;class r extends t.BaseError{constructor({size:i,targetSize:o,type:a}){super(`${a.charAt(0).toUpperCase()}${a.slice(1).toLowerCase()} size (${i}) exceeds padding size (${o}).`,{name:"SizeExceedsPaddingSizeError"})}}Eo.SizeExceedsPaddingSizeError=r;class n extends t.BaseError{constructor({size:i,targetSize:o,type:a}){super(`${a.charAt(0).toUpperCase()}${a.slice(1).toLowerCase()} is expected to be ${o} ${a} long, but is ${i} ${a} long.`,{name:"InvalidBytesLengthError"})}}return Eo.InvalidBytesLengthError=n,Eo}var GR;function ac(){if(GR)return Tl;GR=1,Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.pad=e,Tl.padHex=r,Tl.padBytes=n;const t=sv();function e(s,{dir:i,size:o=32}={}){return typeof s=="string"?r(s,{dir:i,size:o}):n(s,{dir:i,size:o})}function r(s,{dir:i,size:o=32}={}){if(o===null)return s;const a=s.replace("0x","");if(a.length>o*2)throw new t.SizeExceedsPaddingSizeError({size:Math.ceil(a.length/2),targetSize:o,type:"hex"});return`0x${a[i==="right"?"padEnd":"padStart"](o*2,"0")}`}function n(s,{dir:i,size:o=32}={}){if(o===null)return s;if(s.length>o)throw new t.SizeExceedsPaddingSizeError({size:s.length,targetSize:o,type:"bytes"});const a=new Uint8Array(o);for(let c=0;c<o;c++){const u=i==="right";a[u?c:o-c-1]=s[u?c:s.length-c-1]}return a}return Tl}var vo={},is={},WR;function Wd(){if(WR)return is;WR=1,Object.defineProperty(is,"__esModule",{value:!0}),is.SizeOverflowError=is.InvalidHexValueError=is.InvalidHexBooleanError=is.InvalidBytesBooleanError=is.IntegerOutOfRangeError=void 0;const t=Ke();class e extends t.BaseError{constructor({max:a,min:c,signed:u,size:l,value:d}){super(`Number "${d}" is not in safe ${l?`${l*8}-bit ${u?"signed":"unsigned"} `:""}integer range ${a?`(${c} to ${a})`:`(above ${c})`}`,{name:"IntegerOutOfRangeError"})}}is.IntegerOutOfRangeError=e;class r extends t.BaseError{constructor(a){super(`Bytes value "${a}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}is.InvalidBytesBooleanError=r;class n extends t.BaseError{constructor(a){super(`Hex value "${a}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}is.InvalidHexBooleanError=n;class s extends t.BaseError{constructor(a){super(`Hex value "${a}" is an odd length (${a.length}). It must be an even length.`,{name:"InvalidHexValueError"})}}is.InvalidHexValueError=s;class i extends t.BaseError{constructor({givenSize:a,maxSize:c}){super(`Size cannot exceed ${c} bytes. Given size: ${a} bytes.`,{name:"SizeOverflowError"})}}return is.SizeOverflowError=i,is}var nm={},KR;function aa(){if(KR)return nm;KR=1,Object.defineProperty(nm,"__esModule",{value:!0}),nm.trim=t;function t(e,{dir:r="left"}={}){let n=typeof e=="string"?e.replace("0x",""):e,s=0;for(let i=0;i<n.length-1&&n[r==="left"?i:n.length-i-1].toString()==="0";i++)s++;return n=r==="left"?n.slice(s):n.slice(0,n.length-s),typeof e=="string"?(n.length===1&&r==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}return nm}var ZR;function fr(){if(ZR)return vo;ZR=1,Object.defineProperty(vo,"__esModule",{value:!0}),vo.assertSize=s,vo.fromHex=i,vo.hexToBigInt=o,vo.hexToBool=a,vo.hexToNumber=c,vo.hexToString=u;const t=Wd(),e=Jn(),r=aa(),n=Lt();function s(l,{size:d}){if((0,e.size)(l)>d)throw new t.SizeOverflowError({givenSize:(0,e.size)(l),maxSize:d})}function i(l,d){const f=typeof d=="string"?{to:d}:d,g=f.to;return g==="number"?c(l,f):g==="bigint"?o(l,f):g==="string"?u(l,f):g==="boolean"?a(l,f):(0,n.hexToBytes)(l,f)}function o(l,d={}){const{signed:f}=d;d.size&&s(l,{size:d.size});const g=BigInt(l);if(!f)return g;const p=(l.length-2)/2,h=(1n<<BigInt(p)*8n-1n)-1n;return g<=h?g:g-BigInt(`0x${"f".padStart(p*2,"f")}`)-1n}function a(l,d={}){let f=l;if(d.size&&(s(f,{size:d.size}),f=(0,r.trim)(f)),(0,r.trim)(f)==="0x00")return!1;if((0,r.trim)(f)==="0x01")return!0;throw new t.InvalidHexBooleanError(f)}function c(l,d={}){return Number(o(l,d))}function u(l,d={}){let f=(0,n.hexToBytes)(l);return d.size&&(s(f,{size:d.size}),f=(0,r.trim)(f,{dir:"right"})),new TextDecoder().decode(f)}return vo}var Na={},YR;function Ae(){if(YR)return Na;YR=1,Object.defineProperty(Na,"__esModule",{value:!0}),Na.toHex=s,Na.boolToHex=i,Na.bytesToHex=o,Na.numberToHex=a,Na.stringToHex=u;const t=Wd(),e=ac(),r=fr(),n=Array.from({length:256},(l,d)=>d.toString(16).padStart(2,"0"));function s(l,d={}){return typeof l=="number"||typeof l=="bigint"?a(l,d):typeof l=="string"?u(l,d):typeof l=="boolean"?i(l,d):o(l,d)}function i(l,d={}){const f=`0x${Number(l)}`;return typeof d.size=="number"?((0,r.assertSize)(f,{size:d.size}),(0,e.pad)(f,{size:d.size})):f}function o(l,d={}){let f="";for(let p=0;p<l.length;p++)f+=n[l[p]];const g=`0x${f}`;return typeof d.size=="number"?((0,r.assertSize)(g,{size:d.size}),(0,e.pad)(g,{dir:"right",size:d.size})):g}function a(l,d={}){const{signed:f,size:g}=d,p=BigInt(l);let h;g?f?h=(1n<<BigInt(g)*8n-1n)-1n:h=2n**(BigInt(g)*8n)-1n:typeof l=="number"&&(h=BigInt(Number.MAX_SAFE_INTEGER));const y=typeof h=="bigint"&&f?-h-1n:0;if(h&&p>h||p<y){const E=typeof l=="bigint"?"n":"";throw new t.IntegerOutOfRangeError({max:h?`${h}${E}`:void 0,min:`${y}${E}`,signed:f,size:g,value:`${l}${E}`})}const b=`0x${(f&&p<0?(1n<<BigInt(g*8))+BigInt(p):p).toString(16)}`;return g?(0,e.pad)(b,{size:g}):b}const c=new TextEncoder;function u(l,d={}){const f=c.encode(l);return o(f,d)}return Na}var JR;function Lt(){if(JR)return Pa;JR=1,Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.toBytes=o,Pa.boolToBytes=a,Pa.hexToBytes=l,Pa.numberToBytes=d,Pa.stringToBytes=f;const t=Ke(),e=Pn(),r=ac(),n=fr(),s=Ae(),i=new TextEncoder;function o(g,p={}){return typeof g=="number"||typeof g=="bigint"?d(g,p):typeof g=="boolean"?a(g,p):(0,e.isHex)(g)?l(g,p):f(g,p)}function a(g,p={}){const h=new Uint8Array(1);return h[0]=Number(g),typeof p.size=="number"?((0,n.assertSize)(h,{size:p.size}),(0,r.pad)(h,{size:p.size})):h}const c={zero:48,nine:57,A:65,F:70,a:97,f:102};function u(g){if(g>=c.zero&&g<=c.nine)return g-c.zero;if(g>=c.A&&g<=c.F)return g-(c.A-10);if(g>=c.a&&g<=c.f)return g-(c.a-10)}function l(g,p={}){let h=g;p.size&&((0,n.assertSize)(h,{size:p.size}),h=(0,r.pad)(h,{dir:"right",size:p.size}));let y=h.slice(2);y.length%2&&(y=`0${y}`);const b=y.length/2,E=new Uint8Array(b);for(let w=0,m=0;w<b;w++){const _=u(y.charCodeAt(m++)),C=u(y.charCodeAt(m++));if(_===void 0||C===void 0)throw new t.BaseError(`Invalid byte sequence ("${y[m-2]}${y[m-1]}" in "${y}").`);E[w]=_*16+C}return E}function d(g,p){const h=(0,s.numberToHex)(g,p);return l(h)}function f(g,p={}){const h=i.encode(g);return typeof p.size=="number"?((0,n.assertSize)(h,{size:p.size}),(0,r.pad)(h,{dir:"right",size:p.size})):h}return Pa}var sm={},Ht={},Ge={},QR;function QF(){if(QR)return Ge;QR=1,Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.toBig=Ge.shrSL=Ge.shrSH=Ge.rotrSL=Ge.rotrSH=Ge.rotrBL=Ge.rotrBH=Ge.rotr32L=Ge.rotr32H=Ge.rotlSL=Ge.rotlSH=Ge.rotlBL=Ge.rotlBH=Ge.add5L=Ge.add5H=Ge.add4L=Ge.add4H=Ge.add3L=Ge.add3H=void 0,Ge.add=b,Ge.fromBig=r,Ge.split=n;const t=BigInt(2**32-1),e=BigInt(32);function r(T,R=!1){return R?{h:Number(T&t),l:Number(T>>e&t)}:{h:Number(T>>e&t)|0,l:Number(T&t)|0}}function n(T,R=!1){const U=T.length;let k=new Uint32Array(U),O=new Uint32Array(U);for(let B=0;B<U;B++){const{h:v,l:A}=r(T[B],R);[k[B],O[B]]=[v,A]}return[k,O]}const s=(T,R)=>BigInt(T>>>0)<<e|BigInt(R>>>0);Ge.toBig=s;const i=(T,R,U)=>T>>>U;Ge.shrSH=i;const o=(T,R,U)=>T<<32-U|R>>>U;Ge.shrSL=o;const a=(T,R,U)=>T>>>U|R<<32-U;Ge.rotrSH=a;const c=(T,R,U)=>T<<32-U|R>>>U;Ge.rotrSL=c;const u=(T,R,U)=>T<<64-U|R>>>U-32;Ge.rotrBH=u;const l=(T,R,U)=>T>>>U-32|R<<64-U;Ge.rotrBL=l;const d=(T,R)=>R;Ge.rotr32H=d;const f=(T,R)=>T;Ge.rotr32L=f;const g=(T,R,U)=>T<<U|R>>>32-U;Ge.rotlSH=g;const p=(T,R,U)=>R<<U|T>>>32-U;Ge.rotlSL=p;const h=(T,R,U)=>R<<U-32|T>>>64-U;Ge.rotlBH=h;const y=(T,R,U)=>T<<U-32|R>>>64-U;Ge.rotlBL=y;function b(T,R,U,k){const O=(R>>>0)+(k>>>0);return{h:T+U+(O/2**32|0)|0,l:O|0}}const E=(T,R,U)=>(T>>>0)+(R>>>0)+(U>>>0);Ge.add3L=E;const w=(T,R,U,k)=>R+U+k+(T/2**32|0)|0;Ge.add3H=w;const m=(T,R,U,k)=>(T>>>0)+(R>>>0)+(U>>>0)+(k>>>0);Ge.add4L=m;const _=(T,R,U,k,O)=>R+U+k+O+(T/2**32|0)|0;Ge.add4H=_;const C=(T,R,U,k,O)=>(T>>>0)+(R>>>0)+(U>>>0)+(k>>>0)+(O>>>0);Ge.add5L=C;const I=(T,R,U,k,O,B)=>R+U+k+O+B+(T/2**32|0)|0;Ge.add5H=I;const P={fromBig:r,split:n,toBig:s,shrSH:i,shrSL:o,rotrSH:a,rotrSL:c,rotrBH:u,rotrBL:l,rotr32H:d,rotr32L:f,rotlSH:g,rotlSL:p,rotlBH:h,rotlBL:y,add:b,add3L:E,add3H:w,add4L:m,add4H:_,add5H:I,add5L:C};return Ge.default=P,Ge}var HA={},Gf={},XR;function Kye(){return XR||(XR=1,Object.defineProperty(Gf,"__esModule",{value:!0}),Gf.crypto=void 0,Gf.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),Gf}var ex;function cc(){return ex||(ex=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.Hash=t.nextTick=t.swap32IfBE=t.byteSwapIfBE=t.swap8IfBE=t.isLE=void 0,t.isBytes=r,t.anumber=n,t.abytes=s,t.ahash=i,t.aexists=o,t.aoutput=a,t.u8=c,t.u32=u,t.clean=l,t.createView=d,t.rotr=f,t.rotl=g,t.byteSwap=p,t.byteSwap32=h,t.bytesToHex=E,t.hexToBytes=_,t.asyncLoop=I,t.utf8ToBytes=P,t.bytesToUtf8=T,t.toBytes=R,t.kdfInputToBytes=U,t.concatBytes=k,t.checkOpts=O,t.createHasher=v,t.createOptHasher=A,t.createXOFer=S,t.randomBytes=j;const e=Kye();function r(N){return N instanceof Uint8Array||ArrayBuffer.isView(N)&&N.constructor.name==="Uint8Array"}function n(N){if(!Number.isSafeInteger(N)||N<0)throw new Error("positive integer expected, got "+N)}function s(N,...x){if(!r(N))throw new Error("Uint8Array expected");if(x.length>0&&!x.includes(N.length))throw new Error("Uint8Array expected of length "+x+", got length="+N.length)}function i(N){if(typeof N!="function"||typeof N.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");n(N.outputLen),n(N.blockLen)}function o(N,x=!0){if(N.destroyed)throw new Error("Hash instance has been destroyed");if(x&&N.finished)throw new Error("Hash#digest() has already been called")}function a(N,x){s(N);const D=x.outputLen;if(N.length<D)throw new Error("digestInto() expects output buffer of length at least "+D)}function c(N){return new Uint8Array(N.buffer,N.byteOffset,N.byteLength)}function u(N){return new Uint32Array(N.buffer,N.byteOffset,Math.floor(N.byteLength/4))}function l(...N){for(let x=0;x<N.length;x++)N[x].fill(0)}function d(N){return new DataView(N.buffer,N.byteOffset,N.byteLength)}function f(N,x){return N<<32-x|N>>>x}function g(N,x){return N<<x|N>>>32-x>>>0}t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function p(N){return N<<24&4278190080|N<<8&16711680|N>>>8&65280|N>>>24&255}t.swap8IfBE=t.isLE?N=>N:N=>p(N),t.byteSwapIfBE=t.swap8IfBE;function h(N){for(let x=0;x<N.length;x++)N[x]=p(N[x]);return N}t.swap32IfBE=t.isLE?N=>N:h;const y=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",b=Array.from({length:256},(N,x)=>x.toString(16).padStart(2,"0"));function E(N){if(s(N),y)return N.toHex();let x="";for(let D=0;D<N.length;D++)x+=b[N[D]];return x}const w={_0:48,_9:57,A:65,F:70,a:97,f:102};function m(N){if(N>=w._0&&N<=w._9)return N-w._0;if(N>=w.A&&N<=w.F)return N-(w.A-10);if(N>=w.a&&N<=w.f)return N-(w.a-10)}function _(N){if(typeof N!="string")throw new Error("hex string expected, got "+typeof N);if(y)return Uint8Array.fromHex(N);const x=N.length,D=x/2;if(x%2)throw new Error("hex string expected, got unpadded hex of length "+x);const M=new Uint8Array(D);for(let L=0,F=0;L<D;L++,F+=2){const q=m(N.charCodeAt(F)),$=m(N.charCodeAt(F+1));if(q===void 0||$===void 0){const V=N[F]+N[F+1];throw new Error('hex string expected, got non-hex character "'+V+'" at index '+F)}M[L]=q*16+$}return M}const C=async()=>{};t.nextTick=C;async function I(N,x,D){let M=Date.now();for(let L=0;L<N;L++){D(L);const F=Date.now()-M;F>=0&&F<x||(await(0,t.nextTick)(),M+=F)}}function P(N){if(typeof N!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(N))}function T(N){return new TextDecoder().decode(N)}function R(N){return typeof N=="string"&&(N=P(N)),s(N),N}function U(N){return typeof N=="string"&&(N=P(N)),s(N),N}function k(...N){let x=0;for(let M=0;M<N.length;M++){const L=N[M];s(L),x+=L.length}const D=new Uint8Array(x);for(let M=0,L=0;M<N.length;M++){const F=N[M];D.set(F,L),L+=F.length}return D}function O(N,x){if(x!==void 0&&{}.toString.call(x)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(N,x)}class B{}t.Hash=B;function v(N){const x=M=>N().update(R(M)).digest(),D=N();return x.outputLen=D.outputLen,x.blockLen=D.blockLen,x.create=()=>N(),x}function A(N){const x=(M,L)=>N(L).update(R(M)).digest(),D=N({});return x.outputLen=D.outputLen,x.blockLen=D.blockLen,x.create=M=>N(M),x}function S(N){const x=(M,L)=>N(L).update(R(M)).digest(),D=N({});return x.outputLen=D.outputLen,x.blockLen=D.blockLen,x.create=M=>N(M),x}t.wrapConstructor=v,t.wrapConstructorWithOpts=A,t.wrapXOFConstructorWithOpts=S;function j(N=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(N));if(e.crypto&&typeof e.crypto.randomBytes=="function")return Uint8Array.from(e.crypto.randomBytes(N));throw new Error("crypto.getRandomValues must be defined")}})(HA)),HA}var tx;function XF(){if(tx)return Ht;tx=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.shake256=Ht.shake128=Ht.keccak_512=Ht.keccak_384=Ht.keccak_256=Ht.keccak_224=Ht.sha3_512=Ht.sha3_384=Ht.sha3_256=Ht.sha3_224=Ht.Keccak=void 0,Ht.keccakP=y;const t=QF(),e=cc(),r=BigInt(0),n=BigInt(1),s=BigInt(2),i=BigInt(7),o=BigInt(256),a=BigInt(113),c=[],u=[],l=[];for(let m=0,_=n,C=1,I=0;m<24;m++){[C,I]=[I,(2*C+3*I)%5],c.push(2*(5*I+C)),u.push((m+1)*(m+2)/2%64);let P=r;for(let T=0;T<7;T++)_=(_<<n^(_>>i)*a)%o,_&s&&(P^=n<<(n<<BigInt(T))-n);l.push(P)}const d=(0,t.split)(l,!0),f=d[0],g=d[1],p=(m,_,C)=>C>32?(0,t.rotlBH)(m,_,C):(0,t.rotlSH)(m,_,C),h=(m,_,C)=>C>32?(0,t.rotlBL)(m,_,C):(0,t.rotlSL)(m,_,C);function y(m,_=24){const C=new Uint32Array(10);for(let I=24-_;I<24;I++){for(let R=0;R<10;R++)C[R]=m[R]^m[R+10]^m[R+20]^m[R+30]^m[R+40];for(let R=0;R<10;R+=2){const U=(R+8)%10,k=(R+2)%10,O=C[k],B=C[k+1],v=p(O,B,1)^C[U],A=h(O,B,1)^C[U+1];for(let S=0;S<50;S+=10)m[R+S]^=v,m[R+S+1]^=A}let P=m[2],T=m[3];for(let R=0;R<24;R++){const U=u[R],k=p(P,T,U),O=h(P,T,U),B=c[R];P=m[B],T=m[B+1],m[B]=k,m[B+1]=O}for(let R=0;R<50;R+=10){for(let U=0;U<10;U++)C[U]=m[R+U];for(let U=0;U<10;U++)m[R+U]^=~C[(U+2)%10]&C[(U+4)%10]}m[0]^=f[I],m[1]^=g[I]}(0,e.clean)(C)}class b extends e.Hash{constructor(_,C,I,P=!1,T=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=_,this.suffix=C,this.outputLen=I,this.enableXOF=P,this.rounds=T,(0,e.anumber)(I),!(0<_&&_<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,e.u32)(this.state)}clone(){return this._cloneInto()}keccak(){(0,e.swap32IfBE)(this.state32),y(this.state32,this.rounds),(0,e.swap32IfBE)(this.state32),this.posOut=0,this.pos=0}update(_){(0,e.aexists)(this),_=(0,e.toBytes)(_),(0,e.abytes)(_);const{blockLen:C,state:I}=this,P=_.length;for(let T=0;T<P;){const R=Math.min(C-this.pos,P-T);for(let U=0;U<R;U++)I[this.pos++]^=_[T++];this.pos===C&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:_,suffix:C,pos:I,blockLen:P}=this;_[I]^=C,(C&128)!==0&&I===P-1&&this.keccak(),_[P-1]^=128,this.keccak()}writeInto(_){(0,e.aexists)(this,!1),(0,e.abytes)(_),this.finish();const C=this.state,{blockLen:I}=this;for(let P=0,T=_.length;P<T;){this.posOut>=I&&this.keccak();const R=Math.min(I-this.posOut,T-P);_.set(C.subarray(this.posOut,this.posOut+R),P),this.posOut+=R,P+=R}return _}xofInto(_){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(_)}xof(_){return(0,e.anumber)(_),this.xofInto(new Uint8Array(_))}digestInto(_){if((0,e.aoutput)(_,this),this.finished)throw new Error("digest() was already called");return this.writeInto(_),this.destroy(),_}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,e.clean)(this.state)}_cloneInto(_){const{blockLen:C,suffix:I,outputLen:P,rounds:T,enableXOF:R}=this;return _||(_=new b(C,I,P,R,T)),_.state32.set(this.state32),_.pos=this.pos,_.posOut=this.posOut,_.finished=this.finished,_.rounds=T,_.suffix=I,_.outputLen=P,_.enableXOF=R,_.destroyed=this.destroyed,_}}Ht.Keccak=b;const E=(m,_,C)=>(0,e.createHasher)(()=>new b(_,m,C));Ht.sha3_224=E(6,144,224/8),Ht.sha3_256=E(6,136,256/8),Ht.sha3_384=E(6,104,384/8),Ht.sha3_512=E(6,72,512/8),Ht.keccak_224=E(1,144,224/8),Ht.keccak_256=E(1,136,256/8),Ht.keccak_384=E(1,104,384/8),Ht.keccak_512=E(1,72,512/8);const w=(m,_,C)=>(0,e.createXOFer)((I={})=>new b(_,m,I.dkLen===void 0?C:I.dkLen,!0));return Ht.shake128=w(31,168,128/8),Ht.shake256=w(31,136,256/8),Ht}var rx;function Qn(){if(rx)return sm;rx=1,Object.defineProperty(sm,"__esModule",{value:!0}),sm.keccak256=s;const t=XF(),e=Pn(),r=Lt(),n=Ae();function s(i,o){const a=o||"hex",c=(0,t.keccak_256)((0,e.isHex)(i,{strict:!1})?(0,r.toBytes)(i):i);return a==="bytes"?c:(0,n.toHex)(c)}return sm}var Wf={},im={},om={},nx;function Zye(){if(nx)return om;nx=1,Object.defineProperty(om,"__esModule",{value:!0}),om.hashSignature=n;const t=Lt(),e=Qn(),r=s=>(0,e.keccak256)((0,t.toBytes)(s));function n(s){return r(s)}return om}var Kf={},am={},sx;function Yye(){if(sx)return am;sx=1,Object.defineProperty(am,"__esModule",{value:!0}),am.normalizeSignature=e;const t=Ke();function e(r){let n=!0,s="",i=0,o="",a=!1;for(let c=0;c<r.length;c++){const u=r[c];if(["(",")",","].includes(u)&&(n=!0),u==="("&&i++,u===")"&&i--,!!n){if(i===0){if(u===" "&&["event","function",""].includes(o))o="";else if(o+=u,u===")"){a=!0;break}continue}if(u===" "){r[c-1]!==","&&s!==","&&s!==",("&&(s="",n=!1);continue}o+=u,s+=u}}if(!a)throw new t.BaseError("Unable to normalize signature.");return o}return am}var ix;function yS(){if(ix)return Kf;ix=1,Object.defineProperty(Kf,"__esModule",{value:!0}),Kf.toSignature=void 0;const t=oc(),e=Yye(),r=n=>{const s=typeof n=="string"?n:(0,t.formatAbiItem)(n);return(0,e.normalizeSignature)(s)};return Kf.toSignature=r,Kf}var ox;function iv(){if(ox)return im;ox=1,Object.defineProperty(im,"__esModule",{value:!0}),im.toSignatureHash=r;const t=Zye(),e=yS();function r(n){return(0,t.hashSignature)((0,e.toSignature)(n))}return im}var ax;function Kd(){if(ax)return Wf;ax=1,Object.defineProperty(Wf,"__esModule",{value:!0}),Wf.toEventSelector=void 0;const t=iv();return Wf.toEventSelector=t.toSignatureHash,Wf}var Zf={},Yf={},cx;function Ei(){if(cx)return Yf;cx=1,Object.defineProperty(Yf,"__esModule",{value:!0}),Yf.InvalidAddressError=void 0;const t=Ke();class e extends t.BaseError{constructor({address:n}){super(`Address "${n}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}return Yf.InvalidAddressError=e,Yf}var zA={},Jf={},ux;function rl(){if(ux)return Jf;ux=1,Object.defineProperty(Jf,"__esModule",{value:!0}),Jf.LruMap=void 0;class t extends Map{constructor(r){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=r}get(r){const n=super.get(r);return super.has(r)&&n!==void 0&&(this.delete(r),super.set(r,n)),n}set(r,n){if(super.set(r,n),this.maxSize&&this.size>this.maxSize){const s=this.keys().next().value;s&&this.delete(s)}return this}}return Jf.LruMap=t,Jf}var Qf={},lx;function _s(){if(lx)return Qf;lx=1,Object.defineProperty(Qf,"__esModule",{value:!0}),Qf.checksumAddress=o,Qf.getAddress=a;const t=Ei(),e=Lt(),r=Qn(),n=rl(),s=Xn(),i=new n.LruMap(8192);function o(c,u){if(i.has(`${c}.${u}`))return i.get(`${c}.${u}`);const l=u?`${u}${c.toLowerCase()}`:c.substring(2).toLowerCase(),d=(0,r.keccak256)((0,e.stringToBytes)(l),"bytes"),f=(u?l.substring(`${u}0x`.length):l).split("");for(let p=0;p<40;p+=2)d[p>>1]>>4>=8&&f[p]&&(f[p]=f[p].toUpperCase()),(d[p>>1]&15)>=8&&f[p+1]&&(f[p+1]=f[p+1].toUpperCase());const g=`0x${f.join("")}`;return i.set(`${c}.${u}`,g),g}function a(c,u){if(!(0,s.isAddress)(c,{strict:!1}))throw new t.InvalidAddressError({address:c});return o(c,u)}return Qf}var dx;function Xn(){return dx||(dx=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isAddressCache=void 0,t.isAddress=s;const e=rl(),r=_s(),n=/^0x[a-fA-F0-9]{40}$/;t.isAddressCache=new e.LruMap(8192);function s(i,o){const{strict:a=!0}=o??{},c=`${i}.${a}`;if(t.isAddressCache.has(c))return t.isAddressCache.get(c);const u=n.test(i)?i.toLowerCase()===i?!0:a?(0,r.checksumAddress)(i)===i:!0:!1;return t.isAddressCache.set(c,u),u}})(zA)),zA}var Pl={},fx;function Mr(){if(fx)return Pl;fx=1,Object.defineProperty(Pl,"__esModule",{value:!0}),Pl.concat=t,Pl.concatBytes=e,Pl.concatHex=r;function t(n){return typeof n[0]=="string"?r(n):e(n)}function e(n){let s=0;for(const a of n)s+=a.length;const i=new Uint8Array(s);let o=0;for(const a of n)i.set(a,o),o+=a.length;return i}function r(n){return`0x${n.reduce((s,i)=>s+i.replace("0x",""),"")}`}return Pl}var Nl={},hx;function Hs(){if(hx)return Nl;hx=1,Object.defineProperty(Nl,"__esModule",{value:!0}),Nl.slice=n,Nl.sliceBytes=o,Nl.sliceHex=a;const t=sv(),e=Pn(),r=Jn();function n(c,u,l,{strict:d}={}){return(0,e.isHex)(c,{strict:!1})?a(c,u,l,{strict:d}):o(c,u,l,{strict:d})}function s(c,u){if(typeof u=="number"&&u>0&&u>(0,r.size)(c)-1)throw new t.SliceOffsetOutOfBoundsError({offset:u,position:"start",size:(0,r.size)(c)})}function i(c,u,l){if(typeof u=="number"&&typeof l=="number"&&(0,r.size)(c)!==l-u)throw new t.SliceOffsetOutOfBoundsError({offset:l,position:"end",size:(0,r.size)(c)})}function o(c,u,l,{strict:d}={}){s(c,u);const f=c.slice(u,l);return d&&i(f,u,l),f}function a(c,u,l,{strict:d}={}){s(c,u);const f=`0x${c.replace("0x","").slice((u??0)*2,(l??c.length)*2)}`;return d&&i(f,u,l),f}return Nl}var _o={},px;function ov(){return px||(px=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.integerRegex=_o.bytesRegex=_o.arrayRegex=void 0,_o.arrayRegex=/^(.*)\[([0-9]*)\]$/,_o.bytesRegex=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,_o.integerRegex=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/),_o}var gx;function vi(){if(gx)return Zf;gx=1,Object.defineProperty(Zf,"__esModule",{value:!0}),Zf.encodeAbiParameters=d,Zf.getArrayComponents=C;const t=er(),e=Ei(),r=Ke(),n=Wd(),s=Xn(),i=Mr(),o=ac(),a=Jn(),c=Hs(),u=Ae(),l=ov();function d(I,P){if(I.length!==P.length)throw new t.AbiEncodingLengthMismatchError({expectedLength:I.length,givenLength:P.length});const T=f({params:I,values:P}),R=p(T);return R.length===0?"0x":R}function f({params:I,values:P}){const T=[];for(let R=0;R<I.length;R++)T.push(g({param:I[R],value:P[R]}));return T}function g({param:I,value:P}){const T=C(I.type);if(T){const[R,U]=T;return y(P,{length:R,param:{...I,type:U}})}if(I.type==="tuple")return _(P,{param:I});if(I.type==="address")return h(P);if(I.type==="bool")return E(P);if(I.type.startsWith("uint")||I.type.startsWith("int")){const R=I.type.startsWith("int"),[,,U="256"]=l.integerRegex.exec(I.type)??[];return w(P,{signed:R,size:Number(U)})}if(I.type.startsWith("bytes"))return b(P,{param:I});if(I.type==="string")return m(P);throw new t.InvalidAbiEncodingTypeError(I.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function p(I){let P=0;for(let k=0;k<I.length;k++){const{dynamic:O,encoded:B}=I[k];O?P+=32:P+=(0,a.size)(B)}const T=[],R=[];let U=0;for(let k=0;k<I.length;k++){const{dynamic:O,encoded:B}=I[k];O?(T.push((0,u.numberToHex)(P+U,{size:32})),R.push(B),U+=(0,a.size)(B)):T.push(B)}return(0,i.concat)([...T,...R])}function h(I){if(!(0,s.isAddress)(I))throw new e.InvalidAddressError({address:I});return{dynamic:!1,encoded:(0,o.padHex)(I.toLowerCase())}}function y(I,{length:P,param:T}){const R=P===null;if(!Array.isArray(I))throw new t.InvalidArrayError(I);if(!R&&I.length!==P)throw new t.AbiEncodingArrayLengthMismatchError({expectedLength:P,givenLength:I.length,type:`${T.type}[${P}]`});let U=!1;const k=[];for(let O=0;O<I.length;O++){const B=g({param:T,value:I[O]});B.dynamic&&(U=!0),k.push(B)}if(R||U){const O=p(k);if(R){const B=(0,u.numberToHex)(k.length,{size:32});return{dynamic:!0,encoded:k.length>0?(0,i.concat)([B,O]):B}}if(U)return{dynamic:!0,encoded:O}}return{dynamic:!1,encoded:(0,i.concat)(k.map(({encoded:O})=>O))}}function b(I,{param:P}){const[,T]=P.type.split("bytes"),R=(0,a.size)(I);if(!T){let U=I;return R%32!==0&&(U=(0,o.padHex)(U,{dir:"right",size:Math.ceil((I.length-2)/2/32)*32})),{dynamic:!0,encoded:(0,i.concat)([(0,o.padHex)((0,u.numberToHex)(R,{size:32})),U])}}if(R!==Number.parseInt(T,10))throw new t.AbiEncodingBytesSizeMismatchError({expectedSize:Number.parseInt(T,10),value:I});return{dynamic:!1,encoded:(0,o.padHex)(I,{dir:"right"})}}function E(I){if(typeof I!="boolean")throw new r.BaseError(`Invalid boolean value: "${I}" (type: ${typeof I}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:(0,o.padHex)((0,u.boolToHex)(I))}}function w(I,{signed:P,size:T=256}){if(typeof T=="number"){const R=2n**(BigInt(T)-(P?1n:0n))-1n,U=P?-R-1n:0n;if(I>R||I<U)throw new n.IntegerOutOfRangeError({max:R.toString(),min:U.toString(),signed:P,size:T/8,value:I.toString()})}return{dynamic:!1,encoded:(0,u.numberToHex)(I,{size:32,signed:P})}}function m(I){const P=(0,u.stringToHex)(I),T=Math.ceil((0,a.size)(P)/32),R=[];for(let U=0;U<T;U++)R.push((0,o.padHex)((0,c.slice)(P,U*32,(U+1)*32),{dir:"right"}));return{dynamic:!0,encoded:(0,i.concat)([(0,o.padHex)((0,u.numberToHex)((0,a.size)(P),{size:32})),...R])}}function _(I,{param:P}){let T=!1;const R=[];for(let U=0;U<P.components.length;U++){const k=P.components[U],O=Array.isArray(I)?U:k.name,B=g({param:k,value:I[O]});R.push(B),B.dynamic&&(T=!0)}return{dynamic:T,encoded:T?p(R):(0,i.concat)(R.map(({encoded:U})=>U))}}function C(I){const P=I.match(/^(.*)\[(\d+)?\]$/);return P?[P[2]?Number(P[2]):null,P[1]]:void 0}return Zf}var Ol={},Xf={},mx;function nl(){if(mx)return Xf;mx=1,Object.defineProperty(Xf,"__esModule",{value:!0}),Xf.toFunctionSelector=void 0;const t=Hs(),e=iv(),r=n=>(0,t.slice)((0,e.toSignatureHash)(n),0,4);return Xf.toFunctionSelector=r,Xf}var yx;function ca(){if(yx)return Ol;yx=1,Object.defineProperty(Ol,"__esModule",{value:!0}),Ol.getAbiItem=i,Ol.isArgOfType=o,Ol.getAmbiguousTypes=a;const t=er(),e=Pn(),r=Xn(),n=Kd(),s=nl();function i(c){const{abi:u,args:l=[],name:d}=c,f=(0,e.isHex)(d,{strict:!1}),g=u.filter(h=>f?h.type==="function"?(0,s.toFunctionSelector)(h)===d:h.type==="event"?(0,n.toEventSelector)(h)===d:!1:"name"in h&&h.name===d);if(g.length===0)return;if(g.length===1)return g[0];let p;for(const h of g){if(!("inputs"in h))continue;if(!l||l.length===0){if(!h.inputs||h.inputs.length===0)return h;continue}if(!h.inputs||h.inputs.length===0||h.inputs.length!==l.length)continue;if(l.every((b,E)=>{const w="inputs"in h&&h.inputs[E];return w?o(b,w):!1})){if(p&&"inputs"in p&&p.inputs){const b=a(h.inputs,p.inputs,l);if(b)throw new t.AbiItemAmbiguityError({abiItem:h,type:b[0]},{abiItem:p,type:b[1]})}p=h}}return p||g[0]}function o(c,u){const l=typeof c,d=u.type;switch(d){case"address":return(0,r.isAddress)(c,{strict:!1});case"bool":return l==="boolean";case"function":return l==="string";case"string":return l==="string";default:return d==="tuple"&&"components"in u?Object.values(u.components).every((f,g)=>o(Object.values(c)[g],f)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(d)?l==="number"||l==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(d)?l==="string"||c instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(d)?Array.isArray(c)&&c.every(f=>o(f,{...u,type:d.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function a(c,u,l){for(const d in c){const f=c[d],g=u[d];if(f.type==="tuple"&&g.type==="tuple"&&"components"in f&&"components"in g)return a(f.components,g.components,l[d]);const p=[f.type,g.type];if(p.includes("address")&&p.includes("bytes20")?!0:p.includes("address")&&p.includes("string")?(0,r.isAddress)(l[d],{strict:!1}):p.includes("address")&&p.includes("bytes")?(0,r.isAddress)(l[d],{strict:!1}):!1)return p}}return Ol}var bx;function sl(){if(bx)return em;bx=1,Object.defineProperty(em,"__esModule",{value:!0}),em.encodeEventTopics=u;const t=er(),e=JF(),r=Lt(),n=Qn(),s=Kd(),i=vi(),o=oa(),a=ca(),c="/docs/contract/encodeEventTopics";function u(d){const{abi:f,eventName:g,args:p}=d;let h=f[0];if(g){const w=(0,a.getAbiItem)({abi:f,name:g});if(!w)throw new t.AbiEventNotFoundError(g,{docsPath:c});h=w}if(h.type!=="event")throw new t.AbiEventNotFoundError(void 0,{docsPath:c});const y=(0,o.formatAbiItem)(h),b=(0,s.toEventSelector)(y);let E=[];if(p&&"inputs"in h){const w=h.inputs?.filter(_=>"indexed"in _&&_.indexed),m=Array.isArray(p)?p:Object.values(p).length>0?w?.map(_=>p[_.name])??[]:[];m.length>0&&(E=w?.map((_,C)=>Array.isArray(m[C])?m[C].map((I,P)=>l({param:_,value:m[C][P]})):typeof m[C]<"u"&&m[C]!==null?l({param:_,value:m[C]}):null)??[])}return[b,...E]}function l({param:d,value:f}){if(d.type==="string"||d.type==="bytes")return(0,n.keccak256)((0,r.toBytes)(f));if(d.type==="tuple"||d.type.match(/^(.*)\[(\d+)?\]$/))throw new e.FilterTypeNotSupportedError(d.type);return(0,i.encodeAbiParameters)([d],[f])}return em}var cm={},wx;function av(){if(wx)return cm;wx=1,Object.defineProperty(cm,"__esModule",{value:!0}),cm.createFilterRequestScope=t;function t(e,{method:r}){const n={};return e.transport.type==="fallback"&&e.transport.onResponse?.(({method:s,response:i,status:o,transport:a})=>{o==="success"&&r===s&&(n[i]=a.request)}),(s=>n[s]||e.request)}return cm}var Ex;function bS(){if(Ex)return Xg;Ex=1,Object.defineProperty(Xg,"__esModule",{value:!0}),Xg.createContractEventFilter=n;const t=sl(),e=Ae(),r=av();async function n(s,i){const{address:o,abi:a,args:c,eventName:u,fromBlock:l,strict:d,toBlock:f}=i,g=(0,r.createFilterRequestScope)(s,{method:"eth_newFilter"}),p=u?(0,t.encodeEventTopics)({abi:a,args:c,eventName:u}):void 0,h=await s.request({method:"eth_newFilter",params:[{address:o,fromBlock:typeof l=="bigint"?(0,e.numberToHex)(l):l,toBlock:typeof f=="bigint"?(0,e.numberToHex)(f):f,topics:p}]});return{abi:a,args:c,eventName:u,id:h,request:g(h),strict:!!d,type:"event"}}return Xg}var um={},lm={},vx;function or(){if(vx)return lm;vx=1,Object.defineProperty(lm,"__esModule",{value:!0}),lm.parseAccount=t;function t(e){return typeof e=="string"?{address:e,type:"json-rpc"}:e}return lm}var dm={},fm={},_x;function e7(){if(_x)return fm;_x=1,Object.defineProperty(fm,"__esModule",{value:!0}),fm.prepareEncodeFunctionData=i;const t=er(),e=nl(),r=oa(),n=ca(),s="/docs/contract/encodeFunctionData";function i(o){const{abi:a,args:c,functionName:u}=o;let l=a[0];if(u){const d=(0,n.getAbiItem)({abi:a,args:c,name:u});if(!d)throw new t.AbiFunctionNotFoundError(u,{docsPath:s});l=d}if(l.type!=="function")throw new t.AbiFunctionNotFoundError(void 0,{docsPath:s});return{abi:[l],functionName:(0,e.toFunctionSelector)((0,r.formatAbiItem)(l))}}return fm}var Ax;function es(){if(Ax)return dm;Ax=1,Object.defineProperty(dm,"__esModule",{value:!0}),dm.encodeFunctionData=n;const t=Mr(),e=vi(),r=e7();function n(s){const{args:i}=s,{abi:o,functionName:a}=s.abi.length===1&&s.functionName?.startsWith("0x")?s:(0,r.prepareEncodeFunctionData)(s),c=o[0],u=a,l="inputs"in c&&c.inputs?(0,e.encodeAbiParameters)(c.inputs,i??[]):void 0;return(0,t.concatHex)([u,l??"0x"])}return dm}var hm={},pn={},Ao={},Cx;function wS(){return Cx||(Cx=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.solidityPanic=Ao.solidityError=Ao.panicReasons=void 0,Ao.panicReasons={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},Ao.solidityError={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Ao.solidityPanic={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"}),Ao}var pm={},gm={},mm={},Co={},Ix;function t7(){if(Ix)return Co;Ix=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.RecursiveReadLimitExceededError=Co.PositionOutOfBoundsError=Co.NegativeOffsetError=void 0;const t=Ke();class e extends t.BaseError{constructor({offset:i}){super(`Offset \`${i}\` cannot be negative.`,{name:"NegativeOffsetError"})}}Co.NegativeOffsetError=e;class r extends t.BaseError{constructor({length:i,position:o}){super(`Position \`${o}\` is out of bounds (\`0 < position < ${i}\`).`,{name:"PositionOutOfBoundsError"})}}Co.PositionOutOfBoundsError=r;class n extends t.BaseError{constructor({count:i,limit:o}){super(`Recursive read limit of \`${o}\` exceeded (recursive read count: \`${i}\`).`,{name:"RecursiveReadLimitExceededError"})}}return Co.RecursiveReadLimitExceededError=n,Co}var Sx;function I0(){if(Sx)return mm;Sx=1,Object.defineProperty(mm,"__esModule",{value:!0}),mm.createCursor=r;const t=t7(),e={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new t.RecursiveReadLimitExceededError({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(n){if(n<0||n>this.bytes.length-1)throw new t.PositionOutOfBoundsError({length:this.bytes.length,position:n})},decrementPosition(n){if(n<0)throw new t.NegativeOffsetError({offset:n});const s=this.position-n;this.assertPosition(s),this.position=s},getReadCount(n){return this.positionReadCount.get(n||this.position)||0},incrementPosition(n){if(n<0)throw new t.NegativeOffsetError({offset:n});const s=this.position+n;this.assertPosition(s),this.position=s},inspectByte(n){const s=n??this.position;return this.assertPosition(s),this.bytes[s]},inspectBytes(n,s){const i=s??this.position;return this.assertPosition(i+n-1),this.bytes.subarray(i,i+n)},inspectUint8(n){const s=n??this.position;return this.assertPosition(s),this.bytes[s]},inspectUint16(n){const s=n??this.position;return this.assertPosition(s+1),this.dataView.getUint16(s)},inspectUint24(n){const s=n??this.position;return this.assertPosition(s+2),(this.dataView.getUint16(s)<<8)+this.dataView.getUint8(s+2)},inspectUint32(n){const s=n??this.position;return this.assertPosition(s+3),this.dataView.getUint32(s)},pushByte(n){this.assertPosition(this.position),this.bytes[this.position]=n,this.position++},pushBytes(n){this.assertPosition(this.position+n.length-1),this.bytes.set(n,this.position),this.position+=n.length},pushUint8(n){this.assertPosition(this.position),this.bytes[this.position]=n,this.position++},pushUint16(n){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,n),this.position+=2},pushUint24(n){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,n>>8),this.dataView.setUint8(this.position+2,n&255),this.position+=3},pushUint32(n){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,n),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const n=this.inspectByte();return this.position++,n},readBytes(n,s){this.assertReadLimit(),this._touch();const i=this.inspectBytes(n);return this.position+=s??n,i},readUint8(){this.assertReadLimit(),this._touch();const n=this.inspectUint8();return this.position+=1,n},readUint16(){this.assertReadLimit(),this._touch();const n=this.inspectUint16();return this.position+=2,n},readUint24(){this.assertReadLimit(),this._touch();const n=this.inspectUint24();return this.position+=3,n},readUint32(){this.assertReadLimit(),this._touch();const n=this.inspectUint32();return this.position+=4,n},get remaining(){return this.bytes.length-this.position},setPosition(n){const s=this.position;return this.assertPosition(n),this.position=n,()=>this.position=s},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const n=this.getReadCount();this.positionReadCount.set(this.position,n+1),n>0&&this.recursiveReadCount++}};function r(n,{recursiveReadLimit:s=8192}={}){const i=Object.create(e);return i.bytes=n,i.dataView=new DataView(n.buffer,n.byteOffset,n.byteLength),i.positionReadCount=new Map,i.recursiveReadLimit=s,i}return mm}var Oa={},Tx;function ES(){if(Tx)return Oa;Tx=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.fromBytes=s,Oa.bytesToBigInt=i,Oa.bytesToBool=o,Oa.bytesToNumber=a,Oa.bytesToString=c;const t=Wd(),e=aa(),r=fr(),n=Ae();function s(u,l){const d=typeof l=="string"?{to:l}:l,f=d.to;return f==="number"?a(u,d):f==="bigint"?i(u,d):f==="boolean"?o(u,d):f==="string"?c(u,d):(0,n.bytesToHex)(u,d)}function i(u,l={}){typeof l.size<"u"&&(0,r.assertSize)(u,{size:l.size});const d=(0,n.bytesToHex)(u,l);return(0,r.hexToBigInt)(d,l)}function o(u,l={}){let d=u;if(typeof l.size<"u"&&((0,r.assertSize)(d,{size:l.size}),d=(0,e.trim)(d)),d.length>1||d[0]>1)throw new t.InvalidBytesBooleanError(d);return!!d[0]}function a(u,l={}){typeof l.size<"u"&&(0,r.assertSize)(u,{size:l.size});const d=(0,n.bytesToHex)(u,l);return(0,r.hexToNumber)(d,l)}function c(u,l={}){let d=u;return typeof l.size<"u"&&((0,r.assertSize)(d,{size:l.size}),d=(0,e.trim)(d,{dir:"right"})),new TextDecoder().decode(d)}return Oa}var Px;function uc(){if(Px)return gm;Px=1,Object.defineProperty(gm,"__esModule",{value:!0}),gm.decodeAbiParameters=l;const t=er(),e=_s(),r=I0(),n=Jn(),s=Hs(),i=aa(),o=ES(),a=Lt(),c=Ae(),u=vi();function l(C,I){const P=typeof I=="string"?(0,a.hexToBytes)(I):I,T=(0,r.createCursor)(P);if((0,n.size)(P)===0&&C.length>0)throw new t.AbiDecodingZeroDataError;if((0,n.size)(I)&&(0,n.size)(I)<32)throw new t.AbiDecodingDataSizeTooSmallError({data:typeof I=="string"?I:(0,c.bytesToHex)(I),params:C,size:(0,n.size)(I)});let R=0;const U=[];for(let k=0;k<C.length;++k){const O=C[k];T.setPosition(R);const[B,v]=d(T,O,{staticPosition:0});R+=v,U.push(B)}return U}function d(C,I,{staticPosition:P}){const T=(0,u.getArrayComponents)(I.type);if(T){const[R,U]=T;return h(C,{...I,type:U},{length:R,staticPosition:P})}if(I.type==="tuple")return w(C,I,{staticPosition:P});if(I.type==="address")return p(C);if(I.type==="bool")return y(C);if(I.type.startsWith("bytes"))return b(C,I,{staticPosition:P});if(I.type.startsWith("uint")||I.type.startsWith("int"))return E(C,I);if(I.type==="string")return m(C,{staticPosition:P});throw new t.InvalidAbiDecodingTypeError(I.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const f=32,g=32;function p(C){const I=C.readBytes(32);return[(0,e.checksumAddress)((0,c.bytesToHex)((0,s.sliceBytes)(I,-20))),32]}function h(C,I,{length:P,staticPosition:T}){if(!P){const k=(0,o.bytesToNumber)(C.readBytes(g)),O=T+k,B=O+f;C.setPosition(O);const v=(0,o.bytesToNumber)(C.readBytes(f)),A=_(I);let S=0;const j=[];for(let N=0;N<v;++N){C.setPosition(B+(A?N*32:S));const[x,D]=d(C,I,{staticPosition:B});S+=D,j.push(x)}return C.setPosition(T+32),[j,32]}if(_(I)){const k=(0,o.bytesToNumber)(C.readBytes(g)),O=T+k,B=[];for(let v=0;v<P;++v){C.setPosition(O+v*32);const[A]=d(C,I,{staticPosition:O});B.push(A)}return C.setPosition(T+32),[B,32]}let R=0;const U=[];for(let k=0;k<P;++k){const[O,B]=d(C,I,{staticPosition:T+R});R+=B,U.push(O)}return[U,R]}function y(C){return[(0,o.bytesToBool)(C.readBytes(32),{size:32}),32]}function b(C,I,{staticPosition:P}){const[T,R]=I.type.split("bytes");if(!R){const k=(0,o.bytesToNumber)(C.readBytes(32));C.setPosition(P+k);const O=(0,o.bytesToNumber)(C.readBytes(32));if(O===0)return C.setPosition(P+32),["0x",32];const B=C.readBytes(O);return C.setPosition(P+32),[(0,c.bytesToHex)(B),32]}return[(0,c.bytesToHex)(C.readBytes(Number.parseInt(R,10),32)),32]}function E(C,I){const P=I.type.startsWith("int"),T=Number.parseInt(I.type.split("int")[1]||"256",10),R=C.readBytes(32);return[T>48?(0,o.bytesToBigInt)(R,{signed:P}):(0,o.bytesToNumber)(R,{signed:P}),32]}function w(C,I,{staticPosition:P}){const T=I.components.length===0||I.components.some(({name:k})=>!k),R=T?[]:{};let U=0;if(_(I)){const k=(0,o.bytesToNumber)(C.readBytes(g)),O=P+k;for(let B=0;B<I.components.length;++B){const v=I.components[B];C.setPosition(O+U);const[A,S]=d(C,v,{staticPosition:O});U+=S,R[T?B:v?.name]=A}return C.setPosition(P+32),[R,32]}for(let k=0;k<I.components.length;++k){const O=I.components[k],[B,v]=d(C,O,{staticPosition:P});R[T?k:O?.name]=B,U+=v}return[R,U]}function m(C,{staticPosition:I}){const P=(0,o.bytesToNumber)(C.readBytes(32)),T=I+P;C.setPosition(T);const R=(0,o.bytesToNumber)(C.readBytes(32));if(R===0)return C.setPosition(I+32),["",32];const U=C.readBytes(R,32),k=(0,o.bytesToString)((0,i.trim)(U));return C.setPosition(I+32),[k,32]}function _(C){const{type:I}=C;if(I==="string"||I==="bytes"||I.endsWith("[]"))return!0;if(I==="tuple")return C.components?.some(_);const P=(0,u.getArrayComponents)(C.type);return!!(P&&_({...C,type:P[1]}))}return gm}var Nx;function cv(){if(Nx)return pm;Nx=1,Object.defineProperty(pm,"__esModule",{value:!0}),pm.decodeErrorResult=o;const t=wS(),e=er(),r=Hs(),n=nl(),s=uc(),i=oa();function o(a){const{abi:c,data:u}=a,l=(0,r.slice)(u,0,4);if(l==="0x")throw new e.AbiDecodingZeroDataError;const f=[...c||[],t.solidityError,t.solidityPanic].find(g=>g.type==="error"&&l===(0,n.toFunctionSelector)((0,i.formatAbiItem)(g)));if(!f)throw new e.AbiErrorSignatureNotFoundError(l,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:f,args:"inputs"in f&&f.inputs&&f.inputs.length>0?(0,s.decodeAbiParameters)(f.inputs,(0,r.slice)(u,4)):void 0,errorName:f.name}}return pm}var ym={},eh={},Ox;function Qr(){if(Ox)return eh;Ox=1,Object.defineProperty(eh,"__esModule",{value:!0}),eh.stringify=void 0;const t=(e,r,n)=>JSON.stringify(e,(s,i)=>{const o=typeof i=="bigint"?i.toString():i;return typeof r=="function"?r(s,o):o},n);return eh.stringify=t,eh}var Rx;function r7(){if(Rx)return ym;Rx=1,Object.defineProperty(ym,"__esModule",{value:!0}),ym.formatAbiItemWithArgs=e;const t=Qr();function e({abiItem:r,args:n,includeFunctionName:s=!0,includeName:i=!1}){if("name"in r&&"inputs"in r&&r.inputs)return`${s?r.name:""}(${r.inputs.map((o,a)=>`${i&&o.name?`${o.name}: `:""}${typeof n[a]=="object"?(0,t.stringify)(n[a]):n[a]}`).join(", ")})`}return ym}var bm={},Io={},xx;function S0(){return xx||(xx=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.weiUnits=Io.gweiUnits=Io.etherUnits=void 0,Io.etherUnits={gwei:9,wei:18},Io.gweiUnits={ether:-9,wei:9},Io.weiUnits={ether:-18,gwei:-9}),Io}var wm={},kx;function uv(){if(kx)return wm;kx=1,Object.defineProperty(wm,"__esModule",{value:!0}),wm.formatUnits=t;function t(e,r){let n=e.toString();const s=n.startsWith("-");s&&(n=n.slice(1)),n=n.padStart(r,"0");let[i,o]=[n.slice(0,n.length-r),n.slice(n.length-r)];return o=o.replace(/(0+)$/,""),`${s?"-":""}${i||"0"}${o?`.${o}`:""}`}return wm}var Bx;function T0(){if(Bx)return bm;Bx=1,Object.defineProperty(bm,"__esModule",{value:!0}),bm.formatEther=r;const t=S0(),e=uv();function r(n,s="wei"){return(0,e.formatUnits)(n,t.etherUnits[s])}return bm}var Em={},jx;function il(){if(jx)return Em;jx=1,Object.defineProperty(Em,"__esModule",{value:!0}),Em.formatGwei=r;const t=S0(),e=uv();function r(n,s="wei"){return(0,e.formatUnits)(n,t.gweiUnits[s])}return Em}var So={},Dx;function vS(){if(Dx)return So;Dx=1,Object.defineProperty(So,"__esModule",{value:!0}),So.StateAssignmentConflictError=So.AccountStateConflictError=void 0,So.prettyStateMapping=n,So.prettyStateOverride=s;const t=Ke();class e extends t.BaseError{constructor({address:o}){super(`State for account "${o}" is set multiple times.`,{name:"AccountStateConflictError"})}}So.AccountStateConflictError=e;class r extends t.BaseError{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}So.StateAssignmentConflictError=r;function n(i){return i.reduce((o,{slot:a,value:c})=>`${o}        ${a}: ${c}
`,"")}function s(i){return i.reduce((o,{address:a,...c})=>{let u=`${o}    ${a}:
`;return c.nonce&&(u+=`      nonce: ${c.nonce}
`),c.balance&&(u+=`      balance: ${c.balance}
`),c.code&&(u+=`      code: ${c.code}
`),c.state&&(u+=`      state:
`,u+=n(c.state)),c.stateDiff&&(u+=`      stateDiff:
`,u+=n(c.stateDiff)),u},`  State Override:
`).slice(0,-1)}return So}var zt={},Ux;function ts(){if(Ux)return zt;Ux=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.WaitForTransactionReceiptTimeoutError=zt.TransactionReceiptRevertedError=zt.TransactionReceiptNotFoundError=zt.TransactionNotFoundError=zt.TransactionExecutionError=zt.InvalidStorageKeySizeError=zt.InvalidSerializedTransactionError=zt.InvalidSerializedTransactionTypeError=zt.InvalidSerializableTransactionError=zt.InvalidLegacyVError=zt.FeeConflictError=void 0,zt.prettyPrint=n;const t=T0(),e=il(),r=Ke();function n(h){const y=Object.entries(h).map(([E,w])=>w===void 0||w===!1?null:[E,w]).filter(Boolean),b=y.reduce((E,[w])=>Math.max(E,w.length),0);return y.map(([E,w])=>`  ${`${E}:`.padEnd(b+1)}  ${w}`).join(`
`)}class s extends r.BaseError{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}zt.FeeConflictError=s;class i extends r.BaseError{constructor({v:y}){super(`Invalid \`v\` value "${y}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}zt.InvalidLegacyVError=i;class o extends r.BaseError{constructor({transaction:y}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",n(y),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}zt.InvalidSerializableTransactionError=o;class a extends r.BaseError{constructor({serializedType:y}){super(`Serialized transaction type "${y}" is invalid.`,{name:"InvalidSerializedTransactionType"}),Object.defineProperty(this,"serializedType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.serializedType=y}}zt.InvalidSerializedTransactionTypeError=a;class c extends r.BaseError{constructor({attributes:y,serializedTransaction:b,type:E}){const w=Object.entries(y).map(([m,_])=>typeof _>"u"?m:void 0).filter(Boolean);super(`Invalid serialized transaction of type "${E}" was provided.`,{metaMessages:[`Serialized Transaction: "${b}"`,w.length>0?`Missing Attributes: ${w.join(", ")}`:""].filter(Boolean),name:"InvalidSerializedTransactionError"}),Object.defineProperty(this,"serializedTransaction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.serializedTransaction=b,this.type=E}}zt.InvalidSerializedTransactionError=c;class u extends r.BaseError{constructor({storageKey:y}){super(`Size for storage key "${y}" is invalid. Expected 32 bytes. Got ${Math.floor((y.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}zt.InvalidStorageKeySizeError=u;class l extends r.BaseError{constructor(y,{account:b,docsPath:E,chain:w,data:m,gas:_,gasPrice:C,maxFeePerGas:I,maxPriorityFeePerGas:P,nonce:T,to:R,value:U}){const k=n({chain:w&&`${w?.name} (id: ${w?.id})`,from:b?.address,to:R,value:typeof U<"u"&&`${(0,t.formatEther)(U)} ${w?.nativeCurrency?.symbol||"ETH"}`,data:m,gas:_,gasPrice:typeof C<"u"&&`${(0,e.formatGwei)(C)} gwei`,maxFeePerGas:typeof I<"u"&&`${(0,e.formatGwei)(I)} gwei`,maxPriorityFeePerGas:typeof P<"u"&&`${(0,e.formatGwei)(P)} gwei`,nonce:T});super(y.shortMessage,{cause:y,docsPath:E,metaMessages:[...y.metaMessages?[...y.metaMessages," "]:[],"Request Arguments:",k].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=y}}zt.TransactionExecutionError=l;class d extends r.BaseError{constructor({blockHash:y,blockNumber:b,blockTag:E,hash:w,index:m}){let _="Transaction";E&&m!==void 0&&(_=`Transaction at block time "${E}" at index "${m}"`),y&&m!==void 0&&(_=`Transaction at block hash "${y}" at index "${m}"`),b&&m!==void 0&&(_=`Transaction at block number "${b}" at index "${m}"`),w&&(_=`Transaction with hash "${w}"`),super(`${_} could not be found.`,{name:"TransactionNotFoundError"})}}zt.TransactionNotFoundError=d;class f extends r.BaseError{constructor({hash:y}){super(`Transaction receipt with hash "${y}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}zt.TransactionReceiptNotFoundError=f;class g extends r.BaseError{constructor({receipt:y}){super(`Transaction with hash "${y.transactionHash}" reverted.`,{metaMessages:['The receipt marked the transaction as "reverted". This could mean that the function on the contract you are trying to call threw an error.'," ","You can attempt to extract the revert reason by:","- calling the `simulateContract` or `simulateCalls` Action with the `abi` and `functionName` of the contract","- using the `call` Action with raw `data`"],name:"TransactionReceiptRevertedError"}),Object.defineProperty(this,"receipt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.receipt=y}}zt.TransactionReceiptRevertedError=g;class p extends r.BaseError{constructor({hash:y}){super(`Timed out while waiting for transaction with hash "${y}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}return zt.WaitForTransactionReceiptTimeoutError=p,zt}var $c={},Mx;function _S(){if(Mx)return $c;Mx=1,Object.defineProperty($c,"__esModule",{value:!0}),$c.getUrl=$c.getContractAddress=void 0;const t=r=>r;$c.getContractAddress=t;const e=r=>r;return $c.getUrl=e,$c}var Lx;function lc(){if(Lx)return pn;Lx=1,Object.defineProperty(pn,"__esModule",{value:!0}),pn.RawContractError=pn.CounterfactualDeploymentFailedError=pn.ContractFunctionZeroDataError=pn.ContractFunctionRevertedError=pn.ContractFunctionExecutionError=pn.CallExecutionError=void 0;const t=or(),e=wS(),r=cv(),n=oa(),s=r7(),i=ca(),o=T0(),a=il(),c=er(),u=Ke(),l=vS(),d=ts(),f=_S();class g extends u.BaseError{constructor(m,{account:_,docsPath:C,chain:I,data:P,gas:T,gasPrice:R,maxFeePerGas:U,maxPriorityFeePerGas:k,nonce:O,to:B,value:v,stateOverride:A}){const S=_?(0,t.parseAccount)(_):void 0;let j=(0,d.prettyPrint)({from:S?.address,to:B,value:typeof v<"u"&&`${(0,o.formatEther)(v)} ${I?.nativeCurrency?.symbol||"ETH"}`,data:P,gas:T,gasPrice:typeof R<"u"&&`${(0,a.formatGwei)(R)} gwei`,maxFeePerGas:typeof U<"u"&&`${(0,a.formatGwei)(U)} gwei`,maxPriorityFeePerGas:typeof k<"u"&&`${(0,a.formatGwei)(k)} gwei`,nonce:O});A&&(j+=`
${(0,l.prettyStateOverride)(A)}`),super(m.shortMessage,{cause:m,docsPath:C,metaMessages:[...m.metaMessages?[...m.metaMessages," "]:[],"Raw Call Arguments:",j].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=m}}pn.CallExecutionError=g;class p extends u.BaseError{constructor(m,{abi:_,args:C,contractAddress:I,docsPath:P,functionName:T,sender:R}){const U=(0,i.getAbiItem)({abi:_,args:C,name:T}),k=U?(0,s.formatAbiItemWithArgs)({abiItem:U,args:C,includeFunctionName:!1,includeName:!1}):void 0,O=U?(0,n.formatAbiItem)(U,{includeName:!0}):void 0,B=(0,d.prettyPrint)({address:I&&(0,f.getContractAddress)(I),function:O,args:k&&k!=="()"&&`${[...Array(T?.length??0).keys()].map(()=>" ").join("")}${k}`,sender:R});super(m.shortMessage||`An unknown error occurred while executing the contract function "${T}".`,{cause:m,docsPath:P,metaMessages:[...m.metaMessages?[...m.metaMessages," "]:[],B&&"Contract Call:",B].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=_,this.args=C,this.cause=m,this.contractAddress=I,this.functionName=T,this.sender=R}}pn.ContractFunctionExecutionError=p;class h extends u.BaseError{constructor({abi:m,data:_,functionName:C,message:I}){let P,T,R,U;if(_&&_!=="0x")try{T=(0,r.decodeErrorResult)({abi:m,data:_});const{abiItem:O,errorName:B,args:v}=T;if(B==="Error")U=v[0];else if(B==="Panic"){const[A]=v;U=e.panicReasons[A]}else{const A=O?(0,n.formatAbiItem)(O,{includeName:!0}):void 0,S=O&&v?(0,s.formatAbiItemWithArgs)({abiItem:O,args:v,includeFunctionName:!1,includeName:!1}):void 0;R=[A?`Error: ${A}`:"",S&&S!=="()"?`       ${[...Array(B?.length??0).keys()].map(()=>" ").join("")}${S}`:""]}}catch(O){P=O}else I&&(U=I);let k;P instanceof c.AbiErrorSignatureNotFoundError&&(k=P.signature,R=[`Unable to decode signature "${k}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${k}.`]),super(U&&U!=="execution reverted"||k?[`The contract function "${C}" reverted with the following ${k?"signature":"reason"}:`,U||k].join(`
`):`The contract function "${C}" reverted.`,{cause:P,metaMessages:R,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=T,this.raw=_,this.reason=U,this.signature=k}}pn.ContractFunctionRevertedError=h;class y extends u.BaseError{constructor({functionName:m}){super(`The contract function "${m}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${m}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}pn.ContractFunctionZeroDataError=y;class b extends u.BaseError{constructor({factory:m}){super(`Deployment for counterfactual contract call failed${m?` for factory "${m}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}pn.CounterfactualDeploymentFailedError=b;class E extends u.BaseError{constructor({data:m,message:_}){super(_||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=m}}return pn.RawContractError=E,pn}var os={},Fx;function _i(){if(Fx)return os;Fx=1,Object.defineProperty(os,"__esModule",{value:!0}),os.TimeoutError=os.SocketClosedError=os.RpcRequestError=os.WebSocketRequestError=os.HttpRequestError=void 0;const t=Qr(),e=Ke(),r=_S();class n extends e.BaseError{constructor({body:u,cause:l,details:d,headers:f,status:g,url:p}){super("HTTP request failed.",{cause:l,details:d,metaMessages:[g&&`Status: ${g}`,`URL: ${(0,r.getUrl)(p)}`,u&&`Request body: ${(0,t.stringify)(u)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=u,this.headers=f,this.status=g,this.url=p}}os.HttpRequestError=n;class s extends e.BaseError{constructor({body:u,cause:l,details:d,url:f}){super("WebSocket request failed.",{cause:l,details:d,metaMessages:[`URL: ${(0,r.getUrl)(f)}`,u&&`Request body: ${(0,t.stringify)(u)}`].filter(Boolean),name:"WebSocketRequestError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=f}}os.WebSocketRequestError=s;class i extends e.BaseError{constructor({body:u,error:l,url:d}){super("RPC Request failed.",{cause:l,details:l.message,metaMessages:[`URL: ${(0,r.getUrl)(d)}`,`Request body: ${(0,t.stringify)(u)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=l.code,this.data=l.data,this.url=d}}os.RpcRequestError=i;class o extends e.BaseError{constructor({url:u}={}){super("The socket has been closed.",{metaMessages:[u&&`URL: ${(0,r.getUrl)(u)}`].filter(Boolean),name:"SocketClosedError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=u}}os.SocketClosedError=o;class a extends e.BaseError{constructor({body:u,url:l}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${(0,r.getUrl)(l)}`,`Request body: ${(0,t.stringify)(u)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=l}}return os.TimeoutError=a,os}var Ue={},qx;function dc(){if(qx)return Ue;qx=1,Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.UnknownRpcError=Ue.AtomicityNotSupportedError=Ue.AtomicReadyWalletRejectedUpgradeError=Ue.BundleTooLargeError=Ue.UnknownBundleIdError=Ue.DuplicateIdError=Ue.UnsupportedChainIdError=Ue.UnsupportedNonOptionalCapabilityError=Ue.SwitchChainError=Ue.ChainDisconnectedError=Ue.ProviderDisconnectedError=Ue.UnsupportedProviderMethodError=Ue.UnauthorizedProviderError=Ue.UserRejectedRequestError=Ue.JsonRpcVersionUnsupportedError=Ue.LimitExceededRpcError=Ue.MethodNotSupportedRpcError=Ue.TransactionRejectedRpcError=Ue.ResourceUnavailableRpcError=Ue.ResourceNotFoundRpcError=Ue.InvalidInputRpcError=Ue.InternalRpcError=Ue.InvalidParamsRpcError=Ue.MethodNotFoundRpcError=Ue.InvalidRequestRpcError=Ue.ParseRpcError=Ue.ProviderRpcError=Ue.RpcError=void 0;const t=Ke(),e=_i(),r=-1;class n extends t.BaseError{constructor(A,{code:S,docsPath:j,metaMessages:N,name:x,shortMessage:D}){super(D,{cause:A,docsPath:j,metaMessages:N||A?.metaMessages,name:x||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=x||A.name,this.code=A instanceof e.RpcRequestError?A.code:S??r}}Ue.RpcError=n;class s extends n{constructor(A,S){super(A,S),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=S.data}}Ue.ProviderRpcError=s;class i extends n{constructor(A){super(A,{code:i.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Ue.ParseRpcError=i,Object.defineProperty(i,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class o extends n{constructor(A){super(A,{code:o.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Ue.InvalidRequestRpcError=o,Object.defineProperty(o,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class a extends n{constructor(A,{method:S}={}){super(A,{code:a.code,name:"MethodNotFoundRpcError",shortMessage:`The method${S?` "${S}"`:""} does not exist / is not available.`})}}Ue.MethodNotFoundRpcError=a,Object.defineProperty(a,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class c extends n{constructor(A){super(A,{code:c.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Ue.InvalidParamsRpcError=c,Object.defineProperty(c,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class u extends n{constructor(A){super(A,{code:u.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Ue.InternalRpcError=u,Object.defineProperty(u,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class l extends n{constructor(A){super(A,{code:l.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Ue.InvalidInputRpcError=l,Object.defineProperty(l,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class d extends n{constructor(A){super(A,{code:d.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Ue.ResourceNotFoundRpcError=d,Object.defineProperty(d,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class f extends n{constructor(A){super(A,{code:f.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Ue.ResourceUnavailableRpcError=f,Object.defineProperty(f,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class g extends n{constructor(A){super(A,{code:g.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Ue.TransactionRejectedRpcError=g,Object.defineProperty(g,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class p extends n{constructor(A,{method:S}={}){super(A,{code:p.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${S?` "${S}"`:""} is not supported.`})}}Ue.MethodNotSupportedRpcError=p,Object.defineProperty(p,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class h extends n{constructor(A){super(A,{code:h.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Ue.LimitExceededRpcError=h,Object.defineProperty(h,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class y extends n{constructor(A){super(A,{code:y.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Ue.JsonRpcVersionUnsupportedError=y,Object.defineProperty(y,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class b extends s{constructor(A){super(A,{code:b.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Ue.UserRejectedRequestError=b,Object.defineProperty(b,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class E extends s{constructor(A){super(A,{code:E.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Ue.UnauthorizedProviderError=E,Object.defineProperty(E,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class w extends s{constructor(A,{method:S}={}){super(A,{code:w.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${S?` " ${S}"`:""}.`})}}Ue.UnsupportedProviderMethodError=w,Object.defineProperty(w,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class m extends s{constructor(A){super(A,{code:m.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Ue.ProviderDisconnectedError=m,Object.defineProperty(m,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class _ extends s{constructor(A){super(A,{code:_.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Ue.ChainDisconnectedError=_,Object.defineProperty(_,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class C extends s{constructor(A){super(A,{code:C.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Ue.SwitchChainError=C,Object.defineProperty(C,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class I extends s{constructor(A){super(A,{code:I.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Ue.UnsupportedNonOptionalCapabilityError=I,Object.defineProperty(I,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class P extends s{constructor(A){super(A,{code:P.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Ue.UnsupportedChainIdError=P,Object.defineProperty(P,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class T extends s{constructor(A){super(A,{code:T.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Ue.DuplicateIdError=T,Object.defineProperty(T,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class R extends s{constructor(A){super(A,{code:R.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Ue.UnknownBundleIdError=R,Object.defineProperty(R,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class U extends s{constructor(A){super(A,{code:U.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Ue.BundleTooLargeError=U,Object.defineProperty(U,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class k extends s{constructor(A){super(A,{code:k.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Ue.AtomicReadyWalletRejectedUpgradeError=k,Object.defineProperty(k,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class O extends s{constructor(A){super(A,{code:O.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Ue.AtomicityNotSupportedError=O,Object.defineProperty(O,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class B extends n{constructor(A){super(A,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}return Ue.UnknownRpcError=B,Ue}var Hx;function fc(){if(Hx)return hm;Hx=1,Object.defineProperty(hm,"__esModule",{value:!0}),hm.getContractError=o;const t=er(),e=Ke(),r=lc(),n=_i(),s=dc(),i=3;function o(a,{abi:c,address:u,args:l,docsPath:d,functionName:f,sender:g}){const p=a instanceof r.RawContractError?a:a instanceof e.BaseError?a.walk(_=>"data"in _)||a.walk():{},{code:h,data:y,details:b,message:E,shortMessage:w}=p,m=a instanceof t.AbiDecodingZeroDataError?new r.ContractFunctionZeroDataError({functionName:f}):[i,s.InternalRpcError.code].includes(h)&&(y||b||E||w)||h===s.InvalidInputRpcError.code&&b==="execution reverted"&&y?new r.ContractFunctionRevertedError({abi:c,data:typeof y=="object"?y.data:y,functionName:f,message:p instanceof n.RpcRequestError?b:w??E}):a;return new r.ContractFunctionExecutionError(m,{abi:c,args:l,contractAddress:u,docsPath:d,functionName:f,sender:g})}return hm}var vm={},_m={},Am={},Cm={},zx;function n7(){if(zx)return Cm;zx=1,Object.defineProperty(Cm,"__esModule",{value:!0}),Cm.publicKeyToAddress=r;const t=_s(),e=Qn();function r(n){const s=(0,e.keccak256)(`0x${n.substring(4)}`).substring(26);return(0,t.checksumAddress)(`0x${s}`)}return Cm}var Im={},$A={},Dt={},an={},$x;function s7(){if($x)return an;$x=1,Object.defineProperty(an,"__esModule",{value:!0}),an.SHA512_IV=an.SHA384_IV=an.SHA224_IV=an.SHA256_IV=an.HashMD=void 0,an.setBigUint64=e,an.Chi=r,an.Maj=n;const t=cc();function e(i,o,a,c){if(typeof i.setBigUint64=="function")return i.setBigUint64(o,a,c);const u=BigInt(32),l=BigInt(4294967295),d=Number(a>>u&l),f=Number(a&l),g=c?4:0,p=c?0:4;i.setUint32(o+g,d,c),i.setUint32(o+p,f,c)}function r(i,o,a){return i&o^~i&a}function n(i,o,a){return i&o^i&a^o&a}class s extends t.Hash{constructor(o,a,c,u){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=o,this.outputLen=a,this.padOffset=c,this.isLE=u,this.buffer=new Uint8Array(o),this.view=(0,t.createView)(this.buffer)}update(o){(0,t.aexists)(this),o=(0,t.toBytes)(o),(0,t.abytes)(o);const{view:a,buffer:c,blockLen:u}=this,l=o.length;for(let d=0;d<l;){const f=Math.min(u-this.pos,l-d);if(f===u){const g=(0,t.createView)(o);for(;u<=l-d;d+=u)this.process(g,d);continue}c.set(o.subarray(d,d+f),this.pos),this.pos+=f,d+=f,this.pos===u&&(this.process(a,0),this.pos=0)}return this.length+=o.length,this.roundClean(),this}digestInto(o){(0,t.aexists)(this),(0,t.aoutput)(o,this),this.finished=!0;const{buffer:a,view:c,blockLen:u,isLE:l}=this;let{pos:d}=this;a[d++]=128,(0,t.clean)(this.buffer.subarray(d)),this.padOffset>u-d&&(this.process(c,0),d=0);for(let y=d;y<u;y++)a[y]=0;e(c,u-8,BigInt(this.length*8),l),this.process(c,0);const f=(0,t.createView)(o),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const p=g/4,h=this.get();if(p>h.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<p;y++)f.setUint32(4*y,h[y],l)}digest(){const{buffer:o,outputLen:a}=this;this.digestInto(o);const c=o.slice(0,a);return this.destroy(),c}_cloneInto(o){o||(o=new this.constructor),o.set(...this.get());const{blockLen:a,buffer:c,length:u,finished:l,destroyed:d,pos:f}=this;return o.destroyed=d,o.finished=l,o.length=u,o.pos=f,u%a&&o.buffer.set(c),o}clone(){return this._cloneInto()}}return an.HashMD=s,an.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),an.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),an.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),an.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),an}var Vx;function i7(){if(Vx)return Dt;Vx=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.sha512_224=Dt.sha512_256=Dt.sha384=Dt.sha512=Dt.sha224=Dt.sha256=Dt.SHA512_256=Dt.SHA512_224=Dt.SHA384=Dt.SHA512=Dt.SHA224=Dt.SHA256=void 0;const t=s7(),e=QF(),r=cc(),n=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array(64);class i extends t.HashMD{constructor(w=32){super(64,w,8,!1),this.A=t.SHA256_IV[0]|0,this.B=t.SHA256_IV[1]|0,this.C=t.SHA256_IV[2]|0,this.D=t.SHA256_IV[3]|0,this.E=t.SHA256_IV[4]|0,this.F=t.SHA256_IV[5]|0,this.G=t.SHA256_IV[6]|0,this.H=t.SHA256_IV[7]|0}get(){const{A:w,B:m,C:_,D:C,E:I,F:P,G:T,H:R}=this;return[w,m,_,C,I,P,T,R]}set(w,m,_,C,I,P,T,R){this.A=w|0,this.B=m|0,this.C=_|0,this.D=C|0,this.E=I|0,this.F=P|0,this.G=T|0,this.H=R|0}process(w,m){for(let O=0;O<16;O++,m+=4)s[O]=w.getUint32(m,!1);for(let O=16;O<64;O++){const B=s[O-15],v=s[O-2],A=(0,r.rotr)(B,7)^(0,r.rotr)(B,18)^B>>>3,S=(0,r.rotr)(v,17)^(0,r.rotr)(v,19)^v>>>10;s[O]=S+s[O-7]+A+s[O-16]|0}let{A:_,B:C,C:I,D:P,E:T,F:R,G:U,H:k}=this;for(let O=0;O<64;O++){const B=(0,r.rotr)(T,6)^(0,r.rotr)(T,11)^(0,r.rotr)(T,25),v=k+B+(0,t.Chi)(T,R,U)+n[O]+s[O]|0,S=((0,r.rotr)(_,2)^(0,r.rotr)(_,13)^(0,r.rotr)(_,22))+(0,t.Maj)(_,C,I)|0;k=U,U=R,R=T,T=P+v|0,P=I,I=C,C=_,_=v+S|0}_=_+this.A|0,C=C+this.B|0,I=I+this.C|0,P=P+this.D|0,T=T+this.E|0,R=R+this.F|0,U=U+this.G|0,k=k+this.H|0,this.set(_,C,I,P,T,R,U,k)}roundClean(){(0,r.clean)(s)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,r.clean)(this.buffer)}}Dt.SHA256=i;class o extends i{constructor(){super(28),this.A=t.SHA224_IV[0]|0,this.B=t.SHA224_IV[1]|0,this.C=t.SHA224_IV[2]|0,this.D=t.SHA224_IV[3]|0,this.E=t.SHA224_IV[4]|0,this.F=t.SHA224_IV[5]|0,this.G=t.SHA224_IV[6]|0,this.H=t.SHA224_IV[7]|0}}Dt.SHA224=o;const a=e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(E=>BigInt(E))),c=a[0],u=a[1],l=new Uint32Array(80),d=new Uint32Array(80);class f extends t.HashMD{constructor(w=64){super(128,w,16,!1),this.Ah=t.SHA512_IV[0]|0,this.Al=t.SHA512_IV[1]|0,this.Bh=t.SHA512_IV[2]|0,this.Bl=t.SHA512_IV[3]|0,this.Ch=t.SHA512_IV[4]|0,this.Cl=t.SHA512_IV[5]|0,this.Dh=t.SHA512_IV[6]|0,this.Dl=t.SHA512_IV[7]|0,this.Eh=t.SHA512_IV[8]|0,this.El=t.SHA512_IV[9]|0,this.Fh=t.SHA512_IV[10]|0,this.Fl=t.SHA512_IV[11]|0,this.Gh=t.SHA512_IV[12]|0,this.Gl=t.SHA512_IV[13]|0,this.Hh=t.SHA512_IV[14]|0,this.Hl=t.SHA512_IV[15]|0}get(){const{Ah:w,Al:m,Bh:_,Bl:C,Ch:I,Cl:P,Dh:T,Dl:R,Eh:U,El:k,Fh:O,Fl:B,Gh:v,Gl:A,Hh:S,Hl:j}=this;return[w,m,_,C,I,P,T,R,U,k,O,B,v,A,S,j]}set(w,m,_,C,I,P,T,R,U,k,O,B,v,A,S,j){this.Ah=w|0,this.Al=m|0,this.Bh=_|0,this.Bl=C|0,this.Ch=I|0,this.Cl=P|0,this.Dh=T|0,this.Dl=R|0,this.Eh=U|0,this.El=k|0,this.Fh=O|0,this.Fl=B|0,this.Gh=v|0,this.Gl=A|0,this.Hh=S|0,this.Hl=j|0}process(w,m){for(let D=0;D<16;D++,m+=4)l[D]=w.getUint32(m),d[D]=w.getUint32(m+=4);for(let D=16;D<80;D++){const M=l[D-15]|0,L=d[D-15]|0,F=e.rotrSH(M,L,1)^e.rotrSH(M,L,8)^e.shrSH(M,L,7),q=e.rotrSL(M,L,1)^e.rotrSL(M,L,8)^e.shrSL(M,L,7),$=l[D-2]|0,V=d[D-2]|0,J=e.rotrSH($,V,19)^e.rotrBH($,V,61)^e.shrSH($,V,6),Y=e.rotrSL($,V,19)^e.rotrBL($,V,61)^e.shrSL($,V,6),Z=e.add4L(q,Y,d[D-7],d[D-16]),ee=e.add4H(Z,F,J,l[D-7],l[D-16]);l[D]=ee|0,d[D]=Z|0}let{Ah:_,Al:C,Bh:I,Bl:P,Ch:T,Cl:R,Dh:U,Dl:k,Eh:O,El:B,Fh:v,Fl:A,Gh:S,Gl:j,Hh:N,Hl:x}=this;for(let D=0;D<80;D++){const M=e.rotrSH(O,B,14)^e.rotrSH(O,B,18)^e.rotrBH(O,B,41),L=e.rotrSL(O,B,14)^e.rotrSL(O,B,18)^e.rotrBL(O,B,41),F=O&v^~O&S,q=B&A^~B&j,$=e.add5L(x,L,q,u[D],d[D]),V=e.add5H($,N,M,F,c[D],l[D]),J=$|0,Y=e.rotrSH(_,C,28)^e.rotrBH(_,C,34)^e.rotrBH(_,C,39),Z=e.rotrSL(_,C,28)^e.rotrBL(_,C,34)^e.rotrBL(_,C,39),ee=_&I^_&T^I&T,le=C&P^C&R^P&R;N=S|0,x=j|0,S=v|0,j=A|0,v=O|0,A=B|0,{h:O,l:B}=e.add(U|0,k|0,V|0,J|0),U=T|0,k=R|0,T=I|0,R=P|0,I=_|0,P=C|0;const X=e.add3L(J,Z,le);_=e.add3H(X,V,Y,ee),C=X|0}({h:_,l:C}=e.add(this.Ah|0,this.Al|0,_|0,C|0)),{h:I,l:P}=e.add(this.Bh|0,this.Bl|0,I|0,P|0),{h:T,l:R}=e.add(this.Ch|0,this.Cl|0,T|0,R|0),{h:U,l:k}=e.add(this.Dh|0,this.Dl|0,U|0,k|0),{h:O,l:B}=e.add(this.Eh|0,this.El|0,O|0,B|0),{h:v,l:A}=e.add(this.Fh|0,this.Fl|0,v|0,A|0),{h:S,l:j}=e.add(this.Gh|0,this.Gl|0,S|0,j|0),{h:N,l:x}=e.add(this.Hh|0,this.Hl|0,N|0,x|0),this.set(_,C,I,P,T,R,U,k,O,B,v,A,S,j,N,x)}roundClean(){(0,r.clean)(l,d)}destroy(){(0,r.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Dt.SHA512=f;class g extends f{constructor(){super(48),this.Ah=t.SHA384_IV[0]|0,this.Al=t.SHA384_IV[1]|0,this.Bh=t.SHA384_IV[2]|0,this.Bl=t.SHA384_IV[3]|0,this.Ch=t.SHA384_IV[4]|0,this.Cl=t.SHA384_IV[5]|0,this.Dh=t.SHA384_IV[6]|0,this.Dl=t.SHA384_IV[7]|0,this.Eh=t.SHA384_IV[8]|0,this.El=t.SHA384_IV[9]|0,this.Fh=t.SHA384_IV[10]|0,this.Fl=t.SHA384_IV[11]|0,this.Gh=t.SHA384_IV[12]|0,this.Gl=t.SHA384_IV[13]|0,this.Hh=t.SHA384_IV[14]|0,this.Hl=t.SHA384_IV[15]|0}}Dt.SHA384=g;const p=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),h=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class y extends f{constructor(){super(28),this.Ah=p[0]|0,this.Al=p[1]|0,this.Bh=p[2]|0,this.Bl=p[3]|0,this.Ch=p[4]|0,this.Cl=p[5]|0,this.Dh=p[6]|0,this.Dl=p[7]|0,this.Eh=p[8]|0,this.El=p[9]|0,this.Fh=p[10]|0,this.Fl=p[11]|0,this.Gh=p[12]|0,this.Gl=p[13]|0,this.Hh=p[14]|0,this.Hl=p[15]|0}}Dt.SHA512_224=y;class b extends f{constructor(){super(32),this.Ah=h[0]|0,this.Al=h[1]|0,this.Bh=h[2]|0,this.Bl=h[3]|0,this.Ch=h[4]|0,this.Cl=h[5]|0,this.Dh=h[6]|0,this.Dl=h[7]|0,this.Eh=h[8]|0,this.El=h[9]|0,this.Fh=h[10]|0,this.Fl=h[11]|0,this.Gh=h[12]|0,this.Gl=h[13]|0,this.Hh=h[14]|0,this.Hl=h[15]|0}}return Dt.SHA512_256=b,Dt.sha256=(0,r.createHasher)(()=>new i),Dt.sha224=(0,r.createHasher)(()=>new o),Dt.sha512=(0,r.createHasher)(()=>new f),Dt.sha384=(0,r.createHasher)(()=>new g),Dt.sha512_256=(0,r.createHasher)(()=>new b),Dt.sha512_224=(0,r.createHasher)(()=>new y),Dt}var th={},VA={},Gx;function Jye(){return Gx||(Gx=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const e=cc();class r extends e.Hash{constructor(i,o){super(),this.finished=!1,this.destroyed=!1,(0,e.ahash)(i);const a=(0,e.toBytes)(o);if(this.iHash=i.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const c=this.blockLen,u=new Uint8Array(c);u.set(a.length>c?i.create().update(a).digest():a);for(let l=0;l<u.length;l++)u[l]^=54;this.iHash.update(u),this.oHash=i.create();for(let l=0;l<u.length;l++)u[l]^=106;this.oHash.update(u),(0,e.clean)(u)}update(i){return(0,e.aexists)(this),this.iHash.update(i),this}digestInto(i){(0,e.aexists)(this),(0,e.abytes)(i,this.outputLen),this.finished=!0,this.iHash.digestInto(i),this.oHash.update(i),this.oHash.digestInto(i),this.destroy()}digest(){const i=new Uint8Array(this.oHash.outputLen);return this.digestInto(i),i}_cloneInto(i){i||(i=Object.create(Object.getPrototypeOf(this),{}));const{oHash:o,iHash:a,finished:c,destroyed:u,blockLen:l,outputLen:d}=this;return i=i,i.finished=c,i.destroyed=u,i.blockLen=l,i.outputLen=d,i.oHash=o._cloneInto(i.oHash),i.iHash=a._cloneInto(i.iHash),i}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=r;const n=(s,i,o)=>new r(s,i).update(o).digest();t.hmac=n,t.hmac.create=(s,i)=>new r(s,i)})(VA)),VA}var GA={},Vc={},Gt={},It={},Wx;function ol(){if(Wx)return It;Wx=1;Object.defineProperty(It,"__esModule",{value:!0}),It.notImplemented=It.bitMask=void 0,It.isBytes=r,It.abytes=n,It.abool=s,It.numberToHexUnpadded=i,It.hexToNumber=o,It.bytesToHex=u,It.hexToBytes=f,It.bytesToNumberBE=g,It.bytesToNumberLE=p,It.numberToBytesBE=h,It.numberToBytesLE=y,It.numberToVarBytesBE=b,It.ensureBytes=E,It.concatBytes=w,It.equalBytes=m,It.utf8ToBytes=_,It.inRange=I,It.aInRange=P,It.bitLen=T,It.bitGet=R,It.bitSet=U,It.createHmacDrbg=v,It.validateObject=S,It.memoized=N;const t=BigInt(0),e=BigInt(1);function r(x){return x instanceof Uint8Array||ArrayBuffer.isView(x)&&x.constructor.name==="Uint8Array"}function n(x){if(!r(x))throw new Error("Uint8Array expected")}function s(x,D){if(typeof D!="boolean")throw new Error(x+" boolean expected, got "+D)}function i(x){const D=x.toString(16);return D.length&1?"0"+D:D}function o(x){if(typeof x!="string")throw new Error("hex string expected, got "+typeof x);return x===""?t:BigInt("0x"+x)}const a=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",c=Array.from({length:256},(x,D)=>D.toString(16).padStart(2,"0"));function u(x){if(n(x),a)return x.toHex();let D="";for(let M=0;M<x.length;M++)D+=c[x[M]];return D}const l={_0:48,_9:57,A:65,F:70,a:97,f:102};function d(x){if(x>=l._0&&x<=l._9)return x-l._0;if(x>=l.A&&x<=l.F)return x-(l.A-10);if(x>=l.a&&x<=l.f)return x-(l.a-10)}function f(x){if(typeof x!="string")throw new Error("hex string expected, got "+typeof x);if(a)return Uint8Array.fromHex(x);const D=x.length,M=D/2;if(D%2)throw new Error("hex string expected, got unpadded hex of length "+D);const L=new Uint8Array(M);for(let F=0,q=0;F<M;F++,q+=2){const $=d(x.charCodeAt(q)),V=d(x.charCodeAt(q+1));if($===void 0||V===void 0){const J=x[q]+x[q+1];throw new Error('hex string expected, got non-hex character "'+J+'" at index '+q)}L[F]=$*16+V}return L}function g(x){return o(u(x))}function p(x){return n(x),o(u(Uint8Array.from(x).reverse()))}function h(x,D){return f(x.toString(16).padStart(D*2,"0"))}function y(x,D){return h(x,D).reverse()}function b(x){return f(i(x))}function E(x,D,M){let L;if(typeof D=="string")try{L=f(D)}catch(q){throw new Error(x+" must be hex string or Uint8Array, cause: "+q)}else if(r(D))L=Uint8Array.from(D);else throw new Error(x+" must be hex string or Uint8Array");const F=L.length;if(typeof M=="number"&&F!==M)throw new Error(x+" of length "+M+" expected, got "+F);return L}function w(...x){let D=0;for(let L=0;L<x.length;L++){const F=x[L];n(F),D+=F.length}const M=new Uint8Array(D);for(let L=0,F=0;L<x.length;L++){const q=x[L];M.set(q,F),F+=q.length}return M}function m(x,D){if(x.length!==D.length)return!1;let M=0;for(let L=0;L<x.length;L++)M|=x[L]^D[L];return M===0}function _(x){if(typeof x!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(x))}const C=x=>typeof x=="bigint"&&t<=x;function I(x,D,M){return C(x)&&C(D)&&C(M)&&D<=x&&x<M}function P(x,D,M,L){if(!I(D,M,L))throw new Error("expected valid "+x+": "+M+" <= n < "+L+", got "+D)}function T(x){let D;for(D=0;x>t;x>>=e,D+=1);return D}function R(x,D){return x>>BigInt(D)&e}function U(x,D,M){return x|(M?e:t)<<BigInt(D)}const k=x=>(e<<BigInt(x))-e;It.bitMask=k;const O=x=>new Uint8Array(x),B=x=>Uint8Array.from(x);function v(x,D,M){if(typeof x!="number"||x<2)throw new Error("hashLen must be a number");if(typeof D!="number"||D<2)throw new Error("qByteLen must be a number");if(typeof M!="function")throw new Error("hmacFn must be a function");let L=O(x),F=O(x),q=0;const $=()=>{L.fill(1),F.fill(0),q=0},V=(...ee)=>M(F,L,...ee),J=(ee=O(0))=>{F=V(B([0]),ee),L=V(),ee.length!==0&&(F=V(B([1]),ee),L=V())},Y=()=>{if(q++>=1e3)throw new Error("drbg: tried 1000 values");let ee=0;const le=[];for(;ee<D;){L=V();const X=L.slice();le.push(X),ee+=L.length}return w(...le)};return(ee,le)=>{$(),J(ee);let X;for(;!(X=le(Y()));)J();return $(),X}}const A={bigint:x=>typeof x=="bigint",function:x=>typeof x=="function",boolean:x=>typeof x=="boolean",string:x=>typeof x=="string",stringOrUint8Array:x=>typeof x=="string"||r(x),isSafeInteger:x=>Number.isSafeInteger(x),array:x=>Array.isArray(x),field:(x,D)=>D.Fp.isValid(x),hash:x=>typeof x=="function"&&Number.isSafeInteger(x.outputLen)};function S(x,D,M={}){const L=(F,q,$)=>{const V=A[q];if(typeof V!="function")throw new Error("invalid validator function");const J=x[F];if(!($&&J===void 0)&&!V(J,x))throw new Error("param "+String(F)+" is invalid. Expected "+q+", got "+J)};for(const[F,q]of Object.entries(D))L(F,q,!1);for(const[F,q]of Object.entries(M))L(F,q,!0);return x}const j=()=>{throw new Error("not implemented")};It.notImplemented=j;function N(x){const D=new WeakMap;return(M,...L)=>{const F=D.get(M);if(F!==void 0)return F;const q=x(M,...L);return D.set(M,q),q}}return It}var Kx;function lv(){if(Kx)return Gt;Kx=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.isNegativeLE=void 0,Gt.mod=u,Gt.pow=l,Gt.pow2=d,Gt.invert=f,Gt.tonelliShanks=h,Gt.FpSqrt=y,Gt.validateField=w,Gt.FpPow=m,Gt.FpInvertBatch=_,Gt.FpDiv=C,Gt.FpLegendre=I,Gt.FpIsSquare=P,Gt.nLength=T,Gt.Field=R,Gt.FpSqrtOdd=U,Gt.FpSqrtEven=k,Gt.hashToPrivateScalar=O,Gt.getFieldBytesLength=B,Gt.getMinHashLength=v,Gt.mapHashToField=A;const t=cc(),e=ol(),r=BigInt(0),n=BigInt(1),s=BigInt(2),i=BigInt(3),o=BigInt(4),a=BigInt(5),c=BigInt(8);function u(S,j){const N=S%j;return N>=r?N:j+N}function l(S,j,N){return m(R(N),S,j)}function d(S,j,N){let x=S;for(;j-- >r;)x*=x,x%=N;return x}function f(S,j){if(S===r)throw new Error("invert: expected non-zero number");if(j<=r)throw new Error("invert: expected positive modulus, got "+j);let N=u(S,j),x=j,D=r,M=n;for(;N!==r;){const F=x/N,q=x%N,$=D-M*F;x=N,N=q,D=M,M=$}if(x!==n)throw new Error("invert: does not exist");return u(D,j)}function g(S,j){const N=(S.ORDER+n)/o,x=S.pow(j,N);if(!S.eql(S.sqr(x),j))throw new Error("Cannot find square root");return x}function p(S,j){const N=(S.ORDER-a)/c,x=S.mul(j,s),D=S.pow(x,N),M=S.mul(j,D),L=S.mul(S.mul(M,s),D),F=S.mul(M,S.sub(L,S.ONE));if(!S.eql(S.sqr(F),j))throw new Error("Cannot find square root");return F}function h(S){if(S<BigInt(3))throw new Error("sqrt is not defined for small field");let j=S-n,N=0;for(;j%s===r;)j/=s,N++;let x=s;const D=R(S);for(;I(D,x)===1;)if(x++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(N===1)return g;let M=D.pow(x,j);const L=(j+n)/s;return function(q,$){if(q.is0($))return $;if(I(q,$)!==1)throw new Error("Cannot find square root");let V=N,J=q.mul(q.ONE,M),Y=q.pow($,j),Z=q.pow($,L);for(;!q.eql(Y,q.ONE);){if(q.is0(Y))return q.ZERO;let ee=1,le=q.sqr(Y);for(;!q.eql(le,q.ONE);)if(ee++,le=q.sqr(le),ee===V)throw new Error("Cannot find square root");const X=n<<BigInt(V-ee-1),se=q.pow(J,X);V=ee,J=q.sqr(se),Y=q.mul(Y,J),Z=q.mul(Z,se)}return Z}}function y(S){return S%o===i?g:S%c===a?p:h(S)}const b=(S,j)=>(u(S,j)&n)===n;Gt.isNegativeLE=b;const E=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function w(S){const j={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},N=E.reduce((x,D)=>(x[D]="function",x),j);return(0,e.validateObject)(S,N)}function m(S,j,N){if(N<r)throw new Error("invalid exponent, negatives unsupported");if(N===r)return S.ONE;if(N===n)return j;let x=S.ONE,D=j;for(;N>r;)N&n&&(x=S.mul(x,D)),D=S.sqr(D),N>>=n;return x}function _(S,j,N=!1){const x=new Array(j.length).fill(N?S.ZERO:void 0),D=j.reduce((L,F,q)=>S.is0(F)?L:(x[q]=L,S.mul(L,F)),S.ONE),M=S.inv(D);return j.reduceRight((L,F,q)=>S.is0(F)?L:(x[q]=S.mul(L,x[q]),S.mul(L,F)),M),x}function C(S,j,N){return S.mul(j,typeof N=="bigint"?f(N,S.ORDER):S.inv(N))}function I(S,j){const N=(S.ORDER-n)/s,x=S.pow(j,N),D=S.eql(x,S.ONE),M=S.eql(x,S.ZERO),L=S.eql(x,S.neg(S.ONE));if(!D&&!M&&!L)throw new Error("invalid Legendre symbol result");return D?1:M?0:-1}function P(S,j){return I(S,j)===1}function T(S,j){j!==void 0&&(0,t.anumber)(j);const N=j!==void 0?j:S.toString(2).length,x=Math.ceil(N/8);return{nBitLength:N,nByteLength:x}}function R(S,j,N=!1,x={}){if(S<=r)throw new Error("invalid field: expected ORDER > 0, got "+S);const{nBitLength:D,nByteLength:M}=T(S,j);if(M>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let L;const F=Object.freeze({ORDER:S,isLE:N,BITS:D,BYTES:M,MASK:(0,e.bitMask)(D),ZERO:r,ONE:n,create:q=>u(q,S),isValid:q=>{if(typeof q!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof q);return r<=q&&q<S},is0:q=>q===r,isOdd:q=>(q&n)===n,neg:q=>u(-q,S),eql:(q,$)=>q===$,sqr:q=>u(q*q,S),add:(q,$)=>u(q+$,S),sub:(q,$)=>u(q-$,S),mul:(q,$)=>u(q*$,S),pow:(q,$)=>m(F,q,$),div:(q,$)=>u(q*f($,S),S),sqrN:q=>q*q,addN:(q,$)=>q+$,subN:(q,$)=>q-$,mulN:(q,$)=>q*$,inv:q=>f(q,S),sqrt:x.sqrt||(q=>(L||(L=y(S)),L(F,q))),toBytes:q=>N?(0,e.numberToBytesLE)(q,M):(0,e.numberToBytesBE)(q,M),fromBytes:q=>{if(q.length!==M)throw new Error("Field.fromBytes: expected "+M+" bytes, got "+q.length);return N?(0,e.bytesToNumberLE)(q):(0,e.bytesToNumberBE)(q)},invertBatch:q=>_(F,q),cmov:(q,$,V)=>V?$:q});return Object.freeze(F)}function U(S,j){if(!S.isOdd)throw new Error("Field doesn't have isOdd");const N=S.sqrt(j);return S.isOdd(N)?N:S.neg(N)}function k(S,j){if(!S.isOdd)throw new Error("Field doesn't have isOdd");const N=S.sqrt(j);return S.isOdd(N)?S.neg(N):N}function O(S,j,N=!1){S=(0,e.ensureBytes)("privateHash",S);const x=S.length,D=T(j).nByteLength+8;if(D<24||x<D||x>1024)throw new Error("hashToPrivateScalar: expected "+D+"-1024 bytes of input, got "+x);const M=N?(0,e.bytesToNumberLE)(S):(0,e.bytesToNumberBE)(S);return u(M,j-n)+n}function B(S){if(typeof S!="bigint")throw new Error("field order must be bigint");const j=S.toString(2).length;return Math.ceil(j/8)}function v(S){const j=B(S);return j+Math.ceil(j/2)}function A(S,j,N=!1){const x=S.length,D=B(j),M=v(j);if(x<16||x<M||x>1024)throw new Error("expected "+M+"-1024 bytes of input, got "+x);const L=N?(0,e.bytesToNumberLE)(S):(0,e.bytesToNumberBE)(S),F=u(L,j-n)+n;return N?(0,e.numberToBytesLE)(F,D):(0,e.numberToBytesBE)(F,D)}return Gt}var Zx;function Qye(){if(Zx)return Vc;Zx=1,Object.defineProperty(Vc,"__esModule",{value:!0}),Vc.wNAF=g,Vc.pippenger=p,Vc.precomputeMSMUnsafe=h,Vc.validateBasic=y;const t=lv(),e=ol(),r=BigInt(0),n=BigInt(1);function s(b,E){const w=E.negate();return b?w:E}function i(b,E){if(!Number.isSafeInteger(b)||b<=0||b>E)throw new Error("invalid window size, expected [1.."+E+"], got W="+b)}function o(b,E){i(b,E);const w=Math.ceil(E/b)+1,m=2**(b-1),_=2**b,C=(0,e.bitMask)(b),I=BigInt(b);return{windows:w,windowSize:m,mask:C,maxNumber:_,shiftBy:I}}function a(b,E,w){const{windowSize:m,mask:_,maxNumber:C,shiftBy:I}=w;let P=Number(b&_),T=b>>I;P>m&&(P-=C,T+=n);const R=E*m,U=R+Math.abs(P)-1,k=P===0,O=P<0,B=E%2!==0;return{nextN:T,offset:U,isZero:k,isNeg:O,isNegF:B,offsetF:R}}function c(b,E){if(!Array.isArray(b))throw new Error("array expected");b.forEach((w,m)=>{if(!(w instanceof E))throw new Error("invalid point at index "+m)})}function u(b,E){if(!Array.isArray(b))throw new Error("array of scalars expected");b.forEach((w,m)=>{if(!E.isValid(w))throw new Error("invalid scalar at index "+m)})}const l=new WeakMap,d=new WeakMap;function f(b){return d.get(b)||1}function g(b,E){return{constTimeNegate:s,hasPrecomputes(w){return f(w)!==1},unsafeLadder(w,m,_=b.ZERO){let C=w;for(;m>r;)m&n&&(_=_.add(C)),C=C.double(),m>>=n;return _},precomputeWindow(w,m){const{windows:_,windowSize:C}=o(m,E),I=[];let P=w,T=P;for(let R=0;R<_;R++){T=P,I.push(T);for(let U=1;U<C;U++)T=T.add(P),I.push(T);P=T.double()}return I},wNAF(w,m,_){let C=b.ZERO,I=b.BASE;const P=o(w,E);for(let T=0;T<P.windows;T++){const{nextN:R,offset:U,isZero:k,isNeg:O,isNegF:B,offsetF:v}=a(_,T,P);_=R,k?I=I.add(s(B,m[v])):C=C.add(s(O,m[U]))}return{p:C,f:I}},wNAFUnsafe(w,m,_,C=b.ZERO){const I=o(w,E);for(let P=0;P<I.windows&&_!==r;P++){const{nextN:T,offset:R,isZero:U,isNeg:k}=a(_,P,I);if(_=T,!U){const O=m[R];C=C.add(k?O.negate():O)}}return C},getPrecomputes(w,m,_){let C=l.get(m);return C||(C=this.precomputeWindow(m,w),w!==1&&l.set(m,_(C))),C},wNAFCached(w,m,_){const C=f(w);return this.wNAF(C,this.getPrecomputes(C,w,_),m)},wNAFCachedUnsafe(w,m,_,C){const I=f(w);return I===1?this.unsafeLadder(w,m,C):this.wNAFUnsafe(I,this.getPrecomputes(I,w,_),m,C)},setWindowSize(w,m){i(m,E),d.set(w,m),l.delete(w)}}}function p(b,E,w,m){c(w,b),u(m,E);const _=w.length,C=m.length;if(_!==C)throw new Error("arrays of points and scalars must have equal length");const I=b.ZERO,P=(0,e.bitLen)(BigInt(_));let T=1;P>12?T=P-3:P>4?T=P-2:P>0&&(T=2);const R=(0,e.bitMask)(T),U=new Array(Number(R)+1).fill(I),k=Math.floor((E.BITS-1)/T)*T;let O=I;for(let B=k;B>=0;B-=T){U.fill(I);for(let A=0;A<C;A++){const S=m[A],j=Number(S>>BigInt(B)&R);U[j]=U[j].add(w[A])}let v=I;for(let A=U.length-1,S=I;A>0;A--)S=S.add(U[A]),v=v.add(S);if(O=O.add(v),B!==0)for(let A=0;A<T;A++)O=O.double()}return O}function h(b,E,w,m){i(m,E.BITS),c(w,b);const _=b.ZERO,C=2**m-1,I=Math.ceil(E.BITS/m),P=(0,e.bitMask)(m),T=w.map(R=>{const U=[];for(let k=0,O=R;k<C;k++)U.push(O),O=O.add(R);return U});return R=>{if(u(R,E),R.length>w.length)throw new Error("array of scalars must be smaller than array of points");let U=_;for(let k=0;k<I;k++){if(U!==_)for(let B=0;B<m;B++)U=U.double();const O=BigInt(I*m-(k+1)*m);for(let B=0;B<R.length;B++){const v=R[B],A=Number(v>>O&P);A&&(U=U.add(T[B][A-1]))}}return U}}function y(b){return(0,t.validateField)(b.Fp),(0,e.validateObject)(b,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,t.nLength)(b.n,b.nBitLength),...b,p:b.Fp.ORDER})}return Vc}var Yx;function o7(){return Yx||(Yx=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DER=t.DERErr=void 0,t.weierstrassPoints=g,t.weierstrass=h,t.SWUFpSqrtRatio=y,t.mapToCurveSimpleSWU=b;const e=Qye(),r=lv(),n=ol();function s(E){E.lowS!==void 0&&(0,n.abool)("lowS",E.lowS),E.prehash!==void 0&&(0,n.abool)("prehash",E.prehash)}function i(E){const w=(0,e.validateBasic)(E);(0,n.validateObject)(w,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:m,Fp:_,a:C}=w;if(m){if(!_.eql(C,_.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof m!="object"||typeof m.beta!="bigint"||typeof m.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...w})}class o extends Error{constructor(w=""){super(w)}}t.DERErr=o,t.DER={Err:o,_tlv:{encode:(E,w)=>{const{Err:m}=t.DER;if(E<0||E>256)throw new m("tlv.encode: wrong tag");if(w.length&1)throw new m("tlv.encode: unpadded data");const _=w.length/2,C=(0,n.numberToHexUnpadded)(_);if(C.length/2&128)throw new m("tlv.encode: long form length too big");const I=_>127?(0,n.numberToHexUnpadded)(C.length/2|128):"";return(0,n.numberToHexUnpadded)(E)+I+C+w},decode(E,w){const{Err:m}=t.DER;let _=0;if(E<0||E>256)throw new m("tlv.encode: wrong tag");if(w.length<2||w[_++]!==E)throw new m("tlv.decode: wrong tlv");const C=w[_++],I=!!(C&128);let P=0;if(!I)P=C;else{const R=C&127;if(!R)throw new m("tlv.decode(long): indefinite length not supported");if(R>4)throw new m("tlv.decode(long): byte length is too big");const U=w.subarray(_,_+R);if(U.length!==R)throw new m("tlv.decode: length bytes not complete");if(U[0]===0)throw new m("tlv.decode(long): zero leftmost byte");for(const k of U)P=P<<8|k;if(_+=R,P<128)throw new m("tlv.decode(long): not minimal encoding")}const T=w.subarray(_,_+P);if(T.length!==P)throw new m("tlv.decode: wrong value length");return{v:T,l:w.subarray(_+P)}}},_int:{encode(E){const{Err:w}=t.DER;if(E<c)throw new w("integer: negative integers are not allowed");let m=(0,n.numberToHexUnpadded)(E);if(Number.parseInt(m[0],16)&8&&(m="00"+m),m.length&1)throw new w("unexpected DER parsing assertion: unpadded hex");return m},decode(E){const{Err:w}=t.DER;if(E[0]&128)throw new w("invalid signature integer: negative");if(E[0]===0&&!(E[1]&128))throw new w("invalid signature integer: unnecessary leading zero");return(0,n.bytesToNumberBE)(E)}},toSig(E){const{Err:w,_int:m,_tlv:_}=t.DER,C=(0,n.ensureBytes)("signature",E),{v:I,l:P}=_.decode(48,C);if(P.length)throw new w("invalid signature: left bytes after parsing");const{v:T,l:R}=_.decode(2,I),{v:U,l:k}=_.decode(2,R);if(k.length)throw new w("invalid signature: left bytes after parsing");return{r:m.decode(T),s:m.decode(U)}},hexFromSig(E){const{_tlv:w,_int:m}=t.DER,_=w.encode(2,m.encode(E.r)),C=w.encode(2,m.encode(E.s)),I=_+C;return w.encode(48,I)}};function a(E,w){return(0,n.bytesToHex)((0,n.numberToBytesBE)(E,w))}const c=BigInt(0),u=BigInt(1),l=BigInt(2),d=BigInt(3),f=BigInt(4);function g(E){const w=i(E),{Fp:m}=w,_=(0,r.Field)(w.n,w.nBitLength),C=w.toBytes||((D,M,L)=>{const F=M.toAffine();return(0,n.concatBytes)(Uint8Array.from([4]),m.toBytes(F.x),m.toBytes(F.y))}),I=w.fromBytes||(D=>{const M=D.subarray(1),L=m.fromBytes(M.subarray(0,m.BYTES)),F=m.fromBytes(M.subarray(m.BYTES,2*m.BYTES));return{x:L,y:F}});function P(D){const{a:M,b:L}=w,F=m.sqr(D),q=m.mul(F,D);return m.add(m.add(q,m.mul(D,M)),L)}function T(D,M){const L=m.sqr(M),F=P(D);return m.eql(L,F)}if(!T(w.Gx,w.Gy))throw new Error("bad curve params: generator point");const R=m.mul(m.pow(w.a,d),f),U=m.mul(m.sqr(w.b),BigInt(27));if(m.is0(m.add(R,U)))throw new Error("bad curve params: a or b");function k(D){return(0,n.inRange)(D,u,w.n)}function O(D){const{allowedPrivateKeyLengths:M,nByteLength:L,wrapPrivateKey:F,n:q}=w;if(M&&typeof D!="bigint"){if((0,n.isBytes)(D)&&(D=(0,n.bytesToHex)(D)),typeof D!="string"||!M.includes(D.length))throw new Error("invalid private key");D=D.padStart(L*2,"0")}let $;try{$=typeof D=="bigint"?D:(0,n.bytesToNumberBE)((0,n.ensureBytes)("private key",D,L))}catch{throw new Error("invalid private key, expected hex or "+L+" bytes, got "+typeof D)}return F&&($=(0,r.mod)($,q)),(0,n.aInRange)("private key",$,u,q),$}function B(D){if(!(D instanceof S))throw new Error("ProjectivePoint expected")}const v=(0,n.memoized)((D,M)=>{const{px:L,py:F,pz:q}=D;if(m.eql(q,m.ONE))return{x:L,y:F};const $=D.is0();M==null&&(M=$?m.ONE:m.inv(q));const V=m.mul(L,M),J=m.mul(F,M),Y=m.mul(q,M);if($)return{x:m.ZERO,y:m.ZERO};if(!m.eql(Y,m.ONE))throw new Error("invZ was invalid");return{x:V,y:J}}),A=(0,n.memoized)(D=>{if(D.is0()){if(w.allowInfinityPoint&&!m.is0(D.py))return;throw new Error("bad point: ZERO")}const{x:M,y:L}=D.toAffine();if(!m.isValid(M)||!m.isValid(L))throw new Error("bad point: x or y not FE");if(!T(M,L))throw new Error("bad point: equation left != right");if(!D.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class S{constructor(M,L,F){if(M==null||!m.isValid(M))throw new Error("x required");if(L==null||!m.isValid(L)||m.is0(L))throw new Error("y required");if(F==null||!m.isValid(F))throw new Error("z required");this.px=M,this.py=L,this.pz=F,Object.freeze(this)}static fromAffine(M){const{x:L,y:F}=M||{};if(!M||!m.isValid(L)||!m.isValid(F))throw new Error("invalid affine point");if(M instanceof S)throw new Error("projective point not allowed");const q=$=>m.eql($,m.ZERO);return q(L)&&q(F)?S.ZERO:new S(L,F,m.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(M){const L=(0,r.FpInvertBatch)(m,M.map(F=>F.pz));return M.map((F,q)=>F.toAffine(L[q])).map(S.fromAffine)}static fromHex(M){const L=S.fromAffine(I((0,n.ensureBytes)("pointHex",M)));return L.assertValidity(),L}static fromPrivateKey(M){return S.BASE.multiply(O(M))}static msm(M,L){return(0,e.pippenger)(S,_,M,L)}_setWindowSize(M){x.setWindowSize(this,M)}assertValidity(){A(this)}hasEvenY(){const{y:M}=this.toAffine();if(m.isOdd)return!m.isOdd(M);throw new Error("Field doesn't support isOdd")}equals(M){B(M);const{px:L,py:F,pz:q}=this,{px:$,py:V,pz:J}=M,Y=m.eql(m.mul(L,J),m.mul($,q)),Z=m.eql(m.mul(F,J),m.mul(V,q));return Y&&Z}negate(){return new S(this.px,m.neg(this.py),this.pz)}double(){const{a:M,b:L}=w,F=m.mul(L,d),{px:q,py:$,pz:V}=this;let J=m.ZERO,Y=m.ZERO,Z=m.ZERO,ee=m.mul(q,q),le=m.mul($,$),X=m.mul(V,V),se=m.mul(q,$);return se=m.add(se,se),Z=m.mul(q,V),Z=m.add(Z,Z),J=m.mul(M,Z),Y=m.mul(F,X),Y=m.add(J,Y),J=m.sub(le,Y),Y=m.add(le,Y),Y=m.mul(J,Y),J=m.mul(se,J),Z=m.mul(F,Z),X=m.mul(M,X),se=m.sub(ee,X),se=m.mul(M,se),se=m.add(se,Z),Z=m.add(ee,ee),ee=m.add(Z,ee),ee=m.add(ee,X),ee=m.mul(ee,se),Y=m.add(Y,ee),X=m.mul($,V),X=m.add(X,X),ee=m.mul(X,se),J=m.sub(J,ee),Z=m.mul(X,le),Z=m.add(Z,Z),Z=m.add(Z,Z),new S(J,Y,Z)}add(M){B(M);const{px:L,py:F,pz:q}=this,{px:$,py:V,pz:J}=M;let Y=m.ZERO,Z=m.ZERO,ee=m.ZERO;const le=w.a,X=m.mul(w.b,d);let se=m.mul(L,$),fe=m.mul(F,V),Oe=m.mul(q,J),Re=m.add(L,F),Me=m.add($,V);Re=m.mul(Re,Me),Me=m.add(se,fe),Re=m.sub(Re,Me),Me=m.add(L,q);let Ze=m.add($,J);return Me=m.mul(Me,Ze),Ze=m.add(se,Oe),Me=m.sub(Me,Ze),Ze=m.add(F,q),Y=m.add(V,J),Ze=m.mul(Ze,Y),Y=m.add(fe,Oe),Ze=m.sub(Ze,Y),ee=m.mul(le,Me),Y=m.mul(X,Oe),ee=m.add(Y,ee),Y=m.sub(fe,ee),ee=m.add(fe,ee),Z=m.mul(Y,ee),fe=m.add(se,se),fe=m.add(fe,se),Oe=m.mul(le,Oe),Me=m.mul(X,Me),fe=m.add(fe,Oe),Oe=m.sub(se,Oe),Oe=m.mul(le,Oe),Me=m.add(Me,Oe),se=m.mul(fe,Me),Z=m.add(Z,se),se=m.mul(Ze,Me),Y=m.mul(Re,Y),Y=m.sub(Y,se),se=m.mul(Re,fe),ee=m.mul(Ze,ee),ee=m.add(ee,se),new S(Y,Z,ee)}subtract(M){return this.add(M.negate())}is0(){return this.equals(S.ZERO)}wNAF(M){return x.wNAFCached(this,M,S.normalizeZ)}multiplyUnsafe(M){const{endo:L,n:F}=w;(0,n.aInRange)("scalar",M,c,F);const q=S.ZERO;if(M===c)return q;if(this.is0()||M===u)return this;if(!L||x.hasPrecomputes(this))return x.wNAFCachedUnsafe(this,M,S.normalizeZ);let{k1neg:$,k1:V,k2neg:J,k2:Y}=L.splitScalar(M),Z=q,ee=q,le=this;for(;V>c||Y>c;)V&u&&(Z=Z.add(le)),Y&u&&(ee=ee.add(le)),le=le.double(),V>>=u,Y>>=u;return $&&(Z=Z.negate()),J&&(ee=ee.negate()),ee=new S(m.mul(ee.px,L.beta),ee.py,ee.pz),Z.add(ee)}multiply(M){const{endo:L,n:F}=w;(0,n.aInRange)("scalar",M,u,F);let q,$;if(L){const{k1neg:V,k1:J,k2neg:Y,k2:Z}=L.splitScalar(M);let{p:ee,f:le}=this.wNAF(J),{p:X,f:se}=this.wNAF(Z);ee=x.constTimeNegate(V,ee),X=x.constTimeNegate(Y,X),X=new S(m.mul(X.px,L.beta),X.py,X.pz),q=ee.add(X),$=le.add(se)}else{const{p:V,f:J}=this.wNAF(M);q=V,$=J}return S.normalizeZ([q,$])[0]}multiplyAndAddUnsafe(M,L,F){const q=S.BASE,$=(J,Y)=>Y===c||Y===u||!J.equals(q)?J.multiplyUnsafe(Y):J.multiply(Y),V=$(this,L).add($(M,F));return V.is0()?void 0:V}toAffine(M){return v(this,M)}isTorsionFree(){const{h:M,isTorsionFree:L}=w;if(M===u)return!0;if(L)return L(S,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:M,clearCofactor:L}=w;return M===u?this:L?L(S,this):this.multiplyUnsafe(w.h)}toRawBytes(M=!0){return(0,n.abool)("isCompressed",M),this.assertValidity(),C(S,this,M)}toHex(M=!0){return(0,n.abool)("isCompressed",M),(0,n.bytesToHex)(this.toRawBytes(M))}}S.BASE=new S(w.Gx,w.Gy,m.ONE),S.ZERO=new S(m.ZERO,m.ONE,m.ZERO);const{endo:j,nBitLength:N}=w,x=(0,e.wNAF)(S,j?Math.ceil(N/2):N);return{CURVE:w,ProjectivePoint:S,normPrivateKeyToScalar:O,weierstrassEquation:P,isWithinCurveOrder:k}}function p(E){const w=(0,e.validateBasic)(E);return(0,n.validateObject)(w,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...w})}function h(E){const w=p(E),{Fp:m,n:_,nByteLength:C,nBitLength:I}=w,P=m.BYTES+1,T=2*m.BYTES+1;function R(X){return(0,r.mod)(X,_)}function U(X){return(0,r.invert)(X,_)}const{ProjectivePoint:k,normPrivateKeyToScalar:O,weierstrassEquation:B,isWithinCurveOrder:v}=g({...w,toBytes(X,se,fe){const Oe=se.toAffine(),Re=m.toBytes(Oe.x),Me=n.concatBytes;return(0,n.abool)("isCompressed",fe),fe?Me(Uint8Array.from([se.hasEvenY()?2:3]),Re):Me(Uint8Array.from([4]),Re,m.toBytes(Oe.y))},fromBytes(X){const se=X.length,fe=X[0],Oe=X.subarray(1);if(se===P&&(fe===2||fe===3)){const Re=(0,n.bytesToNumberBE)(Oe);if(!(0,n.inRange)(Re,u,m.ORDER))throw new Error("Point is not on curve");const Me=B(Re);let Ze;try{Ze=m.sqrt(Me)}catch(Pt){const Ft=Pt instanceof Error?": "+Pt.message:"";throw new Error("Point is not on curve"+Ft)}const de=(Ze&u)===u;return(fe&1)===1!==de&&(Ze=m.neg(Ze)),{x:Re,y:Ze}}else if(se===T&&fe===4){const Re=m.fromBytes(Oe.subarray(0,m.BYTES)),Me=m.fromBytes(Oe.subarray(m.BYTES,2*m.BYTES));return{x:Re,y:Me}}else{const Re=P,Me=T;throw new Error("invalid Point, expected length of "+Re+", or uncompressed "+Me+", got "+se)}}});function A(X){const se=_>>u;return X>se}function S(X){return A(X)?R(-X):X}const j=(X,se,fe)=>(0,n.bytesToNumberBE)(X.slice(se,fe));class N{constructor(se,fe,Oe){(0,n.aInRange)("r",se,u,_),(0,n.aInRange)("s",fe,u,_),this.r=se,this.s=fe,Oe!=null&&(this.recovery=Oe),Object.freeze(this)}static fromCompact(se){const fe=C;return se=(0,n.ensureBytes)("compactSignature",se,fe*2),new N(j(se,0,fe),j(se,fe,2*fe))}static fromDER(se){const{r:fe,s:Oe}=t.DER.toSig((0,n.ensureBytes)("DER",se));return new N(fe,Oe)}assertValidity(){}addRecoveryBit(se){return new N(this.r,this.s,se)}recoverPublicKey(se){const{r:fe,s:Oe,recovery:Re}=this,Me=q((0,n.ensureBytes)("msgHash",se));if(Re==null||![0,1,2,3].includes(Re))throw new Error("recovery id invalid");const Ze=Re===2||Re===3?fe+w.n:fe;if(Ze>=m.ORDER)throw new Error("recovery id 2 or 3 invalid");const de=(Re&1)===0?"02":"03",te=k.fromHex(de+a(Ze,m.BYTES)),Pt=U(Ze),Ft=R(-Me*Pt),en=R(Oe*Pt),re=k.BASE.multiplyAndAddUnsafe(te,Ft,en);if(!re)throw new Error("point at infinify");return re.assertValidity(),re}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new N(this.r,R(-this.s),this.recovery):this}toDERRawBytes(){return(0,n.hexToBytes)(this.toDERHex())}toDERHex(){return t.DER.hexFromSig(this)}toCompactRawBytes(){return(0,n.hexToBytes)(this.toCompactHex())}toCompactHex(){const se=C;return a(this.r,se)+a(this.s,se)}}const x={isValidPrivateKey(X){try{return O(X),!0}catch{return!1}},normPrivateKeyToScalar:O,randomPrivateKey:()=>{const X=(0,r.getMinHashLength)(w.n);return(0,r.mapHashToField)(w.randomBytes(X),w.n)},precompute(X=8,se=k.BASE){return se._setWindowSize(X),se.multiply(BigInt(3)),se}};function D(X,se=!0){return k.fromPrivateKey(X).toRawBytes(se)}function M(X){if(typeof X=="bigint")return!1;if(X instanceof k)return!0;const fe=(0,n.ensureBytes)("key",X).length,Oe=m.BYTES,Re=Oe+1,Me=2*Oe+1;if(!(w.allowedPrivateKeyLengths||C===Re))return fe===Re||fe===Me}function L(X,se,fe=!0){if(M(X)===!0)throw new Error("first arg must be private key");if(M(se)===!1)throw new Error("second arg must be public key");return k.fromHex(se).multiply(O(X)).toRawBytes(fe)}const F=w.bits2int||function(X){if(X.length>8192)throw new Error("input is too large");const se=(0,n.bytesToNumberBE)(X),fe=X.length*8-I;return fe>0?se>>BigInt(fe):se},q=w.bits2int_modN||function(X){return R(F(X))},$=(0,n.bitMask)(I);function V(X){return(0,n.aInRange)("num < 2^"+I,X,c,$),(0,n.numberToBytesBE)(X,C)}function J(X,se,fe=Y){if(["recovered","canonical"].some(ye=>ye in fe))throw new Error("sign() legacy options not supported");const{hash:Oe,randomBytes:Re}=w;let{lowS:Me,prehash:Ze,extraEntropy:de}=fe;Me==null&&(Me=!0),X=(0,n.ensureBytes)("msgHash",X),s(fe),Ze&&(X=(0,n.ensureBytes)("prehashed msgHash",Oe(X)));const te=q(X),Pt=O(se),Ft=[V(Pt),V(te)];if(de!=null&&de!==!1){const ye=de===!0?Re(m.BYTES):de;Ft.push((0,n.ensureBytes)("extraEntropy",ye))}const en=(0,n.concatBytes)(...Ft),re=te;function ce(ye){const De=F(ye);if(!v(De))return;const tr=U(De),tn=k.BASE.multiply(De).toAffine(),zs=R(tn.x);if(zs===c)return;const Si=R(tr*R(re+zs*Pt));if(Si===c)return;let $s=(tn.x===zs?0:2)|Number(tn.y&u),Ec=Si;return Me&&A(Si)&&(Ec=S(Si),$s^=1),new N(zs,Ec,$s)}return{seed:en,k2sig:ce}}const Y={lowS:w.lowS,prehash:!1},Z={lowS:w.lowS,prehash:!1};function ee(X,se,fe=Y){const{seed:Oe,k2sig:Re}=J(X,se,fe),Me=w;return(0,n.createHmacDrbg)(Me.hash.outputLen,Me.nByteLength,Me.hmac)(Oe,Re)}k.BASE._setWindowSize(8);function le(X,se,fe,Oe=Z){const Re=X;se=(0,n.ensureBytes)("msgHash",se),fe=(0,n.ensureBytes)("publicKey",fe);const{lowS:Me,prehash:Ze,format:de}=Oe;if(s(Oe),"strict"in Oe)throw new Error("options.strict was renamed to lowS");if(de!==void 0&&de!=="compact"&&de!=="der")throw new Error("format must be compact or der");const te=typeof Re=="string"||(0,n.isBytes)(Re),Pt=!te&&!de&&typeof Re=="object"&&Re!==null&&typeof Re.r=="bigint"&&typeof Re.s=="bigint";if(!te&&!Pt)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let Ft,en;try{if(Pt&&(Ft=new N(Re.r,Re.s)),te){try{de!=="compact"&&(Ft=N.fromDER(Re))}catch($s){if(!($s instanceof t.DER.Err))throw $s}!Ft&&de!=="der"&&(Ft=N.fromCompact(Re))}en=k.fromHex(fe)}catch{return!1}if(!Ft||Me&&Ft.hasHighS())return!1;Ze&&(se=w.hash(se));const{r:re,s:ce}=Ft,ye=q(se),De=U(ce),tr=R(ye*De),tn=R(re*De),zs=k.BASE.multiplyAndAddUnsafe(en,tr,tn)?.toAffine();return zs?R(zs.x)===re:!1}return{CURVE:w,getPublicKey:D,getSharedSecret:L,sign:ee,verify:le,ProjectivePoint:k,Signature:N,utils:x}}function y(E,w){const m=E.ORDER;let _=c;for(let A=m-u;A%l===c;A/=l)_+=u;const C=_,I=l<<C-u-u,P=I*l,T=(m-u)/P,R=(T-u)/l,U=P-u,k=I,O=E.pow(w,T),B=E.pow(w,(T+u)/l);let v=(A,S)=>{let j=O,N=E.pow(S,U),x=E.sqr(N);x=E.mul(x,S);let D=E.mul(A,x);D=E.pow(D,R),D=E.mul(D,N),N=E.mul(D,S),x=E.mul(D,A);let M=E.mul(x,N);D=E.pow(M,k);let L=E.eql(D,E.ONE);N=E.mul(x,B),D=E.mul(M,j),x=E.cmov(N,x,L),M=E.cmov(D,M,L);for(let F=C;F>u;F--){let q=F-l;q=l<<q-u;let $=E.pow(M,q);const V=E.eql($,E.ONE);N=E.mul(x,j),j=E.mul(j,j),$=E.mul(M,j),x=E.cmov(N,x,V),M=E.cmov($,M,V)}return{isValid:L,value:x}};if(E.ORDER%f===d){const A=(E.ORDER-d)/f,S=E.sqrt(E.neg(w));v=(j,N)=>{let x=E.sqr(N);const D=E.mul(j,N);x=E.mul(x,D);let M=E.pow(x,A);M=E.mul(M,D);const L=E.mul(M,S),F=E.mul(E.sqr(M),N),q=E.eql(F,j);let $=E.cmov(L,M,q);return{isValid:q,value:$}}}return v}function b(E,w){if((0,r.validateField)(E),!E.isValid(w.A)||!E.isValid(w.B)||!E.isValid(w.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const m=y(E,w.Z);if(!E.isOdd)throw new Error("Fp.isOdd is not implemented!");return _=>{let C,I,P,T,R,U,k,O;C=E.sqr(_),C=E.mul(C,w.Z),I=E.sqr(C),I=E.add(I,C),P=E.add(I,E.ONE),P=E.mul(P,w.B),T=E.cmov(w.Z,E.neg(I),!E.eql(I,E.ZERO)),T=E.mul(T,w.A),I=E.sqr(P),U=E.sqr(T),R=E.mul(U,w.A),I=E.add(I,R),I=E.mul(I,P),U=E.mul(U,T),R=E.mul(U,w.B),I=E.add(I,R),k=E.mul(C,P);const{isValid:B,value:v}=m(I,U);O=E.mul(C,_),O=E.mul(O,v),k=E.cmov(k,P,B),O=E.cmov(O,v,B);const A=E.isOdd(_)===E.isOdd(O);O=E.cmov(E.neg(O),O,A);const S=(0,r.FpInvertBatch)(E,[T],!0)[0];return k=E.mul(k,S),{x:k,y:O}}}})(GA)),GA}var Jx;function Xye(){if(Jx)return th;Jx=1,Object.defineProperty(th,"__esModule",{value:!0}),th.getHash=n,th.createCurve=s;const t=Jye(),e=cc(),r=o7();function n(i){return{hash:i,hmac:(o,...a)=>(0,t.hmac)(i,o,(0,e.concatBytes)(...a)),randomBytes:e.randomBytes}}function s(i,o){const a=c=>(0,r.weierstrass)({...i,...n(c)});return{...a(o),create:a}}return th}var Ra={},Qx;function ebe(){if(Qx)return Ra;Qx=1,Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.expand_message_xmd=o,Ra.expand_message_xof=a,Ra.hash_to_field=c,Ra.isogenyMap=u,Ra.createHasher=l;const t=lv(),e=ol(),r=e.bytesToNumberBE;function n(d,f){if(i(d),i(f),d<0||d>=1<<8*f)throw new Error("invalid I2OSP input: "+d);const g=Array.from({length:f}).fill(0);for(let p=f-1;p>=0;p--)g[p]=d&255,d>>>=8;return new Uint8Array(g)}function s(d,f){const g=new Uint8Array(d.length);for(let p=0;p<d.length;p++)g[p]=d[p]^f[p];return g}function i(d){if(!Number.isSafeInteger(d))throw new Error("number expected")}function o(d,f,g,p){(0,e.abytes)(d),(0,e.abytes)(f),i(g),f.length>255&&(f=p((0,e.concatBytes)((0,e.utf8ToBytes)("H2C-OVERSIZE-DST-"),f)));const{outputLen:h,blockLen:y}=p,b=Math.ceil(g/h);if(g>65535||b>255)throw new Error("expand_message_xmd: invalid lenInBytes");const E=(0,e.concatBytes)(f,n(f.length,1)),w=n(0,y),m=n(g,2),_=new Array(b),C=p((0,e.concatBytes)(w,d,m,n(0,1),E));_[0]=p((0,e.concatBytes)(C,n(1,1),E));for(let P=1;P<=b;P++){const T=[s(C,_[P-1]),n(P+1,1),E];_[P]=p((0,e.concatBytes)(...T))}return(0,e.concatBytes)(..._).slice(0,g)}function a(d,f,g,p,h){if((0,e.abytes)(d),(0,e.abytes)(f),i(g),f.length>255){const y=Math.ceil(2*p/8);f=h.create({dkLen:y}).update((0,e.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(f).digest()}if(g>65535||f.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return h.create({dkLen:g}).update(d).update(n(g,2)).update(f).update(n(f.length,1)).digest()}function c(d,f,g){(0,e.validateObject)(g,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p,k:h,m:y,hash:b,expand:E,DST:w}=g;(0,e.abytes)(d),i(f);const m=typeof w=="string"?(0,e.utf8ToBytes)(w):w,_=p.toString(2).length,C=Math.ceil((_+h)/8),I=f*y*C;let P;if(E==="xmd")P=o(d,m,I,b);else if(E==="xof")P=a(d,m,I,h,b);else if(E==="_internal_pass")P=d;else throw new Error('expand must be "xmd" or "xof"');const T=new Array(f);for(let R=0;R<f;R++){const U=new Array(y);for(let k=0;k<y;k++){const O=C*(k+R*y),B=P.subarray(O,O+C);U[k]=(0,t.mod)(r(B),p)}T[R]=U}return T}function u(d,f){const g=f.map(p=>Array.from(p).reverse());return(p,h)=>{const[y,b,E,w]=g.map(C=>C.reduce((I,P)=>d.add(d.mul(I,p),P))),[m,_]=(0,t.FpInvertBatch)(d,[b,w],!0);return p=d.mul(y,m),h=d.mul(h,d.mul(E,_)),{x:p,y:h}}}function l(d,f,g){if(typeof f!="function")throw new Error("mapToCurve() must be defined");function p(y){return d.fromAffine(f(y))}function h(y){const b=y.clearCofactor();return b.equals(d.ZERO)?d.ZERO:(b.assertValidity(),b)}return{defaults:g,hashToCurve(y,b){const E=c(y,2,{...g,DST:g.DST,...b}),w=p(E[0]),m=p(E[1]);return h(w.add(m))},encodeToCurve(y,b){const E=c(y,1,{...g,DST:g.encodeDST,...b});return h(p(E[0]))},mapToCurve(y){if(!Array.isArray(y))throw new Error("expected array of bigints");for(const b of y)if(typeof b!="bigint")throw new Error("expected array of bigints");return h(p(y))}}}return Ra}var Xx;function al(){return Xx||(Xx=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.secp256k1_hasher=t.schnorr=t.secp256k1=void 0;const e=i7(),r=cc(),n=Xye(),s=ebe(),i=lv(),o=ol(),a=o7(),c=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),u=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),l=BigInt(0),d=BigInt(1),f=BigInt(2),g=(S,j)=>(S+j/f)/j;function p(S){const j=c,N=BigInt(3),x=BigInt(6),D=BigInt(11),M=BigInt(22),L=BigInt(23),F=BigInt(44),q=BigInt(88),$=S*S*S%j,V=$*$*S%j,J=(0,i.pow2)(V,N,j)*V%j,Y=(0,i.pow2)(J,N,j)*V%j,Z=(0,i.pow2)(Y,f,j)*$%j,ee=(0,i.pow2)(Z,D,j)*Z%j,le=(0,i.pow2)(ee,M,j)*ee%j,X=(0,i.pow2)(le,F,j)*le%j,se=(0,i.pow2)(X,q,j)*X%j,fe=(0,i.pow2)(se,F,j)*le%j,Oe=(0,i.pow2)(fe,N,j)*V%j,Re=(0,i.pow2)(Oe,L,j)*ee%j,Me=(0,i.pow2)(Re,x,j)*$%j,Ze=(0,i.pow2)(Me,f,j);if(!h.eql(h.sqr(Ze),S))throw new Error("Cannot find square root");return Ze}const h=(0,i.Field)(c,void 0,void 0,{sqrt:p});t.secp256k1=(0,n.createCurve)({a:l,b:BigInt(7),Fp:h,n:u,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:S=>{const j=u,N=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),x=-d*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),D=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),M=N,L=BigInt("0x100000000000000000000000000000000"),F=g(M*S,j),q=g(-x*S,j);let $=(0,i.mod)(S-F*N-q*D,j),V=(0,i.mod)(-F*x-q*M,j);const J=$>L,Y=V>L;if(J&&($=j-$),Y&&(V=j-V),$>L||V>L)throw new Error("splitScalar: Endomorphism failed, k="+S);return{k1neg:J,k1:$,k2neg:Y,k2:V}}}},e.sha256);const y={};function b(S,...j){let N=y[S];if(N===void 0){const x=(0,e.sha256)(Uint8Array.from(S,D=>D.charCodeAt(0)));N=(0,o.concatBytes)(x,x),y[S]=N}return(0,e.sha256)((0,o.concatBytes)(N,...j))}const E=S=>S.toRawBytes(!0).slice(1),w=S=>(0,o.numberToBytesBE)(S,32),m=S=>(0,i.mod)(S,c),_=S=>(0,i.mod)(S,u),C=t.secp256k1.ProjectivePoint,I=(S,j,N)=>C.BASE.multiplyAndAddUnsafe(S,j,N);function P(S){let j=t.secp256k1.utils.normPrivateKeyToScalar(S),N=C.fromPrivateKey(j);return{scalar:N.hasEvenY()?j:_(-j),bytes:E(N)}}function T(S){(0,o.aInRange)("x",S,d,c);const j=m(S*S),N=m(j*S+BigInt(7));let x=p(N);x%f!==l&&(x=m(-x));const D=new C(S,x,d);return D.assertValidity(),D}const R=o.bytesToNumberBE;function U(...S){return _(R(b("BIP0340/challenge",...S)))}function k(S){return P(S).bytes}function O(S,j,N=(0,r.randomBytes)(32)){const x=(0,o.ensureBytes)("message",S),{bytes:D,scalar:M}=P(j),L=(0,o.ensureBytes)("auxRand",N,32),F=w(M^R(b("BIP0340/aux",L))),q=b("BIP0340/nonce",F,D,x),$=_(R(q));if($===l)throw new Error("sign failed: k is zero");const{bytes:V,scalar:J}=P($),Y=U(V,D,x),Z=new Uint8Array(64);if(Z.set(V,0),Z.set(w(_(J+Y*M)),32),!B(Z,x,D))throw new Error("sign: Invalid signature produced");return Z}function B(S,j,N){const x=(0,o.ensureBytes)("signature",S,64),D=(0,o.ensureBytes)("message",j),M=(0,o.ensureBytes)("publicKey",N,32);try{const L=T(R(M)),F=R(x.subarray(0,32));if(!(0,o.inRange)(F,d,c))return!1;const q=R(x.subarray(32,64));if(!(0,o.inRange)(q,d,u))return!1;const $=U(w(F),E(L),D),V=I(L,q,_(-$));return!(!V||!V.hasEvenY()||V.toAffine().x!==F)}catch{return!1}}t.schnorr={getPublicKey:k,sign:O,verify:B,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:T,pointToBytes:E,numberToBytesBE:o.numberToBytesBE,bytesToNumberBE:o.bytesToNumberBE,taggedHash:b,mod:i.mod}};const v=(0,s.isogenyMap)(h,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(S=>S.map(j=>BigInt(j)))),A=(0,a.mapToCurveSimpleSWU)(h,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:h.create(BigInt("-11"))});t.secp256k1_hasher=(0,s.createHasher)(t.secp256k1.ProjectivePoint,S=>{const{x:j,y:N}=A(h.create(S[0]));return v(j,N)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:h.ORDER,m:1,k:128,expand:"xmd",hash:e.sha256}),t.hashToCurve=t.secp256k1_hasher.hashToCurve,t.encodeToCurve=t.secp256k1_hasher.encodeToCurve})($A)),$A}var e8;function AS(){if(e8)return Im;e8=1,Object.defineProperty(Im,"__esModule",{value:!0}),Im.recoverPublicKey=s;const t=Pn(),e=Jn(),r=fr(),n=Ae();async function s({hash:o,signature:a}){const c=(0,t.isHex)(o)?o:(0,n.toHex)(o),{secp256k1:u}=await Promise.resolve().then(()=>al());return`0x${(()=>{if(typeof a=="object"&&"r"in a&&"s"in a){const{r:h,s:y,v:b,yParity:E}=a,w=Number(E??b),m=i(w);return new u.Signature((0,r.hexToBigInt)(h),(0,r.hexToBigInt)(y)).addRecoveryBit(m)}const f=(0,t.isHex)(a)?a:(0,n.toHex)(a);if((0,e.size)(f)!==65)throw new Error("invalid signature length");const g=(0,r.hexToNumber)(`0x${f.slice(130)}`),p=i(g);return u.Signature.fromCompact(f.substring(2,130)).addRecoveryBit(p)})().recoverPublicKey(c.substring(2)).toHex(!1)}`}function i(o){if(o===0||o===1)return o;if(o===27)return 0;if(o===28)return 1;throw new Error("Invalid yParityOrV value")}return Im}var t8;function hc(){if(t8)return Am;t8=1,Object.defineProperty(Am,"__esModule",{value:!0}),Am.recoverAddress=r;const t=n7(),e=AS();async function r({hash:n,signature:s}){return(0,t.publicKeyToAddress)(await(0,e.recoverPublicKey)({hash:n,signature:s}))}return Am}var Sm={},Rl={},r8;function P0(){if(r8)return Rl;r8=1,Object.defineProperty(Rl,"__esModule",{value:!0}),Rl.toRlp=s,Rl.bytesToRlp=i,Rl.hexToRlp=o;const t=Ke(),e=I0(),r=Lt(),n=Ae();function s(d,f="hex"){const g=a(d),p=(0,e.createCursor)(new Uint8Array(g.length));return g.encode(p),f==="hex"?(0,n.bytesToHex)(p.bytes):p.bytes}function i(d,f="bytes"){return s(d,f)}function o(d,f="hex"){return s(d,f)}function a(d){return Array.isArray(d)?c(d.map(f=>a(f))):u(d)}function c(d){const f=d.reduce((h,y)=>h+y.length,0),g=l(f);return{length:f<=55?1+f:1+g+f,encode(h){f<=55?h.pushByte(192+f):(h.pushByte(247+g),g===1?h.pushUint8(f):g===2?h.pushUint16(f):g===3?h.pushUint24(f):h.pushUint32(f));for(const{encode:y}of d)y(h)}}}function u(d){const f=typeof d=="string"?(0,r.hexToBytes)(d):d,g=l(f.length);return{length:f.length===1&&f[0]<128?1:f.length<=55?1+f.length:1+g+f.length,encode(h){f.length===1&&f[0]<128?h.pushBytes(f):f.length<=55?(h.pushByte(128+f.length),h.pushBytes(f)):(h.pushByte(183+g),g===1?h.pushUint8(f.length):g===2?h.pushUint16(f.length):g===3?h.pushUint24(f.length):h.pushUint32(f.length),h.pushBytes(f))}}}function l(d){if(d<2**8)return 1;if(d<2**16)return 2;if(d<2**24)return 3;if(d<2**32)return 4;throw new t.BaseError("Length is too large.")}return Rl}var n8;function a7(){if(n8)return Sm;n8=1,Object.defineProperty(Sm,"__esModule",{value:!0}),Sm.hashAuthorization=i;const t=Mr(),e=Lt(),r=Ae(),n=P0(),s=Qn();function i(o){const{chainId:a,nonce:c,to:u}=o,l=o.contractAddress??o.address,d=(0,s.keccak256)((0,t.concatHex)(["0x05",(0,n.toRlp)([a?(0,r.numberToHex)(a):"0x",l,c?(0,r.numberToHex)(c):"0x"])]));return u==="bytes"?(0,e.hexToBytes)(d):d}return Sm}var s8;function N0(){if(s8)return _m;s8=1,Object.defineProperty(_m,"__esModule",{value:!0}),_m.recoverAuthorizationAddress=r;const t=hc(),e=a7();async function r(n){const{authorization:s,signature:i}=n;return(0,t.recoverAddress)({hash:(0,e.hashAuthorization)(s),signature:i??s})}return _m}var Tm={},rh={},i8;function c7(){if(i8)return rh;i8=1,Object.defineProperty(rh,"__esModule",{value:!0}),rh.EstimateGasExecutionError=void 0;const t=T0(),e=il(),r=Ke(),n=ts();class s extends r.BaseError{constructor(o,{account:a,docsPath:c,chain:u,data:l,gas:d,gasPrice:f,maxFeePerGas:g,maxPriorityFeePerGas:p,nonce:h,to:y,value:b}){const E=(0,n.prettyPrint)({from:a?.address,to:y,value:typeof b<"u"&&`${(0,t.formatEther)(b)} ${u?.nativeCurrency?.symbol||"ETH"}`,data:l,gas:d,gasPrice:typeof f<"u"&&`${(0,e.formatGwei)(f)} gwei`,maxFeePerGas:typeof g<"u"&&`${(0,e.formatGwei)(g)} gwei`,maxPriorityFeePerGas:typeof p<"u"&&`${(0,e.formatGwei)(p)} gwei`,nonce:h});super(o.shortMessage,{cause:o,docsPath:c,metaMessages:[...o.metaMessages?[...o.metaMessages," "]:[],"Estimate Gas Arguments:",E].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=o}}return rh.EstimateGasExecutionError=s,rh}var Ut={},o8;function ua(){if(o8)return Ut;o8=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.UnknownNodeError=Ut.TipAboveFeeCapError=Ut.TransactionTypeNotSupportedError=Ut.IntrinsicGasTooLowError=Ut.IntrinsicGasTooHighError=Ut.InsufficientFundsError=Ut.NonceMaxValueError=Ut.NonceTooLowError=Ut.NonceTooHighError=Ut.FeeCapTooLowError=Ut.FeeCapTooHighError=Ut.ExecutionRevertedError=void 0;const t=il(),e=Ke();class r extends e.BaseError{constructor({cause:h,message:y}={}){const b=y?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${b?`with reason: ${b}`:"for an unknown reason"}.`,{cause:h,name:"ExecutionRevertedError"})}}Ut.ExecutionRevertedError=r,Object.defineProperty(r,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(r,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class n extends e.BaseError{constructor({cause:h,maxFeePerGas:y}={}){super(`The fee cap (\`maxFeePerGas\`${y?` = ${(0,t.formatGwei)(y)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:h,name:"FeeCapTooHighError"})}}Ut.FeeCapTooHighError=n,Object.defineProperty(n,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class s extends e.BaseError{constructor({cause:h,maxFeePerGas:y}={}){super(`The fee cap (\`maxFeePerGas\`${y?` = ${(0,t.formatGwei)(y)}`:""} gwei) cannot be lower than the block base fee.`,{cause:h,name:"FeeCapTooLowError"})}}Ut.FeeCapTooLowError=s,Object.defineProperty(s,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class i extends e.BaseError{constructor({cause:h,nonce:y}={}){super(`Nonce provided for the transaction ${y?`(${y}) `:""}is higher than the next one expected.`,{cause:h,name:"NonceTooHighError"})}}Ut.NonceTooHighError=i,Object.defineProperty(i,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class o extends e.BaseError{constructor({cause:h,nonce:y}={}){super([`Nonce provided for the transaction ${y?`(${y}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:h,name:"NonceTooLowError"})}}Ut.NonceTooLowError=o,Object.defineProperty(o,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class a extends e.BaseError{constructor({cause:h,nonce:y}={}){super(`Nonce provided for the transaction ${y?`(${y}) `:""}exceeds the maximum allowed nonce.`,{cause:h,name:"NonceMaxValueError"})}}Ut.NonceMaxValueError=a,Object.defineProperty(a,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class c extends e.BaseError{constructor({cause:h}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:h,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Ut.InsufficientFundsError=c,Object.defineProperty(c,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class u extends e.BaseError{constructor({cause:h,gas:y}={}){super(`The amount of gas ${y?`(${y}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:h,name:"IntrinsicGasTooHighError"})}}Ut.IntrinsicGasTooHighError=u,Object.defineProperty(u,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class l extends e.BaseError{constructor({cause:h,gas:y}={}){super(`The amount of gas ${y?`(${y}) `:""}provided for the transaction is too low.`,{cause:h,name:"IntrinsicGasTooLowError"})}}Ut.IntrinsicGasTooLowError=l,Object.defineProperty(l,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class d extends e.BaseError{constructor({cause:h}){super("The transaction type is not supported for this chain.",{cause:h,name:"TransactionTypeNotSupportedError"})}}Ut.TransactionTypeNotSupportedError=d,Object.defineProperty(d,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class f extends e.BaseError{constructor({cause:h,maxPriorityFeePerGas:y,maxFeePerGas:b}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${y?` = ${(0,t.formatGwei)(y)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${b?` = ${(0,t.formatGwei)(b)} gwei`:""}).`].join(`
`),{cause:h,name:"TipAboveFeeCapError"})}}Ut.TipAboveFeeCapError=f,Object.defineProperty(f,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class g extends e.BaseError{constructor({cause:h}){super(`An error occurred while executing: ${h?.shortMessage}`,{cause:h,name:"UnknownNodeError"})}}return Ut.UnknownNodeError=g,Ut}var nh={},a8;function O0(){if(a8)return nh;a8=1,Object.defineProperty(nh,"__esModule",{value:!0}),nh.containsNodeError=s,nh.getNodeError=i;const t=Ke(),e=ua(),r=_i(),n=dc();function s(o){return o instanceof n.TransactionRejectedRpcError||o instanceof n.InvalidInputRpcError||o instanceof r.RpcRequestError&&o.code===e.ExecutionRevertedError.code}function i(o,a){const c=(o.details||"").toLowerCase(),u=o instanceof t.BaseError?o.walk(l=>l?.code===e.ExecutionRevertedError.code):o;return u instanceof t.BaseError?new e.ExecutionRevertedError({cause:o,message:u.details}):e.ExecutionRevertedError.nodeMessage.test(c)?new e.ExecutionRevertedError({cause:o,message:o.details}):e.FeeCapTooHighError.nodeMessage.test(c)?new e.FeeCapTooHighError({cause:o,maxFeePerGas:a?.maxFeePerGas}):e.FeeCapTooLowError.nodeMessage.test(c)?new e.FeeCapTooLowError({cause:o,maxFeePerGas:a?.maxFeePerGas}):e.NonceTooHighError.nodeMessage.test(c)?new e.NonceTooHighError({cause:o,nonce:a?.nonce}):e.NonceTooLowError.nodeMessage.test(c)?new e.NonceTooLowError({cause:o,nonce:a?.nonce}):e.NonceMaxValueError.nodeMessage.test(c)?new e.NonceMaxValueError({cause:o,nonce:a?.nonce}):e.InsufficientFundsError.nodeMessage.test(c)?new e.InsufficientFundsError({cause:o}):e.IntrinsicGasTooHighError.nodeMessage.test(c)?new e.IntrinsicGasTooHighError({cause:o,gas:a?.gas}):e.IntrinsicGasTooLowError.nodeMessage.test(c)?new e.IntrinsicGasTooLowError({cause:o,gas:a?.gas}):e.TransactionTypeNotSupportedError.nodeMessage.test(c)?new e.TransactionTypeNotSupportedError({cause:o}):e.TipAboveFeeCapError.nodeMessage.test(c)?new e.TipAboveFeeCapError({cause:o,maxFeePerGas:a?.maxFeePerGas,maxPriorityFeePerGas:a?.maxPriorityFeePerGas}):new e.UnknownNodeError({cause:o})}return nh}var c8;function u7(){if(c8)return Tm;c8=1,Object.defineProperty(Tm,"__esModule",{value:!0}),Tm.getEstimateGasError=n;const t=c7(),e=ua(),r=O0();function n(s,{docsPath:i,...o}){const a=(()=>{const c=(0,r.getNodeError)(s,o);return c instanceof e.UnknownNodeError?s:c})();return new t.EstimateGasExecutionError(a,{docsPath:i,...o})}return Tm}var Pm={},u8;function pc(){if(u8)return Pm;u8=1,Object.defineProperty(Pm,"__esModule",{value:!0}),Pm.extract=t;function t(e,{format:r}){if(!r)return{};const n={};function s(o){const a=Object.keys(o);for(const c of a)c in e&&(n[c]=e[c]),o[c]&&typeof o[c]=="object"&&!Array.isArray(o[c])&&s(o[c])}const i=r(e||{});return s(i),n}return Pm}var WA={},Nm={},l8;function R0(){if(l8)return Nm;l8=1,Object.defineProperty(Nm,"__esModule",{value:!0}),Nm.defineFormatter=t;function t(e,r){return({exclude:n,format:s})=>({exclude:n,format:(i,o)=>{const a=r(i,o);if(n)for(const c of n)delete a[c];return{...a,...s(i,o)}},type:e})}return Nm}var d8;function Ai(){return d8||(d8=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.defineTransactionRequest=t.rpcTransactionType=void 0,t.formatTransactionRequest=n;const e=Ae(),r=R0();t.rpcTransactionType={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function n(i,o){const a={};return typeof i.authorizationList<"u"&&(a.authorizationList=s(i.authorizationList)),typeof i.accessList<"u"&&(a.accessList=i.accessList),typeof i.blobVersionedHashes<"u"&&(a.blobVersionedHashes=i.blobVersionedHashes),typeof i.blobs<"u"&&(typeof i.blobs[0]!="string"?a.blobs=i.blobs.map(c=>(0,e.bytesToHex)(c)):a.blobs=i.blobs),typeof i.data<"u"&&(a.data=i.data),i.account&&(a.from=i.account.address),typeof i.from<"u"&&(a.from=i.from),typeof i.gas<"u"&&(a.gas=(0,e.numberToHex)(i.gas)),typeof i.gasPrice<"u"&&(a.gasPrice=(0,e.numberToHex)(i.gasPrice)),typeof i.maxFeePerBlobGas<"u"&&(a.maxFeePerBlobGas=(0,e.numberToHex)(i.maxFeePerBlobGas)),typeof i.maxFeePerGas<"u"&&(a.maxFeePerGas=(0,e.numberToHex)(i.maxFeePerGas)),typeof i.maxPriorityFeePerGas<"u"&&(a.maxPriorityFeePerGas=(0,e.numberToHex)(i.maxPriorityFeePerGas)),typeof i.nonce<"u"&&(a.nonce=(0,e.numberToHex)(i.nonce)),typeof i.to<"u"&&(a.to=i.to),typeof i.type<"u"&&(a.type=t.rpcTransactionType[i.type]),typeof i.value<"u"&&(a.value=(0,e.numberToHex)(i.value)),a}t.defineTransactionRequest=(0,r.defineFormatter)("transactionRequest",n);function s(i){return i.map(o=>({address:o.address,r:o.r?(0,e.numberToHex)(BigInt(o.r)):o.r,s:o.s?(0,e.numberToHex)(BigInt(o.s)):o.s,chainId:(0,e.numberToHex)(o.chainId),nonce:(0,e.numberToHex)(o.nonce),...typeof o.yParity<"u"?{yParity:(0,e.numberToHex)(o.yParity)}:{},...typeof o.v<"u"&&typeof o.yParity>"u"?{v:(0,e.numberToHex)(o.v)}:{}}))}})(WA)),WA}var xl={},f8;function CS(){if(f8)return xl;f8=1,Object.defineProperty(xl,"__esModule",{value:!0}),xl.serializeStateMapping=i,xl.serializeAccountStateOverride=o,xl.serializeStateOverride=a;const t=Ei(),e=sv(),r=vS(),n=Xn(),s=Ae();function i(c){if(!(!c||c.length===0))return c.reduce((u,{slot:l,value:d})=>{if(l.length!==66)throw new e.InvalidBytesLengthError({size:l.length,targetSize:66,type:"hex"});if(d.length!==66)throw new e.InvalidBytesLengthError({size:d.length,targetSize:66,type:"hex"});return u[l]=d,u},{})}function o(c){const{balance:u,nonce:l,state:d,stateDiff:f,code:g}=c,p={};if(g!==void 0&&(p.code=g),u!==void 0&&(p.balance=(0,s.numberToHex)(u)),l!==void 0&&(p.nonce=(0,s.numberToHex)(l)),d!==void 0&&(p.state=i(d)),f!==void 0){if(p.state)throw new r.StateAssignmentConflictError;p.stateDiff=i(f)}return p}function a(c){if(!c)return;const u={};for(const{address:l,...d}of c){if(!(0,n.isAddress)(l,{strict:!1}))throw new t.InvalidAddressError({address:l});if(u[l])throw new r.AccountStateConflictError({address:l});u[l]=o(d)}return u}return xl}var Om={},K={},h8;function IS(){return h8||(h8=1,Object.defineProperty(K,"__esModule",{value:!0}),K.minInt144=K.minInt136=K.minInt128=K.minInt120=K.minInt112=K.minInt104=K.minInt96=K.minInt88=K.minInt80=K.minInt72=K.minInt64=K.minInt56=K.minInt48=K.minInt40=K.minInt32=K.minInt24=K.minInt16=K.minInt8=K.maxInt256=K.maxInt248=K.maxInt240=K.maxInt232=K.maxInt224=K.maxInt216=K.maxInt208=K.maxInt200=K.maxInt192=K.maxInt184=K.maxInt176=K.maxInt168=K.maxInt160=K.maxInt152=K.maxInt144=K.maxInt136=K.maxInt128=K.maxInt120=K.maxInt112=K.maxInt104=K.maxInt96=K.maxInt88=K.maxInt80=K.maxInt72=K.maxInt64=K.maxInt56=K.maxInt48=K.maxInt40=K.maxInt32=K.maxInt24=K.maxInt16=K.maxInt8=void 0,K.maxUint256=K.maxUint248=K.maxUint240=K.maxUint232=K.maxUint224=K.maxUint216=K.maxUint208=K.maxUint200=K.maxUint192=K.maxUint184=K.maxUint176=K.maxUint168=K.maxUint160=K.maxUint152=K.maxUint144=K.maxUint136=K.maxUint128=K.maxUint120=K.maxUint112=K.maxUint104=K.maxUint96=K.maxUint88=K.maxUint80=K.maxUint72=K.maxUint64=K.maxUint56=K.maxUint48=K.maxUint40=K.maxUint32=K.maxUint24=K.maxUint16=K.maxUint8=K.minInt256=K.minInt248=K.minInt240=K.minInt232=K.minInt224=K.minInt216=K.minInt208=K.minInt200=K.minInt192=K.minInt184=K.minInt176=K.minInt168=K.minInt160=K.minInt152=void 0,K.maxInt8=2n**(8n-1n)-1n,K.maxInt16=2n**(16n-1n)-1n,K.maxInt24=2n**(24n-1n)-1n,K.maxInt32=2n**(32n-1n)-1n,K.maxInt40=2n**(40n-1n)-1n,K.maxInt48=2n**(48n-1n)-1n,K.maxInt56=2n**(56n-1n)-1n,K.maxInt64=2n**(64n-1n)-1n,K.maxInt72=2n**(72n-1n)-1n,K.maxInt80=2n**(80n-1n)-1n,K.maxInt88=2n**(88n-1n)-1n,K.maxInt96=2n**(96n-1n)-1n,K.maxInt104=2n**(104n-1n)-1n,K.maxInt112=2n**(112n-1n)-1n,K.maxInt120=2n**(120n-1n)-1n,K.maxInt128=2n**(128n-1n)-1n,K.maxInt136=2n**(136n-1n)-1n,K.maxInt144=2n**(144n-1n)-1n,K.maxInt152=2n**(152n-1n)-1n,K.maxInt160=2n**(160n-1n)-1n,K.maxInt168=2n**(168n-1n)-1n,K.maxInt176=2n**(176n-1n)-1n,K.maxInt184=2n**(184n-1n)-1n,K.maxInt192=2n**(192n-1n)-1n,K.maxInt200=2n**(200n-1n)-1n,K.maxInt208=2n**(208n-1n)-1n,K.maxInt216=2n**(216n-1n)-1n,K.maxInt224=2n**(224n-1n)-1n,K.maxInt232=2n**(232n-1n)-1n,K.maxInt240=2n**(240n-1n)-1n,K.maxInt248=2n**(248n-1n)-1n,K.maxInt256=2n**(256n-1n)-1n,K.minInt8=-(2n**(8n-1n)),K.minInt16=-(2n**(16n-1n)),K.minInt24=-(2n**(24n-1n)),K.minInt32=-(2n**(32n-1n)),K.minInt40=-(2n**(40n-1n)),K.minInt48=-(2n**(48n-1n)),K.minInt56=-(2n**(56n-1n)),K.minInt64=-(2n**(64n-1n)),K.minInt72=-(2n**(72n-1n)),K.minInt80=-(2n**(80n-1n)),K.minInt88=-(2n**(88n-1n)),K.minInt96=-(2n**(96n-1n)),K.minInt104=-(2n**(104n-1n)),K.minInt112=-(2n**(112n-1n)),K.minInt120=-(2n**(120n-1n)),K.minInt128=-(2n**(128n-1n)),K.minInt136=-(2n**(136n-1n)),K.minInt144=-(2n**(144n-1n)),K.minInt152=-(2n**(152n-1n)),K.minInt160=-(2n**(160n-1n)),K.minInt168=-(2n**(168n-1n)),K.minInt176=-(2n**(176n-1n)),K.minInt184=-(2n**(184n-1n)),K.minInt192=-(2n**(192n-1n)),K.minInt200=-(2n**(200n-1n)),K.minInt208=-(2n**(208n-1n)),K.minInt216=-(2n**(216n-1n)),K.minInt224=-(2n**(224n-1n)),K.minInt232=-(2n**(232n-1n)),K.minInt240=-(2n**(240n-1n)),K.minInt248=-(2n**(248n-1n)),K.minInt256=-(2n**(256n-1n)),K.maxUint8=2n**8n-1n,K.maxUint16=2n**16n-1n,K.maxUint24=2n**24n-1n,K.maxUint32=2n**32n-1n,K.maxUint40=2n**40n-1n,K.maxUint48=2n**48n-1n,K.maxUint56=2n**56n-1n,K.maxUint64=2n**64n-1n,K.maxUint72=2n**72n-1n,K.maxUint80=2n**80n-1n,K.maxUint88=2n**88n-1n,K.maxUint96=2n**96n-1n,K.maxUint104=2n**104n-1n,K.maxUint112=2n**112n-1n,K.maxUint120=2n**120n-1n,K.maxUint128=2n**128n-1n,K.maxUint136=2n**136n-1n,K.maxUint144=2n**144n-1n,K.maxUint152=2n**152n-1n,K.maxUint160=2n**160n-1n,K.maxUint168=2n**168n-1n,K.maxUint176=2n**176n-1n,K.maxUint184=2n**184n-1n,K.maxUint192=2n**192n-1n,K.maxUint200=2n**200n-1n,K.maxUint208=2n**208n-1n,K.maxUint216=2n**216n-1n,K.maxUint224=2n**224n-1n,K.maxUint232=2n**232n-1n,K.maxUint240=2n**240n-1n,K.maxUint248=2n**248n-1n,K.maxUint256=2n**256n-1n),K}var p8;function Ci(){if(p8)return Om;p8=1,Object.defineProperty(Om,"__esModule",{value:!0}),Om.assertRequest=i;const t=or(),e=IS(),r=Ei(),n=ua(),s=Xn();function i(o){const{account:a,maxFeePerGas:c,maxPriorityFeePerGas:u,to:l}=o,d=a?(0,t.parseAccount)(a):void 0;if(d&&!(0,s.isAddress)(d.address))throw new r.InvalidAddressError({address:d.address});if(l&&!(0,s.isAddress)(l))throw new r.InvalidAddressError({address:l});if(c&&c>e.maxUint256)throw new n.FeeCapTooHighError({maxFeePerGas:c});if(u&&c&&u>c)throw new n.TipAboveFeeCapError({maxFeePerGas:c,maxPriorityFeePerGas:u})}return Om}var KA={},sh={},To={},g8;function x0(){if(g8)return To;g8=1,Object.defineProperty(To,"__esModule",{value:!0}),To.MaxFeePerGasTooLowError=To.Eip1559FeesNotSupportedError=To.BaseFeeScalarError=void 0;const t=il(),e=Ke();class r extends e.BaseError{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}To.BaseFeeScalarError=r;class n extends e.BaseError{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}To.Eip1559FeesNotSupportedError=n;class s extends e.BaseError{constructor({maxPriorityFeePerGas:o}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${(0,t.formatGwei)(o)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}return To.MaxFeePerGasTooLowError=s,To}var ih={},Rm={},oh={},m8;function SS(){if(m8)return oh;m8=1,Object.defineProperty(oh,"__esModule",{value:!0}),oh.BlockNotFoundError=void 0;const t=Ke();class e extends t.BaseError{constructor({blockHash:n,blockNumber:s}){let i="Block";n&&(i=`Block at hash "${n}"`),s&&(i=`Block at number "${s}"`),super(`${i} could not be found.`,{name:"BlockNotFoundError"})}}return oh.BlockNotFoundError=e,oh}var kl={},ZA={},y8;function Zd(){return y8||(y8=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.defineTransaction=t.transactionType=void 0,t.formatTransaction=n;const e=fr(),r=R0();t.transactionType={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function n(i,o){const a={...i,blockHash:i.blockHash?i.blockHash:null,blockNumber:i.blockNumber?BigInt(i.blockNumber):null,chainId:i.chainId?(0,e.hexToNumber)(i.chainId):void 0,gas:i.gas?BigInt(i.gas):void 0,gasPrice:i.gasPrice?BigInt(i.gasPrice):void 0,maxFeePerBlobGas:i.maxFeePerBlobGas?BigInt(i.maxFeePerBlobGas):void 0,maxFeePerGas:i.maxFeePerGas?BigInt(i.maxFeePerGas):void 0,maxPriorityFeePerGas:i.maxPriorityFeePerGas?BigInt(i.maxPriorityFeePerGas):void 0,nonce:i.nonce?(0,e.hexToNumber)(i.nonce):void 0,to:i.to?i.to:null,transactionIndex:i.transactionIndex?Number(i.transactionIndex):null,type:i.type?t.transactionType[i.type]:void 0,typeHex:i.type?i.type:void 0,value:i.value?BigInt(i.value):void 0,v:i.v?BigInt(i.v):void 0};return i.authorizationList&&(a.authorizationList=s(i.authorizationList)),a.yParity=(()=>{if(i.yParity)return Number(i.yParity);if(typeof a.v=="bigint"){if(a.v===0n||a.v===27n)return 0;if(a.v===1n||a.v===28n)return 1;if(a.v>=35n)return a.v%2n===0n?1:0}})(),a.type==="legacy"&&(delete a.accessList,delete a.maxFeePerBlobGas,delete a.maxFeePerGas,delete a.maxPriorityFeePerGas,delete a.yParity),a.type==="eip2930"&&(delete a.maxFeePerBlobGas,delete a.maxFeePerGas,delete a.maxPriorityFeePerGas),a.type==="eip1559"&&delete a.maxFeePerBlobGas,a}t.defineTransaction=(0,r.defineFormatter)("transaction",n);function s(i){return i.map(o=>({address:o.address,chainId:Number(o.chainId),nonce:Number(o.nonce),r:o.r,s:o.s,yParity:Number(o.yParity)}))}})(ZA)),ZA}var b8;function dv(){if(b8)return kl;b8=1,Object.defineProperty(kl,"__esModule",{value:!0}),kl.defineBlock=void 0,kl.formatBlock=r;const t=R0(),e=Zd();function r(n,s){const i=(n.transactions??[]).map(o=>typeof o=="string"?o:(0,e.formatTransaction)(o));return{...n,baseFeePerGas:n.baseFeePerGas?BigInt(n.baseFeePerGas):null,blobGasUsed:n.blobGasUsed?BigInt(n.blobGasUsed):void 0,difficulty:n.difficulty?BigInt(n.difficulty):void 0,excessBlobGas:n.excessBlobGas?BigInt(n.excessBlobGas):void 0,gasLimit:n.gasLimit?BigInt(n.gasLimit):void 0,gasUsed:n.gasUsed?BigInt(n.gasUsed):void 0,hash:n.hash?n.hash:null,logsBloom:n.logsBloom?n.logsBloom:null,nonce:n.nonce?n.nonce:null,number:n.number?BigInt(n.number):null,size:n.size?BigInt(n.size):void 0,timestamp:n.timestamp?BigInt(n.timestamp):void 0,transactions:i,totalDifficulty:n.totalDifficulty?BigInt(n.totalDifficulty):null}}return kl.defineBlock=(0,t.defineFormatter)("block",r),kl}var w8;function cl(){if(w8)return Rm;w8=1,Object.defineProperty(Rm,"__esModule",{value:!0}),Rm.getBlock=n;const t=SS(),e=Ae(),r=dv();async function n(s,{blockHash:i,blockNumber:o,blockTag:a=s.experimental_blockTag??"latest",includeTransactions:c}={}){const u=c??!1,l=o!==void 0?(0,e.numberToHex)(o):void 0;let d=null;if(i?d=await s.request({method:"eth_getBlockByHash",params:[i,u]},{dedupe:!0}):d=await s.request({method:"eth_getBlockByNumber",params:[l||a,u]},{dedupe:!!l}),!d)throw new t.BlockNotFoundError({blockHash:i,blockNumber:o});return(s.chain?.formatters?.block?.format||r.formatBlock)(d,"getBlock")}return Rm}var xm={},E8;function TS(){if(E8)return xm;E8=1,Object.defineProperty(xm,"__esModule",{value:!0}),xm.getGasPrice=t;async function t(e){const r=await e.request({method:"eth_gasPrice"});return BigInt(r)}return xm}var v8;function l7(){if(v8)return ih;v8=1,Object.defineProperty(ih,"__esModule",{value:!0}),ih.estimateMaxPriorityFeePerGas=i,ih.internal_estimateMaxPriorityFeePerGas=o;const t=x0(),e=fr(),r=bt(),n=cl(),s=TS();async function i(a,c){return o(a,c)}async function o(a,c){const{block:u,chain:l=a.chain,request:d}=c||{};try{const f=l?.fees?.maxPriorityFeePerGas??l?.fees?.defaultPriorityFee;if(typeof f=="function"){const p=u||await(0,r.getAction)(a,n.getBlock,"getBlock")({}),h=await f({block:p,client:a,request:d});if(h===null)throw new Error;return h}if(typeof f<"u")return f;const g=await a.request({method:"eth_maxPriorityFeePerGas"});return(0,e.hexToBigInt)(g)}catch{const[f,g]=await Promise.all([u?Promise.resolve(u):(0,r.getAction)(a,n.getBlock,"getBlock")({}),(0,r.getAction)(a,s.getGasPrice,"getGasPrice")({})]);if(typeof f.baseFeePerGas!="bigint")throw new t.Eip1559FeesNotSupportedError;const p=g-f.baseFeePerGas;return p<0n?0n:p}}return ih}var _8;function d7(){if(_8)return sh;_8=1,Object.defineProperty(sh,"__esModule",{value:!0}),sh.estimateFeesPerGas=i,sh.internal_estimateFeesPerGas=o;const t=x0(),e=bt(),r=l7(),n=cl(),s=TS();async function i(a,c){return o(a,c)}async function o(a,c){const{block:u,chain:l=a.chain,request:d,type:f="eip1559"}=c||{},g=await(async()=>typeof l?.fees?.baseFeeMultiplier=="function"?l.fees.baseFeeMultiplier({block:u,client:a,request:d}):l?.fees?.baseFeeMultiplier??1.2)();if(g<1)throw new t.BaseFeeScalarError;const h=10**(g.toString().split(".")[1]?.length??0),y=w=>w*BigInt(Math.ceil(g*h))/BigInt(h),b=u||await(0,e.getAction)(a,n.getBlock,"getBlock")({});if(typeof l?.fees?.estimateFeesPerGas=="function"){const w=await l.fees.estimateFeesPerGas({block:u,client:a,multiply:y,request:d,type:f});if(w!==null)return w}if(f==="eip1559"){if(typeof b.baseFeePerGas!="bigint")throw new t.Eip1559FeesNotSupportedError;const w=typeof d?.maxPriorityFeePerGas=="bigint"?d.maxPriorityFeePerGas:await(0,r.internal_estimateMaxPriorityFeePerGas)(a,{block:b,chain:l,request:d}),m=y(b.baseFeePerGas);return{maxFeePerGas:d?.maxFeePerGas??m+w,maxPriorityFeePerGas:w}}return{gasPrice:d?.gasPrice??y(await(0,e.getAction)(a,s.getGasPrice,"getGasPrice")({}))}}return sh}var km={},A8;function fv(){if(A8)return km;A8=1,Object.defineProperty(km,"__esModule",{value:!0}),km.getTransactionCount=r;const t=fr(),e=Ae();async function r(n,{address:s,blockTag:i="latest",blockNumber:o}){const a=await n.request({method:"eth_getTransactionCount",params:[s,typeof o=="bigint"?(0,e.numberToHex)(o):i]},{dedupe:!!o});return(0,t.hexToNumber)(a)}return km}var Bm={},C8;function hv(){if(C8)return Bm;C8=1,Object.defineProperty(Bm,"__esModule",{value:!0}),Bm.blobsToCommitments=r;const t=Lt(),e=Ae();function r(n){const{kzg:s}=n,i=n.to??(typeof n.blobs[0]=="string"?"hex":"bytes"),o=typeof n.blobs[0]=="string"?n.blobs.map(c=>(0,t.hexToBytes)(c)):n.blobs,a=[];for(const c of o)a.push(Uint8Array.from(s.blobToKzgCommitment(c)));return i==="bytes"?a:a.map(c=>(0,e.bytesToHex)(c))}return Bm}var jm={},I8;function pv(){if(I8)return jm;I8=1,Object.defineProperty(jm,"__esModule",{value:!0}),jm.blobsToProofs=r;const t=Lt(),e=Ae();function r(n){const{kzg:s}=n,i=n.to??(typeof n.blobs[0]=="string"?"hex":"bytes"),o=typeof n.blobs[0]=="string"?n.blobs.map(u=>(0,t.hexToBytes)(u)):n.blobs,a=typeof n.commitments[0]=="string"?n.commitments.map(u=>(0,t.hexToBytes)(u)):n.commitments,c=[];for(let u=0;u<o.length;u++){const l=o[u],d=a[u];c.push(Uint8Array.from(s.computeBlobKzgProof(l,d)))}return i==="bytes"?c:c.map(u=>(0,e.bytesToHex)(u))}return jm}var Dm={},Um={},Mm={},Zs={},S8;function f7(){if(S8)return Zs;S8=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.sha224=Zs.SHA224=Zs.sha256=Zs.SHA256=void 0;const t=i7();return Zs.SHA256=t.SHA256,Zs.sha256=t.sha256,Zs.SHA224=t.SHA224,Zs.sha224=t.sha224,Zs}var T8;function PS(){if(T8)return Mm;T8=1,Object.defineProperty(Mm,"__esModule",{value:!0}),Mm.sha256=s;const t=f7(),e=Pn(),r=Lt(),n=Ae();function s(i,o){const a=o||"hex",c=(0,t.sha256)((0,e.isHex)(i,{strict:!1})?(0,r.toBytes)(i):i);return a==="bytes"?c:(0,n.toHex)(c)}return Mm}var P8;function NS(){if(P8)return Um;P8=1,Object.defineProperty(Um,"__esModule",{value:!0}),Um.commitmentToVersionedHash=r;const t=Ae(),e=PS();function r(n){const{commitment:s,version:i=1}=n,o=n.to??(typeof s=="string"?"hex":"bytes"),a=(0,e.sha256)(s,"bytes");return a.set([i],0),o==="bytes"?a:(0,t.bytesToHex)(a)}return Um}var N8;function OS(){if(N8)return Dm;N8=1,Object.defineProperty(Dm,"__esModule",{value:!0}),Dm.commitmentsToVersionedHashes=e;const t=NS();function e(r){const{commitments:n,version:s}=r,i=r.to??(typeof n[0]=="string"?"hex":"bytes"),o=[];for(const a of n)o.push((0,t.commitmentToVersionedHash)({commitment:a,to:i,version:s}));return o}return Dm}var Lm={},Fm={},YA={},O8;function tbe(){return O8||(O8=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.maxBytesPerTransaction=t.bytesPerBlob=t.fieldElementsPerBlob=t.bytesPerFieldElement=void 0;const e=6;t.bytesPerFieldElement=32,t.fieldElementsPerBlob=4096,t.bytesPerBlob=t.bytesPerFieldElement*t.fieldElementsPerBlob,t.maxBytesPerTransaction=t.bytesPerBlob*e-1-1*t.fieldElementsPerBlob*e})(YA)),YA}var Ys={},ah={},R8;function h7(){return R8||(R8=1,Object.defineProperty(ah,"__esModule",{value:!0}),ah.versionedHashVersionKzg=void 0,ah.versionedHashVersionKzg=1),ah}var x8;function p7(){if(x8)return Ys;x8=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.InvalidVersionedHashVersionError=Ys.InvalidVersionedHashSizeError=Ys.EmptyBlobError=Ys.BlobSizeTooLargeError=void 0;const t=h7(),e=Ke();class r extends e.BaseError{constructor({maxSize:a,size:c}){super("Blob size is too large.",{metaMessages:[`Max: ${a} bytes`,`Given: ${c} bytes`],name:"BlobSizeTooLargeError"})}}Ys.BlobSizeTooLargeError=r;class n extends e.BaseError{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}Ys.EmptyBlobError=n;class s extends e.BaseError{constructor({hash:a,size:c}){super(`Versioned hash "${a}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${c}`],name:"InvalidVersionedHashSizeError"})}}Ys.InvalidVersionedHashSizeError=s;class i extends e.BaseError{constructor({hash:a,version:c}){super(`Versioned hash "${a}" version is invalid.`,{metaMessages:[`Expected: ${t.versionedHashVersionKzg}`,`Received: ${c}`],name:"InvalidVersionedHashVersionError"})}}return Ys.InvalidVersionedHashVersionError=i,Ys}var k8;function g7(){if(k8)return Fm;k8=1,Object.defineProperty(Fm,"__esModule",{value:!0}),Fm.toBlobs=o;const t=tbe(),e=p7(),r=I0(),n=Jn(),s=Lt(),i=Ae();function o(a){const c=a.to??(typeof a.data=="string"?"hex":"bytes"),u=typeof a.data=="string"?(0,s.hexToBytes)(a.data):a.data,l=(0,n.size)(u);if(!l)throw new e.EmptyBlobError;if(l>t.maxBytesPerTransaction)throw new e.BlobSizeTooLargeError({maxSize:t.maxBytesPerTransaction,size:l});const d=[];let f=!0,g=0;for(;f;){const p=(0,r.createCursor)(new Uint8Array(t.bytesPerBlob));let h=0;for(;h<t.fieldElementsPerBlob;){const y=u.slice(g,g+(t.bytesPerFieldElement-1));if(p.pushByte(0),p.pushBytes(y),y.length<31){p.pushByte(128),f=!1;break}h++,g+=31}d.push(p)}return c==="bytes"?d.map(p=>p.bytes):d.map(p=>(0,i.bytesToHex)(p.bytes))}return Fm}var B8;function gv(){if(B8)return Lm;B8=1,Object.defineProperty(Lm,"__esModule",{value:!0}),Lm.toBlobSidecars=n;const t=hv(),e=pv(),r=g7();function n(s){const{data:i,kzg:o,to:a}=s,c=s.blobs??(0,r.toBlobs)({data:i,to:a}),u=s.commitments??(0,t.blobsToCommitments)({blobs:c,kzg:o,to:a}),l=s.proofs??(0,e.blobsToProofs)({blobs:c,commitments:u,kzg:o,to:a}),d=[];for(let f=0;f<c.length;f++)d.push({blob:c[f],commitment:u[f],proof:l[f]});return d}return Lm}var qm={},j8;function mv(){if(j8)return qm;j8=1,Object.defineProperty(qm,"__esModule",{value:!0}),qm.getTransactionType=e;const t=ts();function e(r){if(r.type)return r.type;if(typeof r.authorizationList<"u")return"eip7702";if(typeof r.blobs<"u"||typeof r.blobVersionedHashes<"u"||typeof r.maxFeePerBlobGas<"u"||typeof r.sidecars<"u")return"eip4844";if(typeof r.maxFeePerGas<"u"||typeof r.maxPriorityFeePerGas<"u")return"eip1559";if(typeof r.gasPrice<"u")return typeof r.accessList<"u"?"eip2930":"legacy";throw new t.InvalidSerializableTransactionError({transaction:r})}return qm}var Hm={},zm={},D8;function k0(){if(D8)return zm;D8=1,Object.defineProperty(zm,"__esModule",{value:!0}),zm.getTransactionError=n;const t=ua(),e=ts(),r=O0();function n(s,{docsPath:i,...o}){const a=(()=>{const c=(0,r.getNodeError)(s,o);return c instanceof t.UnknownNodeError?s:c})();return new e.TransactionExecutionError(a,{docsPath:i,...o})}return zm}var $m={},U8;function gc(){if(U8)return $m;U8=1,Object.defineProperty($m,"__esModule",{value:!0}),$m.getChainId=e;const t=fr();async function e(r){const n=await r.request({method:"eth_chainId"},{dedupe:!0});return(0,t.hexToNumber)(n)}return $m}var M8;function RS(){if(M8)return Hm;M8=1,Object.defineProperty(Hm,"__esModule",{value:!0}),Hm.fillTransaction=l;const t=or(),e=x0(),r=k0(),n=pc(),s=Zd(),i=Ai(),o=bt(),a=Ci(),c=cl(),u=gc();async function l(d,f){const{account:g=d.account,accessList:p,authorizationList:h,chain:y=d.chain,blobVersionedHashes:b,blobs:E,data:w,gas:m,gasPrice:_,maxFeePerBlobGas:C,maxFeePerGas:I,maxPriorityFeePerGas:P,nonce:T,nonceManager:R,to:U,type:k,value:O,...B}=f,v=await(async()=>{if(!g||!R||typeof T<"u")return T;const N=(0,t.parseAccount)(g),x=y?y.id:await(0,o.getAction)(d,u.getChainId,"getChainId")({});return await R.consume({address:N.address,chainId:x,client:d})})();(0,a.assertRequest)(f);const A=y?.formatters?.transactionRequest?.format,j=(A||i.formatTransactionRequest)({...(0,n.extract)(B,{format:A}),account:g?(0,t.parseAccount)(g):void 0,accessList:p,authorizationList:h,blobs:E,blobVersionedHashes:b,data:w,gas:m,gasPrice:_,maxFeePerBlobGas:C,maxFeePerGas:I,maxPriorityFeePerGas:P,nonce:v,to:U,type:k,value:O},"fillTransaction");try{const N=await d.request({method:"eth_fillTransaction",params:[j]}),D=(y?.formatters?.transaction?.format||s.formatTransaction)(N.tx);delete D.blockHash,delete D.blockNumber,delete D.r,delete D.s,delete D.transactionIndex,delete D.v,delete D.yParity,D.data=D.input,D.gas&&(D.gas=f.gas??D.gas),D.gasPrice&&(D.gasPrice=f.gasPrice??D.gasPrice),D.maxFeePerBlobGas&&(D.maxFeePerBlobGas=f.maxFeePerBlobGas??D.maxFeePerBlobGas),D.maxFeePerGas&&(D.maxFeePerGas=f.maxFeePerGas??D.maxFeePerGas),D.maxPriorityFeePerGas&&(D.maxPriorityFeePerGas=f.maxPriorityFeePerGas??D.maxPriorityFeePerGas),D.nonce&&(D.nonce=f.nonce??D.nonce);const M=await(async()=>{if(typeof y?.fees?.baseFeeMultiplier=="function"){const $=await(0,o.getAction)(d,c.getBlock,"getBlock")({});return y.fees.baseFeeMultiplier({block:$,client:d,request:f})}return y?.fees?.baseFeeMultiplier??1.2})();if(M<1)throw new e.BaseFeeScalarError;const F=10**(M.toString().split(".")[1]?.length??0),q=$=>$*BigInt(Math.ceil(M*F))/BigInt(F);return D.maxFeePerGas&&!f.maxFeePerGas&&(D.maxFeePerGas=q(D.maxFeePerGas)),D.gasPrice&&!f.gasPrice&&(D.gasPrice=q(D.gasPrice)),{raw:N.raw,transaction:{from:j.from,...D}}}catch(N){throw(0,r.getTransactionError)(N,{...f,chain:d.chain})}}return Hm}var L8;function B0(){return L8||(L8=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.supportsFillTransaction=t.eip1559NetworkCache=t.defaultParameters=void 0,t.prepareTransactionRequest=b;const e=or(),r=d7(),n=xS(),s=cl(),i=fv(),o=x0(),a=hv(),c=pv(),u=OS(),l=gv(),d=bt(),f=rl(),g=Ci(),p=mv(),h=RS(),y=gc();t.defaultParameters=["blobVersionedHashes","chainId","fees","gas","nonce","type"],t.eip1559NetworkCache=new Map,t.supportsFillTransaction=new f.LruMap(128);async function b(E,w){let m=w;const{account:_=E.account,chain:C=E.chain,nonceManager:I,parameters:P=t.defaultParameters}=m,T=(()=>{if(typeof C?.prepareTransactionRequest=="function")return{fn:C.prepareTransactionRequest,runAt:["beforeFillTransaction"]};if(Array.isArray(C?.prepareTransactionRequest))return{fn:C.prepareTransactionRequest[0],runAt:C.prepareTransactionRequest[1].runAt}})();let R;async function U(){return R||(typeof m.chainId<"u"?m.chainId:C?C.id:(R=await(0,d.getAction)(E,y.getChainId,"getChainId")({}),R))}const k=_&&(0,e.parseAccount)(_);let O=m.nonce;if(P.includes("nonce")&&typeof O>"u"&&k&&I){const M=await U();O=await I.consume({address:k.address,chainId:M,client:E})}T?.fn&&T.runAt?.includes("beforeFillTransaction")&&(m=await T.fn(m,{phase:"beforeFillTransaction"}),O??=m.nonce);const v=((P.includes("blobVersionedHashes")||P.includes("sidecars"))&&m.kzg&&m.blobs||t.supportsFillTransaction.get(E.uid)===!1||!["fees","gas"].some(L=>P.includes(L))?!1:!!(P.includes("chainId")&&typeof m.chainId!="number"||P.includes("nonce")&&typeof O!="number"||P.includes("fees")&&typeof m.gasPrice!="bigint"&&(typeof m.maxFeePerGas!="bigint"||typeof m.maxPriorityFeePerGas!="bigint")||P.includes("gas")&&typeof m.gas!="bigint"))?await(0,d.getAction)(E,h.fillTransaction,"fillTransaction")({...m,nonce:O}).then(M=>{const{chainId:L,from:F,gas:q,gasPrice:$,nonce:V,maxFeePerBlobGas:J,maxFeePerGas:Y,maxPriorityFeePerGas:Z,type:ee,...le}=M.transaction;return t.supportsFillTransaction.set(E.uid,!0),{...m,...F?{from:F}:{},...ee?{type:ee}:{},...typeof L<"u"?{chainId:L}:{},...typeof q<"u"?{gas:q}:{},...typeof $<"u"?{gasPrice:$}:{},...typeof V<"u"?{nonce:V}:{},...typeof J<"u"?{maxFeePerBlobGas:J}:{},...typeof Y<"u"?{maxFeePerGas:Y}:{},...typeof Z<"u"?{maxPriorityFeePerGas:Z}:{},..."nonceKey"in le&&typeof le.nonceKey<"u"?{nonceKey:le.nonceKey}:{}}}).catch(M=>(M.walk?.(q=>{const $=q;return $.name==="MethodNotFoundRpcError"||$.name==="MethodNotSupportedRpcError"})&&t.supportsFillTransaction.set(E.uid,!1),m)):m;O??=v.nonce,m={...v,...k?{from:k?.address}:{},...O?{nonce:O}:{}};const{blobs:A,gas:S,kzg:j,type:N}=m;T?.fn&&T.runAt?.includes("beforeFillParameters")&&(m=await T.fn(m,{phase:"beforeFillParameters"}));let x;async function D(){return x||(x=await(0,d.getAction)(E,s.getBlock,"getBlock")({blockTag:"latest"}),x)}if(P.includes("nonce")&&typeof O>"u"&&k&&!I&&(m.nonce=await(0,d.getAction)(E,i.getTransactionCount,"getTransactionCount")({address:k.address,blockTag:"pending"})),(P.includes("blobVersionedHashes")||P.includes("sidecars"))&&A&&j){const M=(0,a.blobsToCommitments)({blobs:A,kzg:j});if(P.includes("blobVersionedHashes")){const L=(0,u.commitmentsToVersionedHashes)({commitments:M,to:"hex"});m.blobVersionedHashes=L}if(P.includes("sidecars")){const L=(0,c.blobsToProofs)({blobs:A,commitments:M,kzg:j}),F=(0,l.toBlobSidecars)({blobs:A,commitments:M,proofs:L,to:"hex"});m.sidecars=F}}if(P.includes("chainId")&&(m.chainId=await U()),(P.includes("fees")||P.includes("type"))&&typeof N>"u")try{m.type=(0,p.getTransactionType)(m)}catch{let M=t.eip1559NetworkCache.get(E.uid);typeof M>"u"&&(M=typeof(await D())?.baseFeePerGas=="bigint",t.eip1559NetworkCache.set(E.uid,M)),m.type=M?"eip1559":"legacy"}if(P.includes("fees"))if(m.type!=="legacy"&&m.type!=="eip2930"){if(typeof m.maxFeePerGas>"u"||typeof m.maxPriorityFeePerGas>"u"){const M=await D(),{maxFeePerGas:L,maxPriorityFeePerGas:F}=await(0,r.internal_estimateFeesPerGas)(E,{block:M,chain:C,request:m});if(typeof m.maxPriorityFeePerGas>"u"&&m.maxFeePerGas&&m.maxFeePerGas<F)throw new o.MaxFeePerGasTooLowError({maxPriorityFeePerGas:F});m.maxPriorityFeePerGas=F,m.maxFeePerGas=L}}else{if(typeof m.maxFeePerGas<"u"||typeof m.maxPriorityFeePerGas<"u")throw new o.Eip1559FeesNotSupportedError;if(typeof m.gasPrice>"u"){const M=await D(),{gasPrice:L}=await(0,r.internal_estimateFeesPerGas)(E,{block:M,chain:C,request:m,type:"legacy"});m.gasPrice=L}}return P.includes("gas")&&typeof S>"u"&&(m.gas=await(0,d.getAction)(E,n.estimateGas,"estimateGas")({...m,account:k,prepare:k?.type==="local"?[]:["blobVersionedHashes"]})),T?.fn&&T.runAt?.includes("afterFillParameters")&&(m=await T.fn(m,{phase:"afterFillParameters"})),(0,g.assertRequest)(m),delete m.parameters,m}})(KA)),KA}var F8;function xS(){if(F8)return vm;F8=1,Object.defineProperty(vm,"__esModule",{value:!0}),vm.estimateGas=l;const t=or(),e=Ke(),r=N0(),n=Ae(),s=u7(),i=pc(),o=Ai(),a=CS(),c=Ci(),u=B0();async function l(d,f){const{account:g=d.account,prepare:p=!0}=f,h=g?(0,t.parseAccount)(g):void 0,y=(()=>{if(Array.isArray(p))return p;if(h?.type!=="local")return["blobVersionedHashes"]})();try{const b=await(async()=>{if(f.to)return f.to;if(f.authorizationList&&f.authorizationList.length>0)return await(0,r.recoverAuthorizationAddress)({authorization:f.authorizationList[0]}).catch(()=>{throw new e.BaseError("`to` is required. Could not infer from `authorizationList`")})})(),{accessList:E,authorizationList:w,blobs:m,blobVersionedHashes:_,blockNumber:C,blockTag:I,data:P,gas:T,gasPrice:R,maxFeePerBlobGas:U,maxFeePerGas:k,maxPriorityFeePerGas:O,nonce:B,value:v,stateOverride:A,...S}=p?await(0,u.prepareTransactionRequest)(d,{...f,parameters:y,to:b}):f;if(T&&f.gas!==T)return T;const N=(typeof C=="bigint"?(0,n.numberToHex)(C):void 0)||I,x=(0,a.serializeStateOverride)(A);(0,c.assertRequest)(f);const D=d.chain?.formatters?.transactionRequest?.format,L=(D||o.formatTransactionRequest)({...(0,i.extract)(S,{format:D}),account:h,accessList:E,authorizationList:w,blobs:m,blobVersionedHashes:_,data:P,gasPrice:R,maxFeePerBlobGas:U,maxFeePerGas:k,maxPriorityFeePerGas:O,nonce:B,to:b,value:v},"estimateGas");return BigInt(await d.request({method:"eth_estimateGas",params:x?[L,N??d.experimental_blockTag??"latest",x]:N?[L,N]:[L]}))}catch(b){throw(0,s.getEstimateGasError)(b,{...f,account:h,chain:d.chain})}}return vm}var q8;function m7(){if(q8)return um;q8=1,Object.defineProperty(um,"__esModule",{value:!0}),um.estimateContractGas=i;const t=or(),e=es(),r=fc(),n=bt(),s=xS();async function i(o,a){const{abi:c,address:u,args:l,functionName:d,dataSuffix:f,...g}=a,p=(0,e.encodeFunctionData)({abi:c,args:l,functionName:d});try{return await(0,n.getAction)(o,s.estimateGas,"estimateGas")({data:`${p}${f?f.replace("0x",""):""}`,to:u,...g})}catch(h){const y=g.account?(0,t.parseAccount)(g.account):void 0;throw(0,r.getContractError)(h,{abi:c,address:u,args:l,docsPath:"/docs/contract/estimateContractGas",functionName:d,sender:y?.address})}}return um}var Vm={},Gm={},Wm={},Km={},H8;function Ii(){if(H8)return Km;H8=1,Object.defineProperty(Km,"__esModule",{value:!0}),Km.isAddressEqual=r;const t=Ei(),e=Xn();function r(n,s){if(!(0,e.isAddress)(n,{strict:!1}))throw new t.InvalidAddressError({address:n});if(!(0,e.isAddress)(s,{strict:!1}))throw new t.InvalidAddressError({address:s});return n.toLowerCase()===s.toLowerCase()}return Km}var Zm={},z8;function j0(){if(z8)return Zm;z8=1,Object.defineProperty(Zm,"__esModule",{value:!0}),Zm.decodeEventLog=a;const t=er(),e=t7(),r=Jn(),n=Kd(),s=uc(),i=oa(),o="/docs/contract/decodeEventLog";function a(u){const{abi:l,data:d,strict:f,topics:g}=u,p=f??!0,[h,...y]=g;if(!h)throw new t.AbiEventSignatureEmptyTopicsError({docsPath:o});const b=l.find(P=>P.type==="event"&&h===(0,n.toEventSelector)((0,i.formatAbiItem)(P)));if(!(b&&"name"in b)||b.type!=="event")throw new t.AbiEventSignatureNotFoundError(h,{docsPath:o});const{name:E,inputs:w}=b,m=w?.some(P=>!("name"in P&&P.name)),_=m?[]:{},C=w.map((P,T)=>[P,T]).filter(([P])=>"indexed"in P&&P.indexed);for(let P=0;P<C.length;P++){const[T,R]=C[P],U=y[P];if(!U)throw new t.DecodeLogTopicsMismatch({abiItem:b,param:T});_[m?R:T.name||R]=c({param:T,value:U})}const I=w.filter(P=>!("indexed"in P&&P.indexed));if(I.length>0){if(d&&d!=="0x")try{const P=(0,s.decodeAbiParameters)(I,d);if(P)if(m)for(let T=0;T<w.length;T++)_[T]=_[T]??P.shift();else for(let T=0;T<I.length;T++)_[I[T].name]=P[T]}catch(P){if(p)throw P instanceof t.AbiDecodingDataSizeTooSmallError||P instanceof e.PositionOutOfBoundsError?new t.DecodeLogDataMismatch({abiItem:b,data:d,params:I,size:(0,r.size)(d)}):P}else if(p)throw new t.DecodeLogDataMismatch({abiItem:b,data:"0x",params:I,size:0})}return{eventName:E,args:Object.values(_).length>0?_:void 0}}function c({param:u,value:l}){return u.type==="string"||u.type==="bytes"||u.type==="tuple"||u.type.match(/^(.*)\[(\d+)?\]$/)?l:((0,s.decodeAbiParameters)([u],l)||[])[0]}return Zm}var $8;function D0(){if($8)return Wm;$8=1,Object.defineProperty(Wm,"__esModule",{value:!0}),Wm.parseEventLogs=o;const t=er(),e=Ii(),r=Lt(),n=Qn(),s=Kd(),i=j0();function o(c){const{abi:u,args:l,logs:d,strict:f=!0}=c,g=(()=>{if(c.eventName)return Array.isArray(c.eventName)?c.eventName:[c.eventName]})();return d.map(p=>{try{const h=u.find(b=>b.type==="event"&&p.topics[0]===(0,s.toEventSelector)(b));if(!h)return null;const y=(0,i.decodeEventLog)({...p,abi:[h],strict:f});return g&&!g.includes(y.eventName)||!a({args:y.args,inputs:h.inputs,matchArgs:l})?null:{...y,...p}}catch(h){let y,b;if(h instanceof t.AbiEventSignatureNotFoundError)return null;if(h instanceof t.DecodeLogDataMismatch||h instanceof t.DecodeLogTopicsMismatch){if(f)return null;y=h.abiItem.name,b=h.abiItem.inputs?.some(E=>!("name"in E&&E.name))}return{...p,args:b?[]:{},eventName:y}}}).filter(Boolean)}function a(c){const{args:u,inputs:l,matchArgs:d}=c;if(!d)return!0;if(!u)return!1;function f(g,p,h){try{return g.type==="address"?(0,e.isAddressEqual)(p,h):g.type==="string"||g.type==="bytes"?(0,n.keccak256)((0,r.toBytes)(p))===h:p===h}catch{return!1}}return Array.isArray(u)&&Array.isArray(d)?d.every((g,p)=>{if(g==null)return!0;const h=l[p];return h?(Array.isArray(g)?g:[g]).some(b=>f(h,b,u[p])):!1}):typeof u=="object"&&!Array.isArray(u)&&typeof d=="object"&&!Array.isArray(d)?Object.entries(d).every(([g,p])=>{if(p==null)return!0;const h=l.find(b=>b.name===g);return h?(Array.isArray(p)?p:[p]).some(b=>f(h,b,u[g])):!1}):!1}return Wm}var Ym={},V8;function la(){if(V8)return Ym;V8=1,Object.defineProperty(Ym,"__esModule",{value:!0}),Ym.formatLog=t;function t(e,{args:r,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:r,eventName:n}:{}}}return Ym}var G8;function kS(){if(G8)return Gm;G8=1,Object.defineProperty(Gm,"__esModule",{value:!0}),Gm.getLogs=s;const t=sl(),e=D0(),r=Ae(),n=la();async function s(i,{address:o,blockHash:a,fromBlock:c,toBlock:u,event:l,events:d,args:f,strict:g}={}){const p=g??!1,h=d??(l?[l]:void 0);let y=[];h&&(y=[h.flatMap(m=>(0,t.encodeEventTopics)({abi:[m],eventName:m.name,args:d?void 0:f}))],l&&(y=y[0]));let b;a?b=await i.request({method:"eth_getLogs",params:[{address:o,topics:y,blockHash:a}]}):b=await i.request({method:"eth_getLogs",params:[{address:o,topics:y,fromBlock:typeof c=="bigint"?(0,r.numberToHex)(c):c,toBlock:typeof u=="bigint"?(0,r.numberToHex)(u):u}]});const E=b.map(w=>(0,n.formatLog)(w));return h?(0,e.parseEventLogs)({abi:h,args:f,logs:E,strict:p}):E}return Gm}var W8;function BS(){if(W8)return Vm;W8=1,Object.defineProperty(Vm,"__esModule",{value:!0}),Vm.getContractEvents=n;const t=ca(),e=bt(),r=kS();async function n(s,i){const{abi:o,address:a,args:c,blockHash:u,eventName:l,fromBlock:d,toBlock:f,strict:g}=i,p=l?(0,t.getAbiItem)({abi:o,name:l}):void 0,h=p?void 0:o.filter(y=>y.type==="event");return(0,e.getAction)(s,r.getLogs,"getLogs")({address:a,args:c,blockHash:u,event:p,events:h,fromBlock:d,toBlock:f,strict:g})}return Vm}var Jm={},Qm={},K8;function da(){if(K8)return Qm;K8=1,Object.defineProperty(Qm,"__esModule",{value:!0}),Qm.decodeFunctionResult=s;const t=er(),e=uc(),r=ca(),n="/docs/contract/decodeFunctionResult";function s(i){const{abi:o,args:a,functionName:c,data:u}=i;let l=o[0];if(c){const f=(0,r.getAbiItem)({abi:o,args:a,name:c});if(!f)throw new t.AbiFunctionNotFoundError(c,{docsPath:n});l=f}if(l.type!=="function")throw new t.AbiFunctionNotFoundError(void 0,{docsPath:n});if(!l.outputs)throw new t.AbiFunctionOutputsNotFoundError(l.name,{docsPath:n});const d=(0,e.decodeAbiParameters)(l.outputs,u);if(d&&d.length>1)return d;if(d&&d.length===1)return d[0]}return Qm}var ch={},uh={},Xe={},ut={},lh={},Bl={},dh={},Z8;function rbe(){return Z8||(Z8=1,Object.defineProperty(dh,"__esModule",{value:!0}),dh.version=void 0,dh.version="0.1.1"),dh}var Y8;function nbe(){if(Y8)return Bl;Y8=1,Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.getUrl=e,Bl.getVersion=r,Bl.prettyPrint=n;const t=rbe();function e(s){return s}function r(){return t.version}function n(s){if(!s)return"";const i=Object.entries(s).map(([a,c])=>c===void 0||c===!1?null:[a,c]).filter(Boolean),o=i.reduce((a,[c])=>Math.max(a,c.length),0);return i.map(([a,c])=>`  ${`${a}:`.padEnd(o+1)}  ${c}`).join(`
`)}return Bl}var J8;function As(){if(J8)return lh;J8=1,Object.defineProperty(lh,"__esModule",{value:!0}),lh.BaseError=void 0;const t=nbe();class e extends Error{constructor(s,i={}){const o=(()=>{if(i.cause instanceof e){if(i.cause.details)return i.cause.details;if(i.cause.shortMessage)return i.cause.shortMessage}return i.cause&&"details"in i.cause&&typeof i.cause.details=="string"?i.cause.details:i.cause?.message?i.cause.message:i.details})(),a=i.cause instanceof e&&i.cause.docsPath||i.docsPath,u=`https://oxlib.sh${a??""}`,l=[s||"An error occurred.",...i.metaMessages?["",...i.metaMessages]:[],...o||a?["",o?`Details: ${o}`:void 0,a?`See: ${u}`:void 0]:[]].filter(d=>typeof d=="string").join(`
`);super(l,i.cause?{cause:i.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${(0,t.getVersion)()}`}),this.cause=i.cause,this.details=o,this.docs=u,this.docsPath=a,this.shortMessage=s}walk(s){return r(this,s)}}lh.BaseError=e;function r(n,s){return s?.(n)?n:n&&typeof n=="object"&&"cause"in n&&n.cause?r(n.cause,s):s?null:n}return lh}var JA={},Q8;function y7(){return Q8||(Q8=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.charCodeMap=void 0,t.assertSize=r,t.assertStartOffset=n,t.assertEndOffset=s,t.charCodeToBase16=i,t.pad=o,t.trim=a;const e=to();function r(c,u){if(e.size(c)>u)throw new e.SizeOverflowError({givenSize:e.size(c),maxSize:u})}function n(c,u){if(typeof u=="number"&&u>0&&u>e.size(c)-1)throw new e.SliceOffsetOutOfBoundsError({offset:u,position:"start",size:e.size(c)})}function s(c,u,l){if(typeof u=="number"&&typeof l=="number"&&e.size(c)!==l-u)throw new e.SliceOffsetOutOfBoundsError({offset:l,position:"end",size:e.size(c)})}t.charCodeMap={zero:48,nine:57,A:65,F:70,a:97,f:102};function i(c){if(c>=t.charCodeMap.zero&&c<=t.charCodeMap.nine)return c-t.charCodeMap.zero;if(c>=t.charCodeMap.A&&c<=t.charCodeMap.F)return c-(t.charCodeMap.A-10);if(c>=t.charCodeMap.a&&c<=t.charCodeMap.f)return c-(t.charCodeMap.a-10)}function o(c,u={}){const{dir:l,size:d=32}=u;if(d===0)return c;if(c.length>d)throw new e.SizeExceedsPaddingSizeError({size:c.length,targetSize:d,type:"Bytes"});const f=new Uint8Array(d);for(let g=0;g<d;g++){const p=l==="right";f[p?g:d-g-1]=c[p?g:c.length-g-1]}return f}function a(c,u={}){const{dir:l="left"}=u;let d=c,f=0;for(let g=0;g<d.length-1&&d[l==="left"?g:d.length-g-1].toString()==="0";g++)f++;return d=l==="left"?d.slice(f):d.slice(0,d.length-f),d}})(JA)),JA}var xa={},X8;function b7(){if(X8)return xa;X8=1,Object.defineProperty(xa,"__esModule",{value:!0}),xa.assertSize=e,xa.assertStartOffset=r,xa.assertEndOffset=n,xa.pad=s,xa.trim=i;const t=Xr();function e(o,a){if(t.size(o)>a)throw new t.SizeOverflowError({givenSize:t.size(o),maxSize:a})}function r(o,a){if(typeof a=="number"&&a>0&&a>t.size(o)-1)throw new t.SliceOffsetOutOfBoundsError({offset:a,position:"start",size:t.size(o)})}function n(o,a,c){if(typeof a=="number"&&typeof c=="number"&&t.size(o)!==c-a)throw new t.SliceOffsetOutOfBoundsError({offset:c,position:"end",size:t.size(o)})}function s(o,a={}){const{dir:c,size:u=32}=a;if(u===0)return o;const l=o.replace("0x","");if(l.length>u*2)throw new t.SizeExceedsPaddingSizeError({size:Math.ceil(l.length/2),targetSize:u,type:"Hex"});return`0x${l[c==="right"?"padEnd":"padStart"](u*2,"0")}`}function i(o,a={}){const{dir:c="left"}=a;let u=o.replace("0x",""),l=0;for(let d=0;d<u.length-1&&u[c==="left"?d:u.length-d-1].toString()==="0";d++)l++;return u=c==="left"?u.slice(l):u.slice(0,u.length-l),u==="0"?"0x":c==="right"&&u.length%2===1?`0x${u}0`:`0x${u}`}return xa}var fh={},e3;function yv(){if(e3)return fh;e3=1,Object.defineProperty(fh,"__esModule",{value:!0}),fh.parse=e,fh.stringify=r;const t="#__bigint";function e(n,s){return JSON.parse(n,(i,o)=>{const a=o;return typeof a=="string"&&a.endsWith(t)?BigInt(a.slice(0,-t.length)):typeof s=="function"?s(i,a):a})}function r(n,s,i){return JSON.stringify(n,(o,a)=>typeof s=="function"?s(o,a):typeof a=="bigint"?a.toString()+t:a,i)}return fh}var t3;function to(){if(t3)return ut;t3=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.SizeExceedsPaddingSizeError=ut.SliceOffsetOutOfBoundsError=ut.SizeOverflowError=ut.InvalidBytesTypeError=ut.InvalidBytesBooleanError=void 0,ut.assert=c,ut.concat=u,ut.from=l,ut.fromArray=d,ut.fromBoolean=f,ut.fromHex=g,ut.fromNumber=p,ut.fromString=h,ut.isEqual=y,ut.padLeft=b,ut.padRight=E,ut.random=w,ut.size=m,ut.slice=_,ut.toBigInt=C,ut.toBoolean=I,ut.toHex=P,ut.toNumber=T,ut.toString=R,ut.trimLeft=U,ut.trimRight=k,ut.validate=O;const t=ol(),e=As(),r=Xr(),n=y7(),s=b7(),i=yv(),o=new TextDecoder,a=new TextEncoder;function c(N){if(!(N instanceof Uint8Array)){if(!N)throw new v(N);if(typeof N!="object")throw new v(N);if(!("BYTES_PER_ELEMENT"in N))throw new v(N);if(N.BYTES_PER_ELEMENT!==1||N.constructor.name!=="Uint8Array")throw new v(N)}}function u(...N){let x=0;for(const M of N)x+=M.length;const D=new Uint8Array(x);for(let M=0,L=0;M<N.length;M++){const F=N[M];D.set(F,L),L+=F.length}return D}function l(N){return N instanceof Uint8Array?N:typeof N=="string"?g(N):d(N)}function d(N){return N instanceof Uint8Array?N:new Uint8Array(N)}function f(N,x={}){const{size:D}=x,M=new Uint8Array(1);return M[0]=Number(N),typeof D=="number"?(n.assertSize(M,D),b(M,D)):M}function g(N,x={}){const{size:D}=x;let M=N;D&&(s.assertSize(N,D),M=r.padRight(N,D));let L=M.slice(2);L.length%2&&(L=`0${L}`);const F=L.length/2,q=new Uint8Array(F);for(let $=0,V=0;$<F;$++){const J=n.charCodeToBase16(L.charCodeAt(V++)),Y=n.charCodeToBase16(L.charCodeAt(V++));if(J===void 0||Y===void 0)throw new e.BaseError(`Invalid byte sequence ("${L[V-2]}${L[V-1]}" in "${L}").`);q[$]=J*16+Y}return q}function p(N,x){const D=r.fromNumber(N,x);return g(D)}function h(N,x={}){const{size:D}=x,M=a.encode(N);return typeof D=="number"?(n.assertSize(M,D),E(M,D)):M}function y(N,x){return(0,t.equalBytes)(N,x)}function b(N,x){return n.pad(N,{dir:"left",size:x})}function E(N,x){return n.pad(N,{dir:"right",size:x})}function w(N){return crypto.getRandomValues(new Uint8Array(N))}function m(N){return N.length}function _(N,x,D,M={}){const{strict:L}=M;n.assertStartOffset(N,x);const F=N.slice(x,D);return L&&n.assertEndOffset(F,x,D),F}function C(N,x={}){const{size:D}=x;typeof D<"u"&&n.assertSize(N,D);const M=r.fromBytes(N,x);return r.toBigInt(M,x)}function I(N,x={}){const{size:D}=x;let M=N;if(typeof D<"u"&&(n.assertSize(M,D),M=U(M)),M.length>1||M[0]>1)throw new B(M);return!!M[0]}function P(N,x={}){return r.fromBytes(N,x)}function T(N,x={}){const{size:D}=x;typeof D<"u"&&n.assertSize(N,D);const M=r.fromBytes(N,x);return r.toNumber(M,x)}function R(N,x={}){const{size:D}=x;let M=N;return typeof D<"u"&&(n.assertSize(M,D),M=k(M)),o.decode(M)}function U(N){return n.trim(N,{dir:"left"})}function k(N){return n.trim(N,{dir:"right"})}function O(N){try{return c(N),!0}catch{return!1}}class B extends e.BaseError{constructor(x){super(`Bytes value \`${x}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}ut.InvalidBytesBooleanError=B;class v extends e.BaseError{constructor(x){super(`Value \`${typeof x=="object"?i.stringify(x):x}\` of type \`${typeof x}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}ut.InvalidBytesTypeError=v;class A extends e.BaseError{constructor({givenSize:x,maxSize:D}){super(`Size cannot exceed \`${D}\` bytes. Given size: \`${x}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}ut.SizeOverflowError=A;class S extends e.BaseError{constructor({offset:x,position:D,size:M}){super(`Slice ${D==="start"?"starting":"ending"} at offset \`${x}\` is out-of-bounds (size: \`${M}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}}ut.SliceOffsetOutOfBoundsError=S;class j extends e.BaseError{constructor({size:x,targetSize:D,type:M}){super(`${M.charAt(0).toUpperCase()}${M.slice(1).toLowerCase()} size (\`${x}\`) exceeds padding size (\`${D}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}return ut.SizeExceedsPaddingSizeError=j,ut}var r3;function Xr(){if(r3)return Xe;r3=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.SizeExceedsPaddingSizeError=Xe.SliceOffsetOutOfBoundsError=Xe.SizeOverflowError=Xe.InvalidLengthError=Xe.InvalidHexValueError=Xe.InvalidHexTypeError=Xe.InvalidHexBooleanError=Xe.IntegerOutOfRangeError=void 0,Xe.assert=c,Xe.concat=u,Xe.from=l,Xe.fromBoolean=d,Xe.fromBytes=f,Xe.fromNumber=g,Xe.fromString=p,Xe.isEqual=h,Xe.padLeft=y,Xe.padRight=b,Xe.random=E,Xe.slice=w,Xe.size=m,Xe.trimLeft=_,Xe.trimRight=C,Xe.toBigInt=I,Xe.toBoolean=P,Xe.toBytes=T,Xe.toNumber=R,Xe.toString=U,Xe.validate=k;const t=ol(),e=to(),r=As(),n=y7(),s=b7(),i=yv(),o=new TextEncoder,a=Array.from({length:256},(D,M)=>M.toString(16).padStart(2,"0"));function c(D,M={}){const{strict:L=!1}=M;if(!D)throw new v(D);if(typeof D!="string")throw new v(D);if(L&&!/^0x[0-9a-fA-F]*$/.test(D))throw new A(D);if(!D.startsWith("0x"))throw new A(D)}function u(...D){return`0x${D.reduce((M,L)=>M+L.replace("0x",""),"")}`}function l(D){return D instanceof Uint8Array?f(D):Array.isArray(D)?f(new Uint8Array(D)):D}function d(D,M={}){const L=`0x${Number(D)}`;return typeof M.size=="number"?(s.assertSize(L,M.size),y(L,M.size)):L}function f(D,M={}){let L="";for(let q=0;q<D.length;q++)L+=a[D[q]];const F=`0x${L}`;return typeof M.size=="number"?(s.assertSize(F,M.size),b(F,M.size)):F}function g(D,M={}){const{signed:L,size:F}=M,q=BigInt(D);let $;F?L?$=(1n<<BigInt(F)*8n-1n)-1n:$=2n**(BigInt(F)*8n)-1n:typeof D=="number"&&($=BigInt(Number.MAX_SAFE_INTEGER));const V=typeof $=="bigint"&&L?-$-1n:0;if($&&q>$||q<V){const Z=typeof D=="bigint"?"n":"";throw new O({max:$?`${$}${Z}`:void 0,min:`${V}${Z}`,signed:L,size:F,value:`${D}${Z}`})}const Y=`0x${(L&&q<0?(1n<<BigInt(F*8))+BigInt(q):q).toString(16)}`;return F?y(Y,F):Y}function p(D,M={}){return f(o.encode(D),M)}function h(D,M){return(0,t.equalBytes)(e.fromHex(D),e.fromHex(M))}function y(D,M){return s.pad(D,{dir:"left",size:M})}function b(D,M){return s.pad(D,{dir:"right",size:M})}function E(D){return f(e.random(D))}function w(D,M,L,F={}){const{strict:q}=F;s.assertStartOffset(D,M);const $=`0x${D.replace("0x","").slice((M??0)*2,(L??D.length)*2)}`;return q&&s.assertEndOffset($,M,L),$}function m(D){return Math.ceil((D.length-2)/2)}function _(D){return s.trim(D,{dir:"left"})}function C(D){return s.trim(D,{dir:"right"})}function I(D,M={}){const{signed:L}=M;M.size&&s.assertSize(D,M.size);const F=BigInt(D);if(!L)return F;const q=(D.length-2)/2,$=(1n<<BigInt(q)*8n)-1n,V=$>>1n;return F<=V?F:F-$-1n}function P(D,M={}){M.size&&s.assertSize(D,M.size);const L=_(D);if(L==="0x")return!1;if(L==="0x1")return!0;throw new B(D)}function T(D,M={}){return e.fromHex(D,M)}function R(D,M={}){const{signed:L,size:F}=M;return Number(!L&&!F?D:I(D,M))}function U(D,M={}){const{size:L}=M;let F=e.fromHex(D);return L&&(n.assertSize(F,L),F=e.trimRight(F)),new TextDecoder().decode(F)}function k(D,M={}){const{strict:L=!1}=M;try{return c(D,{strict:L}),!0}catch{return!1}}class O extends r.BaseError{constructor({max:M,min:L,signed:F,size:q,value:$}){super(`Number \`${$}\` is not in safe${q?` ${q*8}-bit`:""}${F?" signed":" unsigned"} integer range ${M?`(\`${L}\` to \`${M}\`)`:`(above \`${L}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}Xe.IntegerOutOfRangeError=O;class B extends r.BaseError{constructor(M){super(`Hex value \`"${M}"\` is not a valid boolean.`,{metaMessages:['The hex value must be `"0x0"` (false) or `"0x1"` (true).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexBooleanError"})}}Xe.InvalidHexBooleanError=B;class v extends r.BaseError{constructor(M){super(`Value \`${typeof M=="object"?i.stringify(M):M}\` of type \`${typeof M}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}Xe.InvalidHexTypeError=v;class A extends r.BaseError{constructor(M){super(`Value \`${M}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}Xe.InvalidHexValueError=A;class S extends r.BaseError{constructor(M){super(`Hex value \`"${M}"\` is an odd length (${M.length-2} nibbles).`,{metaMessages:["It must be an even length."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidLengthError"})}}Xe.InvalidLengthError=S;class j extends r.BaseError{constructor({givenSize:M,maxSize:L}){super(`Size cannot exceed \`${L}\` bytes. Given size: \`${M}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}Xe.SizeOverflowError=j;class N extends r.BaseError{constructor({offset:M,position:L,size:F}){super(`Slice ${L==="start"?"starting":"ending"} at offset \`${M}\` is out-of-bounds (size: \`${F}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}Xe.SliceOffsetOutOfBoundsError=N;class x extends r.BaseError{constructor({size:M,targetSize:L,type:F}){super(`${F.charAt(0).toUpperCase()}${F.slice(1).toLowerCase()} size (\`${M}\`) exceeds padding size (\`${L}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}return Xe.SizeExceedsPaddingSizeError=x,Xe}var hh={},n3;function sbe(){if(n3)return hh;n3=1,Object.defineProperty(hh,"__esModule",{value:!0}),hh.fromRpc=e,hh.toRpc=r;const t=Xr();function e(n){return{...n,amount:BigInt(n.amount),index:Number(n.index),validatorIndex:Number(n.validatorIndex)}}function r(n){return{address:n.address,amount:t.fromNumber(n.amount),index:t.fromNumber(n.index),validatorIndex:t.fromNumber(n.validatorIndex)}}return hh}var s3;function w7(){if(s3)return uh;s3=1,Object.defineProperty(uh,"__esModule",{value:!0}),uh.fromRpc=r,uh.toRpc=n;const t=Xr(),e=sbe();function r(s){return{...s.baseFeePerGas&&{baseFeePerGas:BigInt(s.baseFeePerGas)},...s.blobBaseFee&&{blobBaseFee:BigInt(s.blobBaseFee)},...s.feeRecipient&&{feeRecipient:s.feeRecipient},...s.gasLimit&&{gasLimit:BigInt(s.gasLimit)},...s.number&&{number:BigInt(s.number)},...s.prevRandao&&{prevRandao:BigInt(s.prevRandao)},...s.time&&{time:BigInt(s.time)},...s.withdrawals&&{withdrawals:s.withdrawals.map(e.fromRpc)}}}function n(s){return{...typeof s.baseFeePerGas=="bigint"&&{baseFeePerGas:t.fromNumber(s.baseFeePerGas)},...typeof s.blobBaseFee=="bigint"&&{blobBaseFee:t.fromNumber(s.blobBaseFee)},...typeof s.feeRecipient=="string"&&{feeRecipient:s.feeRecipient},...typeof s.gasLimit=="bigint"&&{gasLimit:t.fromNumber(s.gasLimit)},...typeof s.number=="bigint"&&{number:t.fromNumber(s.number)},...typeof s.prevRandao=="bigint"&&{prevRandao:t.fromNumber(s.prevRandao)},...typeof s.time=="bigint"&&{time:t.fromNumber(s.time)},...s.withdrawals&&{withdrawals:s.withdrawals.map(e.toRpc)}}}return uh}var Nt={},i3;function mc(){if(i3)return Nt;i3=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.erc4626Abi=Nt.erc721Abi=Nt.erc1155Abi=Nt.erc20Abi_bytes32=Nt.erc20Abi=Nt.erc6492SignatureValidatorAbi=Nt.erc1271Abi=Nt.addressResolverAbi=Nt.textResolverAbi=Nt.universalResolverReverseAbi=Nt.universalResolverResolveAbi=Nt.batchGatewayAbi=Nt.multicall3Abi=void 0,Nt.multicall3Abi=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],Nt.batchGatewayAbi=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}];const t=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}];return Nt.universalResolverResolveAbi=[...t,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Nt.universalResolverReverseAbi=[...t,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],Nt.textResolverAbi=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],Nt.addressResolverAbi=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],Nt.erc1271Abi=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],Nt.erc6492SignatureValidatorAbi=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],Nt.erc20Abi=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],Nt.erc20Abi_bytes32=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"bytes32"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"bytes32"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],Nt.erc1155Abi=[{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC1155InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC1155InvalidApprover",type:"error"},{inputs:[{internalType:"uint256",name:"idsLength",type:"uint256"},{internalType:"uint256",name:"valuesLength",type:"uint256"}],name:"ERC1155InvalidArrayLength",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"ERC1155InvalidOperator",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC1155InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC1155InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"ERC1155MissingApprovalForAll",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],Nt.erc721Abi=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}]},{type:"event",name:"ApprovalForAll",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"operator",type:"address"},{indexed:!1,name:"approved",type:"bool"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}]},{type:"function",name:"approve",stateMutability:"payable",inputs:[{name:"spender",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"getApproved",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{type:"address"}]},{type:"function",name:"isApprovedForAll",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"operator",type:"address"}],outputs:[{type:"bool"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"ownerOf",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"owner",type:"address"}]},{type:"function",name:"safeTransferFrom",stateMutability:"payable",inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]},{type:"function",name:"safeTransferFrom",stateMutability:"nonpayable",inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"id",type:"uint256"},{name:"data",type:"bytes"}],outputs:[]},{type:"function",name:"setApprovalForAll",stateMutability:"nonpayable",inputs:[{name:"operator",type:"address"},{name:"approved",type:"bool"}],outputs:[]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"tokenByIndex",stateMutability:"view",inputs:[{name:"index",type:"uint256"}],outputs:[{type:"uint256"}]},{type:"function",name:"tokenByIndex",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"index",type:"uint256"}],outputs:[{name:"tokenId",type:"uint256"}]},{type:"function",name:"tokenURI",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transferFrom",stateMutability:"payable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]}],Nt.erc4626Abi=[{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"receiver",type:"address"},{indexed:!1,name:"assets",type:"uint256"},{indexed:!1,name:"shares",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"receiver",type:"address"},{indexed:!0,name:"owner",type:"address"},{indexed:!1,name:"assets",type:"uint256"},{indexed:!1,name:"shares",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],name:"approve",outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"asset",outputs:[{name:"assetTokenAddress",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"}],name:"convertToAssets",outputs:[{name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"assets",type:"uint256"}],name:"convertToShares",outputs:[{name:"shares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"assets",type:"uint256"},{name:"receiver",type:"address"}],name:"deposit",outputs:[{name:"shares",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"caller",type:"address"}],name:"maxDeposit",outputs:[{name:"maxAssets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"caller",type:"address"}],name:"maxMint",outputs:[{name:"maxShares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"maxRedeem",outputs:[{name:"maxShares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"maxWithdraw",outputs:[{name:"maxAssets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"},{name:"receiver",type:"address"}],name:"mint",outputs:[{name:"assets",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"assets",type:"uint256"}],name:"previewDeposit",outputs:[{name:"shares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"}],name:"previewMint",outputs:[{name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"}],name:"previewRedeem",outputs:[{name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"assets",type:"uint256"}],name:"previewWithdraw",outputs:[{name:"shares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"},{name:"receiver",type:"address"},{name:"owner",type:"address"}],name:"redeem",outputs:[{name:"assets",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"totalAssets",outputs:[{name:"totalManagedAssets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"to",type:"address"},{name:"amount",type:"uint256"}],name:"transfer",outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"assets",type:"uint256"},{name:"receiver",type:"address"},{name:"owner",type:"address"}],name:"withdraw",outputs:[{name:"shares",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],Nt}var ph={},o3;function ibe(){return o3||(o3=1,Object.defineProperty(ph,"__esModule",{value:!0}),ph.aggregate3Signature=void 0,ph.aggregate3Signature="0x82ad56cb"),ph}var Js={},a3;function U0(){return a3||(a3=1,Object.defineProperty(Js,"__esModule",{value:!0}),Js.multicall3Bytecode=Js.erc6492SignatureValidatorByteCode=Js.deploylessCallViaFactoryBytecode=Js.deploylessCallViaBytecodeBytecode=void 0,Js.deploylessCallViaBytecodeBytecode="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Js.deploylessCallViaFactoryBytecode="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Js.erc6492SignatureValidatorByteCode="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",Js.multicall3Bytecode="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033"),Js}var as={},c3;function M0(){if(c3)return as;c3=1,Object.defineProperty(as,"__esModule",{value:!0}),as.InvalidChainIdError=as.ClientChainNotConfiguredError=as.ChainNotFoundError=as.ChainMismatchError=as.ChainDoesNotSupportContract=void 0;const t=Ke();class e extends t.BaseError{constructor({blockNumber:a,chain:c,contract:u}){super(`Chain "${c.name}" does not support contract "${u.name}".`,{metaMessages:["This could be due to any of the following:",...a&&u.blockCreated&&u.blockCreated>a?[`- The contract "${u.name}" was not deployed until block ${u.blockCreated} (current block ${a}).`]:[`- The chain does not have the contract "${u.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}as.ChainDoesNotSupportContract=e;class r extends t.BaseError{constructor({chain:a,currentChainId:c}){super(`The current chain of the wallet (id: ${c}) does not match the target chain for the transaction (id: ${a.id} â€“ ${a.name}).`,{metaMessages:[`Current Chain ID:  ${c}`,`Expected Chain ID: ${a.id} â€“ ${a.name}`],name:"ChainMismatchError"})}}as.ChainMismatchError=r;class n extends t.BaseError{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}as.ChainNotFoundError=n;class s extends t.BaseError{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}as.ClientChainNotConfiguredError=s;class i extends t.BaseError{constructor({chainId:a}){super(typeof a=="number"?`Chain ID "${a}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}return as.InvalidChainIdError=i,as}var Xm={},u3;function L0(){if(u3)return Xm;u3=1,Object.defineProperty(Xm,"__esModule",{value:!0}),Xm.encodeDeployData=s;const t=er(),e=Mr(),r=vi(),n="/docs/contract/encodeDeployData";function s(i){const{abi:o,args:a,bytecode:c}=i;if(!a||a.length===0)return c;const u=o.find(d=>"type"in d&&d.type==="constructor");if(!u)throw new t.AbiConstructorNotFoundError({docsPath:n});if(!("inputs"in u))throw new t.AbiConstructorParamsNotFoundError({docsPath:n});if(!u.inputs||u.inputs.length===0)throw new t.AbiConstructorParamsNotFoundError({docsPath:n});const l=(0,r.encodeAbiParameters)(u.inputs,a);return(0,e.concatHex)([c,l])}return Xm}var ey={},l3;function yc(){if(l3)return ey;l3=1,Object.defineProperty(ey,"__esModule",{value:!0}),ey.getChainContractAddress=e;const t=M0();function e({blockNumber:r,chain:n,contract:s}){const i=n?.contracts?.[s];if(!i)throw new t.ChainDoesNotSupportContract({chain:n,contract:{name:s}});if(r&&i.blockCreated&&i.blockCreated>r)throw new t.ChainDoesNotSupportContract({blockNumber:r,chain:n,contract:{name:s,blockCreated:i.blockCreated}});return i.address}return ey}var ty={},d3;function jS(){if(d3)return ty;d3=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.getCallError=n;const t=lc(),e=ua(),r=O0();function n(s,{docsPath:i,...o}){const a=(()=>{const c=(0,r.getNodeError)(s,o);return c instanceof e.UnknownNodeError?s:c})();return new t.CallExecutionError(a,{docsPath:i,...o})}return ty}var ry={},ny={},f3;function DS(){if(f3)return ny;f3=1,Object.defineProperty(ny,"__esModule",{value:!0}),ny.withResolvers=t;function t(){let e=()=>{},r=()=>{};return{promise:new Promise((s,i)=>{e=s,r=i}),resolve:e,reject:r}}return ny}var h3;function US(){if(h3)return ry;h3=1,Object.defineProperty(ry,"__esModule",{value:!0}),ry.createBatchScheduler=r;const t=DS(),e=new Map;function r({fn:n,id:s,shouldSplitBatch:i,wait:o=0,sort:a}){const c=async()=>{const g=d();u();const p=g.map(({args:h})=>h);p.length!==0&&n(p).then(h=>{a&&Array.isArray(h)&&h.sort(a);for(let y=0;y<g.length;y++){const{resolve:b}=g[y];b?.([h[y],h])}}).catch(h=>{for(let y=0;y<g.length;y++){const{reject:b}=g[y];b?.(h)}})},u=()=>e.delete(s),l=()=>d().map(({args:g})=>g),d=()=>e.get(s)||[],f=g=>e.set(s,[...d(),g]);return{flush:u,async schedule(g){const{promise:p,resolve:h,reject:y}=(0,t.withResolvers)();return i?.([...l(),g])&&c(),d().length>0?(f({args:g,resolve:h,reject:y}),p):(f({args:g,resolve:h,reject:y}),setTimeout(c,o),p)}}}return ry}var QA={},Po={},p3;function obe(){if(p3)return Po;p3=1,Object.defineProperty(Po,"__esModule",{value:!0}),Po.OffchainLookupSenderMismatchError=Po.OffchainLookupResponseMalformedError=Po.OffchainLookupError=void 0;const t=Qr(),e=Ke(),r=_S();class n extends e.BaseError{constructor({callbackSelector:a,cause:c,data:u,extraData:l,sender:d,urls:f}){super(c.shortMessage||"An error occurred while fetching for an offchain result.",{cause:c,metaMessages:[...c.metaMessages||[],c.metaMessages?.length?"":[],"Offchain Gateway Call:",f&&["  Gateway URL(s):",...f.map(g=>`    ${(0,r.getUrl)(g)}`)],`  Sender: ${d}`,`  Data: ${u}`,`  Callback selector: ${a}`,`  Extra data: ${l}`].flat(),name:"OffchainLookupError"})}}Po.OffchainLookupError=n;class s extends e.BaseError{constructor({result:a,url:c}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${(0,r.getUrl)(c)}`,`Response: ${(0,t.stringify)(a)}`],name:"OffchainLookupResponseMalformedError"})}}Po.OffchainLookupResponseMalformedError=s;class i extends e.BaseError{constructor({sender:a,to:c}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${c}`,`OffchainLookup sender address: ${a}`],name:"OffchainLookupSenderMismatchError"})}}return Po.OffchainLookupSenderMismatchError=i,Po}var XA={},sy={},g3;function MS(){if(g3)return sy;g3=1,Object.defineProperty(sy,"__esModule",{value:!0}),sy.decodeFunctionData=i;const t=er(),e=Hs(),r=nl(),n=uc(),s=oa();function i(o){const{abi:a,data:c}=o,u=(0,e.slice)(c,0,4),l=a.find(d=>d.type==="function"&&u===(0,r.toFunctionSelector)((0,s.formatAbiItem)(d)));if(!l)throw new t.AbiFunctionSignatureNotFoundError(u,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:l.name,args:"inputs"in l&&l.inputs&&l.inputs.length>0?(0,n.decodeAbiParameters)(l.inputs,(0,e.slice)(c,4)):void 0}}return sy}var iy={},m3;function LS(){if(m3)return iy;m3=1,Object.defineProperty(iy,"__esModule",{value:!0}),iy.encodeErrorResult=a;const t=er(),e=Mr(),r=nl(),n=vi(),s=oa(),i=ca(),o="/docs/contract/encodeErrorResult";function a(c){const{abi:u,errorName:l,args:d}=c;let f=u[0];if(l){const y=(0,i.getAbiItem)({abi:u,args:d,name:l});if(!y)throw new t.AbiErrorNotFoundError(l,{docsPath:o});f=y}if(f.type!=="error")throw new t.AbiErrorNotFoundError(void 0,{docsPath:o});const g=(0,s.formatAbiItem)(f),p=(0,r.toFunctionSelector)(g);let h="0x";if(d&&d.length>0){if(!f.inputs)throw new t.AbiErrorInputsNotFoundError(f.name,{docsPath:o});h=(0,n.encodeAbiParameters)(f.inputs,d)}return(0,e.concatHex)([p,h])}return iy}var oy={},y3;function FS(){if(y3)return oy;y3=1,Object.defineProperty(oy,"__esModule",{value:!0}),oy.encodeFunctionResult=s;const t=er(),e=vi(),r=ca(),n="/docs/contract/encodeFunctionResult";function s(i){const{abi:o,functionName:a,result:c}=i;let u=o[0];if(a){const d=(0,r.getAbiItem)({abi:o,name:a});if(!d)throw new t.AbiFunctionNotFoundError(a,{docsPath:n});u=d}if(u.type!=="function")throw new t.AbiFunctionNotFoundError(void 0,{docsPath:n});if(!u.outputs)throw new t.AbiFunctionOutputsNotFoundError(u.name,{docsPath:n});const l=(()=>{if(u.outputs.length===0)return[];if(u.outputs.length===1)return[c];if(Array.isArray(c))return c;throw new t.InvalidArrayError(c)})();return(0,e.encodeAbiParameters)(u.outputs,l)}return oy}var b3;function bv(){return b3||(b3=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.localBatchGatewayUrl=void 0,t.localBatchGatewayRequest=o;const e=mc(),r=wS(),n=MS(),s=LS(),i=FS();t.localBatchGatewayUrl="x-batch-gateway:true";async function o(c){const{data:u,ccipRequest:l}=c,{args:[d]}=(0,n.decodeFunctionData)({abi:e.batchGatewayAbi,data:u}),f=[],g=[];return await Promise.all(d.map(async(p,h)=>{try{g[h]=p.urls.includes(t.localBatchGatewayUrl)?await o({data:p.data,ccipRequest:l}):await l(p),f[h]=!1}catch(y){f[h]=!0,g[h]=a(y)}})),(0,i.encodeFunctionResult)({abi:e.batchGatewayAbi,functionName:"query",result:[f,g]})}function a(c){return c.name==="HttpRequestError"&&c.status?(0,s.encodeErrorResult)({abi:e.batchGatewayAbi,errorName:"HttpError",args:[c.status,c.shortMessage]}):(0,s.encodeErrorResult)({abi:[r.solidityError],errorName:"Error",args:["shortMessage"in c?c.shortMessage:c.message]})}})(XA)),XA}var w3;function qS(){return w3||(w3=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.offchainLookupAbiItem=t.offchainLookupSignature=void 0,t.offchainLookup=d,t.ccipRequest=f;const e=F0(),r=obe(),n=_i(),s=cv(),i=vi(),o=Ii(),a=Mr(),c=Pn(),u=bv(),l=Qr();t.offchainLookupSignature="0x556f1830",t.offchainLookupAbiItem={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function d(g,{blockNumber:p,blockTag:h,data:y,to:b}){const{args:E}=(0,s.decodeErrorResult)({data:y,abi:[t.offchainLookupAbiItem]}),[w,m,_,C,I]=E,{ccipRead:P}=g,T=P&&typeof P?.request=="function"?P.request:f;try{if(!(0,o.isAddressEqual)(b,w))throw new r.OffchainLookupSenderMismatchError({sender:w,to:b});const R=m.includes(u.localBatchGatewayUrl)?await(0,u.localBatchGatewayRequest)({data:_,ccipRequest:T}):await T({data:_,sender:w,urls:m}),{data:U}=await(0,e.call)(g,{blockNumber:p,blockTag:h,data:(0,a.concat)([C,(0,i.encodeAbiParameters)([{type:"bytes"},{type:"bytes"}],[R,I])]),to:b});return U}catch(R){throw new r.OffchainLookupError({callbackSelector:C,cause:R,data:y,extraData:I,sender:w,urls:m})}}async function f({data:g,sender:p,urls:h}){let y=new Error("An unknown error occurred.");for(let b=0;b<h.length;b++){const E=h[b],w=E.includes("{data}")?"GET":"POST",m=w==="POST"?{data:g,sender:p}:void 0,_=w==="POST"?{"Content-Type":"application/json"}:{};try{const C=await fetch(E.replace("{sender}",p.toLowerCase()).replace("{data}",g),{body:JSON.stringify(m),headers:_,method:w});let I;if(C.headers.get("Content-Type")?.startsWith("application/json")?I=(await C.json()).data:I=await C.text(),!C.ok){y=new n.HttpRequestError({body:m,details:I?.error?(0,l.stringify)(I.error):C.statusText,headers:C.headers,status:C.status,url:E});continue}if(!(0,c.isHex)(I)){y=new r.OffchainLookupResponseMalformedError({result:I,url:E});continue}return I}catch(C){y=new n.HttpRequestError({body:m,details:C.message,url:E})}}throw y}})(QA)),QA}var E3;function F0(){if(E3)return ch;E3=1,Object.defineProperty(ch,"__esModule",{value:!0}),ch.call=m,ch.getRevertErrorData=T;const t=oc(),e=w7(),r=or(),n=mc(),s=ibe(),i=U0(),o=Ke(),a=M0(),c=lc(),u=da(),l=L0(),d=es(),f=yc(),g=Ae(),p=jS(),h=pc(),y=Ai(),b=US(),E=CS(),w=Ci();async function m(R,U){const{account:k=R.account,authorizationList:O,batch:B=!!R.batch?.multicall,blockNumber:v,blockTag:A=R.experimental_blockTag??"latest",accessList:S,blobs:j,blockOverrides:N,code:x,data:D,factory:M,factoryData:L,gas:F,gasPrice:q,maxFeePerBlobGas:$,maxFeePerGas:V,maxPriorityFeePerGas:J,nonce:Y,to:Z,value:ee,stateOverride:le,...X}=U,se=k?(0,r.parseAccount)(k):void 0;if(x&&(M||L))throw new o.BaseError("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(x&&Z)throw new o.BaseError("Cannot provide both `code` & `to` as parameters.");const fe=x&&D,Oe=M&&L&&Z&&D,Re=fe||Oe,Me=fe?I({code:x,data:D}):Oe?P({data:D,factory:M,factoryData:L,to:Z}):D;try{(0,w.assertRequest)(U);const de=(typeof v=="bigint"?(0,g.numberToHex)(v):void 0)||A,te=N?e.toRpc(N):void 0,Pt=(0,E.serializeStateOverride)(le),Ft=R.chain?.formatters?.transactionRequest?.format,re=(Ft||y.formatTransactionRequest)({...(0,h.extract)(X,{format:Ft}),accessList:S,account:se,authorizationList:O,blobs:j,data:Me,gas:F,gasPrice:q,maxFeePerBlobGas:$,maxFeePerGas:V,maxPriorityFeePerGas:J,nonce:Y,to:Re?void 0:Z,value:ee},"call");if(B&&_({request:re})&&!Pt&&!te)try{return await C(R,{...re,blockNumber:v,blockTag:A})}catch(De){if(!(De instanceof a.ClientChainNotConfiguredError)&&!(De instanceof a.ChainDoesNotSupportContract))throw De}const ce=(()=>{const De=[re,de];return Pt&&te?[...De,Pt,te]:Pt?[...De,Pt]:te?[...De,{},te]:De})(),ye=await R.request({method:"eth_call",params:ce});return ye==="0x"?{data:void 0}:{data:ye}}catch(Ze){const de=T(Ze),{offchainLookup:te,offchainLookupSignature:Pt}=await Promise.resolve().then(()=>qS());if(R.ccipRead!==!1&&de?.slice(0,10)===Pt&&Z)return{data:await te(R,{data:de,to:Z})};throw Re&&de?.slice(0,10)==="0x101bb98d"?new c.CounterfactualDeploymentFailedError({factory:M}):(0,p.getCallError)(Ze,{...U,account:se,chain:R.chain})}}function _({request:R}){const{data:U,to:k,...O}=R;return!(!U||U.startsWith(s.aggregate3Signature)||!k||Object.values(O).filter(B=>typeof B<"u").length>0)}async function C(R,U){const{batchSize:k=1024,deployless:O=!1,wait:B=0}=typeof R.batch?.multicall=="object"?R.batch.multicall:{},{blockNumber:v,blockTag:A=R.experimental_blockTag??"latest",data:S,to:j}=U,N=(()=>{if(O)return null;if(U.multicallAddress)return U.multicallAddress;if(R.chain)return(0,f.getChainContractAddress)({blockNumber:v,chain:R.chain,contract:"multicall3"});throw new a.ClientChainNotConfiguredError})(),D=(typeof v=="bigint"?(0,g.numberToHex)(v):void 0)||A,{schedule:M}=(0,b.createBatchScheduler)({id:`${R.uid}.${D}`,wait:B,shouldSplitBatch(q){return q.reduce((V,{data:J})=>V+(J.length-2),0)>k*2},fn:async q=>{const $=q.map(Y=>({allowFailure:!0,callData:Y.data,target:Y.to})),V=(0,d.encodeFunctionData)({abi:n.multicall3Abi,args:[$],functionName:"aggregate3"}),J=await R.request({method:"eth_call",params:[{...N===null?{data:I({code:i.multicall3Bytecode,data:V})}:{to:N,data:V}},D]});return(0,u.decodeFunctionResult)({abi:n.multicall3Abi,args:[$],functionName:"aggregate3",data:J||"0x"})}}),[{returnData:L,success:F}]=await M({data:S,to:j});if(!F)throw new c.RawContractError({data:L});return L==="0x"?{data:void 0}:{data:L}}function I(R){const{code:U,data:k}=R;return(0,l.encodeDeployData)({abi:(0,t.parseAbi)(["constructor(bytes, bytes)"]),bytecode:i.deploylessCallViaBytecodeBytecode,args:[U,k]})}function P(R){const{data:U,factory:k,factoryData:O,to:B}=R;return(0,l.encodeDeployData)({abi:(0,t.parseAbi)(["constructor(address, bytes, address, bytes)"]),bytecode:i.deploylessCallViaFactoryBytecode,args:[B,U,k,O]})}function T(R){if(!(R instanceof o.BaseError))return;const U=R.walk();return typeof U?.data=="object"?U.data?.data:U.data}return ch}var v3;function ro(){if(v3)return Jm;v3=1,Object.defineProperty(Jm,"__esModule",{value:!0}),Jm.readContract=i;const t=da(),e=es(),r=fc(),n=bt(),s=F0();async function i(o,a){const{abi:c,address:u,args:l,functionName:d,...f}=a,g=(0,e.encodeFunctionData)({abi:c,args:l,functionName:d});try{const{data:p}=await(0,n.getAction)(o,s.call,"call")({...f,data:g,to:u});return(0,t.decodeFunctionResult)({abi:c,args:l,functionName:d,data:p||"0x"})}catch(p){throw(0,r.getContractError)(p,{abi:c,address:u,args:l,docsPath:"/docs/contract/readContract",functionName:d})}}return Jm}var ay={},_3;function E7(){if(_3)return ay;_3=1,Object.defineProperty(ay,"__esModule",{value:!0}),ay.simulateContract=o;const t=or(),e=da(),r=es(),n=fc(),s=bt(),i=F0();async function o(a,c){const{abi:u,address:l,args:d,dataSuffix:f,functionName:g,...p}=c,h=p.account?(0,t.parseAccount)(p.account):a.account,y=(0,r.encodeFunctionData)({abi:u,args:d,functionName:g});try{const{data:b}=await(0,s.getAction)(a,i.call,"call")({batch:!1,data:`${y}${f?f.replace("0x",""):""}`,to:l,...p,account:h}),E=(0,e.decodeFunctionResult)({abi:u,args:d,functionName:g,data:b||"0x"}),w=u.filter(m=>"name"in m&&m.name===c.functionName);return{result:E,request:{abi:w,address:l,args:d,dataSuffix:f,functionName:g,...p,account:h}}}catch(b){throw(0,n.getContractError)(b,{abi:u,address:l,args:d,docsPath:"/docs/contract/simulateContract",functionName:g,sender:h?.address})}}return ay}var cy={},e2={},A3;function ul(){return A3||(A3=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.cleanupCache=t.listenersCache=void 0,t.observe=r,t.listenersCache=new Map,t.cleanupCache=new Map;let e=0;function r(n,s,i){const o=++e,a=()=>t.listenersCache.get(n)||[],c=()=>{const g=a();t.listenersCache.set(n,g.filter(p=>p.id!==o))},u=()=>{const g=a();if(!g.some(h=>h.id===o))return;const p=t.cleanupCache.get(n);if(g.length===1&&p){const h=p();h instanceof Promise&&h.catch(()=>{})}c()},l=a();if(t.listenersCache.set(n,[...l,{id:o,fns:s}]),l&&l.length>0)return u;const d={};for(const g in s)d[g]=((...p)=>{const h=a();if(h.length!==0)for(const y of h)y.fns[g]?.(...p)});const f=i(d);return typeof f=="function"&&t.cleanupCache.set(n,f),u}})(e2)),e2}var uy={},ly={},C3;function HS(){if(C3)return ly;C3=1,Object.defineProperty(ly,"__esModule",{value:!0}),ly.wait=t;async function t(e){return new Promise(r=>setTimeout(r,e))}return ly}var I3;function Yd(){if(I3)return uy;I3=1,Object.defineProperty(uy,"__esModule",{value:!0}),uy.poll=e;const t=HS();function e(r,{emitOnBegin:n,initialWaitTime:s,interval:i}){let o=!0;const a=()=>o=!1;return(async()=>{let u;n&&(u=await r({unpoll:a}));const l=await s?.(u)??i;await(0,t.wait)(l);const d=async()=>{o&&(await r({unpoll:a}),await(0,t.wait)(i),d())};d()})(),a}return uy}var gh={},t2={},S3;function v7(){return S3||(S3=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.responseCache=t.promiseCache=void 0,t.getCache=e,t.withCache=r,t.promiseCache=new Map,t.responseCache=new Map;function e(n){const s=(a,c)=>({clear:()=>c.delete(a),get:()=>c.get(a),set:u=>c.set(a,u)}),i=s(n,t.promiseCache),o=s(n,t.responseCache);return{clear:()=>{i.clear(),o.clear()},promise:i,response:o}}async function r(n,{cacheKey:s,cacheTime:i=Number.POSITIVE_INFINITY}){const o=e(s),a=o.response.get();if(a&&i>0&&Date.now()-a.created.getTime()<i)return a.data;let c=o.promise.get();c||(c=n(),o.promise.set(c));try{const u=await c;return o.response.set({created:new Date,data:u}),u}finally{o.promise.clear()}}})(t2)),t2}var T3;function q0(){if(T3)return gh;T3=1,Object.defineProperty(gh,"__esModule",{value:!0}),gh.getBlockNumberCache=r,gh.getBlockNumber=n;const t=v7(),e=s=>`blockNumber.${s}`;function r(s){return(0,t.getCache)(e(s))}async function n(s,{cacheTime:i=s.cacheTime}={}){const o=await(0,t.withCache)(()=>s.request({method:"eth_blockNumber"}),{cacheKey:e(s.uid),cacheTime:i});return BigInt(o)}return gh}var dy={},P3;function wv(){if(P3)return dy;P3=1,Object.defineProperty(dy,"__esModule",{value:!0}),dy.getFilterChanges=r;const t=D0(),e=la();async function r(n,{filter:s}){const i="strict"in s&&s.strict,o=await s.request({method:"eth_getFilterChanges",params:[s.id]});if(typeof o[0]=="string")return o;const a=o.map(c=>(0,e.formatLog)(c));return!("abi"in s)||!s.abi?a:(0,t.parseEventLogs)({abi:s.abi,logs:a,strict:i})}return dy}var fy={},N3;function Ev(){if(N3)return fy;N3=1,Object.defineProperty(fy,"__esModule",{value:!0}),fy.uninstallFilter=t;async function t(e,{filter:r}){return r.request({method:"eth_uninstallFilter",params:[r.id]})}return fy}var O3;function _7(){if(O3)return cy;O3=1,Object.defineProperty(cy,"__esModule",{value:!0}),cy.watchContractEvent=p;const t=er(),e=dc(),r=j0(),n=sl(),s=la(),i=bt(),o=ul(),a=Yd(),c=Qr(),u=bS(),l=q0(),d=BS(),f=wv(),g=Ev();function p(h,y){const{abi:b,address:E,args:w,batch:m=!0,eventName:_,fromBlock:C,onError:I,onLogs:P,poll:T,pollingInterval:R=h.pollingInterval,strict:U}=y;return(typeof T<"u"?T:typeof C=="bigint"?!0:!(h.transport.type==="webSocket"||h.transport.type==="ipc"||h.transport.type==="fallback"&&(h.transport.transports[0].config.type==="webSocket"||h.transport.transports[0].config.type==="ipc")))?(()=>{const v=U??!1,A=(0,c.stringify)(["watchContractEvent",E,w,m,h.uid,_,R,v,C]);return(0,o.observe)(A,{onLogs:P,onError:I},S=>{let j;C!==void 0&&(j=C-1n);let N,x=!1;const D=(0,a.poll)(async()=>{if(!x){try{N=await(0,i.getAction)(h,u.createContractEventFilter,"createContractEventFilter")({abi:b,address:E,args:w,eventName:_,strict:v,fromBlock:C})}catch{}x=!0;return}try{let M;if(N)M=await(0,i.getAction)(h,f.getFilterChanges,"getFilterChanges")({filter:N});else{const L=await(0,i.getAction)(h,l.getBlockNumber,"getBlockNumber")({});j&&j<L?M=await(0,i.getAction)(h,d.getContractEvents,"getContractEvents")({abi:b,address:E,args:w,eventName:_,fromBlock:j+1n,toBlock:L,strict:v}):M=[],j=L}if(M.length===0)return;if(m)S.onLogs(M);else for(const L of M)S.onLogs([L])}catch(M){N&&M instanceof e.InvalidInputRpcError&&(x=!1),S.onError?.(M)}},{emitOnBegin:!0,interval:R});return async()=>{N&&await(0,i.getAction)(h,g.uninstallFilter,"uninstallFilter")({filter:N}),D()}})})():(()=>{const v=U??!1,A=(0,c.stringify)(["watchContractEvent",E,w,m,h.uid,_,R,v]);let S=!0,j=()=>S=!1;return(0,o.observe)(A,{onLogs:P,onError:I},N=>((async()=>{try{const x=(()=>{if(h.transport.type==="fallback"){const L=h.transport.transports.find(F=>F.config.type==="webSocket"||F.config.type==="ipc");return L?L.value:h.transport}return h.transport})(),D=_?(0,n.encodeEventTopics)({abi:b,eventName:_,args:w}):[],{unsubscribe:M}=await x.subscribe({params:["logs",{address:E,topics:D}],onData(L){if(!S)return;const F=L.result;try{const{eventName:q,args:$}=(0,r.decodeEventLog)({abi:b,data:F.data,topics:F.topics,strict:U}),V=(0,s.formatLog)(F,{args:$,eventName:q});N.onLogs([V])}catch(q){let $,V;if(q instanceof t.DecodeLogDataMismatch||q instanceof t.DecodeLogTopicsMismatch){if(U)return;$=q.abiItem.name,V=q.abiItem.inputs?.some(Y=>!("name"in Y&&Y.name))}const J=(0,s.formatLog)(F,{args:V?[]:{},eventName:$});N.onLogs([J])}},onError(L){N.onError?.(L)}});j=M,S||j()}catch(x){I?.(x)}})(),()=>j()))})()}return cy}var mh={},Gc={},R3;function bc(){if(R3)return Gc;R3=1,Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.AccountTypeNotSupportedError=Gc.AccountNotFoundError=void 0;const t=Ke();class e extends t.BaseError{constructor({docsPath:s}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:s,docsSlug:"account",name:"AccountNotFoundError"})}}Gc.AccountNotFoundError=e;class r extends t.BaseError{constructor({docsPath:s,metaMessages:i,type:o}){super(`Account type "${o}" is not supported.`,{docsPath:s,metaMessages:i,name:"AccountTypeNotSupportedError"})}}return Gc.AccountTypeNotSupportedError=r,Gc}var hy={},py={},x3;function H0(){if(x3)return py;x3=1,Object.defineProperty(py,"__esModule",{value:!0}),py.assertCurrentChain=e;const t=M0();function e({chain:r,currentChainId:n}){if(!r)throw new t.ChainNotFoundError;if(n!==r.id)throw new t.ChainMismatchError({chain:r,currentChainId:n})}return py}var gy={},k3;function zS(){if(k3)return gy;k3=1,Object.defineProperty(gy,"__esModule",{value:!0}),gy.sendRawTransaction=t;async function t(e,{serializedTransaction:r}){return e.request({method:"eth_sendRawTransaction",params:[r]},{retryCount:0})}return gy}var B3;function vv(){if(B3)return hy;B3=1,Object.defineProperty(hy,"__esModule",{value:!0}),hy.sendTransaction=h;const t=or(),e=bc(),r=Ke(),n=N0(),s=H0(),i=k0(),o=pc(),a=Ai(),c=bt(),u=rl(),l=Ci(),d=gc(),f=B0(),g=zS(),p=new u.LruMap(128);async function h(y,b){const{account:E=y.account,chain:w=y.chain,accessList:m,authorizationList:_,blobs:C,data:I,gas:P,gasPrice:T,maxFeePerBlobGas:R,maxFeePerGas:U,maxPriorityFeePerGas:k,nonce:O,type:B,value:v,...A}=b;if(typeof E>"u")throw new e.AccountNotFoundError({docsPath:"/docs/actions/wallet/sendTransaction"});const S=E?(0,t.parseAccount)(E):null;try{(0,l.assertRequest)(b);const j=await(async()=>{if(b.to)return b.to;if(b.to!==null&&_&&_.length>0)return await(0,n.recoverAuthorizationAddress)({authorization:_[0]}).catch(()=>{throw new r.BaseError("`to` is required. Could not infer from `authorizationList`.")})})();if(S?.type==="json-rpc"||S===null){let N;w!==null&&(N=await(0,c.getAction)(y,d.getChainId,"getChainId")({}),(0,s.assertCurrentChain)({currentChainId:N,chain:w}));const x=y.chain?.formatters?.transactionRequest?.format,M=(x||a.formatTransactionRequest)({...(0,o.extract)(A,{format:x}),accessList:m,account:S,authorizationList:_,blobs:C,chainId:N,data:I,gas:P,gasPrice:T,maxFeePerBlobGas:R,maxFeePerGas:U,maxPriorityFeePerGas:k,nonce:O,to:j,type:B,value:v},"sendTransaction"),L=p.get(y.uid),F=L?"wallet_sendTransaction":"eth_sendTransaction";try{return await y.request({method:F,params:[M]},{retryCount:0})}catch(q){if(L===!1)throw q;const $=q;if($.name==="InvalidInputRpcError"||$.name==="InvalidParamsRpcError"||$.name==="MethodNotFoundRpcError"||$.name==="MethodNotSupportedRpcError")return await y.request({method:"wallet_sendTransaction",params:[M]},{retryCount:0}).then(V=>(p.set(y.uid,!0),V)).catch(V=>{const J=V;throw J.name==="MethodNotFoundRpcError"||J.name==="MethodNotSupportedRpcError"?(p.set(y.uid,!1),$):J});throw $}}if(S?.type==="local"){const N=await(0,c.getAction)(y,f.prepareTransactionRequest,"prepareTransactionRequest")({account:S,accessList:m,authorizationList:_,blobs:C,chain:w,data:I,gas:P,gasPrice:T,maxFeePerBlobGas:R,maxFeePerGas:U,maxPriorityFeePerGas:k,nonce:O,nonceManager:S.nonceManager,parameters:[...f.defaultParameters,"sidecars"],type:B,value:v,...A,to:j}),x=w?.serializers?.transaction,D=await S.signTransaction(N,{serializer:x});return await(0,c.getAction)(y,g.sendRawTransaction,"sendRawTransaction")({serializedTransaction:D})}throw S?.type==="smart"?new e.AccountTypeNotSupportedError({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new e.AccountTypeNotSupportedError({docsPath:"/docs/actions/wallet/sendTransaction",type:S?.type})}catch(j){throw j instanceof e.AccountTypeNotSupportedError?j:(0,i.getTransactionError)(j,{...b,account:S,chain:b.chain||void 0})}}return hy}var j3;function $S(){if(j3)return mh;j3=1,Object.defineProperty(mh,"__esModule",{value:!0}),mh.writeContract=o;const t=or(),e=bc(),r=es(),n=fc(),s=bt(),i=vv();async function o(a,c){return o.internal(a,i.sendTransaction,"sendTransaction",c)}return(function(a){async function c(u,l,d,f){const{abi:g,account:p=u.account,address:h,args:y,dataSuffix:b,functionName:E,...w}=f;if(typeof p>"u")throw new e.AccountNotFoundError({docsPath:"/docs/contract/writeContract"});const m=p?(0,t.parseAccount)(p):null,_=(0,r.encodeFunctionData)({abi:g,args:y,functionName:E});try{return await(0,s.getAction)(u,l,d)({data:`${_}${b?b.replace("0x",""):""}`,to:h,account:m,...w})}catch(C){throw(0,n.getContractError)(C,{abi:g,address:h,args:y,docsPath:"/docs/contract/writeContract",functionName:E,sender:m?.address})}}a.internal=c})(o||(mh.writeContract=o={})),mh}var D3;function abe(){if(D3)return Il;D3=1,Object.defineProperty(Il,"__esModule",{value:!0}),Il.getContract=c,Il.getFunctionParameters=u,Il.getEventParameters=l;const t=bt(),e=bS(),r=m7(),n=BS(),s=ro(),i=E7(),o=_7(),a=$S();function c({abi:d,address:f,client:g}){const p=g,[h,y]=p?"public"in p&&"wallet"in p?[p.public,p.wallet]:"public"in p?[p.public,void 0]:"wallet"in p?[void 0,p.wallet]:[p,p]:[void 0,void 0],b=h!=null,E=y!=null,w={};let m=!1,_=!1,C=!1;for(const I of d)if(I.type==="function"?I.stateMutability==="view"||I.stateMutability==="pure"?m=!0:_=!0:I.type==="event"&&(C=!0),m&&_&&C)break;return b&&(m&&(w.read=new Proxy({},{get(I,P){return(...T)=>{const{args:R,options:U}=u(T);return(0,t.getAction)(h,s.readContract,"readContract")({abi:d,address:f,functionName:P,args:R,...U})}}})),_&&(w.simulate=new Proxy({},{get(I,P){return(...T)=>{const{args:R,options:U}=u(T);return(0,t.getAction)(h,i.simulateContract,"simulateContract")({abi:d,address:f,functionName:P,args:R,...U})}}})),C&&(w.createEventFilter=new Proxy({},{get(I,P){return(...T)=>{const R=d.find(O=>O.type==="event"&&O.name===P),{args:U,options:k}=l(T,R);return(0,t.getAction)(h,e.createContractEventFilter,"createContractEventFilter")({abi:d,address:f,eventName:P,args:U,...k})}}}),w.getEvents=new Proxy({},{get(I,P){return(...T)=>{const R=d.find(O=>O.type==="event"&&O.name===P),{args:U,options:k}=l(T,R);return(0,t.getAction)(h,n.getContractEvents,"getContractEvents")({abi:d,address:f,eventName:P,args:U,...k})}}}),w.watchEvent=new Proxy({},{get(I,P){return(...T)=>{const R=d.find(O=>O.type==="event"&&O.name===P),{args:U,options:k}=l(T,R);return(0,t.getAction)(h,o.watchContractEvent,"watchContractEvent")({abi:d,address:f,eventName:P,args:U,...k})}}}))),E&&_&&(w.write=new Proxy({},{get(I,P){return(...T)=>{const{args:R,options:U}=u(T);return(0,t.getAction)(y,a.writeContract,"writeContract")({abi:d,address:f,functionName:P,args:R,...U})}}})),(b||E)&&_&&(w.estimateGas=new Proxy({},{get(I,P){return(...T)=>{const{args:R,options:U}=u(T),k=h??y;return(0,t.getAction)(k,r.estimateContractGas,"estimateContractGas")({abi:d,address:f,functionName:P,args:R,...U,account:U.account??y.account})}}})),w.address=f,w.abi=d,w}function u(d){const f=d.length&&Array.isArray(d[0]),g=f?d[0]:[],p=(f?d[1]:d[0])??{};return{args:g,options:p}}function l(d,f){let g=!1;Array.isArray(d[0])?g=!0:d.length===1?g=f.inputs.some(y=>y.indexed):d.length===2&&(g=!0);const p=g?d[0]:void 0,h=(g?d[1]:d[0])??{};return{args:p,options:h}}return Il}var jl={},yh={},U3;function A7(){if(U3)return yh;U3=1,Object.defineProperty(yh,"__esModule",{value:!0}),yh.BundleFailedError=void 0;const t=Ke();class e extends t.BaseError{constructor(n){super(`Call bundle failed with status: ${n.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=n}}return yh.BundleFailedError=e,yh}var my={},M3;function _v(){if(M3)return my;M3=1,Object.defineProperty(my,"__esModule",{value:!0}),my.withRetry=e;const t=HS();function e(r,{delay:n=100,retryCount:s=2,shouldRetry:i=()=>!0}={}){return new Promise((o,a)=>{const c=async({count:u=0}={})=>{const l=async({error:d})=>{const f=typeof n=="function"?n({count:u,error:d}):n;f&&await(0,t.wait)(f),c({count:u+1})};try{const d=await r();o(d)}catch(d){if(u<s&&await i({count:u,error:d}))return l({error:d});a(d)}};c()})}return my}var yy={},r2={},L3;function z0(){return L3||(L3=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.defineTransactionReceipt=t.receiptStatuses=void 0,t.formatTransactionReceipt=i;const e=fr(),r=R0(),n=la(),s=Zd();t.receiptStatuses={"0x0":"reverted","0x1":"success"};function i(o,a){const c={...o,blockNumber:o.blockNumber?BigInt(o.blockNumber):null,contractAddress:o.contractAddress?o.contractAddress:null,cumulativeGasUsed:o.cumulativeGasUsed?BigInt(o.cumulativeGasUsed):null,effectiveGasPrice:o.effectiveGasPrice?BigInt(o.effectiveGasPrice):null,gasUsed:o.gasUsed?BigInt(o.gasUsed):null,logs:o.logs?o.logs.map(u=>(0,n.formatLog)(u)):null,to:o.to?o.to:null,transactionIndex:o.transactionIndex?(0,e.hexToNumber)(o.transactionIndex):null,status:o.status?t.receiptStatuses[o.status]:null,type:o.type?s.transactionType[o.type]||o.type:null};return o.blobGasPrice&&(c.blobGasPrice=BigInt(o.blobGasPrice)),o.blobGasUsed&&(c.blobGasUsed=BigInt(o.blobGasUsed)),c}t.defineTransactionReceipt=(0,r.defineFormatter)("transactionReceipt",i)})(r2)),r2}var n2={},F3;function VS(){return F3||(F3=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fallbackTransactionErrorMagicIdentifier=t.fallbackMagicIdentifier=void 0,t.sendCalls=l;const e=or(),r=Ke(),n=dc(),s=es(),i=Mr(),o=fr(),a=Ae(),c=k0(),u=vv();t.fallbackMagicIdentifier="0x5792579257925792579257925792579257925792579257925792579257925792",t.fallbackTransactionErrorMagicIdentifier=(0,a.numberToHex)(0,{size:32});async function l(d,f){const{account:g=d.account,capabilities:p,chain:h=d.chain,experimental_fallback:y,experimental_fallbackDelay:b=32,forceAtomic:E=!1,id:w,version:m="2.0.0"}=f,_=g?(0,e.parseAccount)(g):null,C=f.calls.map(I=>{const P=I,T=P.abi?(0,s.encodeFunctionData)({abi:P.abi,functionName:P.functionName,args:P.args}):P.data;return{data:P.dataSuffix&&T?(0,i.concat)([T,P.dataSuffix]):T,to:P.to,value:P.value?(0,a.numberToHex)(P.value):void 0}});try{const I=await d.request({method:"wallet_sendCalls",params:[{atomicRequired:E,calls:C,capabilities:p,chainId:(0,a.numberToHex)(h.id),from:_?.address,id:w,version:m}]},{retryCount:0});return typeof I=="string"?{id:I}:I}catch(I){const P=I;if(y&&(P.name==="MethodNotFoundRpcError"||P.name==="MethodNotSupportedRpcError"||P.name==="UnknownRpcError"||P.details.toLowerCase().includes("does not exist / is not available")||P.details.toLowerCase().includes("missing or invalid. request()")||P.details.toLowerCase().includes("did not match any variant of untagged enum")||P.details.toLowerCase().includes("account upgraded to unsupported contract")||P.details.toLowerCase().includes("eip-7702 not supported")||P.details.toLowerCase().includes("unsupported wc_ method")||P.details.toLowerCase().includes("feature toggled misconfigured")||P.details.toLowerCase().includes("jsonrpcengine: response has no error or result for request"))){if(p&&Object.values(p).some(O=>!O.optional)){const O="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new n.UnsupportedNonOptionalCapabilityError(new r.BaseError(O,{details:O}))}if(E&&C.length>1){const k="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new n.AtomicityNotSupportedError(new r.BaseError(k,{details:k}))}const T=[];for(const k of C){const O=(0,u.sendTransaction)(d,{account:_,chain:h,data:k.data,to:k.to,value:k.value?(0,o.hexToBigInt)(k.value):void 0});T.push(O),b>0&&await new Promise(B=>setTimeout(B,b))}const R=await Promise.allSettled(T);if(R.every(k=>k.status==="rejected"))throw R[0].reason;const U=R.map(k=>k.status==="fulfilled"?k.value:t.fallbackTransactionErrorMagicIdentifier);return{id:(0,i.concat)([...U,(0,a.numberToHex)(h.id,{size:32}),t.fallbackMagicIdentifier])}}throw(0,c.getTransactionError)(I,{...f,account:_,chain:f.chain})}}})(n2)),n2}var q3;function C7(){if(q3)return yy;q3=1,Object.defineProperty(yy,"__esModule",{value:!0}),yy.getCallsStatus=i;const t=Hs(),e=aa(),r=fr(),n=z0(),s=VS();async function i(o,a){async function c(y){if(y.endsWith(s.fallbackMagicIdentifier.slice(2))){const E=(0,e.trim)((0,t.sliceHex)(y,-64,-32)),w=(0,t.sliceHex)(y,0,-64).slice(2).match(/.{1,64}/g),m=await Promise.all(w.map(C=>s.fallbackTransactionErrorMagicIdentifier.slice(2)!==C?o.request({method:"eth_getTransactionReceipt",params:[`0x${C}`]},{dedupe:!0}):void 0)),_=m.some(C=>C===null)?100:m.every(C=>C?.status==="0x1")?200:m.every(C=>C?.status==="0x0")?500:600;return{atomic:!1,chainId:(0,r.hexToNumber)(E),receipts:m.filter(Boolean),status:_,version:"2.0.0"}}return o.request({method:"wallet_getCallsStatus",params:[y]})}const{atomic:u=!1,chainId:l,receipts:d,version:f="2.0.0",...g}=await c(a.id),[p,h]=(()=>{const y=g.status;return y>=100&&y<200?["pending",y]:y>=200&&y<300?["success",y]:y>=300&&y<700?["failure",y]:y==="CONFIRMED"?["success",200]:y==="PENDING"?["pending",100]:[void 0,y]})();return{...g,atomic:u,chainId:l?(0,r.hexToNumber)(l):void 0,receipts:d?.map(y=>({...y,blockNumber:(0,r.hexToBigInt)(y.blockNumber),gasUsed:(0,r.hexToBigInt)(y.gasUsed),status:n.receiptStatuses[y.status]}))??[],statusCode:h,status:p,version:f}}return yy}var H3;function GS(){if(H3)return jl;H3=1,Object.defineProperty(jl,"__esModule",{value:!0}),jl.WaitForCallsStatusTimeoutError=void 0,jl.waitForCallsStatus=u;const t=Ke(),e=A7(),r=bt(),n=ul(),s=Yd(),i=DS(),o=_v(),a=Qr(),c=C7();async function u(d,f){const{id:g,pollingInterval:p=d.pollingInterval,status:h=({statusCode:R})=>R===200||R>=300,retryCount:y=4,retryDelay:b=({count:R})=>~~(1<<R)*200,timeout:E=6e4,throwOnFailure:w=!1}=f,m=(0,a.stringify)(["waitForCallsStatus",d.uid,g]),{promise:_,resolve:C,reject:I}=(0,i.withResolvers)();let P;const T=(0,n.observe)(m,{resolve:C,reject:I},R=>{const U=(0,s.poll)(async()=>{const k=O=>{clearTimeout(P),U(),O(),T()};try{const O=await(0,o.withRetry)(async()=>{const B=await(0,r.getAction)(d,c.getCallsStatus,"getCallsStatus")({id:g});if(w&&B.status==="failure")throw new e.BundleFailedError(B);return B},{retryCount:y,delay:b});if(!h(O))return;k(()=>R.resolve(O))}catch(O){k(()=>R.reject(O))}},{interval:p,emitOnBegin:!0});return U});return P=E?setTimeout(()=>{T(),clearTimeout(P),I(new l({id:g}))},E):void 0,await _}class l extends t.BaseError{constructor({id:f}){super(`Timed out while waiting for call bundle with id "${f}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}return jl.WaitForCallsStatusTimeoutError=l,jl}var bh={},by={},z3;function I7(){if(z3)return by;z3=1,Object.defineProperty(by,"__esModule",{value:!0}),by.uid=n;const t=256;let e=t,r;function n(s=11){if(!r||e+s>t*2){r="",e=0;for(let i=0;i<t;i++)r+=(256+Math.random()*256|0).toString(16).substring(1)}return r.substring(e,e+++s)}return by}var $3;function Av(){if($3)return bh;$3=1,Object.defineProperty(bh,"__esModule",{value:!0}),bh.createClient=r,bh.rpcSchema=n;const t=or(),e=I7();function r(s){const{batch:i,chain:o,ccipRead:a,key:c="base",name:u="Base Client",type:l="base"}=s,d=s.experimental_blockTag??(typeof o?.experimental_preconfirmationTime=="number"?"pending":void 0),f=o?.blockTime??12e3,g=Math.min(Math.max(Math.floor(f/2),500),4e3),p=s.pollingInterval??g,h=s.cacheTime??p,y=s.account?(0,t.parseAccount)(s.account):void 0,{config:b,request:E,value:w}=s.transport({account:y,chain:o,pollingInterval:p}),m={...b,...w},_={account:y,batch:i,cacheTime:h,ccipRead:a,chain:o,key:c,name:u,pollingInterval:p,request:E,transport:m,type:l,uid:(0,e.uid)(),...d?{experimental_blockTag:d}:{}};function C(I){return P=>{const T=P(I);for(const U in _)delete T[U];const R={...I,...T};return Object.assign(R,{extend:C(R)})}}return Object.assign(_,{extend:C(_)})}function n(){return null}return bh}var wy={},Ey={},vy={},_y={},V3;function WS(){if(V3)return _y;V3=1,Object.defineProperty(_y,"__esModule",{value:!0}),_y.isNullUniversalResolverError=r;const t=Ke(),e=lc();function r(n){if(!(n instanceof t.BaseError))return!1;const s=n.walk(i=>i instanceof e.ContractFunctionRevertedError);return s instanceof e.ContractFunctionRevertedError?s.data?.errorName==="HttpError"||s.data?.errorName==="ResolverError"||s.data?.errorName==="ResolverNotContract"||s.data?.errorName==="ResolverNotFound"||s.data?.errorName==="ReverseAddressMismatch"||s.data?.errorName==="UnsupportedResolverProfile":!1}return _y}var Ay={},Cy={},G3;function S7(){if(G3)return Cy;G3=1,Object.defineProperty(Cy,"__esModule",{value:!0}),Cy.encodedLabelToLabelhash=e;const t=Pn();function e(r){if(r.length!==66||r.indexOf("[")!==0||r.indexOf("]")!==65)return null;const n=`0x${r.slice(1,65)}`;return(0,t.isHex)(n)?n:null}return Cy}var W3;function KS(){if(W3)return Ay;W3=1,Object.defineProperty(Ay,"__esModule",{value:!0}),Ay.namehash=i;const t=Mr(),e=Lt(),r=Ae(),n=Qn(),s=S7();function i(o){let a=new Uint8Array(32).fill(0);if(!o)return(0,r.bytesToHex)(a);const c=o.split(".");for(let u=c.length-1;u>=0;u-=1){const l=(0,s.encodedLabelToLabelhash)(c[u]),d=l?(0,e.toBytes)(l):(0,n.keccak256)((0,e.stringToBytes)(c[u]),"bytes");a=(0,n.keccak256)((0,t.concat)([a,d]),"bytes")}return(0,r.bytesToHex)(a)}return Ay}var Iy={},Sy={},K3;function cbe(){if(K3)return Sy;K3=1,Object.defineProperty(Sy,"__esModule",{value:!0}),Sy.encodeLabelhash=t;function t(e){return`[${e.slice(2)}]`}return Sy}var Ty={},Z3;function T7(){if(Z3)return Ty;Z3=1,Object.defineProperty(Ty,"__esModule",{value:!0}),Ty.labelhash=s;const t=Lt(),e=Ae(),r=Qn(),n=S7();function s(i){const o=new Uint8Array(32).fill(0);return i?(0,n.encodedLabelToLabelhash)(i)||(0,r.keccak256)((0,t.stringToBytes)(i)):(0,e.bytesToHex)(o)}return Ty}var Y3;function ZS(){if(Y3)return Iy;Y3=1,Object.defineProperty(Iy,"__esModule",{value:!0}),Iy.packetToBytes=n;const t=Lt(),e=cbe(),r=T7();function n(s){const i=s.replace(/^\.|\.$/gm,"");if(i.length===0)return new Uint8Array(1);const o=new Uint8Array((0,t.stringToBytes)(i).byteLength+2);let a=0;const c=i.split(".");for(let u=0;u<c.length;u++){let l=(0,t.stringToBytes)(c[u]);l.byteLength>255&&(l=(0,t.stringToBytes)((0,e.encodeLabelhash)((0,r.labelhash)(c[u])))),o[a]=l.length,o.set(l,a+1),a+=l.length+1}return o.byteLength!==a+1?o.slice(0,a+1):o}return Iy}var J3;function ube(){if(J3)return vy;J3=1,Object.defineProperty(vy,"__esModule",{value:!0}),vy.getEnsAddress=f;const t=mc(),e=da(),r=es(),n=yc(),s=aa(),i=Ae(),o=WS(),a=bv(),c=KS(),u=ZS(),l=bt(),d=ro();async function f(g,p){const{blockNumber:h,blockTag:y,coinType:b,name:E,gatewayUrls:w,strict:m}=p,{chain:_}=g,C=(()=>{if(p.universalResolverAddress)return p.universalResolverAddress;if(!_)throw new Error("client chain not configured. universalResolverAddress is required.");return(0,n.getChainContractAddress)({blockNumber:h,chain:_,contract:"ensUniversalResolver"})})(),I=_?.ensTlds;if(I&&!I.some(T=>E.endsWith(T)))return null;const P=b!=null?[(0,c.namehash)(E),BigInt(b)]:[(0,c.namehash)(E)];try{const T=(0,r.encodeFunctionData)({abi:t.addressResolverAbi,functionName:"addr",args:P}),R={address:C,abi:t.universalResolverResolveAbi,functionName:"resolveWithGateways",args:[(0,i.toHex)((0,u.packetToBytes)(E)),T,w??[a.localBatchGatewayUrl]],blockNumber:h,blockTag:y},k=await(0,l.getAction)(g,d.readContract,"readContract")(R);if(k[0]==="0x")return null;const O=(0,e.decodeFunctionResult)({abi:t.addressResolverAbi,args:P,functionName:"addr",data:k[0]});return O==="0x"||(0,s.trim)(O)==="0x00"?null:O}catch(T){if(m)throw T;if((0,o.isNullUniversalResolverError)(T))return null;throw T}}return vy}var Py={},Ny={},Qs={},cs={},Q3;function YS(){if(Q3)return cs;Q3=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.EnsInvalidChainIdError=cs.EnsAvatarUnsupportedNamespaceError=cs.EnsAvatarUriResolutionError=cs.EnsAvatarInvalidNftUriError=cs.EnsAvatarInvalidMetadataError=void 0;const t=Ke();class e extends t.BaseError{constructor({data:a}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(a)}`],name:"EnsAvatarInvalidMetadataError"})}}cs.EnsAvatarInvalidMetadataError=e;class r extends t.BaseError{constructor({reason:a}){super(`ENS NFT avatar URI is invalid. ${a}`,{name:"EnsAvatarInvalidNftUriError"})}}cs.EnsAvatarInvalidNftUriError=r;class n extends t.BaseError{constructor({uri:a}){super(`Unable to resolve ENS avatar URI "${a}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}cs.EnsAvatarUriResolutionError=n;class s extends t.BaseError{constructor({namespace:a}){super(`ENS NFT avatar namespace "${a}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}cs.EnsAvatarUnsupportedNamespaceError=s;class i extends t.BaseError{constructor({chainId:a}){super(`Invalid ENSIP-11 chainId: ${a}. Must be between 0 and 0x7fffffff, or 1.`,{name:"EnsInvalidChainIdError"})}}return cs.EnsInvalidChainIdError=i,cs}var X3;function lbe(){if(X3)return Qs;X3=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.isImageUri=o,Qs.getGateway=a,Qs.resolveAvatarUri=c,Qs.getJsonImage=u,Qs.getMetadataAvatarUri=l,Qs.parseAvatarUri=d,Qs.parseNftUri=f,Qs.getNftTokenUri=g;const t=ro(),e=YS(),r=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,n=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,s=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,i=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function o(p){try{const h=await fetch(p,{method:"HEAD"});return h.status===200?h.headers.get("content-type")?.startsWith("image/"):!1}catch(h){return typeof h=="object"&&typeof h.response<"u"||!Object.hasOwn(globalThis,"Image")?!1:new Promise(y=>{const b=new Image;b.onload=()=>{y(!0)},b.onerror=()=>{y(!1)},b.src=p})}}function a(p,h){return p?p.endsWith("/")?p.slice(0,-1):p:h}function c({uri:p,gatewayUrls:h}){const y=s.test(p);if(y)return{uri:p,isOnChain:!0,isEncoded:y};const b=a(h?.ipfs,"https://ipfs.io"),E=a(h?.arweave,"https://arweave.net"),w=p.match(r),{protocol:m,subpath:_,target:C,subtarget:I=""}=w?.groups||{},P=m==="ipns:/"||_==="ipns/",T=m==="ipfs:/"||_==="ipfs/"||n.test(p);if(p.startsWith("http")&&!P&&!T){let U=p;return h?.arweave&&(U=p.replace(/https:\/\/arweave.net/g,h?.arweave)),{uri:U,isOnChain:!1,isEncoded:!1}}if((P||T)&&C)return{uri:`${b}/${P?"ipns":"ipfs"}/${C}${I}`,isOnChain:!1,isEncoded:!1};if(m==="ar:/"&&C)return{uri:`${E}/${C}${I||""}`,isOnChain:!1,isEncoded:!1};let R=p.replace(i,"");if(R.startsWith("<svg")&&(R=`data:image/svg+xml;base64,${btoa(R)}`),R.startsWith("data:")||R.startsWith("{"))return{uri:R,isOnChain:!0,isEncoded:!1};throw new e.EnsAvatarUriResolutionError({uri:p})}function u(p){if(typeof p!="object"||!("image"in p)&&!("image_url"in p)&&!("image_data"in p))throw new e.EnsAvatarInvalidMetadataError({data:p});return p.image||p.image_url||p.image_data}async function l({gatewayUrls:p,uri:h}){try{const y=await fetch(h).then(E=>E.json());return await d({gatewayUrls:p,uri:u(y)})}catch{throw new e.EnsAvatarUriResolutionError({uri:h})}}async function d({gatewayUrls:p,uri:h}){const{uri:y,isOnChain:b}=c({uri:h,gatewayUrls:p});if(b||await o(y))return y;throw new e.EnsAvatarUriResolutionError({uri:h})}function f(p){let h=p;h.startsWith("did:nft:")&&(h=h.replace("did:nft:","").replace(/_/g,"/"));const[y,b,E]=h.split("/"),[w,m]=y.split(":"),[_,C]=b.split(":");if(!w||w.toLowerCase()!=="eip155")throw new e.EnsAvatarInvalidNftUriError({reason:"Only EIP-155 supported"});if(!m)throw new e.EnsAvatarInvalidNftUriError({reason:"Chain ID not found"});if(!C)throw new e.EnsAvatarInvalidNftUriError({reason:"Contract address not found"});if(!E)throw new e.EnsAvatarInvalidNftUriError({reason:"Token ID not found"});if(!_)throw new e.EnsAvatarInvalidNftUriError({reason:"ERC namespace not found"});return{chainID:Number.parseInt(m,10),namespace:_.toLowerCase(),contractAddress:C,tokenID:E}}async function g(p,{nft:h}){if(h.namespace==="erc721")return(0,t.readContract)(p,{address:h.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(h.tokenID)]});if(h.namespace==="erc1155")return(0,t.readContract)(p,{address:h.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(h.tokenID)]});throw new e.EnsAvatarUnsupportedNamespaceError({namespace:h.namespace})}return Qs}var ek;function dbe(){if(ek)return Ny;ek=1,Object.defineProperty(Ny,"__esModule",{value:!0}),Ny.parseAvatarRecord=e;const t=lbe();async function e(n,{gatewayUrls:s,record:i}){return/eip155:/i.test(i)?r(n,{gatewayUrls:s,record:i}):(0,t.parseAvatarUri)({uri:i,gatewayUrls:s})}async function r(n,{gatewayUrls:s,record:i}){const o=(0,t.parseNftUri)(i),a=await(0,t.getNftTokenUri)(n,{nft:o}),{uri:c,isOnChain:u,isEncoded:l}=(0,t.resolveAvatarUri)({uri:a,gatewayUrls:s});if(u&&(c.includes("data:application/json;base64,")||c.startsWith("{"))){const f=l?atob(c.replace("data:application/json;base64,","")):c,g=JSON.parse(f);return(0,t.parseAvatarUri)({uri:(0,t.getJsonImage)(g),gatewayUrls:s})}let d=o.tokenID;return o.namespace==="erc1155"&&(d=d.replace("0x","").padStart(64,"0")),(0,t.getMetadataAvatarUri)({gatewayUrls:s,uri:c.replace(/(?:0x)?{id}/,d)})}return Ny}var Oy={},tk;function P7(){if(tk)return Oy;tk=1,Object.defineProperty(Oy,"__esModule",{value:!0}),Oy.getEnsText=d;const t=mc(),e=da(),r=es(),n=yc(),s=Ae(),i=WS(),o=bv(),a=KS(),c=ZS(),u=bt(),l=ro();async function d(f,g){const{blockNumber:p,blockTag:h,key:y,name:b,gatewayUrls:E,strict:w}=g,{chain:m}=f,_=(()=>{if(g.universalResolverAddress)return g.universalResolverAddress;if(!m)throw new Error("client chain not configured. universalResolverAddress is required.");return(0,n.getChainContractAddress)({blockNumber:p,chain:m,contract:"ensUniversalResolver"})})(),C=m?.ensTlds;if(C&&!C.some(I=>b.endsWith(I)))return null;try{const I={address:_,abi:t.universalResolverResolveAbi,args:[(0,s.toHex)((0,c.packetToBytes)(b)),(0,r.encodeFunctionData)({abi:t.textResolverAbi,functionName:"text",args:[(0,a.namehash)(b),y]}),E??[o.localBatchGatewayUrl]],functionName:"resolveWithGateways",blockNumber:p,blockTag:h},T=await(0,u.getAction)(f,l.readContract,"readContract")(I);if(T[0]==="0x")return null;const R=(0,e.decodeFunctionResult)({abi:t.textResolverAbi,functionName:"text",data:T[0]});return R===""?null:R}catch(I){if(w)throw I;if((0,i.isNullUniversalResolverError)(I))return null;throw I}}return Oy}var rk;function fbe(){if(rk)return Py;rk=1,Object.defineProperty(Py,"__esModule",{value:!0}),Py.getEnsAvatar=n;const t=dbe(),e=bt(),r=P7();async function n(s,{blockNumber:i,blockTag:o,assetGatewayUrls:a,name:c,gatewayUrls:u,strict:l,universalResolverAddress:d}){const f=await(0,e.getAction)(s,r.getEnsText,"getEnsText")({blockNumber:i,blockTag:o,key:"avatar",name:c,universalResolverAddress:d,gatewayUrls:u,strict:l});if(!f)return null;try{return await(0,t.parseAvatarRecord)(s,{record:f,gatewayUrls:a})}catch{return null}}return Py}var Ry={},nk;function hbe(){if(nk)return Ry;nk=1,Object.defineProperty(Ry,"__esModule",{value:!0}),Ry.getEnsName=o;const t=mc(),e=yc(),r=WS(),n=bv(),s=bt(),i=ro();async function o(a,c){const{address:u,blockNumber:l,blockTag:d,coinType:f=60n,gatewayUrls:g,strict:p}=c,{chain:h}=a,y=(()=>{if(c.universalResolverAddress)return c.universalResolverAddress;if(!h)throw new Error("client chain not configured. universalResolverAddress is required.");return(0,e.getChainContractAddress)({blockNumber:l,chain:h,contract:"ensUniversalResolver"})})();try{const b={address:y,abi:t.universalResolverReverseAbi,args:[u,f,g??[n.localBatchGatewayUrl]],functionName:"reverseWithGateways",blockNumber:l,blockTag:d},E=(0,s.getAction)(a,i.readContract,"readContract"),[w]=await E(b);return w||null}catch(b){if(p)throw b;if((0,r.isNullUniversalResolverError)(b))return null;throw b}}return Ry}var xy={},sk;function pbe(){if(sk)return xy;sk=1,Object.defineProperty(xy,"__esModule",{value:!0}),xy.getEnsResolver=i;const t=yc(),e=Ae(),r=ZS(),n=bt(),s=ro();async function i(o,a){const{blockNumber:c,blockTag:u,name:l}=a,{chain:d}=o,f=(()=>{if(a.universalResolverAddress)return a.universalResolverAddress;if(!d)throw new Error("client chain not configured. universalResolverAddress is required.");return(0,t.getChainContractAddress)({blockNumber:c,chain:d,contract:"ensUniversalResolver"})})(),g=d?.ensTlds;if(g&&!g.some(h=>l.endsWith(h)))throw new Error(`${l} is not a valid ENS TLD (${g?.join(", ")}) for chain "${d.name}" (id: ${d.id}).`);const[p]=await(0,n.getAction)(o,s.readContract,"readContract")({address:f,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[(0,e.toHex)((0,r.packetToBytes)(l))],blockNumber:c,blockTag:u});return p}return xy}var ky={},ik;function N7(){if(ik)return ky;ik=1,Object.defineProperty(ky,"__esModule",{value:!0}),ky.createAccessList=o;const t=or(),e=Ae(),r=jS(),n=pc(),s=Ai(),i=Ci();async function o(a,c){const{account:u=a.account,blockNumber:l,blockTag:d="latest",blobs:f,data:g,gas:p,gasPrice:h,maxFeePerBlobGas:y,maxFeePerGas:b,maxPriorityFeePerGas:E,to:w,value:m,..._}=c,C=u?(0,t.parseAccount)(u):void 0;try{(0,i.assertRequest)(c);const P=(typeof l=="bigint"?(0,e.numberToHex)(l):void 0)||d,T=a.chain?.formatters?.transactionRequest?.format,U=(T||s.formatTransactionRequest)({...(0,n.extract)(_,{format:T}),account:C,blobs:f,data:g,gas:p,gasPrice:h,maxFeePerBlobGas:y,maxFeePerGas:b,maxPriorityFeePerGas:E,to:w,value:m},"createAccessList"),k=await a.request({method:"eth_createAccessList",params:[U,P]});return{accessList:k.accessList,gasUsed:BigInt(k.gasUsed)}}catch(I){throw(0,r.getCallError)(I,{...c,account:C,chain:a.chain})}}return ky}var By={},ok;function gbe(){if(ok)return By;ok=1,Object.defineProperty(By,"__esModule",{value:!0}),By.createBlockFilter=e;const t=av();async function e(r){const n=(0,t.createFilterRequestScope)(r,{method:"eth_newBlockFilter"}),s=await r.request({method:"eth_newBlockFilter"});return{id:s,request:n(s),type:"block"}}return By}var jy={},ak;function O7(){if(ak)return jy;ak=1,Object.defineProperty(jy,"__esModule",{value:!0}),jy.createEventFilter=n;const t=sl(),e=Ae(),r=av();async function n(s,{address:i,args:o,event:a,events:c,fromBlock:u,strict:l,toBlock:d}={}){const f=c??(a?[a]:void 0),g=(0,r.createFilterRequestScope)(s,{method:"eth_newFilter"});let p=[];f&&(p=[f.flatMap(b=>(0,t.encodeEventTopics)({abi:[b],eventName:b.name,args:o}))],a&&(p=p[0]));const h=await s.request({method:"eth_newFilter",params:[{address:i,fromBlock:typeof u=="bigint"?(0,e.numberToHex)(u):u,toBlock:typeof d=="bigint"?(0,e.numberToHex)(d):d,...p.length?{topics:p}:{}}]});return{abi:f,args:o,eventName:a?a.name:void 0,fromBlock:u,id:h,request:g(h),strict:!!l,toBlock:d,type:"event"}}return jy}var Dy={},ck;function R7(){if(ck)return Dy;ck=1,Object.defineProperty(Dy,"__esModule",{value:!0}),Dy.createPendingTransactionFilter=e;const t=av();async function e(r){const n=(0,t.createFilterRequestScope)(r,{method:"eth_newPendingTransactionFilter"}),s=await r.request({method:"eth_newPendingTransactionFilter"});return{id:s,request:n(s),type:"transaction"}}return Dy}var Uy={},uk;function mbe(){if(uk)return Uy;uk=1,Object.defineProperty(Uy,"__esModule",{value:!0}),Uy.getBalance=e;const t=Ae();async function e(r,{address:n,blockNumber:s,blockTag:i=r.experimental_blockTag??"latest"}){const o=typeof s=="bigint"?(0,t.numberToHex)(s):void 0,a=await r.request({method:"eth_getBalance",params:[n,o||i]});return BigInt(a)}return Uy}var My={},lk;function ybe(){if(lk)return My;lk=1,Object.defineProperty(My,"__esModule",{value:!0}),My.getBlobBaseFee=t;async function t(e){const r=await e.request({method:"eth_blobBaseFee"});return BigInt(r)}return My}var Ly={},dk;function bbe(){if(dk)return Ly;dk=1,Object.defineProperty(Ly,"__esModule",{value:!0}),Ly.getBlockTransactionCount=r;const t=fr(),e=Ae();async function r(n,{blockHash:s,blockNumber:i,blockTag:o="latest"}={}){const a=i!==void 0?(0,e.numberToHex)(i):void 0;let c;return s?c=await n.request({method:"eth_getBlockTransactionCountByHash",params:[s]},{dedupe:!0}):c=await n.request({method:"eth_getBlockTransactionCountByNumber",params:[a||o]},{dedupe:!!a}),(0,t.hexToNumber)(c)}return Ly}var Fy={},fk;function x7(){if(fk)return Fy;fk=1,Object.defineProperty(Fy,"__esModule",{value:!0}),Fy.getCode=e;const t=Ae();async function e(r,{address:n,blockNumber:s,blockTag:i="latest"}){const o=s!==void 0?(0,t.numberToHex)(s):void 0,a=await r.request({method:"eth_getCode",params:[n,o||i]},{dedupe:!!o});if(a!=="0x")return a}return Fy}var qy={},wh={},hk;function wbe(){if(hk)return wh;hk=1,Object.defineProperty(wh,"__esModule",{value:!0}),wh.Eip712DomainNotFoundError=void 0;const t=Ke();class e extends t.BaseError{constructor({address:n}){super(`No EIP-712 domain found on contract "${n}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${n}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}return wh.Eip712DomainNotFoundError=e,wh}var pk;function Ebe(){if(pk)return qy;pk=1,Object.defineProperty(qy,"__esModule",{value:!0}),qy.getEip712Domain=n;const t=wbe(),e=bt(),r=ro();async function n(i,o){const{address:a,factory:c,factoryData:u}=o;try{const[l,d,f,g,p,h,y]=await(0,e.getAction)(i,r.readContract,"readContract")({abi:s,address:a,functionName:"eip712Domain",factory:c,factoryData:u});return{domain:{name:d,version:f,chainId:Number(g),verifyingContract:p,salt:h},extensions:y,fields:l}}catch(l){const d=l;throw d.name==="ContractFunctionExecutionError"&&d.cause.name==="ContractFunctionZeroDataError"?new t.Eip712DomainNotFoundError({address:a}):d}}const s=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];return qy}var Hy={},zy={},gk;function vbe(){if(gk)return zy;gk=1,Object.defineProperty(zy,"__esModule",{value:!0}),zy.formatFeeHistory=t;function t(e){return{baseFeePerGas:e.baseFeePerGas.map(r=>BigInt(r)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:e.reward?.map(r=>r.map(n=>BigInt(n)))}}return zy}var mk;function _be(){if(mk)return Hy;mk=1,Object.defineProperty(Hy,"__esModule",{value:!0}),Hy.getFeeHistory=r;const t=Ae(),e=vbe();async function r(n,{blockCount:s,blockNumber:i,blockTag:o="latest",rewardPercentiles:a}){const c=typeof i=="bigint"?(0,t.numberToHex)(i):void 0,u=await n.request({method:"eth_feeHistory",params:[(0,t.numberToHex)(s),c||o,a]},{dedupe:!!c});return(0,e.formatFeeHistory)(u)}return Hy}var $y={},yk;function Abe(){if(yk)return $y;yk=1,Object.defineProperty($y,"__esModule",{value:!0}),$y.getFilterLogs=r;const t=D0(),e=la();async function r(n,{filter:s}){const i=s.strict??!1,a=(await s.request({method:"eth_getFilterLogs",params:[s.id]})).map(c=>(0,e.formatLog)(c));return s.abi?(0,t.parseEventLogs)({abi:s.abi,logs:a,strict:i}):a}return $y}var Vy={},Gy={},s2={},Wy={},bk;function k7(){if(bk)return Wy;bk=1,Object.defineProperty(Wy,"__esModule",{value:!0}),Wy.encodePacked=a;const t=er(),e=Ei(),r=Xn(),n=Mr(),s=ac(),i=Ae(),o=ov();function a(u,l){if(u.length!==l.length)throw new t.AbiEncodingLengthMismatchError({expectedLength:u.length,givenLength:l.length});const d=[];for(let f=0;f<u.length;f++){const g=u[f],p=l[f];d.push(c(g,p))}return(0,n.concatHex)(d)}function c(u,l,d=!1){if(u==="address"){const h=l;if(!(0,r.isAddress)(h))throw new e.InvalidAddressError({address:h});return(0,s.pad)(h.toLowerCase(),{size:d?32:null})}if(u==="string")return(0,i.stringToHex)(l);if(u==="bytes")return l;if(u==="bool")return(0,s.pad)((0,i.boolToHex)(l),{size:d?32:1});const f=u.match(o.integerRegex);if(f){const[h,y,b="256"]=f,E=Number.parseInt(b,10)/8;return(0,i.numberToHex)(l,{size:d?32:E,signed:y==="int"})}const g=u.match(o.bytesRegex);if(g){const[h,y]=g;if(Number.parseInt(y,10)!==(l.length-2)/2)throw new t.BytesSizeMismatchError({expectedSize:Number.parseInt(y,10),givenSize:(l.length-2)/2});return(0,s.pad)(l,{dir:"right",size:d?32:null})}const p=u.match(o.arrayRegex);if(p&&Array.isArray(l)){const[h,y]=p,b=[];for(let E=0;E<l.length;E++)b.push(c(y,l[E],!0));return b.length===0?"0x":(0,n.concatHex)(b)}throw new t.UnsupportedPackedAbiType(u)}return Wy}var Dl={},Ky={},wk;function JS(){if(wk)return Ky;wk=1,Object.defineProperty(Ky,"__esModule",{value:!0}),Ky.isBytes=t;function t(e){return!e||typeof e!="object"||!("BYTES_PER_ELEMENT"in e)?!1:e.BYTES_PER_ELEMENT===1&&e.constructor.name==="Uint8Array"}return Ky}var Ek;function B7(){if(Ek)return Dl;Ek=1,Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.getContractAddress=c,Dl.getCreateAddress=u,Dl.getCreate2Address=l;const t=Mr(),e=JS(),r=ac(),n=Hs(),s=Lt(),i=P0(),o=Qn(),a=_s();function c(d){return d.opcode==="CREATE2"?l(d):u(d)}function u(d){const f=(0,s.toBytes)((0,a.getAddress)(d.from));let g=(0,s.toBytes)(d.nonce);return g[0]===0&&(g=new Uint8Array([])),(0,a.getAddress)(`0x${(0,o.keccak256)((0,i.toRlp)([f,g],"bytes")).slice(26)}`)}function l(d){const f=(0,s.toBytes)((0,a.getAddress)(d.from)),g=(0,r.pad)((0,e.isBytes)(d.salt)?d.salt:(0,s.toBytes)(d.salt),{size:32}),p="bytecodeHash"in d?(0,e.isBytes)(d.bytecodeHash)?d.bytecodeHash:(0,s.toBytes)(d.bytecodeHash):(0,o.keccak256)(d.bytecode,"bytes");return(0,a.getAddress)((0,n.slice)((0,o.keccak256)((0,t.concat)([(0,s.toBytes)("0xff"),f,g,p])),12))}return Dl}var Zy={},Eh={},ka={},vk;function Cv(){if(vk)return ka;vk=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.assertTransactionEIP7702=d,ka.assertTransactionEIP4844=f,ka.assertTransactionEIP1559=g,ka.assertTransactionEIP2930=p,ka.assertTransactionLegacy=h;const t=h7(),e=IS(),r=Ei(),n=Ke(),s=p7(),i=M0(),o=ua(),a=Xn(),c=Jn(),u=Hs(),l=fr();function d(y){const{authorizationList:b}=y;if(b)for(const E of b){const{chainId:w}=E,m=E.address;if(!(0,a.isAddress)(m))throw new r.InvalidAddressError({address:m});if(w<0)throw new i.InvalidChainIdError({chainId:w})}g(y)}function f(y){const{blobVersionedHashes:b}=y;if(b){if(b.length===0)throw new s.EmptyBlobError;for(const E of b){const w=(0,c.size)(E),m=(0,l.hexToNumber)((0,u.slice)(E,0,1));if(w!==32)throw new s.InvalidVersionedHashSizeError({hash:E,size:w});if(m!==t.versionedHashVersionKzg)throw new s.InvalidVersionedHashVersionError({hash:E,version:m})}}g(y)}function g(y){const{chainId:b,maxPriorityFeePerGas:E,maxFeePerGas:w,to:m}=y;if(b<=0)throw new i.InvalidChainIdError({chainId:b});if(m&&!(0,a.isAddress)(m))throw new r.InvalidAddressError({address:m});if(w&&w>e.maxUint256)throw new o.FeeCapTooHighError({maxFeePerGas:w});if(E&&w&&E>w)throw new o.TipAboveFeeCapError({maxFeePerGas:w,maxPriorityFeePerGas:E})}function p(y){const{chainId:b,maxPriorityFeePerGas:E,gasPrice:w,maxFeePerGas:m,to:_}=y;if(b<=0)throw new i.InvalidChainIdError({chainId:b});if(_&&!(0,a.isAddress)(_))throw new r.InvalidAddressError({address:_});if(E||m)throw new n.BaseError("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(w&&w>e.maxUint256)throw new o.FeeCapTooHighError({maxFeePerGas:w})}function h(y){const{chainId:b,maxPriorityFeePerGas:E,gasPrice:w,maxFeePerGas:m,to:_}=y;if(_&&!(0,a.isAddress)(_))throw new r.InvalidAddressError({address:_});if(typeof b<"u"&&b<=0)throw new i.InvalidChainIdError({chainId:b});if(E||m)throw new n.BaseError("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(w&&w>e.maxUint256)throw new o.FeeCapTooHighError({maxFeePerGas:w})}return ka}var Yy={},_k;function QS(){if(_k)return Yy;_k=1,Object.defineProperty(Yy,"__esModule",{value:!0}),Yy.serializeAccessList=n;const t=Ei(),e=ts(),r=Xn();function n(s){if(!s||s.length===0)return[];const i=[];for(let o=0;o<s.length;o++){const{address:a,storageKeys:c}=s[o];for(let u=0;u<c.length;u++)if(c[u].length-2!==64)throw new e.InvalidStorageKeySizeError({storageKey:c[u]});if(!(0,r.isAddress)(a,{strict:!1}))throw new t.InvalidAddressError({address:a});i.push([a,c])}return i}return Yy}var Ak;function Iv(){if(Ak)return Eh;Ak=1,Object.defineProperty(Eh,"__esModule",{value:!0}),Eh.serializeTransaction=g,Eh.toYParitySignatureArray=w;const t=ts(),e=j7(),r=hv(),n=pv(),s=OS(),i=gv(),o=Mr(),a=aa(),c=Ae(),u=P0(),l=Cv(),d=mv(),f=QS();function g(m,_){const C=(0,d.getTransactionType)(m);return C==="eip1559"?y(m,_):C==="eip2930"?b(m,_):C==="eip4844"?h(m,_):C==="eip7702"?p(m,_):E(m,_)}function p(m,_){const{authorizationList:C,chainId:I,gas:P,nonce:T,to:R,value:U,maxFeePerGas:k,maxPriorityFeePerGas:O,accessList:B,data:v}=m;(0,l.assertTransactionEIP7702)(m);const A=(0,f.serializeAccessList)(B),S=(0,e.serializeAuthorizationList)(C);return(0,o.concatHex)(["0x04",(0,u.toRlp)([(0,c.numberToHex)(I),T?(0,c.numberToHex)(T):"0x",O?(0,c.numberToHex)(O):"0x",k?(0,c.numberToHex)(k):"0x",P?(0,c.numberToHex)(P):"0x",R??"0x",U?(0,c.numberToHex)(U):"0x",v??"0x",A,S,...w(m,_)])])}function h(m,_){const{chainId:C,gas:I,nonce:P,to:T,value:R,maxFeePerBlobGas:U,maxFeePerGas:k,maxPriorityFeePerGas:O,accessList:B,data:v}=m;(0,l.assertTransactionEIP4844)(m);let A=m.blobVersionedHashes,S=m.sidecars;if(m.blobs&&(typeof A>"u"||typeof S>"u")){const L=typeof m.blobs[0]=="string"?m.blobs:m.blobs.map($=>(0,c.bytesToHex)($)),F=m.kzg,q=(0,r.blobsToCommitments)({blobs:L,kzg:F});if(typeof A>"u"&&(A=(0,s.commitmentsToVersionedHashes)({commitments:q})),typeof S>"u"){const $=(0,n.blobsToProofs)({blobs:L,commitments:q,kzg:F});S=(0,i.toBlobSidecars)({blobs:L,commitments:q,proofs:$})}}const j=(0,f.serializeAccessList)(B),N=[(0,c.numberToHex)(C),P?(0,c.numberToHex)(P):"0x",O?(0,c.numberToHex)(O):"0x",k?(0,c.numberToHex)(k):"0x",I?(0,c.numberToHex)(I):"0x",T??"0x",R?(0,c.numberToHex)(R):"0x",v??"0x",j,U?(0,c.numberToHex)(U):"0x",A??[],...w(m,_)],x=[],D=[],M=[];if(S)for(let L=0;L<S.length;L++){const{blob:F,commitment:q,proof:$}=S[L];x.push(F),D.push(q),M.push($)}return(0,o.concatHex)(["0x03",S?(0,u.toRlp)([N,x,D,M]):(0,u.toRlp)(N)])}function y(m,_){const{chainId:C,gas:I,nonce:P,to:T,value:R,maxFeePerGas:U,maxPriorityFeePerGas:k,accessList:O,data:B}=m;(0,l.assertTransactionEIP1559)(m);const v=(0,f.serializeAccessList)(O),A=[(0,c.numberToHex)(C),P?(0,c.numberToHex)(P):"0x",k?(0,c.numberToHex)(k):"0x",U?(0,c.numberToHex)(U):"0x",I?(0,c.numberToHex)(I):"0x",T??"0x",R?(0,c.numberToHex)(R):"0x",B??"0x",v,...w(m,_)];return(0,o.concatHex)(["0x02",(0,u.toRlp)(A)])}function b(m,_){const{chainId:C,gas:I,data:P,nonce:T,to:R,value:U,accessList:k,gasPrice:O}=m;(0,l.assertTransactionEIP2930)(m);const B=(0,f.serializeAccessList)(k),v=[(0,c.numberToHex)(C),T?(0,c.numberToHex)(T):"0x",O?(0,c.numberToHex)(O):"0x",I?(0,c.numberToHex)(I):"0x",R??"0x",U?(0,c.numberToHex)(U):"0x",P??"0x",B,...w(m,_)];return(0,o.concatHex)(["0x01",(0,u.toRlp)(v)])}function E(m,_){const{chainId:C=0,gas:I,data:P,nonce:T,to:R,value:U,gasPrice:k}=m;(0,l.assertTransactionLegacy)(m);let O=[T?(0,c.numberToHex)(T):"0x",k?(0,c.numberToHex)(k):"0x",I?(0,c.numberToHex)(I):"0x",R??"0x",U?(0,c.numberToHex)(U):"0x",P??"0x"];if(_){const B=(()=>{if(_.v>=35n)return(_.v-35n)/2n>0?_.v:27n+(_.v===35n?0n:1n);if(C>0)return BigInt(C*2)+BigInt(35n+_.v-27n);const S=27n+(_.v===27n?0n:1n);if(_.v!==S)throw new t.InvalidLegacyVError({v:_.v});return S})(),v=(0,a.trim)(_.r),A=(0,a.trim)(_.s);O=[...O,(0,c.numberToHex)(B),v==="0x00"?"0x":v,A==="0x00"?"0x":A]}else C>0&&(O=[...O,(0,c.numberToHex)(C),"0x","0x"]);return(0,u.toRlp)(O)}function w(m,_){const C=_??m,{v:I,yParity:P}=C;if(typeof C.r>"u")return[];if(typeof C.s>"u")return[];if(typeof I>"u"&&typeof P>"u")return[];const T=(0,a.trim)(C.r),R=(0,a.trim)(C.s);return[typeof P=="number"?P?(0,c.numberToHex)(1):"0x":I===0n?"0x":I===1n?(0,c.numberToHex)(1):I===27n?"0x":(0,c.numberToHex)(1),T==="0x00"?"0x":T,R==="0x00"?"0x":R]}return Eh}var Ck;function j7(){if(Ck)return Zy;Ck=1,Object.defineProperty(Zy,"__esModule",{value:!0}),Zy.serializeAuthorizationList=r;const t=Ae(),e=Iv();function r(n){if(!n||n.length===0)return[];const s=[];for(const i of n){const{chainId:o,nonce:a,...c}=i,u=i.address;s.push([o?(0,t.toHex)(o):"0x",u,a?(0,t.toHex)(a):"0x",...(0,e.toYParitySignatureArray)({},c)])}return s}return Zy}var Jy={},Ik;function D7(){if(Ik)return Jy;Ik=1,Object.defineProperty(Jy,"__esModule",{value:!0}),Jy.verifyAuthorization=n;const t=_s(),e=Ii(),r=N0();async function n({address:s,authorization:i,signature:o}){return(0,e.isAddressEqual)((0,t.getAddress)(s),await(0,r.recoverAuthorizationAddress)({authorization:i,signature:o}))}return Jy}var vh={},i2={},Sk;function Cbe(){return Sk||(Sk=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.promiseCache=void 0,t.withDedupe=r;const e=rl();t.promiseCache=new e.LruMap(8192);function r(n,{enabled:s=!0,id:i}){if(!s||!i)return n();if(t.promiseCache.get(i))return t.promiseCache.get(i);const o=n().finally(()=>t.promiseCache.delete(i));return t.promiseCache.set(i,o),o}})(i2)),i2}var Tk;function U7(){if(Tk)return vh;Tk=1,Object.defineProperty(vh,"__esModule",{value:!0}),vh.buildRequest=a,vh.shouldRetry=c;const t=Ke(),e=_i(),r=dc(),n=Ae(),s=Cbe(),i=_v(),o=Qr();function a(u,l={}){return async(d,f={})=>{const{dedupe:g=!1,methods:p,retryDelay:h=150,retryCount:y=3,uid:b}={...l,...f},{method:E}=d;if(p?.exclude?.includes(E))throw new r.MethodNotSupportedRpcError(new Error("method not supported"),{method:E});if(p?.include&&!p.include.includes(E))throw new r.MethodNotSupportedRpcError(new Error("method not supported"),{method:E});const w=g?(0,n.stringToHex)(`${b}.${(0,o.stringify)(d)}`):void 0;return(0,s.withDedupe)(()=>(0,i.withRetry)(async()=>{try{return await u(d)}catch(m){const _=m;switch(_.code){case r.ParseRpcError.code:throw new r.ParseRpcError(_);case r.InvalidRequestRpcError.code:throw new r.InvalidRequestRpcError(_);case r.MethodNotFoundRpcError.code:throw new r.MethodNotFoundRpcError(_,{method:d.method});case r.InvalidParamsRpcError.code:throw new r.InvalidParamsRpcError(_);case r.InternalRpcError.code:throw new r.InternalRpcError(_);case r.InvalidInputRpcError.code:throw new r.InvalidInputRpcError(_);case r.ResourceNotFoundRpcError.code:throw new r.ResourceNotFoundRpcError(_);case r.ResourceUnavailableRpcError.code:throw new r.ResourceUnavailableRpcError(_);case r.TransactionRejectedRpcError.code:throw new r.TransactionRejectedRpcError(_);case r.MethodNotSupportedRpcError.code:throw new r.MethodNotSupportedRpcError(_,{method:d.method});case r.LimitExceededRpcError.code:throw new r.LimitExceededRpcError(_);case r.JsonRpcVersionUnsupportedError.code:throw new r.JsonRpcVersionUnsupportedError(_);case r.UserRejectedRequestError.code:throw new r.UserRejectedRequestError(_);case r.UnauthorizedProviderError.code:throw new r.UnauthorizedProviderError(_);case r.UnsupportedProviderMethodError.code:throw new r.UnsupportedProviderMethodError(_);case r.ProviderDisconnectedError.code:throw new r.ProviderDisconnectedError(_);case r.ChainDisconnectedError.code:throw new r.ChainDisconnectedError(_);case r.SwitchChainError.code:throw new r.SwitchChainError(_);case r.UnsupportedNonOptionalCapabilityError.code:throw new r.UnsupportedNonOptionalCapabilityError(_);case r.UnsupportedChainIdError.code:throw new r.UnsupportedChainIdError(_);case r.DuplicateIdError.code:throw new r.DuplicateIdError(_);case r.UnknownBundleIdError.code:throw new r.UnknownBundleIdError(_);case r.BundleTooLargeError.code:throw new r.BundleTooLargeError(_);case r.AtomicReadyWalletRejectedUpgradeError.code:throw new r.AtomicReadyWalletRejectedUpgradeError(_);case r.AtomicityNotSupportedError.code:throw new r.AtomicityNotSupportedError(_);case 5e3:throw new r.UserRejectedRequestError(_);default:throw m instanceof t.BaseError?m:new r.UnknownRpcError(_)}}},{delay:({count:m,error:_})=>{if(_&&_ instanceof e.HttpRequestError){const C=_?.headers?.get("Retry-After");if(C?.match(/\d/))return Number.parseInt(C,10)*1e3}return~~(1<<m)*h},retryCount:y,shouldRetry:({error:m})=>c(m)}),{enabled:g,id:w})}}function c(u){return"code"in u&&typeof u.code=="number"?u.code===-1||u.code===r.LimitExceededRpcError.code||u.code===r.InternalRpcError.code:u instanceof e.HttpRequestError&&u.status?u.status===403||u.status===408||u.status===413||u.status===429||u.status===500||u.status===502||u.status===503||u.status===504:!0}return vh}var Qy={},Pk;function M7(){if(Pk)return Qy;Pk=1,Object.defineProperty(Qy,"__esModule",{value:!0}),Qy.defineChain=t;function t(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}return Qy}var Xy={},Nk;function L7(){if(Nk)return Xy;Nk=1,Object.defineProperty(Xy,"__esModule",{value:!0}),Xy.extractChain=t;function t({chains:e,id:r}){return e.find(n=>n.id===r)}return Xy}var eb={},Ok;function XS(){if(Ok)return eb;Ok=1,Object.defineProperty(eb,"__esModule",{value:!0}),eb.fromRlp=i;const t=Ke(),e=Wd(),r=I0(),n=Lt(),s=Ae();function i(u,l="hex"){const d=(()=>{if(typeof u=="string"){if(u.length>3&&u.length%2!==0)throw new e.InvalidHexValueError(u);return(0,n.hexToBytes)(u)}return u})(),f=(0,r.createCursor)(d,{recursiveReadLimit:Number.POSITIVE_INFINITY});return o(f,l)}function o(u,l="hex"){if(u.bytes.length===0)return l==="hex"?(0,s.bytesToHex)(u.bytes):u.bytes;const d=u.readByte();if(d<128&&u.decrementPosition(1),d<192){const g=a(u,d,128),p=u.readBytes(g);return l==="hex"?(0,s.bytesToHex)(p):p}const f=a(u,d,192);return c(u,f,l)}function a(u,l,d){if(d===128&&l<128)return 1;if(l<=d+55)return l-d;if(l===d+55+1)return u.readUint8();if(l===d+55+2)return u.readUint16();if(l===d+55+3)return u.readUint24();if(l===d+55+4)return u.readUint32();throw new t.BaseError("Invalid RLP prefix")}function c(u,l,d){const f=u.position,g=[];for(;u.position-f<l;)g.push(o(u,d));return g}return eb}var tb={},Rk;function eT(){if(Rk)return tb;Rk=1,Object.defineProperty(tb,"__esModule",{value:!0}),tb.isHash=r;const t=Pn(),e=Jn();function r(n){return(0,t.isHex)(n)&&(0,e.size)(n)===32}return tb}var rb={},Wc={},gn={},xk;function Ibe(){if(xk)return gn;xk=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.ripemd160=gn.RIPEMD160=gn.md5=gn.MD5=gn.sha1=gn.SHA1=void 0;const t=s7(),e=cc(),r=Uint32Array.from([1732584193,4023233417,2562383102,271733878,3285377520]),n=new Uint32Array(80);class s extends t.HashMD{constructor(){super(64,20,8,!1),this.A=r[0]|0,this.B=r[1]|0,this.C=r[2]|0,this.D=r[3]|0,this.E=r[4]|0}get(){const{A:T,B:R,C:U,D:k,E:O}=this;return[T,R,U,k,O]}set(T,R,U,k,O){this.A=T|0,this.B=R|0,this.C=U|0,this.D=k|0,this.E=O|0}process(T,R){for(let A=0;A<16;A++,R+=4)n[A]=T.getUint32(R,!1);for(let A=16;A<80;A++)n[A]=(0,e.rotl)(n[A-3]^n[A-8]^n[A-14]^n[A-16],1);let{A:U,B:k,C:O,D:B,E:v}=this;for(let A=0;A<80;A++){let S,j;A<20?(S=(0,t.Chi)(k,O,B),j=1518500249):A<40?(S=k^O^B,j=1859775393):A<60?(S=(0,t.Maj)(k,O,B),j=2400959708):(S=k^O^B,j=3395469782);const N=(0,e.rotl)(U,5)+S+v+j+n[A]|0;v=B,B=O,O=(0,e.rotl)(k,30),k=U,U=N}U=U+this.A|0,k=k+this.B|0,O=O+this.C|0,B=B+this.D|0,v=v+this.E|0,this.set(U,k,O,B,v)}roundClean(){(0,e.clean)(n)}destroy(){this.set(0,0,0,0,0),(0,e.clean)(this.buffer)}}gn.SHA1=s,gn.sha1=(0,e.createHasher)(()=>new s);const i=Math.pow(2,32),o=Array.from({length:64},(P,T)=>Math.floor(i*Math.abs(Math.sin(T+1)))),a=r.slice(0,4),c=new Uint32Array(16);class u extends t.HashMD{constructor(){super(64,16,8,!0),this.A=a[0]|0,this.B=a[1]|0,this.C=a[2]|0,this.D=a[3]|0}get(){const{A:T,B:R,C:U,D:k}=this;return[T,R,U,k]}set(T,R,U,k){this.A=T|0,this.B=R|0,this.C=U|0,this.D=k|0}process(T,R){for(let v=0;v<16;v++,R+=4)c[v]=T.getUint32(R,!0);let{A:U,B:k,C:O,D:B}=this;for(let v=0;v<64;v++){let A,S,j;v<16?(A=(0,t.Chi)(k,O,B),S=v,j=[7,12,17,22]):v<32?(A=(0,t.Chi)(B,k,O),S=(5*v+1)%16,j=[5,9,14,20]):v<48?(A=k^O^B,S=(3*v+5)%16,j=[4,11,16,23]):(A=O^(k|~B),S=7*v%16,j=[6,10,15,21]),A=A+U+o[v]+c[S],U=B,B=O,O=k,k=k+(0,e.rotl)(A,j[v%4])}U=U+this.A|0,k=k+this.B|0,O=O+this.C|0,B=B+this.D|0,this.set(U,k,O,B)}roundClean(){(0,e.clean)(c)}destroy(){this.set(0,0,0,0),(0,e.clean)(this.buffer)}}gn.MD5=u,gn.md5=(0,e.createHasher)(()=>new u);const l=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),d=Uint8Array.from(new Array(16).fill(0).map((P,T)=>T)),f=d.map(P=>(9*P+5)%16),g=(()=>{const R=[[d],[f]];for(let U=0;U<4;U++)for(let k of R)k.push(k[U].map(O=>l[O]));return R})(),p=g[0],h=g[1],y=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(P=>Uint8Array.from(P)),b=p.map((P,T)=>P.map(R=>y[T][R])),E=h.map((P,T)=>P.map(R=>y[T][R])),w=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),m=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function _(P,T,R,U){return P===0?T^R^U:P===1?T&R|~T&U:P===2?(T|~R)^U:P===3?T&U|R&~U:T^(R|~U)}const C=new Uint32Array(16);class I extends t.HashMD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:T,h1:R,h2:U,h3:k,h4:O}=this;return[T,R,U,k,O]}set(T,R,U,k,O){this.h0=T|0,this.h1=R|0,this.h2=U|0,this.h3=k|0,this.h4=O|0}process(T,R){for(let D=0;D<16;D++,R+=4)C[D]=T.getUint32(R,!0);let U=this.h0|0,k=U,O=this.h1|0,B=O,v=this.h2|0,A=v,S=this.h3|0,j=S,N=this.h4|0,x=N;for(let D=0;D<5;D++){const M=4-D,L=w[D],F=m[D],q=p[D],$=h[D],V=b[D],J=E[D];for(let Y=0;Y<16;Y++){const Z=(0,e.rotl)(U+_(D,O,v,S)+C[q[Y]]+L,V[Y])+N|0;U=N,N=S,S=(0,e.rotl)(v,10)|0,v=O,O=Z}for(let Y=0;Y<16;Y++){const Z=(0,e.rotl)(k+_(M,B,A,j)+C[$[Y]]+F,J[Y])+x|0;k=x,x=j,j=(0,e.rotl)(A,10)|0,A=B,B=Z}}this.set(this.h1+v+j|0,this.h2+S+x|0,this.h3+N+k|0,this.h4+U+B|0,this.h0+O+A|0)}roundClean(){(0,e.clean)(C)}destroy(){this.destroyed=!0,(0,e.clean)(this.buffer),this.set(0,0,0,0,0)}}return gn.RIPEMD160=I,gn.ripemd160=(0,e.createHasher)(()=>new I),gn}var kk;function F7(){if(kk)return Wc;kk=1,Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.ripemd160=Wc.RIPEMD160=void 0;const t=Ibe();return Wc.RIPEMD160=t.RIPEMD160,Wc.ripemd160=t.ripemd160,Wc}var Bk;function q7(){if(Bk)return rb;Bk=1,Object.defineProperty(rb,"__esModule",{value:!0}),rb.ripemd160=s;const t=F7(),e=Pn(),r=Lt(),n=Ae();function s(i,o){const a=o||"hex",c=(0,t.ripemd160)((0,e.isHex)(i,{strict:!1})?(0,r.toBytes)(i):i);return a==="bytes"?c:(0,n.toHex)(c)}return rb}var o2={},jk;function H7(){return jk||(jk=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toEventHash=void 0;var e=iv();Object.defineProperty(t,"toEventHash",{enumerable:!0,get:function(){return e.toSignatureHash}})})(o2)),o2}var a2={},Dk;function z7(){return Dk||(Dk=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toEventSignature=void 0;var e=yS();Object.defineProperty(t,"toEventSignature",{enumerable:!0,get:function(){return e.toSignature}})})(a2)),a2}var c2={},Uk;function $7(){return Uk||(Uk=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toFunctionHash=void 0;var e=iv();Object.defineProperty(t,"toFunctionHash",{enumerable:!0,get:function(){return e.toSignatureHash}})})(c2)),c2}var u2={},Mk;function V7(){return Mk||(Mk=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toFunctionSignature=void 0;var e=yS();Object.defineProperty(t,"toFunctionSignature",{enumerable:!0,get:function(){return e.toSignature}})})(u2)),u2}var Kc={},Lk;function G7(){if(Lk)return Kc;Lk=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.nonceManager=void 0,Kc.createNonceManager=r,Kc.jsonRpc=n;const t=fv(),e=rl();function r(s){const{source:i}=s,o=new Map,a=new e.LruMap(8192),c=new Map,u=({address:l,chainId:d})=>`${l}.${d}`;return{async consume({address:l,chainId:d,client:f}){const g=u({address:l,chainId:d}),p=this.get({address:l,chainId:d,client:f});this.increment({address:l,chainId:d});const h=await p;return await i.set({address:l,chainId:d},h),a.set(g,h),h},async increment({address:l,chainId:d}){const f=u({address:l,chainId:d}),g=o.get(f)??0;o.set(f,g+1)},async get({address:l,chainId:d,client:f}){const g=u({address:l,chainId:d});let p=c.get(g);return p||(p=(async()=>{try{const y=await i.get({address:l,chainId:d,client:f}),b=a.get(g)??0;return b>0&&y<=b?b+1:(a.delete(g),y)}finally{this.reset({address:l,chainId:d})}})(),c.set(g,p)),(o.get(g)??0)+await p},reset({address:l,chainId:d}){const f=u({address:l,chainId:d});o.delete(f),c.delete(f)}}}function n(){return{async get(s){const{address:i,client:o}=s;return(0,t.getTransactionCount)(o,{address:i,blockTag:"pending"})},set(){}}}return Kc.nonceManager=r({source:n()}),Kc}var Ul={},nb={},sb={},Fk;function tT(){if(Fk)return sb;Fk=1,Object.defineProperty(sb,"__esModule",{value:!0}),sb.withTimeout=t;function t(e,{errorInstance:r=new Error("timed out"),timeout:n,signal:s}){return new Promise((i,o)=>{(async()=>{let a;try{const c=new AbortController;n>0&&(a=setTimeout(()=>{s?c.abort():o(r)},n)),i(await e({signal:c?.signal||null}))}catch(c){c?.name==="AbortError"&&o(r),o(c)}finally{clearTimeout(a)}})()})}return sb}var _h={},qk;function W7(){if(qk)return _h;qk=1,Object.defineProperty(_h,"__esModule",{value:!0}),_h.idCache=void 0;function t(){return{current:0,take(){return this.current++},reset(){this.current=0}}}return _h.idCache=t(),_h}var Hk;function rT(){if(Hk)return nb;Hk=1,Object.defineProperty(nb,"__esModule",{value:!0}),nb.getHttpRpcClient=s;const t=_i(),e=tT(),r=Qr(),n=W7();function s(i,o={}){return{async request(a){const{body:c,fetchFn:u=o.fetchFn??fetch,onRequest:l=o.onRequest,onResponse:d=o.onResponse,timeout:f=o.timeout??1e4}=a,g={...o.fetchOptions??{},...a.fetchOptions??{}},{headers:p,method:h,signal:y}=g;try{const b=await(0,e.withTimeout)(async({signal:w})=>{const m={...g,body:Array.isArray(c)?(0,r.stringify)(c.map(P=>({jsonrpc:"2.0",id:P.id??n.idCache.take(),...P}))):(0,r.stringify)({jsonrpc:"2.0",id:c.id??n.idCache.take(),...c}),headers:{"Content-Type":"application/json",...p},method:h||"POST",signal:y||(f>0?w:null)},_=new Request(i,m),C=await l?.(_,m)??{...m,url:i};return await u(C.url??i,C)},{errorInstance:new t.TimeoutError({body:c,url:i}),timeout:f,signal:!0});d&&await d(b);let E;if(b.headers.get("Content-Type")?.startsWith("application/json"))E=await b.json();else{E=await b.text();try{E=JSON.parse(E||"{}")}catch(w){if(b.ok)throw w;E={error:E}}}if(!b.ok)throw new t.HttpRequestError({body:c,details:(0,r.stringify)(E.error)||b.statusText,headers:b.headers,status:b.status,url:i});return E}catch(b){throw b instanceof t.HttpRequestError||b instanceof t.TimeoutError?b:new t.HttpRequestError({body:c,cause:b,url:i})}}}}return nb}var ib={},l2={},zk;function K7(){return zk||(zk=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.socketClientCache=void 0,t.getSocketRpcClient=i;const e=_i(),r=US(),n=tT(),s=W7();t.socketClientCache=new Map;async function i(o){const{getSocket:a,keepAlive:c=!0,key:u="socket",reconnect:l=!0,url:d}=o,{interval:f=3e4}=typeof c=="object"?c:{},{attempts:g=5,delay:p=2e3}=typeof l=="object"?l:{},h=JSON.stringify({keepAlive:c,key:u,url:d,reconnect:l});let y=t.socketClientCache.get(h);if(y)return y;let b=0;const{schedule:E}=(0,r.createBatchScheduler)({id:h,fn:async()=>{const _=new Map,C=new Map;let I,P,T,R=!1;function U(){if(l&&b<g){if(R)return;R=!0,b++,P?.close(),setTimeout(async()=>{await k().catch(console.error),R=!1},p)}else _.clear(),C.clear()}async function k(){const O=await a({onClose(){for(const B of _.values())B.onError?.(new e.SocketClosedError({url:d}));for(const B of C.values())B.onError?.(new e.SocketClosedError({url:d}));U()},onError(B){I=B;for(const v of _.values())v.onError?.(I);for(const v of C.values())v.onError?.(I);U()},onOpen(){I=void 0,b=0},onResponse(B){const v=B.method==="eth_subscription",A=v?B.params.subscription:B.id,S=v?C:_,j=S.get(A);j&&j.onResponse(B),v||S.delete(A)}});if(P=O,c&&(T&&clearInterval(T),T=setInterval(()=>P.ping?.(),f)),l&&C.size>0){const B=C.entries();for(const[v,{onResponse:A,body:S,onError:j}]of B)S&&(C.delete(v),y?.request({body:S,onResponse:A,onError:j}))}return O}return await k(),I=void 0,y={close(){T&&clearInterval(T),P.close(),t.socketClientCache.delete(h)},get socket(){return P},request({body:O,onError:B,onResponse:v}){I&&B&&B(I);const A=O.id??s.idCache.take(),S=j=>{typeof j.id=="number"&&A!==j.id||(O.method==="eth_subscribe"&&typeof j.result=="string"&&C.set(j.result,{onResponse:S,onError:B,body:O}),O.method==="eth_unsubscribe"&&C.delete(O.params?.[0]),v(j))};_.set(A,{onResponse:S,onError:B});try{P.request({body:{jsonrpc:"2.0",id:A,...O}})}catch(j){B?.(j)}},requestAsync({body:O,timeout:B=1e4}){return(0,n.withTimeout)(()=>new Promise((v,A)=>this.request({body:O,onError:A,onResponse:v})),{errorInstance:new e.TimeoutError({body:O,url:d}),timeout:B})},requests:_,subscriptions:C,url:d},t.socketClientCache.set(h,y),[y]}}),[w,[m]]=await E();return m}})(l2)),l2}function Sbe(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Tbe=Sbe(),Pbe=Object.freeze(Object.defineProperty({__proto__:null,WebSocket:Tbe},Symbol.toStringTag,{value:"Module"})),Nbe=Fj(Pbe);var $k;function nT(){if($k)return ib;$k=1,Object.defineProperty(ib,"__esModule",{value:!0}),ib.getWebSocketRpcClient=r;const t=_i(),e=K7();async function r(n,s={}){const{keepAlive:i,reconnect:o}=s;return(0,e.getSocketRpcClient)({async getSocket({onClose:a,onError:c,onOpen:u,onResponse:l}){const d=await Promise.resolve().then(()=>Nbe).then(y=>y.WebSocket),f=new d(n);function g(){f.removeEventListener("close",g),f.removeEventListener("message",p),f.removeEventListener("error",c),f.removeEventListener("open",u),a()}function p({data:y}){if(!(typeof y=="string"&&y.trim().length===0))try{const b=JSON.parse(y);l(b)}catch(b){c(b)}}f.addEventListener("close",g),f.addEventListener("message",p),f.addEventListener("error",c),f.addEventListener("open",u),f.readyState===d.CONNECTING&&await new Promise((y,b)=>{f&&(f.onopen=y,f.onerror=b)});const{close:h}=f;return Object.assign(f,{close(){h.bind(f)(),g()},ping(){try{if(f.readyState===f.CLOSED||f.readyState===f.CLOSING)throw new t.WebSocketRequestError({url:f.url,cause:new t.SocketClosedError({url:f.url})});const y={jsonrpc:"2.0",id:null,method:"net_version",params:[]};f.send(JSON.stringify(y))}catch(y){c(y)}},request({body:y}){if(f.readyState===f.CLOSED||f.readyState===f.CLOSING)throw new t.WebSocketRequestError({body:y,url:f.url,cause:new t.SocketClosedError({url:f.url})});return f.send(JSON.stringify(y))}})},keepAlive:i,reconnect:o,url:n})}return ib}var Vk;function Z7(){if(Vk)return Ul;Vk=1,Object.defineProperty(Ul,"__esModule",{value:!0}),Ul.rpc=void 0,Ul.getSocket=s;const t=rT(),e=nT();function r(i,{body:o,onError:a,onResponse:c}){return i.request({body:o,onError:a,onResponse:c}),i}async function n(i,{body:o,timeout:a=1e4}){return i.requestAsync({body:o,timeout:a})}async function s(i){const o=await(0,e.getWebSocketRpcClient)(i);return Object.assign(o.socket,{requests:o.requests,subscriptions:o.subscriptions})}return Ul.rpc={http(i,o){return(0,t.getHttpRpcClient)(i).request(o)},webSocket:r,webSocketAsync:n},Ul}var ob={},ab={},Ah={},Gk;function Y7(){return Gk||(Gk=1,Object.defineProperty(Ah,"__esModule",{value:!0}),Ah.presignMessagePrefix=void 0,Ah.presignMessagePrefix=`Ethereum Signed Message:
`),Ah}var Wk;function J7(){if(Wk)return ab;Wk=1,Object.defineProperty(ab,"__esModule",{value:!0}),ab.toPrefixedMessage=s;const t=Y7(),e=Mr(),r=Jn(),n=Ae();function s(i){const o=typeof i=="string"?(0,n.stringToHex)(i):typeof i.raw=="string"?i.raw:(0,n.bytesToHex)(i.raw),a=(0,n.stringToHex)(`${t.presignMessagePrefix}${(0,r.size)(o)}`);return(0,e.concat)([a,o])}return ab}var Kk;function $0(){if(Kk)return ob;Kk=1,Object.defineProperty(ob,"__esModule",{value:!0}),ob.hashMessage=r;const t=Qn(),e=J7();function r(n,s){return(0,t.keccak256)((0,e.toPrefixedMessage)(n),s)}return ob}var Zc={},Yc={},No={},Zk;function Q7(){if(Zk)return No;Zk=1,Object.defineProperty(No,"__esModule",{value:!0}),No.InvalidStructTypeError=No.InvalidPrimaryTypeError=No.InvalidDomainError=void 0;const t=Qr(),e=Ke();class r extends e.BaseError{constructor({domain:o}){super(`Invalid domain "${(0,t.stringify)(o)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}No.InvalidDomainError=r;class n extends e.BaseError{constructor({primaryType:o,types:a}){super(`Invalid primary type \`${o}\` must be one of \`${JSON.stringify(Object.keys(a))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}No.InvalidPrimaryTypeError=n;class s extends e.BaseError{constructor({type:o}){super(`Struct type "${o}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}return No.InvalidStructTypeError=s,No}var Yk;function Sv(){if(Yk)return Yc;Yk=1,Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.serializeTypedData=u,Yc.validateTypedData=l,Yc.getTypesForEIP712Domain=d,Yc.domainSeparator=f;const t=er(),e=Ei(),r=Q7(),n=Xn(),s=Jn(),i=Ae(),o=ov(),a=V0(),c=Qr();function u(p){const{domain:h,message:y,primaryType:b,types:E}=p,w=(C,I)=>{const P={...I};for(const T of C){const{name:R,type:U}=T;U==="address"&&(P[R]=P[R].toLowerCase())}return P},m=E.EIP712Domain?h?w(E.EIP712Domain,h):{}:{},_=(()=>{if(b!=="EIP712Domain")return w(E[b],y)})();return(0,c.stringify)({domain:m,message:_,primaryType:b,types:E})}function l(p){const{domain:h,message:y,primaryType:b,types:E}=p,w=(m,_)=>{for(const C of m){const{name:I,type:P}=C,T=_[I],R=P.match(o.integerRegex);if(R&&(typeof T=="number"||typeof T=="bigint")){const[O,B,v]=R;(0,i.numberToHex)(T,{signed:B==="int",size:Number.parseInt(v,10)/8})}if(P==="address"&&typeof T=="string"&&!(0,n.isAddress)(T))throw new e.InvalidAddressError({address:T});const U=P.match(o.bytesRegex);if(U){const[O,B]=U;if(B&&(0,s.size)(T)!==Number.parseInt(B,10))throw new t.BytesSizeMismatchError({expectedSize:Number.parseInt(B,10),givenSize:(0,s.size)(T)})}const k=E[P];k&&(g(P),w(k,T))}};if(E.EIP712Domain&&h){if(typeof h!="object")throw new r.InvalidDomainError({domain:h});w(E.EIP712Domain,h)}if(b!=="EIP712Domain")if(E[b])w(E[b],y);else throw new r.InvalidPrimaryTypeError({primaryType:b,types:E})}function d({domain:p}){return[typeof p?.name=="string"&&{name:"name",type:"string"},p?.version&&{name:"version",type:"string"},(typeof p?.chainId=="number"||typeof p?.chainId=="bigint")&&{name:"chainId",type:"uint256"},p?.verifyingContract&&{name:"verifyingContract",type:"address"},p?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function f({domain:p}){return(0,a.hashDomain)({domain:p,types:{EIP712Domain:d({domain:p})}})}function g(p){if(p==="address"||p==="bool"||p==="string"||p.startsWith("bytes")||p.startsWith("uint")||p.startsWith("int"))throw new r.InvalidStructTypeError({type:p})}return Yc}var Jk;function V0(){if(Jk)return Zc;Jk=1,Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.hashTypedData=i,Zc.hashDomain=o,Zc.hashStruct=a,Zc.encodeType=l;const t=vi(),e=Mr(),r=Ae(),n=Qn(),s=Sv();function i(g){const{domain:p={},message:h,primaryType:y}=g,b={EIP712Domain:(0,s.getTypesForEIP712Domain)({domain:p}),...g.types};(0,s.validateTypedData)({domain:p,message:h,primaryType:y,types:b});const E=["0x1901"];return p&&E.push(o({domain:p,types:b})),y!=="EIP712Domain"&&E.push(a({data:h,primaryType:y,types:b})),(0,n.keccak256)((0,e.concat)(E))}function o({domain:g,types:p}){return a({data:g,primaryType:"EIP712Domain",types:p})}function a({data:g,primaryType:p,types:h}){const y=c({data:g,primaryType:p,types:h});return(0,n.keccak256)(y)}function c({data:g,primaryType:p,types:h}){const y=[{type:"bytes32"}],b=[u({primaryType:p,types:h})];for(const E of h[p]){const[w,m]=f({types:h,name:E.name,type:E.type,value:g[E.name]});y.push(w),b.push(m)}return(0,t.encodeAbiParameters)(y,b)}function u({primaryType:g,types:p}){const h=(0,r.toHex)(l({primaryType:g,types:p}));return(0,n.keccak256)(h)}function l({primaryType:g,types:p}){let h="";const y=d({primaryType:g,types:p});y.delete(g);const b=[g,...Array.from(y).sort()];for(const E of b)h+=`${E}(${p[E].map(({name:w,type:m})=>`${m} ${w}`).join(",")})`;return h}function d({primaryType:g,types:p},h=new Set){const b=g.match(/^\w*/u)?.[0];if(h.has(b)||p[b]===void 0)return h;h.add(b);for(const E of p[b])d({primaryType:E.type,types:p},h);return h}function f({types:g,name:p,type:h,value:y}){if(g[h]!==void 0)return[{type:"bytes32"},(0,n.keccak256)(c({data:y,primaryType:h,types:g}))];if(h==="bytes")return[{type:"bytes32"},(0,n.keccak256)(y)];if(h==="string")return[{type:"bytes32"},(0,n.keccak256)((0,r.toHex)(y))];if(h.lastIndexOf("]")===h.length-1){const b=h.slice(0,h.lastIndexOf("[")),E=y.map(w=>f({name:p,type:b,types:g,value:w}));return[{type:"bytes32"},(0,n.keccak256)((0,t.encodeAbiParameters)(E.map(([w])=>w),E.map(([,w])=>w)))]}return[{type:h},y]}return Zc}var cb={},Jc={},Qk;function sT(){return Qk||(Qk=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.zeroHash=Jc.erc6492MagicBytes=void 0,Jc.erc6492MagicBytes="0x6492649264926492649264926492649264926492649264926492649264926492",Jc.zeroHash="0x0000000000000000000000000000000000000000000000000000000000000000"),Jc}var Xk;function iT(){if(Xk)return cb;Xk=1,Object.defineProperty(cb,"__esModule",{value:!0}),cb.isErc6492Signature=r;const t=sT(),e=Hs();function r(n){return(0,e.sliceHex)(n,-32)===t.erc6492MagicBytes}return cb}var ub={},Ch={},d2={},rr={},mn={},Ml={},Ih={},eB;function Obe(){if(eB)return Ih;eB=1,Object.defineProperty(Ih,"__esModule",{value:!0}),Ih.LruMap=void 0;class t extends Map{constructor(r){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=r}get(r){const n=super.get(r);return super.has(r)&&n!==void 0&&(this.delete(r),super.set(r,n)),n}set(r,n){if(super.set(r,n),this.maxSize&&this.size>this.maxSize){const s=this.keys().next().value;s&&this.delete(s)}return this}}return Ih.LruMap=t,Ih}var tB;function Rbe(){if(tB)return Ml;tB=1,Object.defineProperty(Ml,"__esModule",{value:!0}),Ml.checksum=void 0,Ml.clear=r;const t=Obe(),e={checksum:new t.LruMap(8192)};Ml.checksum=e.checksum;function r(){for(const n of Object.values(e))n.clear()}return Ml}var Qc={},rB;function oT(){if(rB)return Qc;rB=1,Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.keccak256=i,Qc.ripemd160=o,Qc.sha256=a,Qc.validate=c;const t=F7(),e=XF(),r=f7(),n=to(),s=Xr();function i(u,l={}){const{as:d=typeof u=="string"?"Hex":"Bytes"}=l,f=(0,e.keccak_256)(n.from(u));return d==="Bytes"?f:s.fromBytes(f)}function o(u,l={}){const{as:d=typeof u=="string"?"Hex":"Bytes"}=l,f=(0,t.ripemd160)(n.from(u));return d==="Bytes"?f:s.fromBytes(f)}function a(u,l={}){const{as:d=typeof u=="string"?"Hex":"Bytes"}=l,f=(0,r.sha256)(n.from(u));return d==="Bytes"?f:s.fromBytes(f)}function c(u){return s.validate(u)&&s.size(u)===32}return Qc}var hr={},nB;function X7(){if(nB)return hr;nB=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.InvalidSerializedSizeError=hr.InvalidUncompressedPrefixError=hr.InvalidCompressedPrefixError=hr.InvalidPrefixError=hr.InvalidError=void 0,hr.assert=s,hr.compress=i,hr.from=o,hr.fromBytes=a,hr.fromHex=c,hr.toBytes=u,hr.toHex=l,hr.validate=d;const t=to(),e=As(),r=Xr(),n=yv();function s(b,E={}){const{compressed:w}=E,{prefix:m,x:_,y:C}=b;if(w===!1||typeof _=="bigint"&&typeof C=="bigint"){if(m!==4)throw new g({prefix:m,cause:new h});return}if(w===!0||typeof _=="bigint"&&typeof C>"u"){if(m!==3&&m!==2)throw new g({prefix:m,cause:new p});return}throw new f({publicKey:b})}function i(b){const{x:E,y:w}=b;return{prefix:w%2n===0n?2:3,x:E}}function o(b){const E=(()=>{if(r.validate(b))return c(b);if(t.validate(b))return a(b);const{prefix:w,x:m,y:_}=b;return typeof m=="bigint"&&typeof _=="bigint"?{prefix:w??4,x:m,y:_}:{prefix:w,x:m}})();return s(E),E}function a(b){return c(r.fromBytes(b))}function c(b){if(b.length!==132&&b.length!==130&&b.length!==68)throw new y({publicKey:b});if(b.length===130){const m=BigInt(r.slice(b,0,32)),_=BigInt(r.slice(b,32,64));return{prefix:4,x:m,y:_}}if(b.length===132){const m=Number(r.slice(b,0,1)),_=BigInt(r.slice(b,1,33)),C=BigInt(r.slice(b,33,65));return{prefix:m,x:_,y:C}}const E=Number(r.slice(b,0,1)),w=BigInt(r.slice(b,1,33));return{prefix:E,x:w}}function u(b,E={}){return t.fromHex(l(b,E))}function l(b,E={}){s(b);const{prefix:w,x:m,y:_}=b,{includePrefix:C=!0}=E;return r.concat(C?r.fromNumber(w,{size:1}):"0x",r.fromNumber(m,{size:32}),typeof _=="bigint"?r.fromNumber(_,{size:32}):"0x")}function d(b,E={}){try{return s(b,E),!0}catch{return!1}}class f extends e.BaseError{constructor({publicKey:E}){super(`Value \`${n.stringify(E)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}hr.InvalidError=f;class g extends e.BaseError{constructor({prefix:E,cause:w}){super(`Prefix "${E}" is invalid.`,{cause:w}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}hr.InvalidPrefixError=g;class p extends e.BaseError{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}hr.InvalidCompressedPrefixError=p;class h extends e.BaseError{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}hr.InvalidUncompressedPrefixError=h;class y extends e.BaseError{constructor({publicKey:E}){super(`Value \`${E}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${r.size(r.from(E))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}}return hr.InvalidSerializedSizeError=y,hr}var sB;function Tv(){if(sB)return mn;sB=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.InvalidChecksumError=mn.InvalidInputError=mn.InvalidAddressError=void 0,mn.assert=o,mn.checksum=a,mn.from=c,mn.fromPublicKey=u,mn.isEqual=l,mn.validate=d;const t=to(),e=Rbe(),r=As(),n=oT(),s=X7(),i=/^0x[a-fA-F0-9]{40}$/;function o(h,y={}){const{strict:b=!0}=y;if(!i.test(h))throw new f({address:h,cause:new g});if(b){if(h.toLowerCase()===h)return;if(a(h)!==h)throw new f({address:h,cause:new p})}}function a(h){if(e.checksum.has(h))return e.checksum.get(h);o(h,{strict:!1});const y=h.substring(2).toLowerCase(),b=n.keccak256(t.fromString(y),{as:"Bytes"}),E=y.split("");for(let m=0;m<40;m+=2)b[m>>1]>>4>=8&&E[m]&&(E[m]=E[m].toUpperCase()),(b[m>>1]&15)>=8&&E[m+1]&&(E[m+1]=E[m+1].toUpperCase());const w=`0x${E.join("")}`;return e.checksum.set(h,w),w}function c(h,y={}){const{checksum:b=!1}=y;return o(h),b?a(h):h}function u(h,y={}){const b=n.keccak256(`0x${s.toHex(h).slice(4)}`).substring(26);return c(`0x${b}`,y)}function l(h,y){return o(h,{strict:!1}),o(y,{strict:!1}),h.toLowerCase()===y.toLowerCase()}function d(h,y={}){const{strict:b=!0}=y??{};try{return o(h,{strict:b}),!0}catch{return!1}}class f extends r.BaseError{constructor({address:y,cause:b}){super(`Address "${y}" is invalid.`,{cause:b}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}mn.InvalidAddressError=f;class g extends r.BaseError{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}mn.InvalidInputError=g;class p extends r.BaseError{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}return mn.InvalidChecksumError=p,mn}var nr={},G={},iB;function aT(){return iB||(iB=1,Object.defineProperty(G,"__esModule",{value:!0}),G.minInt120=G.minInt112=G.minInt104=G.minInt96=G.minInt88=G.minInt80=G.minInt72=G.minInt64=G.minInt56=G.minInt48=G.minInt40=G.minInt32=G.minInt24=G.minInt16=G.minInt8=G.maxInt256=G.maxInt248=G.maxInt240=G.maxInt232=G.maxInt224=G.maxInt216=G.maxInt208=G.maxInt200=G.maxInt192=G.maxInt184=G.maxInt176=G.maxInt168=G.maxInt160=G.maxInt152=G.maxInt144=G.maxInt136=G.maxInt128=G.maxInt120=G.maxInt112=G.maxInt104=G.maxInt96=G.maxInt88=G.maxInt80=G.maxInt72=G.maxInt64=G.maxInt56=G.maxInt48=G.maxInt40=G.maxInt32=G.maxInt24=G.maxInt16=G.maxInt8=G.integerRegex=G.bytesRegex=G.arrayRegex=void 0,G.maxUint256=G.maxUint248=G.maxUint240=G.maxUint232=G.maxUint224=G.maxUint216=G.maxUint208=G.maxUint200=G.maxUint192=G.maxUint184=G.maxUint176=G.maxUint168=G.maxUint160=G.maxUint152=G.maxUint144=G.maxUint136=G.maxUint128=G.maxUint120=G.maxUint112=G.maxUint104=G.maxUint96=G.maxUint88=G.maxUint80=G.maxUint72=G.maxUint64=G.maxUint56=G.maxUint48=G.maxUint40=G.maxUint32=G.maxUint24=G.maxUint16=G.maxUint8=G.minInt256=G.minInt248=G.minInt240=G.minInt232=G.minInt224=G.minInt216=G.minInt208=G.minInt200=G.minInt192=G.minInt184=G.minInt176=G.minInt168=G.minInt160=G.minInt152=G.minInt144=G.minInt136=G.minInt128=void 0,G.arrayRegex=/^(.*)\[([0-9]*)\]$/,G.bytesRegex=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,G.integerRegex=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,G.maxInt8=2n**(8n-1n)-1n,G.maxInt16=2n**(16n-1n)-1n,G.maxInt24=2n**(24n-1n)-1n,G.maxInt32=2n**(32n-1n)-1n,G.maxInt40=2n**(40n-1n)-1n,G.maxInt48=2n**(48n-1n)-1n,G.maxInt56=2n**(56n-1n)-1n,G.maxInt64=2n**(64n-1n)-1n,G.maxInt72=2n**(72n-1n)-1n,G.maxInt80=2n**(80n-1n)-1n,G.maxInt88=2n**(88n-1n)-1n,G.maxInt96=2n**(96n-1n)-1n,G.maxInt104=2n**(104n-1n)-1n,G.maxInt112=2n**(112n-1n)-1n,G.maxInt120=2n**(120n-1n)-1n,G.maxInt128=2n**(128n-1n)-1n,G.maxInt136=2n**(136n-1n)-1n,G.maxInt144=2n**(144n-1n)-1n,G.maxInt152=2n**(152n-1n)-1n,G.maxInt160=2n**(160n-1n)-1n,G.maxInt168=2n**(168n-1n)-1n,G.maxInt176=2n**(176n-1n)-1n,G.maxInt184=2n**(184n-1n)-1n,G.maxInt192=2n**(192n-1n)-1n,G.maxInt200=2n**(200n-1n)-1n,G.maxInt208=2n**(208n-1n)-1n,G.maxInt216=2n**(216n-1n)-1n,G.maxInt224=2n**(224n-1n)-1n,G.maxInt232=2n**(232n-1n)-1n,G.maxInt240=2n**(240n-1n)-1n,G.maxInt248=2n**(248n-1n)-1n,G.maxInt256=2n**(256n-1n)-1n,G.minInt8=-(2n**(8n-1n)),G.minInt16=-(2n**(16n-1n)),G.minInt24=-(2n**(24n-1n)),G.minInt32=-(2n**(32n-1n)),G.minInt40=-(2n**(40n-1n)),G.minInt48=-(2n**(48n-1n)),G.minInt56=-(2n**(56n-1n)),G.minInt64=-(2n**(64n-1n)),G.minInt72=-(2n**(72n-1n)),G.minInt80=-(2n**(80n-1n)),G.minInt88=-(2n**(88n-1n)),G.minInt96=-(2n**(96n-1n)),G.minInt104=-(2n**(104n-1n)),G.minInt112=-(2n**(112n-1n)),G.minInt120=-(2n**(120n-1n)),G.minInt128=-(2n**(128n-1n)),G.minInt136=-(2n**(136n-1n)),G.minInt144=-(2n**(144n-1n)),G.minInt152=-(2n**(152n-1n)),G.minInt160=-(2n**(160n-1n)),G.minInt168=-(2n**(168n-1n)),G.minInt176=-(2n**(176n-1n)),G.minInt184=-(2n**(184n-1n)),G.minInt192=-(2n**(192n-1n)),G.minInt200=-(2n**(200n-1n)),G.minInt208=-(2n**(208n-1n)),G.minInt216=-(2n**(216n-1n)),G.minInt224=-(2n**(224n-1n)),G.minInt232=-(2n**(232n-1n)),G.minInt240=-(2n**(240n-1n)),G.minInt248=-(2n**(248n-1n)),G.minInt256=-(2n**(256n-1n)),G.maxUint8=2n**8n-1n,G.maxUint16=2n**16n-1n,G.maxUint24=2n**24n-1n,G.maxUint32=2n**32n-1n,G.maxUint40=2n**40n-1n,G.maxUint48=2n**48n-1n,G.maxUint56=2n**56n-1n,G.maxUint64=2n**64n-1n,G.maxUint72=2n**72n-1n,G.maxUint80=2n**80n-1n,G.maxUint88=2n**88n-1n,G.maxUint96=2n**96n-1n,G.maxUint104=2n**104n-1n,G.maxUint112=2n**112n-1n,G.maxUint120=2n**120n-1n,G.maxUint128=2n**128n-1n,G.maxUint136=2n**136n-1n,G.maxUint144=2n**144n-1n,G.maxUint152=2n**152n-1n,G.maxUint160=2n**160n-1n,G.maxUint168=2n**168n-1n,G.maxUint176=2n**176n-1n,G.maxUint184=2n**184n-1n,G.maxUint192=2n**192n-1n,G.maxUint200=2n**200n-1n,G.maxUint208=2n**208n-1n,G.maxUint216=2n**216n-1n,G.maxUint224=2n**224n-1n,G.maxUint232=2n**232n-1n,G.maxUint240=2n**240n-1n,G.maxUint248=2n**248n-1n,G.maxUint256=2n**256n-1n),G}var oB;function xbe(){if(oB)return nr;oB=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.decodeParameter=o,nr.decodeAddress=u,nr.decodeArray=l,nr.decodeBool=d,nr.decodeBytes=f,nr.decodeNumber=g,nr.decodeTuple=p,nr.decodeString=h,nr.prepareParameters=y,nr.prepareParameter=b,nr.encode=E,nr.encodeAddress=w,nr.encodeArray=m,nr.encodeBytes=_,nr.encodeBoolean=C,nr.encodeNumber=I,nr.encodeString=P,nr.encodeTuple=T,nr.getArrayComponents=R,nr.hasDynamicChild=U;const t=G0(),e=Tv(),r=to(),n=As(),s=Xr(),i=aT();function o(k,O,B){const{checksumAddress:v,staticPosition:A}=B,S=R(O.type);if(S){const[j,N]=S;return l(k,{...O,type:N},{checksumAddress:v,length:j,staticPosition:A})}if(O.type==="tuple")return p(k,O,{checksumAddress:v,staticPosition:A});if(O.type==="address")return u(k,{checksum:v});if(O.type==="bool")return d(k);if(O.type.startsWith("bytes"))return f(k,O,{staticPosition:A});if(O.type.startsWith("uint")||O.type.startsWith("int"))return g(k,O);if(O.type==="string")return h(k,{staticPosition:A});throw new t.InvalidTypeError(O.type)}const a=32,c=32;function u(k,O={}){const{checksum:B=!1}=O,v=k.readBytes(32);return[(S=>B?e.checksum(S):S)(s.fromBytes(r.slice(v,-20))),32]}function l(k,O,B){const{checksumAddress:v,length:A,staticPosition:S}=B;if(!A){const x=r.toNumber(k.readBytes(c)),D=S+x,M=D+a;k.setPosition(D);const L=r.toNumber(k.readBytes(a)),F=U(O);let q=0;const $=[];for(let V=0;V<L;++V){k.setPosition(M+(F?V*32:q));const[J,Y]=o(k,O,{checksumAddress:v,staticPosition:M});q+=Y,$.push(J)}return k.setPosition(S+32),[$,32]}if(U(O)){const x=r.toNumber(k.readBytes(c)),D=S+x,M=[];for(let L=0;L<A;++L){k.setPosition(D+L*32);const[F]=o(k,O,{checksumAddress:v,staticPosition:D});M.push(F)}return k.setPosition(S+32),[M,32]}let j=0;const N=[];for(let x=0;x<A;++x){const[D,M]=o(k,O,{checksumAddress:v,staticPosition:S+j});j+=M,N.push(D)}return[N,j]}function d(k){return[r.toBoolean(k.readBytes(32),{size:32}),32]}function f(k,O,{staticPosition:B}){const[v,A]=O.type.split("bytes");if(!A){const j=r.toNumber(k.readBytes(32));k.setPosition(B+j);const N=r.toNumber(k.readBytes(32));if(N===0)return k.setPosition(B+32),["0x",32];const x=k.readBytes(N);return k.setPosition(B+32),[s.fromBytes(x),32]}return[s.fromBytes(k.readBytes(Number.parseInt(A,10),32)),32]}function g(k,O){const B=O.type.startsWith("int"),v=Number.parseInt(O.type.split("int")[1]||"256",10),A=k.readBytes(32);return[v>48?r.toBigInt(A,{signed:B}):r.toNumber(A,{signed:B}),32]}function p(k,O,B){const{checksumAddress:v,staticPosition:A}=B,S=O.components.length===0||O.components.some(({name:x})=>!x),j=S?[]:{};let N=0;if(U(O)){const x=r.toNumber(k.readBytes(c)),D=A+x;for(let M=0;M<O.components.length;++M){const L=O.components[M];k.setPosition(D+N);const[F,q]=o(k,L,{checksumAddress:v,staticPosition:D});N+=q,j[S?M:L?.name]=F}return k.setPosition(A+32),[j,32]}for(let x=0;x<O.components.length;++x){const D=O.components[x],[M,L]=o(k,D,{checksumAddress:v,staticPosition:A});j[S?x:D?.name]=M,N+=L}return[j,N]}function h(k,{staticPosition:O}){const B=r.toNumber(k.readBytes(32)),v=O+B;k.setPosition(v);const A=r.toNumber(k.readBytes(32));if(A===0)return k.setPosition(O+32),["",32];const S=k.readBytes(A,32),j=r.toString(r.trimLeft(S));return k.setPosition(O+32),[j,32]}function y({checksumAddress:k,parameters:O,values:B}){const v=[];for(let A=0;A<O.length;A++)v.push(b({checksumAddress:k,parameter:O[A],value:B[A]}));return v}function b({checksumAddress:k=!1,parameter:O,value:B}){const v=O,A=R(v.type);if(A){const[S,j]=A;return m(B,{checksumAddress:k,length:S,parameter:{...v,type:j}})}if(v.type==="tuple")return T(B,{checksumAddress:k,parameter:v});if(v.type==="address")return w(B,{checksum:k});if(v.type==="bool")return C(B);if(v.type.startsWith("uint")||v.type.startsWith("int")){const S=v.type.startsWith("int"),[,,j="256"]=i.integerRegex.exec(v.type)??[];return I(B,{signed:S,size:Number(j)})}if(v.type.startsWith("bytes"))return _(B,{type:v.type});if(v.type==="string")return P(B);throw new t.InvalidTypeError(v.type)}function E(k){let O=0;for(let S=0;S<k.length;S++){const{dynamic:j,encoded:N}=k[S];j?O+=32:O+=s.size(N)}const B=[],v=[];let A=0;for(let S=0;S<k.length;S++){const{dynamic:j,encoded:N}=k[S];j?(B.push(s.fromNumber(O+A,{size:32})),v.push(N),A+=s.size(N)):B.push(N)}return s.concat(...B,...v)}function w(k,O){const{checksum:B=!1}=O;return e.assert(k,{strict:B}),{dynamic:!1,encoded:s.padLeft(k.toLowerCase())}}function m(k,O){const{checksumAddress:B,length:v,parameter:A}=O,S=v===null;if(!Array.isArray(k))throw new t.InvalidArrayError(k);if(!S&&k.length!==v)throw new t.ArrayLengthMismatchError({expectedLength:v,givenLength:k.length,type:`${A.type}[${v}]`});let j=!1;const N=[];for(let x=0;x<k.length;x++){const D=b({checksumAddress:B,parameter:A,value:k[x]});D.dynamic&&(j=!0),N.push(D)}if(S||j){const x=E(N);if(S){const D=s.fromNumber(N.length,{size:32});return{dynamic:!0,encoded:N.length>0?s.concat(D,x):D}}if(j)return{dynamic:!0,encoded:x}}return{dynamic:!1,encoded:s.concat(...N.map(({encoded:x})=>x))}}function _(k,{type:O}){const[,B]=O.split("bytes"),v=s.size(k);if(!B){let A=k;return v%32!==0&&(A=s.padRight(A,Math.ceil((k.length-2)/2/32)*32)),{dynamic:!0,encoded:s.concat(s.padLeft(s.fromNumber(v,{size:32})),A)}}if(v!==Number.parseInt(B,10))throw new t.BytesSizeMismatchError({expectedSize:Number.parseInt(B,10),value:k});return{dynamic:!1,encoded:s.padRight(k)}}function C(k){if(typeof k!="boolean")throw new n.BaseError(`Invalid boolean value: "${k}" (type: ${typeof k}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:s.padLeft(s.fromBoolean(k))}}function I(k,{signed:O,size:B}){if(typeof B=="number"){const v=2n**(BigInt(B)-(O?1n:0n))-1n,A=O?-v-1n:0n;if(k>v||k<A)throw new s.IntegerOutOfRangeError({max:v.toString(),min:A.toString(),signed:O,size:B/8,value:k.toString()})}return{dynamic:!1,encoded:s.fromNumber(k,{size:32,signed:O})}}function P(k){const O=s.fromString(k),B=Math.ceil(s.size(O)/32),v=[];for(let A=0;A<B;A++)v.push(s.padRight(s.slice(O,A*32,(A+1)*32)));return{dynamic:!0,encoded:s.concat(s.padRight(s.fromNumber(s.size(O),{size:32})),...v)}}function T(k,O){const{checksumAddress:B,parameter:v}=O;let A=!1;const S=[];for(let j=0;j<v.components.length;j++){const N=v.components[j],x=Array.isArray(k)?j:N.name,D=b({checksumAddress:B,parameter:N,value:k[x]});S.push(D),D.dynamic&&(A=!0)}return{dynamic:A,encoded:A?E(S):s.concat(...S.map(({encoded:j})=>j))}}function R(k){const O=k.match(/^(.*)\[(\d+)?\]$/);return O?[O[2]?Number(O[2]):null,O[1]]:void 0}function U(k){const{type:O}=k;if(O==="string"||O==="bytes"||O.endsWith("[]"))return!0;if(O==="tuple")return k.components?.some(U);const B=R(k.type);return!!(B&&U({...k,type:B[1]}))}return nr}var Bi={},aB;function eq(){if(aB)return Bi;aB=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.RecursiveReadLimitExceededError=Bi.PositionOutOfBoundsError=Bi.NegativeOffsetError=void 0,Bi.create=r;const t=As(),e={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new i({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(o){if(o<0||o>this.bytes.length-1)throw new s({length:this.bytes.length,position:o})},decrementPosition(o){if(o<0)throw new n({offset:o});const a=this.position-o;this.assertPosition(a),this.position=a},getReadCount(o){return this.positionReadCount.get(o||this.position)||0},incrementPosition(o){if(o<0)throw new n({offset:o});const a=this.position+o;this.assertPosition(a),this.position=a},inspectByte(o){const a=o??this.position;return this.assertPosition(a),this.bytes[a]},inspectBytes(o,a){const c=a??this.position;return this.assertPosition(c+o-1),this.bytes.subarray(c,c+o)},inspectUint8(o){const a=o??this.position;return this.assertPosition(a),this.bytes[a]},inspectUint16(o){const a=o??this.position;return this.assertPosition(a+1),this.dataView.getUint16(a)},inspectUint24(o){const a=o??this.position;return this.assertPosition(a+2),(this.dataView.getUint16(a)<<8)+this.dataView.getUint8(a+2)},inspectUint32(o){const a=o??this.position;return this.assertPosition(a+3),this.dataView.getUint32(a)},pushByte(o){this.assertPosition(this.position),this.bytes[this.position]=o,this.position++},pushBytes(o){this.assertPosition(this.position+o.length-1),this.bytes.set(o,this.position),this.position+=o.length},pushUint8(o){this.assertPosition(this.position),this.bytes[this.position]=o,this.position++},pushUint16(o){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,o),this.position+=2},pushUint24(o){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,o>>8),this.dataView.setUint8(this.position+2,o&255),this.position+=3},pushUint32(o){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,o),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const o=this.inspectByte();return this.position++,o},readBytes(o,a){this.assertReadLimit(),this._touch();const c=this.inspectBytes(o);return this.position+=a??o,c},readUint8(){this.assertReadLimit(),this._touch();const o=this.inspectUint8();return this.position+=1,o},readUint16(){this.assertReadLimit(),this._touch();const o=this.inspectUint16();return this.position+=2,o},readUint24(){this.assertReadLimit(),this._touch();const o=this.inspectUint24();return this.position+=3,o},readUint32(){this.assertReadLimit(),this._touch();const o=this.inspectUint32();return this.position+=4,o},get remaining(){return this.bytes.length-this.position},setPosition(o){const a=this.position;return this.assertPosition(o),this.position=o,()=>this.position=a},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const o=this.getReadCount();this.positionReadCount.set(this.position,o+1),o>0&&this.recursiveReadCount++}};function r(o,{recursiveReadLimit:a=8192}={}){const c=Object.create(e);return c.bytes=o,c.dataView=new DataView(o.buffer,o.byteOffset,o.byteLength),c.positionReadCount=new Map,c.recursiveReadLimit=a,c}class n extends t.BaseError{constructor({offset:a}){super(`Offset \`${a}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}Bi.NegativeOffsetError=n;class s extends t.BaseError{constructor({length:a,position:c}){super(`Position \`${c}\` is out of bounds (\`0 < position < ${a}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}Bi.PositionOutOfBoundsError=s;class i extends t.BaseError{constructor({count:a,limit:c}){super(`Recursive read limit of \`${c}\` exceeded (recursive read count: \`${a}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}return Bi.RecursiveReadLimitExceededError=i,Bi}var cB;function G0(){if(cB)return rr;cB=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.InvalidTypeError=rr.InvalidArrayError=rr.LengthMismatchError=rr.BytesSizeMismatchError=rr.ArrayLengthMismatchError=rr.ZeroDataError=rr.DataSizeTooSmallError=void 0,rr.decode=c,rr.encode=u,rr.encodePacked=l,rr.format=d,rr.from=f;const t=oc(),e=Tv(),r=to(),n=As(),s=Xr(),i=xbe(),o=eq(),a=aT();function c(m,_,C={}){const{as:I="Array",checksumAddress:P=!1}=C,T=typeof _=="string"?r.fromHex(_):_,R=o.create(T);if(r.size(T)===0&&m.length>0)throw new p;if(r.size(T)&&r.size(T)<32)throw new g({data:typeof _=="string"?_:s.fromBytes(_),parameters:m,size:r.size(T)});let U=0;const k=I==="Array"?[]:{};for(let O=0;O<m.length;++O){const B=m[O];R.setPosition(U);const[v,A]=i.decodeParameter(R,B,{checksumAddress:P,staticPosition:0});U+=A,I==="Array"?k.push(v):k[B.name??O]=v}return k}function u(m,_,C){const{checksumAddress:I=!1}=C??{};if(m.length!==_.length)throw new b({expectedLength:m.length,givenLength:_.length});const P=i.prepareParameters({checksumAddress:I,parameters:m,values:_}),T=i.encode(P);return T.length===0?"0x":T}function l(m,_){if(m.length!==_.length)throw new b({expectedLength:m.length,givenLength:_.length});const C=[];for(let I=0;I<m.length;I++){const P=m[I],T=_[I];C.push(l.encode(P,T))}return s.concat(...C)}(function(m){function _(C,I,P=!1){if(C==="address"){const k=I;return e.assert(k),s.padLeft(k.toLowerCase(),P?32:0)}if(C==="string")return s.fromString(I);if(C==="bytes")return I;if(C==="bool")return s.padLeft(s.fromBoolean(I),P?32:1);const T=C.match(a.integerRegex);if(T){const[k,O,B="256"]=T,v=Number.parseInt(B,10)/8;return s.fromNumber(I,{size:P?32:v,signed:O==="int"})}const R=C.match(a.bytesRegex);if(R){const[k,O]=R;if(Number.parseInt(O,10)!==(I.length-2)/2)throw new y({expectedSize:Number.parseInt(O,10),value:I});return s.padRight(I,P?32:0)}const U=C.match(a.arrayRegex);if(U&&Array.isArray(I)){const[k,O]=U,B=[];for(let v=0;v<I.length;v++)B.push(_(O,I[v],!0));return B.length===0?"0x":s.concat(...B)}throw new w(C)}m.encode=_})(l||(rr.encodePacked=l={}));function d(m){return t.formatAbiParameters(m)}function f(m){return Array.isArray(m)&&typeof m[0]=="string"||typeof m=="string"?t.parseAbiParameters(m):m}class g extends n.BaseError{constructor({data:_,parameters:C,size:I}){super(`Data size of ${I} bytes is too small for given parameters.`,{metaMessages:[`Params: (${t.formatAbiParameters(C)})`,`Data:   ${_} (${I} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}rr.DataSizeTooSmallError=g;class p extends n.BaseError{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}rr.ZeroDataError=p;class h extends n.BaseError{constructor({expectedLength:_,givenLength:C,type:I}){super(`Array length mismatch for type \`${I}\`. Expected: \`${_}\`. Given: \`${C}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}rr.ArrayLengthMismatchError=h;class y extends n.BaseError{constructor({expectedSize:_,value:C}){super(`Size of bytes "${C}" (bytes${s.size(C)}) does not match expected size (bytes${_}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}rr.BytesSizeMismatchError=y;class b extends n.BaseError{constructor({expectedLength:_,givenLength:C}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${_}`,`Given length (values): ${C}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}rr.LengthMismatchError=b;class E extends n.BaseError{constructor(_){super(`Value \`${_}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}rr.InvalidArrayError=E;class w extends n.BaseError{constructor(_){super(`Type \`${_}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}return rr.InvalidTypeError=w,rr}var Bn={},Ns={},uB;function kbe(){if(uB)return Ns;uB=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.toBytes=s,Ns.toHex=i,Ns.to=o,Ns.decodeRlpCursor=a,Ns.readLength=c,Ns.readList=u,Ns.from=l,Ns.fromBytes=d,Ns.fromHex=f;const t=to(),e=As(),r=Xr(),n=eq();function s(b){return o(b,"Bytes")}function i(b){return o(b,"Hex")}function o(b,E){const w=E??(typeof b=="string"?"Hex":"Bytes"),m=(()=>{if(typeof b=="string"){if(b.length>3&&b.length%2!==0)throw new r.InvalidLengthError(b);return t.fromHex(b)}return b})(),_=n.create(m,{recursiveReadLimit:Number.POSITIVE_INFINITY});return a(_,w)}function a(b,E="Hex"){if(b.bytes.length===0)return E==="Hex"?r.fromBytes(b.bytes):b.bytes;const w=b.readByte();if(w<128&&b.decrementPosition(1),w<192){const _=c(b,w,128),C=b.readBytes(_);return E==="Hex"?r.fromBytes(C):C}const m=c(b,w,192);return u(b,m,E)}function c(b,E,w){if(w===128&&E<128)return 1;if(E<=w+55)return E-w;if(E===w+55+1)return b.readUint8();if(E===w+55+2)return b.readUint16();if(E===w+55+3)return b.readUint24();if(E===w+55+4)return b.readUint32();throw new e.BaseError("Invalid RLP prefix")}function u(b,E,w){const m=b.position,_=[];for(;b.position-m<E;)_.push(a(b,w));return _}function l(b,E){const{as:w}=E,m=g(b),_=n.create(new Uint8Array(m.length));return m.encode(_),w==="Hex"?r.fromBytes(_.bytes):_.bytes}function d(b,E={}){const{as:w="Bytes"}=E;return l(b,{as:w})}function f(b,E={}){const{as:w="Hex"}=E;return l(b,{as:w})}function g(b){return Array.isArray(b)?p(b.map(E=>g(E))):h(b)}function p(b){const E=b.reduce((_,C)=>_+C.length,0),w=y(E);return{length:E<=55?1+E:1+w+E,encode(_){E<=55?_.pushByte(192+E):(_.pushByte(247+w),w===1?_.pushUint8(E):w===2?_.pushUint16(E):w===3?_.pushUint24(E):_.pushUint32(E));for(const{encode:C}of b)C(_)}}}function h(b){const E=typeof b=="string"?t.fromHex(b):b,w=y(E.length);return{length:E.length===1&&E[0]<128?1:E.length<=55?1+E.length:1+w+E.length,encode(_){E.length===1&&E[0]<128?_.pushBytes(E):E.length<=55?(_.pushByte(128+E.length),_.pushBytes(E)):(_.pushByte(183+w),w===1?_.pushUint8(E.length):w===2?_.pushUint16(E.length):w===3?_.pushUint24(E.length):_.pushUint32(E.length),_.pushBytes(E))}}}function y(b){if(b<2**8)return 1;if(b<2**16)return 2;if(b<2**24)return 3;if(b<2**32)return 4;throw new e.BaseError("Length is too large.")}return Ns}var lt={},lB;function tq(){if(lB)return lt;lB=1,Object.defineProperty(lt,"__esModule",{value:!0}),lt.InvalidVError=lt.InvalidYParityError=lt.InvalidSError=lt.InvalidRError=lt.MissingPropertiesError=lt.InvalidSerializedSizeError=void 0,lt.assert=o,lt.fromBytes=a,lt.fromHex=c,lt.extract=u,lt.from=l,lt.fromDerBytes=d,lt.fromDerHex=f,lt.fromLegacy=g,lt.fromRpc=p,lt.fromTuple=h,lt.toBytes=y,lt.toHex=b,lt.toDerBytes=E,lt.toDerHex=w,lt.toLegacy=m,lt.toRpc=_,lt.toTuple=C,lt.validate=I,lt.vToYParity=P,lt.yParityToV=T;const t=al(),e=to(),r=As(),n=Xr(),s=yv(),i=aT();function o(A,S={}){const{recovered:j}=S;if(typeof A.r>"u")throw new U({signature:A});if(typeof A.s>"u")throw new U({signature:A});if(j&&typeof A.yParity>"u")throw new U({signature:A});if(A.r<0n||A.r>i.maxUint256)throw new k({value:A.r});if(A.s<0n||A.s>i.maxUint256)throw new O({value:A.s});if(typeof A.yParity=="number"&&A.yParity!==0&&A.yParity!==1)throw new B({value:A.yParity})}function a(A){return c(n.fromBytes(A))}function c(A){if(A.length!==130&&A.length!==132)throw new R({signature:A});const S=BigInt(n.slice(A,0,32)),j=BigInt(n.slice(A,32,64)),N=(()=>{const x=+`0x${A.slice(130)}`;if(!Number.isNaN(x))try{return P(x)}catch{throw new B({value:x})}})();return typeof N>"u"?{r:S,s:j}:{r:S,s:j,yParity:N}}function u(A){if(!(typeof A.r>"u")&&!(typeof A.s>"u"))return l(A)}function l(A){const S=typeof A=="string"?c(A):A instanceof Uint8Array?a(A):typeof A.r=="string"?p(A):A.v?g(A):{r:A.r,s:A.s,...typeof A.yParity<"u"?{yParity:A.yParity}:{}};return o(S),S}function d(A){return f(n.fromBytes(A))}function f(A){const{r:S,s:j}=t.secp256k1.Signature.fromDER(n.from(A).slice(2));return{r:S,s:j}}function g(A){return{r:A.r,s:A.s,yParity:P(A.v)}}function p(A){const S=(()=>{const j=A.v?Number(A.v):void 0;let N=A.yParity?Number(A.yParity):void 0;if(typeof j=="number"&&typeof N!="number"&&(N=P(j)),typeof N!="number")throw new B({value:A.yParity});return N})();return{r:BigInt(A.r),s:BigInt(A.s),yParity:S}}function h(A){const[S,j,N]=A;return l({r:j==="0x"?0n:BigInt(j),s:N==="0x"?0n:BigInt(N),yParity:S==="0x"?0:Number(S)})}function y(A){return e.fromHex(b(A))}function b(A){o(A);const S=A.r,j=A.s;return n.concat(n.fromNumber(S,{size:32}),n.fromNumber(j,{size:32}),typeof A.yParity=="number"?n.fromNumber(T(A.yParity),{size:1}):"0x")}function E(A){return new t.secp256k1.Signature(A.r,A.s).toDERRawBytes()}function w(A){return`0x${new t.secp256k1.Signature(A.r,A.s).toDERHex()}`}function m(A){return{r:A.r,s:A.s,v:T(A.yParity)}}function _(A){const{r:S,s:j,yParity:N}=A;return{r:n.fromNumber(S,{size:32}),s:n.fromNumber(j,{size:32}),yParity:N===0?"0x0":"0x1"}}function C(A){const{r:S,s:j,yParity:N}=A;return[N?"0x01":"0x",S===0n?"0x":n.trimLeft(n.fromNumber(S)),j===0n?"0x":n.trimLeft(n.fromNumber(j))]}function I(A,S={}){try{return o(A,S),!0}catch{return!1}}function P(A){if(A===0||A===27)return 0;if(A===1||A===28)return 1;if(A>=35)return A%2===0?1:0;throw new v({value:A})}function T(A){if(A===0)return 27;if(A===1)return 28;throw new B({value:A})}class R extends r.BaseError{constructor({signature:S}){super(`Value \`${S}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${n.size(n.from(S))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}lt.InvalidSerializedSizeError=R;class U extends r.BaseError{constructor({signature:S}){super(`Signature \`${s.stringify(S)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}lt.MissingPropertiesError=U;class k extends r.BaseError{constructor({value:S}){super(`Value \`${S}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}lt.InvalidRError=k;class O extends r.BaseError{constructor({value:S}){super(`Value \`${S}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}lt.InvalidSError=O;class B extends r.BaseError{constructor({value:S}){super(`Value \`${S}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}lt.InvalidYParityError=B;class v extends r.BaseError{constructor({value:S}){super(`Value \`${S}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}return lt.InvalidVError=v,lt}var dB;function Bbe(){if(dB)return Bn;dB=1,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.from=s,Bn.fromRpc=i,Bn.fromRpcList=o,Bn.fromTuple=a,Bn.fromTupleList=c,Bn.getSignPayload=u,Bn.hash=l,Bn.toRpc=d,Bn.toRpcList=f,Bn.toTuple=g,Bn.toTupleList=p;const t=oT(),e=Xr(),r=kbe(),n=tq();function s(h,y={}){return typeof h.chainId=="string"?i(h):{...h,...y.signature}}function i(h){const{address:y,chainId:b,nonce:E}=h,w=n.extract(h);return{address:y,chainId:Number(b),nonce:BigInt(E),...w}}function o(h){return h.map(i)}function a(h){const[y,b,E,w,m,_]=h;let C={address:b,chainId:y==="0x"?0:Number(y),nonce:E==="0x"?0n:BigInt(E)};return w&&m&&_&&(C={...C,...n.fromTuple([w,m,_])}),s(C)}function c(h){const y=[];for(const b of h)y.push(a(b));return y}function u(h){return l(h,{presign:!0})}function l(h,y={}){const{presign:b}=y;return t.keccak256(e.concat("0x05",r.fromHex(g(b?{address:h.address,chainId:h.chainId,nonce:h.nonce}:h))))}function d(h){const{address:y,chainId:b,nonce:E,...w}=h;return{address:y,chainId:e.fromNumber(b),nonce:e.fromNumber(E),...n.toRpc(w)}}function f(h){return h.map(d)}function g(h){const{address:y,chainId:b,nonce:E}=h,w=n.extract(h);return[b?e.fromNumber(b):"0x",y,E?e.fromNumber(E):"0x",...w?n.toTuple(w):[]]}function p(h){if(!h||h.length===0)return[];const y=[];for(const b of h)y.push(g(b));return y}return Bn}var us={},Xc={},fB;function jbe(){if(fB)return Xc;fB=1,Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.extraEntropy=void 0,Xc.setExtraEntropy=t,Xc.extraEntropy=!1;function t(e){Xc.extraEntropy=e}return Xc}var hB;function Dbe(){if(hB)return us;hB=1,Object.defineProperty(us,"__esModule",{value:!0}),us.noble=void 0,us.createKeyPair=o,us.getPublicKey=a,us.getSharedSecret=c,us.randomPrivateKey=u,us.recoverAddress=l,us.recoverPublicKey=d,us.sign=f,us.verify=g;const t=al(),e=Tv(),r=to(),n=Xr(),s=jbe(),i=X7();us.noble=t.secp256k1;function o(p={}){const{as:h="Hex"}=p,y=u({as:h}),b=a({privateKey:y});return{privateKey:y,publicKey:b}}function a(p){const{privateKey:h}=p,y=t.secp256k1.ProjectivePoint.fromPrivateKey(n.from(h).slice(2));return i.from(y)}function c(p){const{as:h="Hex",privateKey:y,publicKey:b}=p,m=t.secp256k1.ProjectivePoint.fromHex(i.toHex(b).slice(2)).multiply(t.secp256k1.utils.normPrivateKeyToScalar(n.from(y).slice(2))).toRawBytes(!0);return h==="Hex"?n.fromBytes(m):m}function u(p={}){const{as:h="Hex"}=p,y=t.secp256k1.utils.randomPrivateKey();return h==="Hex"?n.fromBytes(y):y}function l(p){return e.fromPublicKey(d(p))}function d(p){const{payload:h,signature:y}=p,{r:b,s:E,yParity:w}=y,_=new t.secp256k1.Signature(BigInt(b),BigInt(E)).addRecoveryBit(w).recoverPublicKey(n.from(h).substring(2));return i.from(_)}function f(p){const{extraEntropy:h=s.extraEntropy,hash:y,payload:b,privateKey:E}=p,{r:w,s:m,recovery:_}=t.secp256k1.sign(r.from(b),r.from(E),{extraEntropy:typeof h=="boolean"?h:n.from(h).slice(2),lowS:!0,...y?{prehash:!0}:{}});return{r:w,s:m,yParity:_}}function g(p){const{address:h,hash:y,payload:b,publicKey:E,signature:w}=p;return h?e.isEqual(h,l({payload:b,signature:w})):t.secp256k1.verify(w,r.from(b),i.toBytes(E),...y?[{prehash:!0,lowS:!0}]:[])}return us}var pB;function Ube(){return pB||(pB=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidWrappedSignatureError=t.suffixParameters=t.magicBytes=void 0,t.assert=a,t.from=c,t.unwrap=u,t.wrap=l,t.validate=d;const e=G0(),r=Bbe(),n=As(),s=Xr(),i=Dbe(),o=tq();t.magicBytes="0x8010801080108010801080108010801080108010801080108010801080108010",t.suffixParameters=e.from("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function a(g){if(typeof g=="string"){if(s.slice(g,-32)!==t.magicBytes)throw new f(g)}else o.assert(g.authorization)}function c(g){return typeof g=="string"?u(g):g}function u(g){a(g);const p=s.toNumber(s.slice(g,-64,-32)),h=s.slice(g,-p-64,-64),y=s.slice(g,0,-p-64),[b,E,w]=e.decode(t.suffixParameters,h);return{authorization:r.from({address:b.delegation,chainId:Number(b.chainId),nonce:b.nonce,yParity:b.yParity,r:b.r,s:b.s}),signature:y,...w&&w!=="0x"?{data:w,to:E}:{}}}function l(g){const{data:p,signature:h}=g;a(g);const y=i.recoverAddress({payload:r.getSignPayload(g.authorization),signature:o.from(g.authorization)}),b=e.encode(t.suffixParameters,[{...g.authorization,delegation:g.authorization.address,chainId:BigInt(g.authorization.chainId)},g.to??y,p??"0x"]),E=s.fromNumber(s.size(b),{size:32});return s.concat(h,b,E,t.magicBytes)}function d(g){try{return a(g),!0}catch{return!1}}class f extends n.BaseError{constructor(p){super(`Value \`${p}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}}t.InvalidWrappedSignatureError=f})(d2)),d2}var gB;function Pv(){return gB||(gB=1,Object.defineProperty(Ch,"__esModule",{value:!0}),Ch.SignatureErc8010=void 0,Ch.SignatureErc8010=Ube()),Ch}var mB;function cT(){if(mB)return ub;mB=1,Object.defineProperty(ub,"__esModule",{value:!0}),ub.isErc8010Signature=e;const t=Pv();function e(r){return t.SignatureErc8010.validate(r)}return ub}var lb={},yB;function rq(){if(yB)return lb;yB=1,Object.defineProperty(lb,"__esModule",{value:!0}),lb.parseErc6492Signature=r;const t=uc(),e=iT();function r(n){if(!(0,e.isErc6492Signature)(n))return{signature:n};const[s,i,o]=(0,t.decodeAbiParameters)([{type:"address"},{type:"bytes"},{type:"bytes"}],n);return{address:s,data:i,signature:o}}return lb}var db={},bB;function nq(){if(bB)return db;bB=1,Object.defineProperty(db,"__esModule",{value:!0}),db.parseErc8010Signature=n;const t=Pv(),e=Ae(),r=cT();function n(s){if(!(0,r.isErc8010Signature)(s))return{signature:s};const{authorization:i,to:o,...a}=t.SignatureErc8010.unwrap(s);return{authorization:{address:i.address,chainId:i.chainId,nonce:Number(i.nonce),r:(0,e.numberToHex)(i.r,{size:32}),s:(0,e.numberToHex)(i.s,{size:32}),yParity:i.yParity},...o?{address:o}:{},...a}}return db}var fb={},wB;function uT(){if(wB)return fb;wB=1,Object.defineProperty(fb,"__esModule",{value:!0}),fb.recoverMessageAddress=r;const t=$0(),e=hc();async function r({message:n,signature:s}){return(0,e.recoverAddress)({hash:(0,t.hashMessage)(n),signature:s})}return fb}var hb={},EB;function lT(){if(EB)return hb;EB=1,Object.defineProperty(hb,"__esModule",{value:!0}),hb.recoverTypedDataAddress=r;const t=V0(),e=hc();async function r(n){const{domain:s,message:i,primaryType:o,signature:a,types:c}=n;return(0,e.recoverAddress)({hash:(0,t.hashTypedData)({domain:s,message:i,primaryType:o,types:c}),signature:a})}return hb}var pb={},vB;function sq(){if(vB)return pb;vB=1,Object.defineProperty(pb,"__esModule",{value:!0}),pb.serializeErc6492Signature=s;const t=sT(),e=vi(),r=Mr(),n=Lt();function s(i){const{address:o,data:a,signature:c,to:u="hex"}=i,l=(0,r.concatHex)([(0,e.encodeAbiParameters)([{type:"address"},{type:"bytes"},{type:"bytes"}],[o,a,c]),t.erc6492MagicBytes]);return u==="hex"?l:(0,n.hexToBytes)(l)}return pb}var gb={},_B;function iq(){if(_B)return gb;_B=1,Object.defineProperty(gb,"__esModule",{value:!0}),gb.serializeErc8010Signature=r;const t=Pv(),e=Lt();function r(n){const{address:s,data:i,signature:o,to:a="hex"}=n,c=t.SignatureErc8010.wrap({authorization:{address:n.authorization.address,chainId:n.authorization.chainId,nonce:BigInt(n.authorization.nonce),r:BigInt(n.authorization.r),s:BigInt(n.authorization.s),yParity:n.authorization.yParity},data:i,signature:o,to:s});return a==="hex"?c:(0,e.hexToBytes)(c)}return gb}var mb={},AB;function oq(){if(AB)return mb;AB=1,Object.defineProperty(mb,"__esModule",{value:!0}),mb.verifyHash=n;const t=_s(),e=Ii(),r=hc();async function n({address:s,hash:i,signature:o}){return(0,e.isAddressEqual)((0,t.getAddress)(s),await(0,r.recoverAddress)({hash:i,signature:o}))}return mb}var yb={},CB;function aq(){if(CB)return yb;CB=1,Object.defineProperty(yb,"__esModule",{value:!0}),yb.verifyMessage=n;const t=_s(),e=Ii(),r=uT();async function n({address:s,message:i,signature:o}){return(0,e.isAddressEqual)((0,t.getAddress)(s),await(0,r.recoverMessageAddress)({message:i,signature:o}))}return yb}var bb={},IB;function cq(){if(IB)return bb;IB=1,Object.defineProperty(bb,"__esModule",{value:!0}),bb.verifyTypedData=n;const t=_s(),e=Ii(),r=lT();async function n(s){const{address:i,domain:o,message:a,primaryType:c,signature:u,types:l}=s;return(0,e.isAddressEqual)((0,t.getAddress)(i),await(0,r.recoverTypedDataAddress)({domain:o,message:a,primaryType:c,signature:u,types:l}))}return bb}var wb={},SB;function dT(){if(SB)return wb;SB=1,Object.defineProperty(wb,"__esModule",{value:!0}),wb.getSerializedTransactionType=n;const t=ts(),e=Hs(),r=fr();function n(s){const i=(0,e.sliceHex)(s,0,1);if(i==="0x04")return"eip7702";if(i==="0x03")return"eip4844";if(i==="0x02")return"eip1559";if(i==="0x01")return"eip2930";if(i!=="0x"&&(0,r.hexToNumber)(i)>=192)return"legacy";throw new t.InvalidSerializedTransactionTypeError({serializedType:i})}return wb}var Ll={},TB;function fT(){if(TB)return Ll;TB=1,Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.parseTransaction=f,Ll.toTransactionArray=E,Ll.parseAccessList=w;const t=Ei(),e=ts(),r=Xn(),n=gv(),s=Pn(),i=ac(),o=aa(),a=fr(),c=XS(),u=eT(),l=Cv(),d=dT();function f(C){const I=(0,d.getSerializedTransactionType)(C);return I==="eip1559"?h(C):I==="eip2930"?y(C):I==="eip4844"?p(C):I==="eip7702"?g(C):b(C)}function g(C){const I=E(C),[P,T,R,U,k,O,B,v,A,S,j,N,x]=I;if(I.length!==10&&I.length!==13)throw new e.InvalidSerializedTransactionError({attributes:{chainId:P,nonce:T,maxPriorityFeePerGas:R,maxFeePerGas:U,gas:k,to:O,value:B,data:v,accessList:A,authorizationList:S,...I.length>9?{v:j,r:N,s:x}:{}},serializedTransaction:C,type:"eip7702"});const D={chainId:(0,a.hexToNumber)(P),type:"eip7702"};return(0,s.isHex)(O)&&O!=="0x"&&(D.to=O),(0,s.isHex)(k)&&k!=="0x"&&(D.gas=(0,a.hexToBigInt)(k)),(0,s.isHex)(v)&&v!=="0x"&&(D.data=v),(0,s.isHex)(T)&&(D.nonce=T==="0x"?0:(0,a.hexToNumber)(T)),(0,s.isHex)(B)&&B!=="0x"&&(D.value=(0,a.hexToBigInt)(B)),(0,s.isHex)(U)&&U!=="0x"&&(D.maxFeePerGas=(0,a.hexToBigInt)(U)),(0,s.isHex)(R)&&R!=="0x"&&(D.maxPriorityFeePerGas=(0,a.hexToBigInt)(R)),A.length!==0&&A!=="0x"&&(D.accessList=w(A)),S.length!==0&&S!=="0x"&&(D.authorizationList=m(S)),(0,l.assertTransactionEIP7702)(D),{...I.length===13?_(I):void 0,...D}}function p(C){const I=E(C),P=I.length===4,T=P?I[0]:I,R=P?I.slice(1):[],[U,k,O,B,v,A,S,j,N,x,D,M,L,F]=T,[q,$,V]=R;if(!(T.length===11||T.length===14))throw new e.InvalidSerializedTransactionError({attributes:{chainId:U,nonce:k,maxPriorityFeePerGas:O,maxFeePerGas:B,gas:v,to:A,value:S,data:j,accessList:N,...T.length>9?{v:M,r:L,s:F}:{}},serializedTransaction:C,type:"eip4844"});const J={blobVersionedHashes:D,chainId:(0,a.hexToNumber)(U),to:A,type:"eip4844"};return(0,s.isHex)(v)&&v!=="0x"&&(J.gas=(0,a.hexToBigInt)(v)),(0,s.isHex)(j)&&j!=="0x"&&(J.data=j),(0,s.isHex)(k)&&(J.nonce=k==="0x"?0:(0,a.hexToNumber)(k)),(0,s.isHex)(S)&&S!=="0x"&&(J.value=(0,a.hexToBigInt)(S)),(0,s.isHex)(x)&&x!=="0x"&&(J.maxFeePerBlobGas=(0,a.hexToBigInt)(x)),(0,s.isHex)(B)&&B!=="0x"&&(J.maxFeePerGas=(0,a.hexToBigInt)(B)),(0,s.isHex)(O)&&O!=="0x"&&(J.maxPriorityFeePerGas=(0,a.hexToBigInt)(O)),N.length!==0&&N!=="0x"&&(J.accessList=w(N)),q&&$&&V&&(J.sidecars=(0,n.toBlobSidecars)({blobs:q,commitments:$,proofs:V})),(0,l.assertTransactionEIP4844)(J),{...T.length===14?_(T):void 0,...J}}function h(C){const I=E(C),[P,T,R,U,k,O,B,v,A,S,j,N]=I;if(!(I.length===9||I.length===12))throw new e.InvalidSerializedTransactionError({attributes:{chainId:P,nonce:T,maxPriorityFeePerGas:R,maxFeePerGas:U,gas:k,to:O,value:B,data:v,accessList:A,...I.length>9?{v:S,r:j,s:N}:{}},serializedTransaction:C,type:"eip1559"});const x={chainId:(0,a.hexToNumber)(P),type:"eip1559"};return(0,s.isHex)(O)&&O!=="0x"&&(x.to=O),(0,s.isHex)(k)&&k!=="0x"&&(x.gas=(0,a.hexToBigInt)(k)),(0,s.isHex)(v)&&v!=="0x"&&(x.data=v),(0,s.isHex)(T)&&(x.nonce=T==="0x"?0:(0,a.hexToNumber)(T)),(0,s.isHex)(B)&&B!=="0x"&&(x.value=(0,a.hexToBigInt)(B)),(0,s.isHex)(U)&&U!=="0x"&&(x.maxFeePerGas=(0,a.hexToBigInt)(U)),(0,s.isHex)(R)&&R!=="0x"&&(x.maxPriorityFeePerGas=(0,a.hexToBigInt)(R)),A.length!==0&&A!=="0x"&&(x.accessList=w(A)),(0,l.assertTransactionEIP1559)(x),{...I.length===12?_(I):void 0,...x}}function y(C){const I=E(C),[P,T,R,U,k,O,B,v,A,S,j]=I;if(!(I.length===8||I.length===11))throw new e.InvalidSerializedTransactionError({attributes:{chainId:P,nonce:T,gasPrice:R,gas:U,to:k,value:O,data:B,accessList:v,...I.length>8?{v:A,r:S,s:j}:{}},serializedTransaction:C,type:"eip2930"});const N={chainId:(0,a.hexToNumber)(P),type:"eip2930"};return(0,s.isHex)(k)&&k!=="0x"&&(N.to=k),(0,s.isHex)(U)&&U!=="0x"&&(N.gas=(0,a.hexToBigInt)(U)),(0,s.isHex)(B)&&B!=="0x"&&(N.data=B),(0,s.isHex)(T)&&(N.nonce=T==="0x"?0:(0,a.hexToNumber)(T)),(0,s.isHex)(O)&&O!=="0x"&&(N.value=(0,a.hexToBigInt)(O)),(0,s.isHex)(R)&&R!=="0x"&&(N.gasPrice=(0,a.hexToBigInt)(R)),v.length!==0&&v!=="0x"&&(N.accessList=w(v)),(0,l.assertTransactionEIP2930)(N),{...I.length===11?_(I):void 0,...N}}function b(C){const I=(0,c.fromRlp)(C,"hex"),[P,T,R,U,k,O,B,v,A]=I;if(!(I.length===6||I.length===9))throw new e.InvalidSerializedTransactionError({attributes:{nonce:P,gasPrice:T,gas:R,to:U,value:k,data:O,...I.length>6?{v:B,r:v,s:A}:{}},serializedTransaction:C,type:"legacy"});const S={type:"legacy"};if((0,s.isHex)(U)&&U!=="0x"&&(S.to=U),(0,s.isHex)(R)&&R!=="0x"&&(S.gas=(0,a.hexToBigInt)(R)),(0,s.isHex)(O)&&O!=="0x"&&(S.data=O),(0,s.isHex)(P)&&(S.nonce=P==="0x"?0:(0,a.hexToNumber)(P)),(0,s.isHex)(k)&&k!=="0x"&&(S.value=(0,a.hexToBigInt)(k)),(0,s.isHex)(T)&&T!=="0x"&&(S.gasPrice=(0,a.hexToBigInt)(T)),(0,l.assertTransactionLegacy)(S),I.length===6)return S;const j=(0,s.isHex)(B)&&B!=="0x"?(0,a.hexToBigInt)(B):0n;if(A==="0x"&&v==="0x")return j>0&&(S.chainId=Number(j)),S;const N=j,x=Number((N-35n)/2n);if(x>0)S.chainId=x;else if(N!==27n&&N!==28n)throw new e.InvalidLegacyVError({v:N});return S.v=N,S.s=A,S.r=v,S.yParity=N%2n===0n?1:0,S}function E(C){return(0,c.fromRlp)(`0x${C.slice(4)}`,"hex")}function w(C){const I=[];for(let P=0;P<C.length;P++){const[T,R]=C[P];if(!(0,r.isAddress)(T,{strict:!1}))throw new t.InvalidAddressError({address:T});I.push({address:T,storageKeys:R.map(U=>(0,u.isHash)(U)?U:(0,o.trim)(U))})}return I}function m(C){const I=[];for(let P=0;P<C.length;P++){const[T,R,U,k,O,B]=C[P];I.push({address:R,chainId:T==="0x"?0:(0,a.hexToNumber)(T),nonce:U==="0x"?0:(0,a.hexToNumber)(U),..._([k,O,B])})}return I}function _(C){const I=C.slice(-3),P=I[0]==="0x"||(0,a.hexToBigInt)(I[0])===0n?27n:28n;return{r:(0,i.padHex)(I[1],{size:32}),s:(0,i.padHex)(I[2],{size:32}),v:P,yParity:P===27n?0:1}}return Ll}var Eb={},vb={},Sh={},PB;function uq(){if(PB)return Sh;PB=1,Object.defineProperty(Sh,"__esModule",{value:!0}),Sh.InvalidDecimalNumberError=void 0;const t=Ke();class e extends t.BaseError{constructor({value:n}){super(`Number \`${n}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}return Sh.InvalidDecimalNumberError=e,Sh}var NB;function Nv(){if(NB)return vb;NB=1,Object.defineProperty(vb,"__esModule",{value:!0}),vb.parseUnits=e;const t=uq();function e(r,n){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(r))throw new t.InvalidDecimalNumberError({value:r});let[s,i="0"]=r.split(".");const o=s.startsWith("-");if(o&&(s=s.slice(1)),i=i.replace(/(0+)$/,""),n===0)Math.round(+`.${i}`)===1&&(s=`${BigInt(s)+1n}`),i="";else if(i.length>n){const[a,c,u]=[i.slice(0,n-1),i.slice(n-1,n),i.slice(n)],l=Math.round(+`${c}.${u}`);l>9?i=`${BigInt(a)+BigInt(1)}0`.padStart(a.length+1,"0"):i=`${a}${l}`,i.length>n&&(i=i.slice(1),s=`${BigInt(s)+1n}`),i=i.slice(0,n)}else i=i.padEnd(n,"0");return BigInt(`${o?"-":""}${s}${i}`)}return vb}var OB;function lq(){if(OB)return Eb;OB=1,Object.defineProperty(Eb,"__esModule",{value:!0}),Eb.parseEther=r;const t=S0(),e=Nv();function r(n,s="wei"){return(0,e.parseUnits)(n,t.etherUnits[s])}return Eb}var _b={},RB;function dq(){if(RB)return _b;RB=1,Object.defineProperty(_b,"__esModule",{value:!0}),_b.parseGwei=r;const t=S0(),e=Nv();function r(n,s="wei"){return(0,e.parseUnits)(n,t.gweiUnits[s])}return _b}var xB;function hT(){return xB||(xB=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.padBytes=t.pad=t.isHex=t.isBytes=t.concatHex=t.concatBytes=t.concat=t.getChainContractAddress=t.extractChain=t.defineChain=t.assertCurrentChain=t.offchainLookupSignature=t.offchainLookupAbiItem=t.offchainLookup=t.ccipFetch=t.ccipRequest=t.buildRequest=t.verifyAuthorization=t.serializeAuthorizationList=t.recoverAuthorizationAddress=t.hashAuthorization=t.isAddressEqual=t.isAddress=t.getCreateAddress=t.getCreate2Address=t.getContractAddress=t.getAddress=t.parseEventLogs=t.getAbiItem=t.formatAbiItemWithArgs=t.formatAbiParams=t.formatAbiItem=t.encodePacked=t.encodeFunctionResult=t.encodeFunctionData=t.encodeEventTopics=t.encodeErrorResult=t.encodeDeployData=t.encodeAbiParameters=t.decodeFunctionResult=t.decodeFunctionData=t.decodeEventLog=t.decodeErrorResult=t.decodeAbiParameters=t.publicKeyToAddress=t.parseAccount=t.parseAbiParameters=t.parseAbiParameter=t.parseAbiItem=t.parseAbi=void 0,t.ripemd160=t.keccak256=t.isHash=t.getAction=t.formatTransactionRequest=t.defineTransactionRequest=t.defineTransactionReceipt=t.transactionType=t.formatTransaction=t.defineTransaction=t.formatLog=t.defineFormatter=t.extract=t.formatBlock=t.defineBlock=t.getTransactionError=t.getNodeError=t.containsNodeError=t.getEstimateGasError=t.getContractError=t.getCallError=t.toRlp=t.toHex=t.stringToHex=t.numberToHex=t.bytesToHex=t.boolToHex=t.toBytes=t.stringToBytes=t.numberToBytes=t.hexToBytes=t.boolToBytes=t.fromRlp=t.hexToString=t.hexToNumber=t.hexToBool=t.hexToBigInt=t.fromHex=t.fromBytes=t.bytesToString=t.bytesToNumber=t.bytesToBool=t.bytesToBigint=t.bytesToBigInt=t.trim=t.sliceHex=t.sliceBytes=t.slice=t.size=t.padHex=void 0,t.validateTypedData=t.serializeTypedData=t.serializeTransaction=t.serializeAccessList=t.parseTransaction=t.getTransactionType=t.getSerializedTransactionType=t.assertTransactionLegacy=t.assertTransactionEIP2930=t.assertTransactionEIP1559=t.assertRequest=t.stringify=t.verifyTypedData=t.verifyMessage=t.verifyHash=t.serializeErc8010Signature=t.serializeErc6492Signature=t.recoverTypedDataAddress=t.recoverPublicKey=t.recoverMessageAddress=t.recoverAddress=t.parseErc8010Signature=t.parseErc6492Signature=t.isErc8010Signature=t.isErc6492Signature=t.hashTypedData=t.hashStruct=t.hashMessage=t.getWebSocketRpcClient=t.socketClientCache=t.getSocketRpcClient=t.getHttpRpcClient=t.rpc=t.getSocket=t.integerRegex=t.bytesRegex=t.arrayRegex=t.nonceManager=t.createNonceManager=t.getFunctionSignature=t.toFunctionSignature=t.getFunctionSelector=t.toFunctionSelector=t.toFunctionHash=t.getEventSignature=t.toEventSignature=t.getEventSelector=t.toEventSelector=t.toEventHash=t.sha256=void 0,t.parseUnits=t.parseGwei=t.parseEther=t.formatUnits=t.formatGwei=t.formatEther=void 0;var e=oc();Object.defineProperty(t,"parseAbi",{enumerable:!0,get:function(){return e.parseAbi}}),Object.defineProperty(t,"parseAbiItem",{enumerable:!0,get:function(){return e.parseAbiItem}}),Object.defineProperty(t,"parseAbiParameter",{enumerable:!0,get:function(){return e.parseAbiParameter}}),Object.defineProperty(t,"parseAbiParameters",{enumerable:!0,get:function(){return e.parseAbiParameters}});var r=or();Object.defineProperty(t,"parseAccount",{enumerable:!0,get:function(){return r.parseAccount}});var n=n7();Object.defineProperty(t,"publicKeyToAddress",{enumerable:!0,get:function(){return n.publicKeyToAddress}});var s=uc();Object.defineProperty(t,"decodeAbiParameters",{enumerable:!0,get:function(){return s.decodeAbiParameters}});var i=cv();Object.defineProperty(t,"decodeErrorResult",{enumerable:!0,get:function(){return i.decodeErrorResult}});var o=j0();Object.defineProperty(t,"decodeEventLog",{enumerable:!0,get:function(){return o.decodeEventLog}});var a=MS();Object.defineProperty(t,"decodeFunctionData",{enumerable:!0,get:function(){return a.decodeFunctionData}});var c=da();Object.defineProperty(t,"decodeFunctionResult",{enumerable:!0,get:function(){return c.decodeFunctionResult}});var u=vi();Object.defineProperty(t,"encodeAbiParameters",{enumerable:!0,get:function(){return u.encodeAbiParameters}});var l=L0();Object.defineProperty(t,"encodeDeployData",{enumerable:!0,get:function(){return l.encodeDeployData}});var d=LS();Object.defineProperty(t,"encodeErrorResult",{enumerable:!0,get:function(){return d.encodeErrorResult}});var f=sl();Object.defineProperty(t,"encodeEventTopics",{enumerable:!0,get:function(){return f.encodeEventTopics}});var g=es();Object.defineProperty(t,"encodeFunctionData",{enumerable:!0,get:function(){return g.encodeFunctionData}});var p=FS();Object.defineProperty(t,"encodeFunctionResult",{enumerable:!0,get:function(){return p.encodeFunctionResult}});var h=k7();Object.defineProperty(t,"encodePacked",{enumerable:!0,get:function(){return h.encodePacked}});var y=oa();Object.defineProperty(t,"formatAbiItem",{enumerable:!0,get:function(){return y.formatAbiItem}}),Object.defineProperty(t,"formatAbiParams",{enumerable:!0,get:function(){return y.formatAbiParams}});var b=r7();Object.defineProperty(t,"formatAbiItemWithArgs",{enumerable:!0,get:function(){return b.formatAbiItemWithArgs}});var E=ca();Object.defineProperty(t,"getAbiItem",{enumerable:!0,get:function(){return E.getAbiItem}});var w=D0();Object.defineProperty(t,"parseEventLogs",{enumerable:!0,get:function(){return w.parseEventLogs}});var m=_s();Object.defineProperty(t,"getAddress",{enumerable:!0,get:function(){return m.getAddress}});var _=B7();Object.defineProperty(t,"getContractAddress",{enumerable:!0,get:function(){return _.getContractAddress}}),Object.defineProperty(t,"getCreate2Address",{enumerable:!0,get:function(){return _.getCreate2Address}}),Object.defineProperty(t,"getCreateAddress",{enumerable:!0,get:function(){return _.getCreateAddress}});var C=Xn();Object.defineProperty(t,"isAddress",{enumerable:!0,get:function(){return C.isAddress}});var I=Ii();Object.defineProperty(t,"isAddressEqual",{enumerable:!0,get:function(){return I.isAddressEqual}});var P=a7();Object.defineProperty(t,"hashAuthorization",{enumerable:!0,get:function(){return P.hashAuthorization}});var T=N0();Object.defineProperty(t,"recoverAuthorizationAddress",{enumerable:!0,get:function(){return T.recoverAuthorizationAddress}});var R=j7();Object.defineProperty(t,"serializeAuthorizationList",{enumerable:!0,get:function(){return R.serializeAuthorizationList}});var U=D7();Object.defineProperty(t,"verifyAuthorization",{enumerable:!0,get:function(){return U.verifyAuthorization}});var k=U7();Object.defineProperty(t,"buildRequest",{enumerable:!0,get:function(){return k.buildRequest}});var O=qS();Object.defineProperty(t,"ccipRequest",{enumerable:!0,get:function(){return O.ccipRequest}}),Object.defineProperty(t,"ccipFetch",{enumerable:!0,get:function(){return O.ccipRequest}}),Object.defineProperty(t,"offchainLookup",{enumerable:!0,get:function(){return O.offchainLookup}}),Object.defineProperty(t,"offchainLookupAbiItem",{enumerable:!0,get:function(){return O.offchainLookupAbiItem}}),Object.defineProperty(t,"offchainLookupSignature",{enumerable:!0,get:function(){return O.offchainLookupSignature}});var B=H0();Object.defineProperty(t,"assertCurrentChain",{enumerable:!0,get:function(){return B.assertCurrentChain}});var v=M7();Object.defineProperty(t,"defineChain",{enumerable:!0,get:function(){return v.defineChain}});var A=L7();Object.defineProperty(t,"extractChain",{enumerable:!0,get:function(){return A.extractChain}});var S=yc();Object.defineProperty(t,"getChainContractAddress",{enumerable:!0,get:function(){return S.getChainContractAddress}});var j=Mr();Object.defineProperty(t,"concat",{enumerable:!0,get:function(){return j.concat}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return j.concatBytes}}),Object.defineProperty(t,"concatHex",{enumerable:!0,get:function(){return j.concatHex}});var N=JS();Object.defineProperty(t,"isBytes",{enumerable:!0,get:function(){return N.isBytes}});var x=Pn();Object.defineProperty(t,"isHex",{enumerable:!0,get:function(){return x.isHex}});var D=ac();Object.defineProperty(t,"pad",{enumerable:!0,get:function(){return D.pad}}),Object.defineProperty(t,"padBytes",{enumerable:!0,get:function(){return D.padBytes}}),Object.defineProperty(t,"padHex",{enumerable:!0,get:function(){return D.padHex}});var M=Jn();Object.defineProperty(t,"size",{enumerable:!0,get:function(){return M.size}});var L=Hs();Object.defineProperty(t,"slice",{enumerable:!0,get:function(){return L.slice}}),Object.defineProperty(t,"sliceBytes",{enumerable:!0,get:function(){return L.sliceBytes}}),Object.defineProperty(t,"sliceHex",{enumerable:!0,get:function(){return L.sliceHex}});var F=aa();Object.defineProperty(t,"trim",{enumerable:!0,get:function(){return F.trim}});var q=ES();Object.defineProperty(t,"bytesToBigInt",{enumerable:!0,get:function(){return q.bytesToBigInt}}),Object.defineProperty(t,"bytesToBigint",{enumerable:!0,get:function(){return q.bytesToBigInt}}),Object.defineProperty(t,"bytesToBool",{enumerable:!0,get:function(){return q.bytesToBool}}),Object.defineProperty(t,"bytesToNumber",{enumerable:!0,get:function(){return q.bytesToNumber}}),Object.defineProperty(t,"bytesToString",{enumerable:!0,get:function(){return q.bytesToString}}),Object.defineProperty(t,"fromBytes",{enumerable:!0,get:function(){return q.fromBytes}});var $=fr();Object.defineProperty(t,"fromHex",{enumerable:!0,get:function(){return $.fromHex}}),Object.defineProperty(t,"hexToBigInt",{enumerable:!0,get:function(){return $.hexToBigInt}}),Object.defineProperty(t,"hexToBool",{enumerable:!0,get:function(){return $.hexToBool}}),Object.defineProperty(t,"hexToNumber",{enumerable:!0,get:function(){return $.hexToNumber}}),Object.defineProperty(t,"hexToString",{enumerable:!0,get:function(){return $.hexToString}});var V=XS();Object.defineProperty(t,"fromRlp",{enumerable:!0,get:function(){return V.fromRlp}});var J=Lt();Object.defineProperty(t,"boolToBytes",{enumerable:!0,get:function(){return J.boolToBytes}}),Object.defineProperty(t,"hexToBytes",{enumerable:!0,get:function(){return J.hexToBytes}}),Object.defineProperty(t,"numberToBytes",{enumerable:!0,get:function(){return J.numberToBytes}}),Object.defineProperty(t,"stringToBytes",{enumerable:!0,get:function(){return J.stringToBytes}}),Object.defineProperty(t,"toBytes",{enumerable:!0,get:function(){return J.toBytes}});var Y=Ae();Object.defineProperty(t,"boolToHex",{enumerable:!0,get:function(){return Y.boolToHex}}),Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return Y.bytesToHex}}),Object.defineProperty(t,"numberToHex",{enumerable:!0,get:function(){return Y.numberToHex}}),Object.defineProperty(t,"stringToHex",{enumerable:!0,get:function(){return Y.stringToHex}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return Y.toHex}});var Z=P0();Object.defineProperty(t,"toRlp",{enumerable:!0,get:function(){return Z.toRlp}});var ee=jS();Object.defineProperty(t,"getCallError",{enumerable:!0,get:function(){return ee.getCallError}});var le=fc();Object.defineProperty(t,"getContractError",{enumerable:!0,get:function(){return le.getContractError}});var X=u7();Object.defineProperty(t,"getEstimateGasError",{enumerable:!0,get:function(){return X.getEstimateGasError}});var se=O0();Object.defineProperty(t,"containsNodeError",{enumerable:!0,get:function(){return se.containsNodeError}}),Object.defineProperty(t,"getNodeError",{enumerable:!0,get:function(){return se.getNodeError}});var fe=k0();Object.defineProperty(t,"getTransactionError",{enumerable:!0,get:function(){return fe.getTransactionError}});var Oe=dv();Object.defineProperty(t,"defineBlock",{enumerable:!0,get:function(){return Oe.defineBlock}}),Object.defineProperty(t,"formatBlock",{enumerable:!0,get:function(){return Oe.formatBlock}});var Re=pc();Object.defineProperty(t,"extract",{enumerable:!0,get:function(){return Re.extract}});var Me=R0();Object.defineProperty(t,"defineFormatter",{enumerable:!0,get:function(){return Me.defineFormatter}});var Ze=la();Object.defineProperty(t,"formatLog",{enumerable:!0,get:function(){return Ze.formatLog}});var de=Zd();Object.defineProperty(t,"defineTransaction",{enumerable:!0,get:function(){return de.defineTransaction}}),Object.defineProperty(t,"formatTransaction",{enumerable:!0,get:function(){return de.formatTransaction}}),Object.defineProperty(t,"transactionType",{enumerable:!0,get:function(){return de.transactionType}});var te=z0();Object.defineProperty(t,"defineTransactionReceipt",{enumerable:!0,get:function(){return te.defineTransactionReceipt}});var Pt=Ai();Object.defineProperty(t,"defineTransactionRequest",{enumerable:!0,get:function(){return Pt.defineTransactionRequest}}),Object.defineProperty(t,"formatTransactionRequest",{enumerable:!0,get:function(){return Pt.formatTransactionRequest}});var Ft=bt();Object.defineProperty(t,"getAction",{enumerable:!0,get:function(){return Ft.getAction}});var en=eT();Object.defineProperty(t,"isHash",{enumerable:!0,get:function(){return en.isHash}});var re=Qn();Object.defineProperty(t,"keccak256",{enumerable:!0,get:function(){return re.keccak256}});var ce=q7();Object.defineProperty(t,"ripemd160",{enumerable:!0,get:function(){return ce.ripemd160}});var ye=PS();Object.defineProperty(t,"sha256",{enumerable:!0,get:function(){return ye.sha256}});var De=H7();Object.defineProperty(t,"toEventHash",{enumerable:!0,get:function(){return De.toEventHash}});var tr=Kd();Object.defineProperty(t,"toEventSelector",{enumerable:!0,get:function(){return tr.toEventSelector}}),Object.defineProperty(t,"getEventSelector",{enumerable:!0,get:function(){return tr.toEventSelector}});var tn=z7();Object.defineProperty(t,"toEventSignature",{enumerable:!0,get:function(){return tn.toEventSignature}}),Object.defineProperty(t,"getEventSignature",{enumerable:!0,get:function(){return tn.toEventSignature}});var zs=$7();Object.defineProperty(t,"toFunctionHash",{enumerable:!0,get:function(){return zs.toFunctionHash}});var Si=nl();Object.defineProperty(t,"toFunctionSelector",{enumerable:!0,get:function(){return Si.toFunctionSelector}}),Object.defineProperty(t,"getFunctionSelector",{enumerable:!0,get:function(){return Si.toFunctionSelector}});var $s=V7();Object.defineProperty(t,"toFunctionSignature",{enumerable:!0,get:function(){return $s.toFunctionSignature}}),Object.defineProperty(t,"getFunctionSignature",{enumerable:!0,get:function(){return $s.toFunctionSignature}});var Ec=G7();Object.defineProperty(t,"createNonceManager",{enumerable:!0,get:function(){return Ec.createNonceManager}}),Object.defineProperty(t,"nonceManager",{enumerable:!0,get:function(){return Ec.nonceManager}});var Jd=ov();Object.defineProperty(t,"arrayRegex",{enumerable:!0,get:function(){return Jd.arrayRegex}}),Object.defineProperty(t,"bytesRegex",{enumerable:!0,get:function(){return Jd.bytesRegex}}),Object.defineProperty(t,"integerRegex",{enumerable:!0,get:function(){return Jd.integerRegex}});var K0=Z7();Object.defineProperty(t,"getSocket",{enumerable:!0,get:function(){return K0.getSocket}}),Object.defineProperty(t,"rpc",{enumerable:!0,get:function(){return K0.rpc}});var vc=rT();Object.defineProperty(t,"getHttpRpcClient",{enumerable:!0,get:function(){return vc.getHttpRpcClient}});var Z0=K7();Object.defineProperty(t,"getSocketRpcClient",{enumerable:!0,get:function(){return Z0.getSocketRpcClient}}),Object.defineProperty(t,"socketClientCache",{enumerable:!0,get:function(){return Z0.socketClientCache}});var xv=nT();Object.defineProperty(t,"getWebSocketRpcClient",{enumerable:!0,get:function(){return xv.getWebSocketRpcClient}});var kv=$0();Object.defineProperty(t,"hashMessage",{enumerable:!0,get:function(){return kv.hashMessage}});var Y0=V0();Object.defineProperty(t,"hashStruct",{enumerable:!0,get:function(){return Y0.hashStruct}}),Object.defineProperty(t,"hashTypedData",{enumerable:!0,get:function(){return Y0.hashTypedData}});var Qd=iT();Object.defineProperty(t,"isErc6492Signature",{enumerable:!0,get:function(){return Qd.isErc6492Signature}});var Bv=cT();Object.defineProperty(t,"isErc8010Signature",{enumerable:!0,get:function(){return Bv.isErc8010Signature}});var jv=rq();Object.defineProperty(t,"parseErc6492Signature",{enumerable:!0,get:function(){return jv.parseErc6492Signature}});var Xd=nq();Object.defineProperty(t,"parseErc8010Signature",{enumerable:!0,get:function(){return Xd.parseErc8010Signature}});var Dv=hc();Object.defineProperty(t,"recoverAddress",{enumerable:!0,get:function(){return Dv.recoverAddress}});var ef=uT();Object.defineProperty(t,"recoverMessageAddress",{enumerable:!0,get:function(){return ef.recoverMessageAddress}});var Uv=AS();Object.defineProperty(t,"recoverPublicKey",{enumerable:!0,get:function(){return Uv.recoverPublicKey}});var _c=lT();Object.defineProperty(t,"recoverTypedDataAddress",{enumerable:!0,get:function(){return _c.recoverTypedDataAddress}});var Ac=sq();Object.defineProperty(t,"serializeErc6492Signature",{enumerable:!0,get:function(){return Ac.serializeErc6492Signature}});var Mv=iq();Object.defineProperty(t,"serializeErc8010Signature",{enumerable:!0,get:function(){return Mv.serializeErc8010Signature}});var Cc=oq();Object.defineProperty(t,"verifyHash",{enumerable:!0,get:function(){return Cc.verifyHash}});var Ic=aq();Object.defineProperty(t,"verifyMessage",{enumerable:!0,get:function(){return Ic.verifyMessage}});var tf=cq();Object.defineProperty(t,"verifyTypedData",{enumerable:!0,get:function(){return tf.verifyTypedData}});var Lv=Qr();Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return Lv.stringify}});var Fv=Ci();Object.defineProperty(t,"assertRequest",{enumerable:!0,get:function(){return Fv.assertRequest}});var rf=Cv();Object.defineProperty(t,"assertTransactionEIP1559",{enumerable:!0,get:function(){return rf.assertTransactionEIP1559}}),Object.defineProperty(t,"assertTransactionEIP2930",{enumerable:!0,get:function(){return rf.assertTransactionEIP2930}}),Object.defineProperty(t,"assertTransactionLegacy",{enumerable:!0,get:function(){return rf.assertTransactionLegacy}});var qv=dT();Object.defineProperty(t,"getSerializedTransactionType",{enumerable:!0,get:function(){return qv.getSerializedTransactionType}});var J0=mv();Object.defineProperty(t,"getTransactionType",{enumerable:!0,get:function(){return J0.getTransactionType}});var Hv=fT();Object.defineProperty(t,"parseTransaction",{enumerable:!0,get:function(){return Hv.parseTransaction}});var nf=QS();Object.defineProperty(t,"serializeAccessList",{enumerable:!0,get:function(){return nf.serializeAccessList}});var Q0=Iv();Object.defineProperty(t,"serializeTransaction",{enumerable:!0,get:function(){return Q0.serializeTransaction}});var ll=Sv();Object.defineProperty(t,"serializeTypedData",{enumerable:!0,get:function(){return ll.serializeTypedData}}),Object.defineProperty(t,"validateTypedData",{enumerable:!0,get:function(){return ll.validateTypedData}});var zv=T0();Object.defineProperty(t,"formatEther",{enumerable:!0,get:function(){return zv.formatEther}});var $v=il();Object.defineProperty(t,"formatGwei",{enumerable:!0,get:function(){return $v.formatGwei}});var Vv=uv();Object.defineProperty(t,"formatUnits",{enumerable:!0,get:function(){return Vv.formatUnits}});var Gv=lq();Object.defineProperty(t,"parseEther",{enumerable:!0,get:function(){return Gv.parseEther}});var Wv=dq();Object.defineProperty(t,"parseGwei",{enumerable:!0,get:function(){return Wv.parseGwei}});var X0=Nv();Object.defineProperty(t,"parseUnits",{enumerable:!0,get:function(){return X0.parseUnits}})})(s2)),s2}var kB;function Mbe(){if(kB)return Gy;kB=1,Object.defineProperty(Gy,"__esModule",{value:!0}),Gy.formatProof=r;const t=hT();function e(n){return n.map(s=>({...s,value:BigInt(s.value)}))}function r(n){return{...n,balance:n.balance?BigInt(n.balance):void 0,nonce:n.nonce?(0,t.hexToNumber)(n.nonce):void 0,storageProof:n.storageProof?e(n.storageProof):void 0}}return Gy}var BB;function Lbe(){if(BB)return Vy;BB=1,Object.defineProperty(Vy,"__esModule",{value:!0}),Vy.getProof=r;const t=Ae(),e=Mbe();async function r(n,{address:s,blockNumber:i,blockTag:o,storageKeys:a}){const c=o??"latest",u=i!==void 0?(0,t.numberToHex)(i):void 0,l=await n.request({method:"eth_getProof",params:[s,a,u||c]});return(0,e.formatProof)(l)}return Vy}var Ab={},jB;function Fbe(){if(jB)return Ab;jB=1,Object.defineProperty(Ab,"__esModule",{value:!0}),Ab.getStorageAt=e;const t=Ae();async function e(r,{address:n,blockNumber:s,blockTag:i="latest",slot:o}){const a=s!==void 0?(0,t.numberToHex)(s):void 0;return await r.request({method:"eth_getStorageAt",params:[n,o,a||i]})}return Ab}var Cb={},DB;function pT(){if(DB)return Cb;DB=1,Object.defineProperty(Cb,"__esModule",{value:!0}),Cb.getTransaction=n;const t=ts(),e=Ae(),r=Zd();async function n(s,{blockHash:i,blockNumber:o,blockTag:a,hash:c,index:u,sender:l,nonce:d}){const f=a||"latest",g=o!==void 0?(0,e.numberToHex)(o):void 0;let p=null;if(c?p=await s.request({method:"eth_getTransactionByHash",params:[c]},{dedupe:!0}):i?p=await s.request({method:"eth_getTransactionByBlockHashAndIndex",params:[i,(0,e.numberToHex)(u)]},{dedupe:!0}):typeof u=="number"?p=await s.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[g||f,(0,e.numberToHex)(u)]},{dedupe:!!g}):l&&typeof d=="number"&&(p=await s.request({method:"eth_getTransactionBySenderAndNonce",params:[l,(0,e.numberToHex)(d)]},{dedupe:!0})),!p)throw new t.TransactionNotFoundError({blockHash:i,blockNumber:o,blockTag:f,hash:c,index:u});return(s.chain?.formatters?.transaction?.format||r.formatTransaction)(p,"getTransaction")}return Cb}var Ib={},UB;function qbe(){if(UB)return Ib;UB=1,Object.defineProperty(Ib,"__esModule",{value:!0}),Ib.getTransactionConfirmations=n;const t=bt(),e=q0(),r=pT();async function n(s,{hash:i,transactionReceipt:o}){const[a,c]=await Promise.all([(0,t.getAction)(s,e.getBlockNumber,"getBlockNumber")({}),i?(0,t.getAction)(s,r.getTransaction,"getTransaction")({hash:i}):void 0]),u=o?.blockNumber||c?.blockNumber;return u?a-u+1n:0n}return Ib}var Sb={},MB;function fq(){if(MB)return Sb;MB=1,Object.defineProperty(Sb,"__esModule",{value:!0}),Sb.getTransactionReceipt=r;const t=ts(),e=z0();async function r(n,{hash:s}){const i=await n.request({method:"eth_getTransactionReceipt",params:[s]},{dedupe:!0});if(!i)throw new t.TransactionReceiptNotFoundError({hash:s});return(n.chain?.formatters?.transactionReceipt?.format||e.formatTransactionReceipt)(i,"getTransactionReceipt")}return Sb}var Tb={},LB;function Hbe(){if(LB)return Tb;LB=1,Object.defineProperty(Tb,"__esModule",{value:!0}),Tb.multicall=d;const t=mc(),e=U0(),r=er(),n=Ke(),s=lc(),i=da(),o=es(),a=yc(),c=fc(),u=bt(),l=ro();async function d(f,g){const{account:p,authorizationList:h,allowFailure:y=!0,blockNumber:b,blockOverrides:E,blockTag:w,stateOverride:m}=g,_=g.contracts,{batchSize:C=g.batchSize??1024,deployless:I=g.deployless??!1}=typeof f.batch?.multicall=="object"?f.batch.multicall:{},P=(()=>{if(g.multicallAddress)return g.multicallAddress;if(I)return null;if(f.chain)return(0,a.getChainContractAddress)({blockNumber:b,chain:f.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),T=[[]];let R=0,U=0;for(let B=0;B<_.length;B++){const{abi:v,address:A,args:S,functionName:j}=_[B];try{const N=(0,o.encodeFunctionData)({abi:v,args:S,functionName:j});U+=(N.length-2)/2,C>0&&U>C&&T[R].length>0&&(R++,U=(N.length-2)/2,T[R]=[]),T[R]=[...T[R],{allowFailure:!0,callData:N,target:A}]}catch(N){const x=(0,c.getContractError)(N,{abi:v,address:A,args:S,docsPath:"/docs/contract/multicall",functionName:j,sender:p});if(!y)throw x;T[R]=[...T[R],{allowFailure:!0,callData:"0x",target:A}]}}const k=await Promise.allSettled(T.map(B=>(0,u.getAction)(f,l.readContract,"readContract")({...P===null?{code:e.multicall3Bytecode}:{address:P},abi:t.multicall3Abi,account:p,args:[B],authorizationList:h,blockNumber:b,blockOverrides:E,blockTag:w,functionName:"aggregate3",stateOverride:m}))),O=[];for(let B=0;B<k.length;B++){const v=k[B];if(v.status==="rejected"){if(!y)throw v.reason;for(let S=0;S<T[B].length;S++)O.push({status:"failure",error:v.reason,result:void 0});continue}const A=v.value;for(let S=0;S<A.length;S++){const{returnData:j,success:N}=A[S],{callData:x}=T[B][S],{abi:D,address:M,functionName:L,args:F}=_[O.length];try{if(x==="0x")throw new r.AbiDecodingZeroDataError;if(!N)throw new s.RawContractError({data:j});const q=(0,i.decodeFunctionResult)({abi:D,args:F,data:j,functionName:L});O.push(y?{result:q,status:"success"}:q)}catch(q){const $=(0,c.getContractError)(q,{abi:D,address:M,args:F,docsPath:"/docs/contract/multicall",functionName:L});if(!y)throw $;O.push({error:$,result:void 0,status:"failure"})}}}if(O.length!==_.length)throw new n.BaseError("multicall results mismatch");return O}return Tb}var Pb={},FB;function hq(){if(FB)return Pb;FB=1,Object.defineProperty(Pb,"__esModule",{value:!0}),Pb.simulateBlocks=y;const t=w7(),e=or(),r=er(),n=lc(),s=ua(),i=da(),o=es(),a=Mr(),c=Ae(),u=fc(),l=O0(),d=dv(),f=la(),g=Ai(),p=CS(),h=Ci();async function y(b,E){const{blockNumber:w,blockTag:m=b.experimental_blockTag??"latest",blocks:_,returnFullTransactions:C,traceTransfers:I,validation:P}=E;try{const T=[];for(const O of _){const B=O.blockOverrides?t.toRpc(O.blockOverrides):void 0,v=O.calls.map(S=>{const j=S,N=j.account?(0,e.parseAccount)(j.account):void 0,x=j.abi?(0,o.encodeFunctionData)(j):j.data,D={...j,account:N,data:j.dataSuffix?(0,a.concat)([x||"0x",j.dataSuffix]):x,from:j.from??N?.address};return(0,h.assertRequest)(D),(0,g.formatTransactionRequest)(D)}),A=O.stateOverrides?(0,p.serializeStateOverride)(O.stateOverrides):void 0;T.push({blockOverrides:B,calls:v,stateOverrides:A})}const U=(typeof w=="bigint"?(0,c.numberToHex)(w):void 0)||m;return(await b.request({method:"eth_simulateV1",params:[{blockStateCalls:T,returnFullTransactions:C,traceTransfers:I,validation:P},U]})).map((O,B)=>({...(0,d.formatBlock)(O),calls:O.calls.map((v,A)=>{const{abi:S,args:j,functionName:N,to:x}=_[B].calls[A],D=v.error?.data??v.returnData,M=BigInt(v.gasUsed),L=v.logs?.map(V=>(0,f.formatLog)(V)),F=v.status==="0x1"?"success":"failure",q=S&&F==="success"&&D!=="0x"?(0,i.decodeFunctionResult)({abi:S,data:D,functionName:N}):null,$=(()=>{if(F==="success")return;let V;if(v.error?.data==="0x"?V=new r.AbiDecodingZeroDataError:v.error&&(V=new n.RawContractError(v.error)),!!V)return(0,u.getContractError)(V,{abi:S??[],address:x??"0x",args:j,functionName:N??"<unknown>"})})();return{data:D,gasUsed:M,logs:L,status:F,...F==="success"?{result:q}:{error:$}}})}))}catch(T){const R=T,U=(0,l.getNodeError)(R,{});throw U instanceof s.UnknownNodeError?R:U}}return Pb}var Nb={},Ba={},yn={},Fl={},qB;function zbe(){if(qB)return Fl;qB=1,Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.normalizeSignature=r,Fl.isArgOfType=n,Fl.getAmbiguousTypes=s;const t=Tv(),e=As();function r(i){let o=!0,a="",c=0,u="",l=!1;for(let d=0;d<i.length;d++){const f=i[d];if(["(",")",","].includes(f)&&(o=!0),f==="("&&c++,f===")"&&c--,!!o){if(c===0){if(f===" "&&["event","function","error",""].includes(u))u="";else if(u+=f,f===")"){l=!0;break}continue}if(f===" "){i[d-1]!==","&&a!==","&&a!==",("&&(a="",o=!1);continue}u+=f,a+=f}}if(!l)throw new e.BaseError("Unable to normalize signature.");return u}function n(i,o){const a=typeof i,c=o.type;switch(c){case"address":return t.validate(i,{strict:!1});case"bool":return a==="boolean";case"function":return a==="string";case"string":return a==="string";default:return c==="tuple"&&"components"in o?Object.values(o.components).every((u,l)=>n(Object.values(i)[l],u)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(c)?a==="number"||a==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(c)?a==="string"||i instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(c)?Array.isArray(i)&&i.every(u=>n(u,{...o,type:c.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function s(i,o,a){for(const c in i){const u=i[c],l=o[c];if(u.type==="tuple"&&l.type==="tuple"&&"components"in u&&"components"in l)return s(u.components,l.components,a[c]);const d=[u.type,l.type];if(d.includes("address")&&d.includes("bytes20")?!0:d.includes("address")&&d.includes("string")?t.validate(a[c],{strict:!1}):d.includes("address")&&d.includes("bytes")?t.validate(a[c],{strict:!1}):!1)return d}}return Fl}var HB;function pq(){if(HB)return yn;HB=1,Object.defineProperty(yn,"__esModule",{value:!0}),yn.InvalidSelectorSizeError=yn.NotFoundError=yn.AmbiguityError=void 0,yn.format=i,yn.from=o,yn.fromAbi=a,yn.getSelector=c,yn.getSignature=u,yn.getSignatureHash=l;const t=oc(),e=As(),r=oT(),n=Xr(),s=zbe();function i(p){return t.formatAbiItem(p)}function o(p,h={}){const{prepare:y=!0}=h,b=Array.isArray(p)||typeof p=="string"?t.parseAbiItem(p):p;return{...b,...y?{hash:l(b)}:{}}}function a(p,h,y){const{args:b=[],prepare:E=!0}=y??{},w=n.validate(h,{strict:!1}),m=p.filter(I=>w?I.type==="function"||I.type==="error"?c(I)===n.slice(h,0,4):I.type==="event"?l(I)===h:!1:"name"in I&&I.name===h);if(m.length===0)throw new f({name:h});if(m.length===1)return{...m[0],...E?{hash:l(m[0])}:{}};let _;for(const I of m){if(!("inputs"in I))continue;if(!b||b.length===0){if(!I.inputs||I.inputs.length===0)return{...I,...E?{hash:l(I)}:{}};continue}if(!I.inputs||I.inputs.length===0||I.inputs.length!==b.length)continue;if(b.every((T,R)=>{const U="inputs"in I&&I.inputs[R];return U?s.isArgOfType(T,U):!1})){if(_&&"inputs"in _&&_.inputs){const T=s.getAmbiguousTypes(I.inputs,_.inputs,b);if(T)throw new d({abiItem:I,type:T[0]},{abiItem:_,type:T[1]})}_=I}}const C=(()=>{if(_)return _;const[I,...P]=m;return{...I,overloads:P}})();if(!C)throw new f({name:h});return{...C,...E?{hash:l(C)}:{}}}function c(...p){const h=(()=>{if(Array.isArray(p[0])){const[y,b]=p;return a(y,b)}return p[0]})();return n.slice(l(h),0,4)}function u(...p){const h=(()=>{if(Array.isArray(p[0])){const[b,E]=p;return a(b,E)}return p[0]})(),y=typeof h=="string"?h:t.formatAbiItem(h);return s.normalizeSignature(y)}function l(...p){const h=(()=>{if(Array.isArray(p[0])){const[y,b]=p;return a(y,b)}return p[0]})();return typeof h!="string"&&"hash"in h&&h.hash?h.hash:r.keccak256(n.fromString(u(h)))}class d extends e.BaseError{constructor(h,y){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${h.type}\` in \`${s.normalizeSignature(t.formatAbiItem(h.abiItem))}\`, and`,`\`${y.type}\` in \`${s.normalizeSignature(t.formatAbiItem(y.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}yn.AmbiguityError=d;class f extends e.BaseError{constructor({name:h,data:y,type:b="item"}){const E=h?` with name "${h}"`:y?` with data "${y}"`:"";super(`ABI ${b}${E} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}yn.NotFoundError=f;class g extends e.BaseError{constructor({data:h}){super(`Selector size is invalid. Expected 4 bytes. Received ${n.size(h)} bytes ("${h}").`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.InvalidSelectorSizeError"})}}return yn.InvalidSelectorSizeError=g,yn}var zB;function $be(){if(zB)return Ba;zB=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.decode=s,Ba.encode=i,Ba.format=o,Ba.from=a,Ba.fromAbi=c;const t=oc(),e=pq(),r=G0(),n=Xr();function s(...u){const[l,d]=(()=>{if(Array.isArray(u[0])){const[p,h]=u;return[c(p),h]}return u})(),{bytecode:f}=d;if(l.inputs.length===0)return;const g=d.data.replace(f,"0x");return r.decode(l.inputs,g)}function i(...u){const[l,d]=(()=>{if(Array.isArray(u[0])){const[p,h]=u;return[c(p),h]}return u})(),{bytecode:f,args:g}=d;return n.concat(f,l.inputs?.length&&g?.length?r.encode(l.inputs,g):"0x")}function o(u){return t.formatAbiItem(u)}function a(u){return e.from(u)}function c(u){const l=u.find(d=>d.type==="constructor");if(!l)throw new e.NotFoundError({name:"constructor"});return l}return Ba}var Xs={},$B;function Vbe(){if($B)return Xs;$B=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.decodeData=s,Xs.decodeResult=i,Xs.encodeData=o,Xs.encodeResult=a,Xs.format=c,Xs.from=u,Xs.fromAbi=l,Xs.getSelector=d;const t=oc(),e=pq(),r=G0(),n=Xr();function s(...f){const[g,p]=(()=>{if(Array.isArray(f[0])){const[b,E,w]=f;return[l(b,E),w]}return f})(),{overloads:h}=g;if(n.size(p)<4)throw new e.InvalidSelectorSizeError({data:p});if(g.inputs.length===0)return;const y=h?l([g,...h],p):g;if(!(n.size(p)<=4))return r.decode(y.inputs,n.slice(p,4))}function i(...f){const[g,p,h={}]=(()=>{if(Array.isArray(f[0])){const[b,E,w,m]=f;return[l(b,E),w,m]}return f})(),y=r.decode(g.outputs,p,h);if(!(y&&Object.keys(y).length===0))return y&&Object.keys(y).length===1?Array.isArray(y)?y[0]:Object.values(y)[0]:y}function o(...f){const[g,p=[]]=(()=>{if(Array.isArray(f[0])){const[_,C,I]=f;return[l(_,C,{args:I}),I]}const[w,m]=f;return[w,m]})(),{overloads:h}=g,y=h?l([g,...h],g.name,{args:p}):g,b=d(y),E=p.length>0?r.encode(y.inputs,p):void 0;return E?n.concat(b,E):b}function a(...f){const[g,p,h={}]=(()=>{if(Array.isArray(f[0])){const[E,w,m,_]=f;return[l(E,w),m,_]}return f})(),{as:y="Array"}=h,b=g.outputs.length===1?[p]:Array.isArray(p)?p:y==="Object"?Object.values(p):[p];return r.encode(g.outputs,b)}function c(f){return t.formatAbiItem(f)}function u(f,g={}){return e.from(f,g)}function l(f,g,p){const h=e.fromAbi(f,g,p);if(h.type!=="function")throw new e.NotFoundError({name:g,type:"function"});return h}function d(f){return e.getSelector(f)}return Xs}var ls={},VB;function gq(){return VB||(VB=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.zeroAddress=ls.ethAddress=ls.entryPoint08Address=ls.entryPoint07Address=ls.entryPoint06Address=void 0,ls.entryPoint06Address="0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789",ls.entryPoint07Address="0x0000000071727De22E5E9d8BAf0edAc6f37da032",ls.entryPoint08Address="0x4337084D9E255Ff0702461CF8895CE9E3b5Ff108",ls.ethAddress="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",ls.zeroAddress="0x0000000000000000000000000000000000000000"),ls}var GB;function Gbe(){if(GB)return Nb;GB=1,Object.defineProperty(Nb,"__esModule",{value:!0}),Nb.simulateCalls=d;const t=$be(),e=Vbe(),r=or(),n=gq(),s=U0(),i=Ke(),o=es(),a=hT(),c=N7(),u=hq(),l="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function d(f,g){const{blockNumber:p,blockTag:h,calls:y,stateOverrides:b,traceAssetChanges:E,traceTransfers:w,validation:m}=g,_=g.account?(0,r.parseAccount)(g.account):void 0;if(E&&!_)throw new i.BaseError("`account` is required when `traceAssetChanges` is true");const C=_?t.encode(t.from("constructor(bytes, bytes)"),{bytecode:s.deploylessCallViaBytecodeBytecode,args:[l,e.encodeData(e.from("function getBalance(address)"),[_.address])]}):void 0,I=E?await Promise.all(g.calls.map(async Z=>{if(!Z.data&&!Z.abi)return;const{accessList:ee}=await(0,c.createAccessList)(f,{account:_.address,...Z,data:Z.abi?(0,o.encodeFunctionData)(Z):Z.data});return ee.map(({address:le,storageKeys:X})=>X.length>0?le:null)})).then(Z=>Z.flat().filter(Boolean)):[],P=await(0,u.simulateBlocks)(f,{blockNumber:p,blockTag:h,blocks:[...E?[{calls:[{data:C}],stateOverrides:b},{calls:I.map((Z,ee)=>({abi:[e.from("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[_.address],to:Z,from:n.zeroAddress,nonce:ee})),stateOverrides:[{address:n.zeroAddress,nonce:0}]}]:[],{calls:[...y,{}].map(Z=>({...Z,from:_?.address})),stateOverrides:b},...E?[{calls:[{data:C}]},{calls:I.map((Z,ee)=>({abi:[e.from("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[_.address],to:Z,from:n.zeroAddress,nonce:ee})),stateOverrides:[{address:n.zeroAddress,nonce:0}]},{calls:I.map((Z,ee)=>({to:Z,abi:[e.from("function decimals() returns (uint256)")],functionName:"decimals",from:n.zeroAddress,nonce:ee})),stateOverrides:[{address:n.zeroAddress,nonce:0}]},{calls:I.map((Z,ee)=>({to:Z,abi:[e.from("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:n.zeroAddress,nonce:ee})),stateOverrides:[{address:n.zeroAddress,nonce:0}]},{calls:I.map((Z,ee)=>({to:Z,abi:[e.from("function symbol() returns (string)")],functionName:"symbol",from:n.zeroAddress,nonce:ee})),stateOverrides:[{address:n.zeroAddress,nonce:0}]}]:[]],traceTransfers:w,validation:m}),T=E?P[2]:P[0],[R,U,,k,O,B,v,A]=E?P:[],{calls:S,...j}=T,N=S.slice(0,-1)??[],x=R?.calls??[],D=U?.calls??[],M=[...x,...D].map(Z=>Z.status==="success"?(0,a.hexToBigInt)(Z.data):null),L=k?.calls??[],F=O?.calls??[],q=[...L,...F].map(Z=>Z.status==="success"?(0,a.hexToBigInt)(Z.data):null),$=(B?.calls??[]).map(Z=>Z.status==="success"?Z.result:null),V=(A?.calls??[]).map(Z=>Z.status==="success"?Z.result:null),J=(v?.calls??[]).map(Z=>Z.status==="success"?Z.result:null),Y=[];for(const[Z,ee]of q.entries()){const le=M[Z];if(typeof ee!="bigint"||typeof le!="bigint")continue;const X=$[Z-1],se=V[Z-1],fe=J[Z-1],Oe=Z===0?{address:n.ethAddress,decimals:18,symbol:"ETH"}:{address:I[Z-1],decimals:fe||X?Number(X??1):void 0,symbol:se??void 0};Y.some(Re=>Re.token.address===Oe.address)||Y.push({token:Oe,value:{pre:le,post:ee,diff:ee-le}})}return{assetChanges:Y,block:j,results:N}}return Nb}var ql={},Th={},f2={},WB;function Wbe(){return WB||(WB=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidWrappedSignatureError=t.universalSignatureValidatorAbi=t.universalSignatureValidatorBytecode=t.magicBytes=void 0,t.assert=s,t.from=i,t.unwrap=o,t.wrap=a,t.validate=c;const e=G0(),r=As(),n=Xr();t.magicBytes="0x6492649264926492649264926492649264926492649264926492649264926492",t.universalSignatureValidatorBytecode="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",t.universalSignatureValidatorAbi=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function s(l){if(n.slice(l,-32)!==t.magicBytes)throw new u(l)}function i(l){return typeof l=="string"?o(l):l}function o(l){s(l);const[d,f,g]=e.decode(e.from("address, bytes, bytes"),l);return{data:f,signature:g,to:d}}function a(l){const{data:d,signature:f,to:g}=l;return n.concat(e.encode(e.from("address, bytes, bytes"),[g,d,f]),t.magicBytes)}function c(l){try{return s(l),!0}catch{return!1}}class u extends r.BaseError{constructor(d){super(`Value \`${d}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}t.InvalidWrappedSignatureError=u})(f2)),f2}var KB;function Kbe(){return KB||(KB=1,Object.defineProperty(Th,"__esModule",{value:!0}),Th.SignatureErc6492=void 0,Th.SignatureErc6492=Wbe()),Th}var Ob={},ZB;function mq(){if(ZB)return Ob;ZB=1,Object.defineProperty(Ob,"__esModule",{value:!0}),Ob.serializeSignature=n;const t=al(),e=fr(),r=Lt();function n({r:s,s:i,to:o="hex",v:a,yParity:c}){const u=(()=>{if(c===0||c===1)return c;if(a&&(a===27n||a===28n||a>=35n))return a%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),l=`0x${new t.secp256k1.Signature((0,e.hexToBigInt)(s),(0,e.hexToBigInt)(i)).toCompactHex()}${u===0?"1b":"1c"}`;return o==="hex"?l:(0,r.hexToBytes)(l)}return Ob}var YB;function Ov(){if(YB)return ql;YB=1,Object.defineProperty(ql,"__esModule",{value:!0}),ql.verifyHash=m,ql.verifyErc8010=_,ql.verifyErc1271=I;const t=Kbe(),e=Pv(),r=mc(),n=U0(),s=lc(),i=L0(),o=es(),a=_s(),c=Ii(),u=D7(),l=Mr(),d=Pn(),f=fr(),g=Ae(),p=bt(),h=hc(),y=mq(),b=F0(),E=x7(),w=ro();async function m(T,R){const{address:U,hash:k,erc6492VerifierAddress:O=R.universalSignatureVerifierAddress??T.chain?.contracts?.erc6492Verifier?.address,multicallAddress:B=R.multicallAddress??T.chain?.contracts?.multicall3?.address}=R,v=(()=>{const A=R.signature;return(0,d.isHex)(A)?A:typeof A=="object"&&"r"in A&&"s"in A?(0,y.serializeSignature)(A):(0,g.bytesToHex)(A)})();try{return e.SignatureErc8010.validate(v)?await _(T,{...R,multicallAddress:B,signature:v}):await C(T,{...R,verifierAddress:O,signature:v})}catch(A){try{if((0,c.isAddressEqual)((0,a.getAddress)(U),await(0,h.recoverAddress)({hash:k,signature:v})))return!0}catch{}if(A instanceof P)return!1;throw A}}async function _(T,R){const{address:U,blockNumber:k,blockTag:O,hash:B,multicallAddress:v}=R,{authorization:A,data:S,signature:j,to:N}=e.SignatureErc8010.unwrap(R.signature);if(await(0,E.getCode)(T,{address:U,blockNumber:k,blockTag:O})===(0,l.concatHex)(["0xef0100",A.address]))return await I(T,{address:U,blockNumber:k,blockTag:O,hash:B,signature:j});const D={address:A.address,chainId:Number(A.chainId),nonce:Number(A.nonce),r:(0,g.numberToHex)(A.r,{size:32}),s:(0,g.numberToHex)(A.s,{size:32}),yParity:A.yParity};if(!await(0,u.verifyAuthorization)({address:U,authorization:D}))throw new P;const L=await(0,p.getAction)(T,w.readContract,"readContract")({...v?{address:v}:{code:n.multicall3Bytecode},authorizationList:[D],abi:r.multicall3Abi,blockNumber:k,blockTag:"pending",functionName:"aggregate3",args:[[...S?[{allowFailure:!0,target:N??U,callData:S}]:[],{allowFailure:!0,target:U,callData:(0,o.encodeFunctionData)({abi:r.erc1271Abi,functionName:"isValidSignature",args:[B,j]})}]]});if(L[L.length-1]?.returnData?.startsWith("0x1626ba7e"))return!0;throw new P}async function C(T,R){const{address:U,factory:k,factoryData:O,hash:B,signature:v,verifierAddress:A,...S}=R,j=await(async()=>!k&&!O||t.SignatureErc6492.validate(v)?v:t.SignatureErc6492.wrap({data:O,signature:v,to:k}))(),N=A?{to:A,data:(0,o.encodeFunctionData)({abi:r.erc6492SignatureValidatorAbi,functionName:"isValidSig",args:[U,B,j]}),...S}:{data:(0,i.encodeDeployData)({abi:r.erc6492SignatureValidatorAbi,args:[U,B,j],bytecode:n.erc6492SignatureValidatorByteCode}),...S},{data:x}=await(0,p.getAction)(T,b.call,"call")(N).catch(D=>{throw D instanceof s.CallExecutionError?new P:D});if((0,f.hexToBool)(x??"0x0"))return!0;throw new P}async function I(T,R){const{address:U,blockNumber:k,blockTag:O,hash:B,signature:v}=R;if((await(0,p.getAction)(T,w.readContract,"readContract")({address:U,abi:r.erc1271Abi,args:[B,v],blockNumber:k,blockTag:O,functionName:"isValidSignature"}).catch(S=>{throw S instanceof s.ContractFunctionExecutionError?new P:S})).startsWith("0x1626ba7e"))return!0;throw new P}class P extends Error{}return ql}var Rb={},JB;function Zbe(){if(JB)return Rb;JB=1,Object.defineProperty(Rb,"__esModule",{value:!0}),Rb.verifyMessage=n;const t=bt(),e=$0(),r=Ov();async function n(s,{address:i,message:o,factory:a,factoryData:c,signature:u,...l}){const d=(0,e.hashMessage)(o);return(0,t.getAction)(s,r.verifyHash,"verifyHash")({address:i,factory:a,factoryData:c,hash:d,signature:u,...l})}return Rb}var xb={},QB;function Ybe(){if(QB)return xb;QB=1,Object.defineProperty(xb,"__esModule",{value:!0}),xb.verifyTypedData=n;const t=bt(),e=V0(),r=Ov();async function n(s,i){const{address:o,factory:a,factoryData:c,signature:u,message:l,primaryType:d,types:f,domain:g,...p}=i,h=(0,e.hashTypedData)({message:l,primaryType:d,types:f,domain:g});return(0,t.getAction)(s,r.verifyHash,"verifyHash")({address:o,factory:a,factoryData:c,hash:h,signature:u,...p})}return xb}var kb={},Bb={},XB;function yq(){if(XB)return Bb;XB=1,Object.defineProperty(Bb,"__esModule",{value:!0}),Bb.watchBlockNumber=o;const t=fr(),e=bt(),r=ul(),n=Yd(),s=Qr(),i=q0();function o(a,{emitOnBegin:c=!1,emitMissed:u=!1,onBlockNumber:l,onError:d,poll:f,pollingInterval:g=a.pollingInterval}){const p=typeof f<"u"?f:!(a.transport.type==="webSocket"||a.transport.type==="ipc"||a.transport.type==="fallback"&&(a.transport.transports[0].config.type==="webSocket"||a.transport.transports[0].config.type==="ipc"));let h;return p?(()=>{const E=(0,s.stringify)(["watchBlockNumber",a.uid,c,u,g]);return(0,r.observe)(E,{onBlockNumber:l,onError:d},w=>(0,n.poll)(async()=>{try{const m=await(0,e.getAction)(a,i.getBlockNumber,"getBlockNumber")({cacheTime:0});if(h!==void 0){if(m===h)return;if(m-h>1&&u)for(let _=h+1n;_<m;_++)w.onBlockNumber(_,h),h=_}(h===void 0||m>h)&&(w.onBlockNumber(m,h),h=m)}catch(m){w.onError?.(m)}},{emitOnBegin:c,interval:g}))})():(()=>{const E=(0,s.stringify)(["watchBlockNumber",a.uid,c,u]);return(0,r.observe)(E,{onBlockNumber:l,onError:d},w=>{let m=!0,_=()=>m=!1;return(async()=>{try{const C=(()=>{if(a.transport.type==="fallback"){const P=a.transport.transports.find(T=>T.config.type==="webSocket"||T.config.type==="ipc");return P?P.value:a.transport}return a.transport})(),{unsubscribe:I}=await C.subscribe({params:["newHeads"],onData(P){if(!m)return;const T=(0,t.hexToBigInt)(P.result?.number);w.onBlockNumber(T,h),h=T},onError(P){w.onError?.(P)}});_=I,m||_()}catch(C){d?.(C)}})(),()=>_()})})()}return Bb}var e4;function bq(){if(e4)return kb;e4=1,Object.defineProperty(kb,"__esModule",{value:!0}),kb.waitForTransactionReceipt=d;const t=SS(),e=ts(),r=bt(),n=ul(),s=DS(),i=_v(),o=Qr(),a=cl(),c=pT(),u=fq(),l=yq();async function d(f,g){const{checkReplacement:p=!0,confirmations:h=1,hash:y,onReplaced:b,retryCount:E=6,retryDelay:w=({count:S})=>~~(1<<S)*200,timeout:m=18e4}=g,_=(0,o.stringify)(["waitForTransactionReceipt",f.uid,y]),C=g.pollingInterval?g.pollingInterval:f.chain?.experimental_preconfirmationTime?f.chain.experimental_preconfirmationTime:f.pollingInterval;let I,P,T,R=!1,U,k;const{promise:O,resolve:B,reject:v}=(0,s.withResolvers)(),A=m?setTimeout(()=>{k?.(),U?.(),v(new e.WaitForTransactionReceiptTimeoutError({hash:y}))},m):void 0;return U=(0,n.observe)(_,{onReplaced:b,resolve:B,reject:v},async S=>{if(T=await(0,r.getAction)(f,u.getTransactionReceipt,"getTransactionReceipt")({hash:y}).catch(()=>{}),T&&h<=1){clearTimeout(A),S.resolve(T),U?.();return}k=(0,r.getAction)(f,l.watchBlockNumber,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:C,async onBlockNumber(j){const N=D=>{clearTimeout(A),k?.(),D(),U?.()};let x=j;if(!R)try{if(T){if(h>1&&(!T.blockNumber||x-T.blockNumber+1n<h))return;N(()=>S.resolve(T));return}if(p&&!I&&(R=!0,await(0,i.withRetry)(async()=>{I=await(0,r.getAction)(f,c.getTransaction,"getTransaction")({hash:y}),I.blockNumber&&(x=I.blockNumber)},{delay:w,retryCount:E}),R=!1),T=await(0,r.getAction)(f,u.getTransactionReceipt,"getTransactionReceipt")({hash:y}),h>1&&(!T.blockNumber||x-T.blockNumber+1n<h))return;N(()=>S.resolve(T))}catch(D){if(D instanceof e.TransactionNotFoundError||D instanceof e.TransactionReceiptNotFoundError){if(!I){R=!1;return}try{P=I,R=!0;const M=await(0,i.withRetry)(()=>(0,r.getAction)(f,a.getBlock,"getBlock")({blockNumber:x,includeTransactions:!0}),{delay:w,retryCount:E,shouldRetry:({error:q})=>q instanceof t.BlockNotFoundError});R=!1;const L=M.transactions.find(({from:q,nonce:$})=>q===P.from&&$===P.nonce);if(!L||(T=await(0,r.getAction)(f,u.getTransactionReceipt,"getTransactionReceipt")({hash:L.hash}),h>1&&(!T.blockNumber||x-T.blockNumber+1n<h)))return;let F="replaced";L.to===P.to&&L.value===P.value&&L.input===P.input?F="repriced":L.from===L.to&&L.value===0n&&(F="cancelled"),N(()=>{S.onReplaced?.({reason:F,replacedTransaction:P,transaction:L,transactionReceipt:T}),S.resolve(T)})}catch(M){N(()=>S.reject(M))}}else N(()=>S.reject(D))}}})}),O}return kb}var jb={},t4;function Jbe(){if(t4)return jb;t4=1,Object.defineProperty(jb,"__esModule",{value:!0}),jb.watchBlocks=i;const t=bt(),e=ul(),r=Yd(),n=Qr(),s=cl();function i(o,{blockTag:a=o.experimental_blockTag??"latest",emitMissed:c=!1,emitOnBegin:u=!1,onBlock:l,onError:d,includeTransactions:f,poll:g,pollingInterval:p=o.pollingInterval}){const h=typeof g<"u"?g:!(o.transport.type==="webSocket"||o.transport.type==="ipc"||o.transport.type==="fallback"&&(o.transport.transports[0].config.type==="webSocket"||o.transport.transports[0].config.type==="ipc")),y=f??!1;let b;return h?(()=>{const m=(0,n.stringify)(["watchBlocks",o.uid,a,c,u,y,p]);return(0,e.observe)(m,{onBlock:l,onError:d},_=>(0,r.poll)(async()=>{try{const C=await(0,t.getAction)(o,s.getBlock,"getBlock")({blockTag:a,includeTransactions:y});if(C.number!==null&&b?.number!=null){if(C.number===b.number)return;if(C.number-b.number>1&&c)for(let I=b?.number+1n;I<C.number;I++){const P=await(0,t.getAction)(o,s.getBlock,"getBlock")({blockNumber:I,includeTransactions:y});_.onBlock(P,b),b=P}}(b?.number==null||a==="pending"&&C?.number==null||C.number!==null&&C.number>b.number)&&(_.onBlock(C,b),b=C)}catch(C){_.onError?.(C)}},{emitOnBegin:u,interval:p}))})():(()=>{let m=!0,_=!0,C=()=>m=!1;return(async()=>{try{u&&(0,t.getAction)(o,s.getBlock,"getBlock")({blockTag:a,includeTransactions:y}).then(T=>{m&&_&&(l(T,void 0),_=!1)}).catch(d);const I=(()=>{if(o.transport.type==="fallback"){const T=o.transport.transports.find(R=>R.config.type==="webSocket"||R.config.type==="ipc");return T?T.value:o.transport}return o.transport})(),{unsubscribe:P}=await I.subscribe({params:["newHeads"],async onData(T){if(!m)return;const R=await(0,t.getAction)(o,s.getBlock,"getBlock")({blockNumber:T.result?.number,includeTransactions:y}).catch(()=>{});m&&(l(R,b),_=!1,b=R)},onError(T){d?.(T)}});C=P,m||C()}catch(I){d?.(I)}})(),()=>C()})()}return jb}var Db={},r4;function Qbe(){if(r4)return Db;r4=1,Object.defineProperty(Db,"__esModule",{value:!0}),Db.watchEvent=p;const t=er(),e=dc(),r=j0(),n=sl(),s=la(),i=bt(),o=ul(),a=Yd(),c=Qr(),u=O7(),l=q0(),d=wv(),f=kS(),g=Ev();function p(h,{address:y,args:b,batch:E=!0,event:w,events:m,fromBlock:_,onError:C,onLogs:I,poll:P,pollingInterval:T=h.pollingInterval,strict:R}){const U=typeof P<"u"?P:typeof _=="bigint"?!0:!(h.transport.type==="webSocket"||h.transport.type==="ipc"||h.transport.type==="fallback"&&(h.transport.transports[0].config.type==="webSocket"||h.transport.transports[0].config.type==="ipc")),k=R??!1;return U?(()=>{const v=(0,c.stringify)(["watchEvent",y,b,E,h.uid,w,T,_]);return(0,o.observe)(v,{onLogs:I,onError:C},A=>{let S;_!==void 0&&(S=_-1n);let j,N=!1;const x=(0,a.poll)(async()=>{if(!N){try{j=await(0,i.getAction)(h,u.createEventFilter,"createEventFilter")({address:y,args:b,event:w,events:m,strict:k,fromBlock:_})}catch{}N=!0;return}try{let D;if(j)D=await(0,i.getAction)(h,d.getFilterChanges,"getFilterChanges")({filter:j});else{const M=await(0,i.getAction)(h,l.getBlockNumber,"getBlockNumber")({});S&&S!==M?D=await(0,i.getAction)(h,f.getLogs,"getLogs")({address:y,args:b,event:w,events:m,fromBlock:S+1n,toBlock:M}):D=[],S=M}if(D.length===0)return;if(E)A.onLogs(D);else for(const M of D)A.onLogs([M])}catch(D){j&&D instanceof e.InvalidInputRpcError&&(N=!1),A.onError?.(D)}},{emitOnBegin:!0,interval:T});return async()=>{j&&await(0,i.getAction)(h,g.uninstallFilter,"uninstallFilter")({filter:j}),x()}})})():(()=>{let v=!0,A=()=>v=!1;return(async()=>{try{const S=(()=>{if(h.transport.type==="fallback"){const D=h.transport.transports.find(M=>M.config.type==="webSocket"||M.config.type==="ipc");return D?D.value:h.transport}return h.transport})(),j=m??(w?[w]:void 0);let N=[];j&&(N=[j.flatMap(M=>(0,n.encodeEventTopics)({abi:[M],eventName:M.name,args:b}))],w&&(N=N[0]));const{unsubscribe:x}=await S.subscribe({params:["logs",{address:y,topics:N}],onData(D){if(!v)return;const M=D.result;try{const{eventName:L,args:F}=(0,r.decodeEventLog)({abi:j??[],data:M.data,topics:M.topics,strict:k}),q=(0,s.formatLog)(M,{args:F,eventName:L});I([q])}catch(L){let F,q;if(L instanceof t.DecodeLogDataMismatch||L instanceof t.DecodeLogTopicsMismatch){if(R)return;F=L.abiItem.name,q=L.abiItem.inputs?.some(V=>!("name"in V&&V.name))}const $=(0,s.formatLog)(M,{args:q?[]:{},eventName:F});I([$])}},onError(D){C?.(D)}});A=x,v||A()}catch(S){C?.(S)}})(),()=>A()})()}return Db}var Ub={},n4;function Xbe(){if(n4)return Ub;n4=1,Object.defineProperty(Ub,"__esModule",{value:!0}),Ub.watchPendingTransactions=a;const t=bt(),e=ul(),r=Yd(),n=Qr(),s=R7(),i=wv(),o=Ev();function a(c,{batch:u=!0,onError:l,onTransactions:d,poll:f,pollingInterval:g=c.pollingInterval}){return(typeof f<"u"?f:c.transport.type!=="webSocket"&&c.transport.type!=="ipc")?(()=>{const b=(0,n.stringify)(["watchPendingTransactions",c.uid,u,g]);return(0,e.observe)(b,{onTransactions:d,onError:l},E=>{let w;const m=(0,r.poll)(async()=>{try{if(!w)try{w=await(0,t.getAction)(c,s.createPendingTransactionFilter,"createPendingTransactionFilter")({});return}catch(C){throw m(),C}const _=await(0,t.getAction)(c,i.getFilterChanges,"getFilterChanges")({filter:w});if(_.length===0)return;if(u)E.onTransactions(_);else for(const C of _)E.onTransactions([C])}catch(_){E.onError?.(_)}},{emitOnBegin:!0,interval:g});return async()=>{w&&await(0,t.getAction)(c,o.uninstallFilter,"uninstallFilter")({filter:w}),m()}})})():(()=>{let b=!0,E=()=>b=!1;return(async()=>{try{const{unsubscribe:w}=await c.transport.subscribe({params:["newPendingTransactions"],onData(m){if(!b)return;const _=m.result;d([_])},onError(m){l?.(m)}});E=w,b||E()}catch(w){l?.(w)}})(),()=>E()})()}return Ub}var Mb={},Lb={},s4;function ewe(){if(s4)return Lb;s4=1,Object.defineProperty(Lb,"__esModule",{value:!0}),Lb.parseSiweMessage=t;function t(n){const{scheme:s,statement:i,...o}=n.match(e)?.groups??{},{chainId:a,expirationTime:c,issuedAt:u,notBefore:l,requestId:d,...f}=n.match(r)?.groups??{},g=n.split("Resources:")[1]?.split(`
- `).slice(1);return{...o,...f,...a?{chainId:Number(a)}:{},...c?{expirationTime:new Date(c)}:{},...u?{issuedAt:new Date(u)}:{},...l?{notBefore:new Date(l)}:{},...d?{requestId:d}:{},...g?{resources:g}:{},...s?{scheme:s}:{},...i?{statement:i}:{}}}const e=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,r=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;return Lb}var Fb={},i4;function twe(){if(i4)return Fb;i4=1,Object.defineProperty(Fb,"__esModule",{value:!0}),Fb.validateSiweMessage=r;const t=Xn(),e=Ii();function r(n){const{address:s,domain:i,message:o,nonce:a,scheme:c,time:u=new Date}=n;if(i&&o.domain!==i||a&&o.nonce!==a||c&&o.scheme!==c||o.expirationTime&&u>=o.expirationTime||o.notBefore&&u<o.notBefore)return!1;try{if(!o.address||!(0,t.isAddress)(o.address,{strict:!1})||s&&!(0,e.isAddressEqual)(o.address,s))return!1}catch{return!1}return!0}return Fb}var o4;function rwe(){if(o4)return Mb;o4=1,Object.defineProperty(Mb,"__esModule",{value:!0}),Mb.verifySiweMessage=s;const t=$0(),e=ewe(),r=twe(),n=Ov();async function s(i,o){const{address:a,domain:c,message:u,nonce:l,scheme:d,signature:f,time:g=new Date,...p}=o,h=(0,e.parseSiweMessage)(u);if(!h.address||!(0,r.validateSiweMessage)({address:a,domain:c,message:h,nonce:l,scheme:d,time:g}))return!1;const b=(0,t.hashMessage)(u);return(0,n.verifyHash)(i,{address:h.address,hash:b,signature:f,...p})}return Mb}var qb={},a4;function gT(){if(a4)return qb;a4=1,Object.defineProperty(qb,"__esModule",{value:!0}),qb.sendRawTransactionSync=n;const t=ts(),e=z0(),r=hT();async function n(s,{serializedTransaction:i,throwOnReceiptRevert:o,timeout:a}){const c=await s.request({method:"eth_sendRawTransactionSync",params:a?[i,(0,r.numberToHex)(a)]:[i]},{retryCount:0}),l=(s.chain?.formatters?.transactionReceipt?.format||e.formatTransactionReceipt)(c);if(l.status==="reverted"&&o)throw new t.TransactionReceiptRevertedError({receipt:l});return l}return qb}var c4;function wq(){if(c4)return Ey;c4=1,Object.defineProperty(Ey,"__esModule",{value:!0}),Ey.publicActions=Ze;const t=ube(),e=fbe(),r=hbe(),n=pbe(),s=P7(),i=F0(),o=N7(),a=gbe(),c=bS(),u=O7(),l=R7(),d=m7(),f=d7(),g=xS(),p=l7(),h=RS(),y=mbe(),b=ybe(),E=cl(),w=q0(),m=bbe(),_=gc(),C=x7(),I=BS(),P=Ebe(),T=_be(),R=wv(),U=Abe(),k=TS(),O=kS(),B=Lbe(),v=Fbe(),A=pT(),S=qbe(),j=fv(),N=fq(),x=Hbe(),D=ro(),M=hq(),L=Gbe(),F=E7(),q=Ev(),$=Ov(),V=Zbe(),J=Ybe(),Y=bq(),Z=yq(),ee=Jbe(),le=_7(),X=Qbe(),se=Xbe(),fe=rwe(),Oe=B0(),Re=zS(),Me=gT();function Ze(de){return{call:te=>(0,i.call)(de,te),createAccessList:te=>(0,o.createAccessList)(de,te),createBlockFilter:()=>(0,a.createBlockFilter)(de),createContractEventFilter:te=>(0,c.createContractEventFilter)(de,te),createEventFilter:te=>(0,u.createEventFilter)(de,te),createPendingTransactionFilter:()=>(0,l.createPendingTransactionFilter)(de),estimateContractGas:te=>(0,d.estimateContractGas)(de,te),estimateGas:te=>(0,g.estimateGas)(de,te),getBalance:te=>(0,y.getBalance)(de,te),getBlobBaseFee:()=>(0,b.getBlobBaseFee)(de),getBlock:te=>(0,E.getBlock)(de,te),getBlockNumber:te=>(0,w.getBlockNumber)(de,te),getBlockTransactionCount:te=>(0,m.getBlockTransactionCount)(de,te),getBytecode:te=>(0,C.getCode)(de,te),getChainId:()=>(0,_.getChainId)(de),getCode:te=>(0,C.getCode)(de,te),getContractEvents:te=>(0,I.getContractEvents)(de,te),getEip712Domain:te=>(0,P.getEip712Domain)(de,te),getEnsAddress:te=>(0,t.getEnsAddress)(de,te),getEnsAvatar:te=>(0,e.getEnsAvatar)(de,te),getEnsName:te=>(0,r.getEnsName)(de,te),getEnsResolver:te=>(0,n.getEnsResolver)(de,te),getEnsText:te=>(0,s.getEnsText)(de,te),getFeeHistory:te=>(0,T.getFeeHistory)(de,te),estimateFeesPerGas:te=>(0,f.estimateFeesPerGas)(de,te),getFilterChanges:te=>(0,R.getFilterChanges)(de,te),getFilterLogs:te=>(0,U.getFilterLogs)(de,te),getGasPrice:()=>(0,k.getGasPrice)(de),getLogs:te=>(0,O.getLogs)(de,te),getProof:te=>(0,B.getProof)(de,te),estimateMaxPriorityFeePerGas:te=>(0,p.estimateMaxPriorityFeePerGas)(de,te),fillTransaction:te=>(0,h.fillTransaction)(de,te),getStorageAt:te=>(0,v.getStorageAt)(de,te),getTransaction:te=>(0,A.getTransaction)(de,te),getTransactionConfirmations:te=>(0,S.getTransactionConfirmations)(de,te),getTransactionCount:te=>(0,j.getTransactionCount)(de,te),getTransactionReceipt:te=>(0,N.getTransactionReceipt)(de,te),multicall:te=>(0,x.multicall)(de,te),prepareTransactionRequest:te=>(0,Oe.prepareTransactionRequest)(de,te),readContract:te=>(0,D.readContract)(de,te),sendRawTransaction:te=>(0,Re.sendRawTransaction)(de,te),sendRawTransactionSync:te=>(0,Me.sendRawTransactionSync)(de,te),simulate:te=>(0,M.simulateBlocks)(de,te),simulateBlocks:te=>(0,M.simulateBlocks)(de,te),simulateCalls:te=>(0,L.simulateCalls)(de,te),simulateContract:te=>(0,F.simulateContract)(de,te),verifyHash:te=>(0,$.verifyHash)(de,te),verifyMessage:te=>(0,V.verifyMessage)(de,te),verifySiweMessage:te=>(0,fe.verifySiweMessage)(de,te),verifyTypedData:te=>(0,J.verifyTypedData)(de,te),uninstallFilter:te=>(0,q.uninstallFilter)(de,te),waitForTransactionReceipt:te=>(0,Y.waitForTransactionReceipt)(de,te),watchBlocks:te=>(0,ee.watchBlocks)(de,te),watchBlockNumber:te=>(0,Z.watchBlockNumber)(de,te),watchContractEvent:te=>(0,le.watchContractEvent)(de,te),watchEvent:te=>(0,X.watchEvent)(de,te),watchPendingTransactions:te=>(0,se.watchPendingTransactions)(de,te)}}return Ey}var u4;function nwe(){if(u4)return wy;u4=1,Object.defineProperty(wy,"__esModule",{value:!0}),wy.createPublicClient=r;const t=Av(),e=wq();function r(n){const{key:s="public",name:i="Public Client"}=n;return(0,t.createClient)({...n,key:s,name:i,type:"publicClient"}).extend(e.publicActions)}return wy}var Hb={},zb={},$b={},l4;function swe(){if(l4)return $b;l4=1,Object.defineProperty($b,"__esModule",{value:!0}),$b.dropTransaction=t;async function t(e,{hash:r}){await e.request({method:`${e.mode}_dropTransaction`,params:[r]})}return $b}var Vb={},d4;function iwe(){if(d4)return Vb;d4=1,Object.defineProperty(Vb,"__esModule",{value:!0}),Vb.dumpState=t;async function t(e){return e.request({method:`${e.mode}_dumpState`})}return Vb}var Gb={},f4;function owe(){if(f4)return Gb;f4=1,Object.defineProperty(Gb,"__esModule",{value:!0}),Gb.getAutomine=t;async function t(e){return e.mode==="ganache"?await e.request({method:"eth_mining"}):await e.request({method:`${e.mode}_getAutomine`})}return Gb}var Wb={},h4;function awe(){if(h4)return Wb;h4=1,Object.defineProperty(Wb,"__esModule",{value:!0}),Wb.getTxpoolContent=t;async function t(e){return await e.request({method:"txpool_content"})}return Wb}var Kb={},p4;function cwe(){if(p4)return Kb;p4=1,Object.defineProperty(Kb,"__esModule",{value:!0}),Kb.getTxpoolStatus=e;const t=fr();async function e(r){const{pending:n,queued:s}=await r.request({method:"txpool_status"});return{pending:(0,t.hexToNumber)(n),queued:(0,t.hexToNumber)(s)}}return Kb}var Zb={},g4;function uwe(){if(g4)return Zb;g4=1,Object.defineProperty(Zb,"__esModule",{value:!0}),Zb.impersonateAccount=t;async function t(e,{address:r}){await e.request({method:`${e.mode}_impersonateAccount`,params:[r]})}return Zb}var Yb={},m4;function lwe(){if(m4)return Yb;m4=1,Object.defineProperty(Yb,"__esModule",{value:!0}),Yb.increaseTime=e;const t=Ae();async function e(r,{seconds:n}){return await r.request({method:"evm_increaseTime",params:[(0,t.numberToHex)(n)]})}return Yb}var Jb={},y4;function dwe(){if(y4)return Jb;y4=1,Object.defineProperty(Jb,"__esModule",{value:!0}),Jb.inspectTxpool=t;async function t(e){return await e.request({method:"txpool_inspect"})}return Jb}var Qb={},b4;function fwe(){if(b4)return Qb;b4=1,Object.defineProperty(Qb,"__esModule",{value:!0}),Qb.loadState=t;async function t(e,{state:r}){await e.request({method:`${e.mode}_loadState`,params:[r]})}return Qb}var Xb={},w4;function hwe(){if(w4)return Xb;w4=1,Object.defineProperty(Xb,"__esModule",{value:!0}),Xb.mine=e;const t=Ae();async function e(r,{blocks:n,interval:s}){r.mode==="ganache"?await r.request({method:"evm_mine",params:[{blocks:(0,t.numberToHex)(n)}]}):await r.request({method:`${r.mode}_mine`,params:[(0,t.numberToHex)(n),(0,t.numberToHex)(s||0)]})}return Xb}var ew={},E4;function pwe(){if(E4)return ew;E4=1,Object.defineProperty(ew,"__esModule",{value:!0}),ew.removeBlockTimestampInterval=t;async function t(e){await e.request({method:`${e.mode}_removeBlockTimestampInterval`})}return ew}var tw={},v4;function gwe(){if(v4)return tw;v4=1,Object.defineProperty(tw,"__esModule",{value:!0}),tw.reset=t;async function t(e,{blockNumber:r,jsonRpcUrl:n}={}){await e.request({method:`${e.mode}_reset`,params:[{forking:{blockNumber:Number(r),jsonRpcUrl:n}}]})}return tw}var rw={},_4;function mwe(){if(_4)return rw;_4=1,Object.defineProperty(rw,"__esModule",{value:!0}),rw.revert=t;async function t(e,{id:r}){await e.request({method:"evm_revert",params:[r]})}return rw}var nw={},A4;function ywe(){if(A4)return nw;A4=1,Object.defineProperty(nw,"__esModule",{value:!0}),nw.sendUnsignedTransaction=r;const t=pc(),e=Ai();async function r(n,s){const{accessList:i,data:o,from:a,gas:c,gasPrice:u,maxFeePerGas:l,maxPriorityFeePerGas:d,nonce:f,to:g,value:p,...h}=s,y=n.chain?.formatters?.transactionRequest?.format,E=(y||e.formatTransactionRequest)({...(0,t.extract)(h,{format:y}),accessList:i,data:o,from:a,gas:c,gasPrice:u,maxFeePerGas:l,maxPriorityFeePerGas:d,nonce:f,to:g,value:p},"sendUnsignedTransaction");return await n.request({method:"eth_sendUnsignedTransaction",params:[E]})}return nw}var sw={},C4;function bwe(){if(C4)return sw;C4=1,Object.defineProperty(sw,"__esModule",{value:!0}),sw.setAutomine=t;async function t(e,r){e.mode==="ganache"?r?await e.request({method:"miner_start"}):await e.request({method:"miner_stop"}):await e.request({method:"evm_setAutomine",params:[r]})}return sw}var iw={},I4;function wwe(){if(I4)return iw;I4=1,Object.defineProperty(iw,"__esModule",{value:!0}),iw.setBalance=e;const t=Ae();async function e(r,{address:n,value:s}){r.mode==="ganache"?await r.request({method:"evm_setAccountBalance",params:[n,(0,t.numberToHex)(s)]}):await r.request({method:`${r.mode}_setBalance`,params:[n,(0,t.numberToHex)(s)]})}return iw}var ow={},S4;function Ewe(){if(S4)return ow;S4=1,Object.defineProperty(ow,"__esModule",{value:!0}),ow.setBlockGasLimit=e;const t=Ae();async function e(r,{gasLimit:n}){await r.request({method:"evm_setBlockGasLimit",params:[(0,t.numberToHex)(n)]})}return ow}var aw={},T4;function vwe(){if(T4)return aw;T4=1,Object.defineProperty(aw,"__esModule",{value:!0}),aw.setBlockTimestampInterval=t;async function t(e,{interval:r}){const n=e.mode==="hardhat"?r*1e3:r;await e.request({method:`${e.mode}_setBlockTimestampInterval`,params:[n]})}return aw}var cw={},P4;function _we(){if(P4)return cw;P4=1,Object.defineProperty(cw,"__esModule",{value:!0}),cw.setCode=t;async function t(e,{address:r,bytecode:n}){e.mode==="ganache"?await e.request({method:"evm_setAccountCode",params:[r,n]}):await e.request({method:`${e.mode}_setCode`,params:[r,n]})}return cw}var uw={},N4;function Awe(){if(N4)return uw;N4=1,Object.defineProperty(uw,"__esModule",{value:!0}),uw.setCoinbase=t;async function t(e,{address:r}){await e.request({method:`${e.mode}_setCoinbase`,params:[r]})}return uw}var lw={},O4;function Cwe(){if(O4)return lw;O4=1,Object.defineProperty(lw,"__esModule",{value:!0}),lw.setIntervalMining=t;async function t(e,{interval:r}){const n=e.mode==="hardhat"?r*1e3:r;await e.request({method:"evm_setIntervalMining",params:[n]})}return lw}var dw={},R4;function Iwe(){if(R4)return dw;R4=1,Object.defineProperty(dw,"__esModule",{value:!0}),dw.setLoggingEnabled=t;async function t(e,r){await e.request({method:`${e.mode}_setLoggingEnabled`,params:[r]})}return dw}var fw={},x4;function Swe(){if(x4)return fw;x4=1,Object.defineProperty(fw,"__esModule",{value:!0}),fw.setMinGasPrice=e;const t=Ae();async function e(r,{gasPrice:n}){await r.request({method:`${r.mode}_setMinGasPrice`,params:[(0,t.numberToHex)(n)]})}return fw}var hw={},k4;function Twe(){if(k4)return hw;k4=1,Object.defineProperty(hw,"__esModule",{value:!0}),hw.setNextBlockBaseFeePerGas=e;const t=Ae();async function e(r,{baseFeePerGas:n}){await r.request({method:`${r.mode}_setNextBlockBaseFeePerGas`,params:[(0,t.numberToHex)(n)]})}return hw}var pw={},B4;function Pwe(){if(B4)return pw;B4=1,Object.defineProperty(pw,"__esModule",{value:!0}),pw.setNextBlockTimestamp=e;const t=Ae();async function e(r,{timestamp:n}){await r.request({method:"evm_setNextBlockTimestamp",params:[(0,t.numberToHex)(n)]})}return pw}var gw={},j4;function Nwe(){if(j4)return gw;j4=1,Object.defineProperty(gw,"__esModule",{value:!0}),gw.setNonce=e;const t=Ae();async function e(r,{address:n,nonce:s}){await r.request({method:`${r.mode}_setNonce`,params:[n,(0,t.numberToHex)(s)]})}return gw}var mw={},D4;function Owe(){if(D4)return mw;D4=1,Object.defineProperty(mw,"__esModule",{value:!0}),mw.setRpcUrl=t;async function t(e,r){await e.request({method:`${e.mode}_setRpcUrl`,params:[r]})}return mw}var yw={},U4;function Rwe(){if(U4)return yw;U4=1,Object.defineProperty(yw,"__esModule",{value:!0}),yw.setStorageAt=e;const t=Ae();async function e(r,{address:n,index:s,value:i}){await r.request({method:`${r.mode}_setStorageAt`,params:[n,typeof s=="number"?(0,t.numberToHex)(s):s,i]})}return yw}var bw={},M4;function xwe(){if(M4)return bw;M4=1,Object.defineProperty(bw,"__esModule",{value:!0}),bw.snapshot=t;async function t(e){return await e.request({method:"evm_snapshot"})}return bw}var ww={},L4;function kwe(){if(L4)return ww;L4=1,Object.defineProperty(ww,"__esModule",{value:!0}),ww.stopImpersonatingAccount=t;async function t(e,{address:r}){await e.request({method:`${e.mode}_stopImpersonatingAccount`,params:[r]})}return ww}var F4;function Eq(){if(F4)return zb;F4=1,Object.defineProperty(zb,"__esModule",{value:!0}),zb.testActions=B;const t=swe(),e=iwe(),r=owe(),n=awe(),s=cwe(),i=uwe(),o=lwe(),a=dwe(),c=fwe(),u=hwe(),l=pwe(),d=gwe(),f=mwe(),g=ywe(),p=bwe(),h=wwe(),y=Ewe(),b=vwe(),E=_we(),w=Awe(),m=Cwe(),_=Iwe(),C=Swe(),I=Twe(),P=Pwe(),T=Nwe(),R=Owe(),U=Rwe(),k=xwe(),O=kwe();function B({mode:v}){return A=>{const S=A.extend(()=>({mode:v}));return{dropTransaction:j=>(0,t.dropTransaction)(S,j),dumpState:()=>(0,e.dumpState)(S),getAutomine:()=>(0,r.getAutomine)(S),getTxpoolContent:()=>(0,n.getTxpoolContent)(S),getTxpoolStatus:()=>(0,s.getTxpoolStatus)(S),impersonateAccount:j=>(0,i.impersonateAccount)(S,j),increaseTime:j=>(0,o.increaseTime)(S,j),inspectTxpool:()=>(0,a.inspectTxpool)(S),loadState:j=>(0,c.loadState)(S,j),mine:j=>(0,u.mine)(S,j),removeBlockTimestampInterval:()=>(0,l.removeBlockTimestampInterval)(S),reset:j=>(0,d.reset)(S,j),revert:j=>(0,f.revert)(S,j),sendUnsignedTransaction:j=>(0,g.sendUnsignedTransaction)(S,j),setAutomine:j=>(0,p.setAutomine)(S,j),setBalance:j=>(0,h.setBalance)(S,j),setBlockGasLimit:j=>(0,y.setBlockGasLimit)(S,j),setBlockTimestampInterval:j=>(0,b.setBlockTimestampInterval)(S,j),setCode:j=>(0,E.setCode)(S,j),setCoinbase:j=>(0,w.setCoinbase)(S,j),setIntervalMining:j=>(0,m.setIntervalMining)(S,j),setLoggingEnabled:j=>(0,_.setLoggingEnabled)(S,j),setMinGasPrice:j=>(0,C.setMinGasPrice)(S,j),setNextBlockBaseFeePerGas:j=>(0,I.setNextBlockBaseFeePerGas)(S,j),setNextBlockTimestamp:j=>(0,P.setNextBlockTimestamp)(S,j),setNonce:j=>(0,T.setNonce)(S,j),setRpcUrl:j=>(0,R.setRpcUrl)(S,j),setStorageAt:j=>(0,U.setStorageAt)(S,j),snapshot:()=>(0,k.snapshot)(S),stopImpersonatingAccount:j=>(0,O.stopImpersonatingAccount)(S,j)}}}return zb}var q4;function Bwe(){if(q4)return Hb;q4=1,Object.defineProperty(Hb,"__esModule",{value:!0}),Hb.createTestClient=r;const t=Av(),e=Eq();function r(n){const{key:s="test",name:i="Test Client",mode:o}=n;return(0,t.createClient)({...n,key:s,name:i,type:"testClient"}).extend(c=>({mode:o,...(0,e.testActions)({mode:o})(c)}))}return Hb}var Ew={},vw={},_w={},H4;function jwe(){if(H4)return _w;H4=1,Object.defineProperty(_w,"__esModule",{value:!0}),_w.addChain=e;const t=Ae();async function e(r,{chain:n}){const{id:s,name:i,nativeCurrency:o,rpcUrls:a,blockExplorers:c}=n;await r.request({method:"wallet_addEthereumChain",params:[{chainId:(0,t.numberToHex)(s),chainName:i,nativeCurrency:o,rpcUrls:a.default.http,blockExplorerUrls:c?Object.values(c).map(({url:u})=>u):void 0}]},{dedupe:!0,retryCount:0})}return _w}var Aw={},z4;function Dwe(){if(z4)return Aw;z4=1,Object.defineProperty(Aw,"__esModule",{value:!0}),Aw.deployContract=r;const t=L0(),e=vv();function r(n,s){const{abi:i,args:o,bytecode:a,...c}=s,u=(0,t.encodeDeployData)({abi:i,args:o,bytecode:a});return(0,e.sendTransaction)(n,{...c,...c.authorizationList?{to:null}:{},data:u})}return Aw}var Cw={},$4;function Uwe(){if($4)return Cw;$4=1,Object.defineProperty(Cw,"__esModule",{value:!0}),Cw.getAddresses=e;const t=_s();async function e(r){return r.account?.type==="local"?[r.account.address]:(await r.request({method:"eth_accounts"},{dedupe:!0})).map(s=>(0,t.checksumAddress)(s))}return Cw}var Iw={},V4;function Mwe(){if(V4)return Iw;V4=1,Object.defineProperty(Iw,"__esModule",{value:!0}),Iw.getCapabilities=r;const t=or(),e=Ae();async function r(n,s={}){const{account:i=n.account,chainId:o}=s,a=i?(0,t.parseAccount)(i):void 0,c=o?[a?.address,[(0,e.numberToHex)(o)]]:[a?.address],u=await n.request({method:"wallet_getCapabilities",params:c}),l={};for(const[d,f]of Object.entries(u)){l[Number(d)]={};for(let[g,p]of Object.entries(f))g==="addSubAccount"&&(g="unstable_addSubAccount"),l[Number(d)][g]=p}return typeof o=="number"?l[o]:l}return Iw}var Sw={},G4;function Lwe(){if(G4)return Sw;G4=1,Object.defineProperty(Sw,"__esModule",{value:!0}),Sw.getPermissions=t;async function t(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}return Sw}var Tw={},W4;function vq(){if(W4)return Tw;W4=1,Object.defineProperty(Tw,"__esModule",{value:!0}),Tw.prepareAuthorization=o;const t=or(),e=bc(),r=Ii(),n=bt(),s=gc(),i=fv();async function o(a,c){const{account:u=a.account,chainId:l,nonce:d}=c;if(!u)throw new e.AccountNotFoundError({docsPath:"/docs/eip7702/prepareAuthorization"});const f=(0,t.parseAccount)(u),g=(()=>{if(c.executor)return c.executor==="self"?c.executor:(0,t.parseAccount)(c.executor)})(),p={address:c.contractAddress??c.address,chainId:l,nonce:d};return typeof p.chainId>"u"&&(p.chainId=a.chain?.id??await(0,n.getAction)(a,s.getChainId,"getChainId")({})),typeof p.nonce>"u"&&(p.nonce=await(0,n.getAction)(a,i.getTransactionCount,"getTransactionCount")({address:f.address,blockTag:"pending"}),(g==="self"||g?.address&&(0,r.isAddressEqual)(g.address,f.address))&&(p.nonce+=1)),p}return Tw}var Pw={},K4;function Fwe(){if(K4)return Pw;K4=1,Object.defineProperty(Pw,"__esModule",{value:!0}),Pw.requestAddresses=e;const t=_s();async function e(r){return(await r.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(s=>(0,t.getAddress)(s))}return Pw}var Nw={},Z4;function qwe(){if(Z4)return Nw;Z4=1,Object.defineProperty(Nw,"__esModule",{value:!0}),Nw.requestPermissions=t;async function t(e,r){return e.request({method:"wallet_requestPermissions",params:[r]},{retryCount:0})}return Nw}var Ow={},Y4;function Hwe(){if(Y4)return Ow;Y4=1,Object.defineProperty(Ow,"__esModule",{value:!0}),Ow.sendCallsSync=r;const t=VS(),e=GS();async function r(n,s){const{chain:i=n.chain}=s,o=s.timeout??Math.max((i?.blockTime??0)*3,5e3),a=await(0,t.sendCalls)(n,s);return await(0,e.waitForCallsStatus)(n,{...s,id:a.id,timeout:o})}return Ow}var Rw={},J4;function _q(){if(J4)return Rw;J4=1,Object.defineProperty(Rw,"__esModule",{value:!0}),Rw.sendTransactionSync=b;const t=or(),e=bc(),r=Ke(),n=ts(),s=N0(),i=H0(),o=k0(),a=pc(),c=Ai(),u=bt(),l=rl(),d=Ci(),f=gc(),g=bq(),p=B0(),h=gT(),y=new l.LruMap(128);async function b(E,w){const{account:m=E.account,chain:_=E.chain,accessList:C,authorizationList:I,blobs:P,data:T,gas:R,gasPrice:U,maxFeePerBlobGas:k,maxFeePerGas:O,maxPriorityFeePerGas:B,nonce:v,pollingInterval:A,throwOnReceiptRevert:S,type:j,value:N,...x}=w,D=w.timeout??Math.max((_?.blockTime??0)*3,5e3);if(typeof m>"u")throw new e.AccountNotFoundError({docsPath:"/docs/actions/wallet/sendTransactionSync"});const M=m?(0,t.parseAccount)(m):null;try{(0,d.assertRequest)(w);const L=await(async()=>{if(w.to)return w.to;if(w.to!==null&&I&&I.length>0)return await(0,s.recoverAuthorizationAddress)({authorization:I[0]}).catch(()=>{throw new r.BaseError("`to` is required. Could not infer from `authorizationList`.")})})();if(M?.type==="json-rpc"||M===null){let F;_!==null&&(F=await(0,u.getAction)(E,f.getChainId,"getChainId")({}),(0,i.assertCurrentChain)({currentChainId:F,chain:_}));const q=E.chain?.formatters?.transactionRequest?.format,V=(q||c.formatTransactionRequest)({...(0,a.extract)(x,{format:q}),accessList:C,account:M,authorizationList:I,blobs:P,chainId:F,data:T,gas:R,gasPrice:U,maxFeePerBlobGas:k,maxFeePerGas:O,maxPriorityFeePerGas:B,nonce:v,to:L,type:j,value:N},"sendTransaction"),J=y.get(E.uid),Y=J?"wallet_sendTransaction":"eth_sendTransaction",Z=await(async()=>{try{return await E.request({method:Y,params:[V]},{retryCount:0})}catch(le){if(J===!1)throw le;const X=le;if(X.name==="InvalidInputRpcError"||X.name==="InvalidParamsRpcError"||X.name==="MethodNotFoundRpcError"||X.name==="MethodNotSupportedRpcError")return await E.request({method:"wallet_sendTransaction",params:[V]},{retryCount:0}).then(se=>(y.set(E.uid,!0),se)).catch(se=>{const fe=se;throw fe.name==="MethodNotFoundRpcError"||fe.name==="MethodNotSupportedRpcError"?(y.set(E.uid,!1),X):fe});throw X}})(),ee=await(0,u.getAction)(E,g.waitForTransactionReceipt,"waitForTransactionReceipt")({checkReplacement:!1,hash:Z,pollingInterval:A,timeout:D});if(S&&ee.status==="reverted")throw new n.TransactionReceiptRevertedError({receipt:ee});return ee}if(M?.type==="local"){const F=await(0,u.getAction)(E,p.prepareTransactionRequest,"prepareTransactionRequest")({account:M,accessList:C,authorizationList:I,blobs:P,chain:_,data:T,gas:R,gasPrice:U,maxFeePerBlobGas:k,maxFeePerGas:O,maxPriorityFeePerGas:B,nonce:v,nonceManager:M.nonceManager,parameters:[...p.defaultParameters,"sidecars"],type:j,value:N,...x,to:L}),q=_?.serializers?.transaction,$=await M.signTransaction(F,{serializer:q});return await(0,u.getAction)(E,h.sendRawTransactionSync,"sendRawTransactionSync")({serializedTransaction:$,throwOnReceiptRevert:S})}throw M?.type==="smart"?new e.AccountTypeNotSupportedError({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new e.AccountTypeNotSupportedError({docsPath:"/docs/actions/wallet/sendTransactionSync",type:M?.type})}catch(L){throw L instanceof e.AccountTypeNotSupportedError?L:(0,o.getTransactionError)(L,{...w,account:M,chain:w.chain||void 0})}}return Rw}var xw={},Q4;function zwe(){if(Q4)return xw;Q4=1,Object.defineProperty(xw,"__esModule",{value:!0}),xw.showCallsStatus=t;async function t(e,r){const{id:n}=r;await e.request({method:"wallet_showCallsStatus",params:[n]})}return xw}var kw={},X4;function $we(){if(X4)return kw;X4=1,Object.defineProperty(kw,"__esModule",{value:!0}),kw.signAuthorization=n;const t=or(),e=bc(),r=vq();async function n(s,i){const{account:o=s.account}=i;if(!o)throw new e.AccountNotFoundError({docsPath:"/docs/eip7702/signAuthorization"});const a=(0,t.parseAccount)(o);if(!a.signAuthorization)throw new e.AccountTypeNotSupportedError({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:a.type});const c=await(0,r.prepareAuthorization)(s,i);return a.signAuthorization(c)}return kw}var Bw={},ej;function Vwe(){if(ej)return Bw;ej=1,Object.defineProperty(Bw,"__esModule",{value:!0}),Bw.signMessage=n;const t=or(),e=bc(),r=Ae();async function n(s,{account:i=s.account,message:o}){if(!i)throw new e.AccountNotFoundError({docsPath:"/docs/actions/wallet/signMessage"});const a=(0,t.parseAccount)(i);if(a.signMessage)return a.signMessage({message:o});const c=typeof o=="string"?(0,r.stringToHex)(o):o.raw instanceof Uint8Array?(0,r.toHex)(o.raw):o.raw;return s.request({method:"personal_sign",params:[c,a.address]},{retryCount:0})}return Bw}var jw={},tj;function Gwe(){if(tj)return jw;tj=1,Object.defineProperty(jw,"__esModule",{value:!0}),jw.signTransaction=c;const t=or(),e=bc(),r=H0(),n=Ae(),s=Ai(),i=bt(),o=Ci(),a=gc();async function c(u,l){const{account:d=u.account,chain:f=u.chain,...g}=l;if(!d)throw new e.AccountNotFoundError({docsPath:"/docs/actions/wallet/signTransaction"});const p=(0,t.parseAccount)(d);(0,o.assertRequest)({account:p,...l});const h=await(0,i.getAction)(u,a.getChainId,"getChainId")({});f!==null&&(0,r.assertCurrentChain)({currentChainId:h,chain:f});const b=(f?.formatters||u.chain?.formatters)?.transactionRequest?.format||s.formatTransactionRequest;return p.signTransaction?p.signTransaction({...g,chainId:h},{serializer:u.chain?.serializers?.transaction}):await u.request({method:"eth_signTransaction",params:[{...b({...g,account:p},"signTransaction"),chainId:(0,n.numberToHex)(h),from:p.address}]},{retryCount:0})}return jw}var Dw={},rj;function Wwe(){if(rj)return Dw;rj=1,Object.defineProperty(Dw,"__esModule",{value:!0}),Dw.signTypedData=n;const t=or(),e=bc(),r=Sv();async function n(s,i){const{account:o=s.account,domain:a,message:c,primaryType:u}=i;if(!o)throw new e.AccountNotFoundError({docsPath:"/docs/actions/wallet/signTypedData"});const l=(0,t.parseAccount)(o),d={EIP712Domain:(0,r.getTypesForEIP712Domain)({domain:a}),...i.types};if((0,r.validateTypedData)({domain:a,message:c,primaryType:u,types:d}),l.signTypedData)return l.signTypedData({domain:a,message:c,primaryType:u,types:d});const f=(0,r.serializeTypedData)({domain:a,message:c,primaryType:u,types:d});return s.request({method:"eth_signTypedData_v4",params:[l.address,f]},{retryCount:0})}return Dw}var Uw={},nj;function Kwe(){if(nj)return Uw;nj=1,Object.defineProperty(Uw,"__esModule",{value:!0}),Uw.switchChain=e;const t=Ae();async function e(r,{id:n}){await r.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,t.numberToHex)(n)}]},{retryCount:0})}return Uw}var Mw={},sj;function Zwe(){if(sj)return Mw;sj=1,Object.defineProperty(Mw,"__esModule",{value:!0}),Mw.watchAsset=t;async function t(e,r){return await e.request({method:"wallet_watchAsset",params:r},{retryCount:0})}return Mw}var Lw={},ij;function Ywe(){if(ij)return Lw;ij=1,Object.defineProperty(Lw,"__esModule",{value:!0}),Lw.writeContractSync=r;const t=_q(),e=$S();async function r(n,s){return e.writeContract.internal(n,t.sendTransactionSync,"sendTransactionSync",s)}return Lw}var oj;function Aq(){if(oj)return vw;oj=1,Object.defineProperty(vw,"__esModule",{value:!0}),vw.walletActions=k;const t=RS(),e=gc(),r=jwe(),n=Dwe(),s=Uwe(),i=C7(),o=Mwe(),a=Lwe(),c=vq(),u=B0(),l=Fwe(),d=qwe(),f=VS(),g=Hwe(),p=zS(),h=gT(),y=vv(),b=_q(),E=zwe(),w=$we(),m=Vwe(),_=Gwe(),C=Wwe(),I=Kwe(),P=GS(),T=Zwe(),R=$S(),U=Ywe();function k(O){return{addChain:B=>(0,r.addChain)(O,B),deployContract:B=>(0,n.deployContract)(O,B),fillTransaction:B=>(0,t.fillTransaction)(O,B),getAddresses:()=>(0,s.getAddresses)(O),getCallsStatus:B=>(0,i.getCallsStatus)(O,B),getCapabilities:B=>(0,o.getCapabilities)(O,B),getChainId:()=>(0,e.getChainId)(O),getPermissions:()=>(0,a.getPermissions)(O),prepareAuthorization:B=>(0,c.prepareAuthorization)(O,B),prepareTransactionRequest:B=>(0,u.prepareTransactionRequest)(O,B),requestAddresses:()=>(0,l.requestAddresses)(O),requestPermissions:B=>(0,d.requestPermissions)(O,B),sendCalls:B=>(0,f.sendCalls)(O,B),sendCallsSync:B=>(0,g.sendCallsSync)(O,B),sendRawTransaction:B=>(0,p.sendRawTransaction)(O,B),sendRawTransactionSync:B=>(0,h.sendRawTransactionSync)(O,B),sendTransaction:B=>(0,y.sendTransaction)(O,B),sendTransactionSync:B=>(0,b.sendTransactionSync)(O,B),showCallsStatus:B=>(0,E.showCallsStatus)(O,B),signAuthorization:B=>(0,w.signAuthorization)(O,B),signMessage:B=>(0,m.signMessage)(O,B),signTransaction:B=>(0,_.signTransaction)(O,B),signTypedData:B=>(0,C.signTypedData)(O,B),switchChain:B=>(0,I.switchChain)(O,B),waitForCallsStatus:B=>(0,P.waitForCallsStatus)(O,B),watchAsset:B=>(0,T.watchAsset)(O,B),writeContract:B=>(0,R.writeContract)(O,B),writeContractSync:B=>(0,U.writeContractSync)(O,B)}}return vw}var aj;function Jwe(){if(aj)return Ew;aj=1,Object.defineProperty(Ew,"__esModule",{value:!0}),Ew.createWalletClient=r;const t=Av(),e=Aq();function r(n){const{key:s="wallet",name:i="Wallet Client",transport:o}=n;return(0,t.createClient)({...n,key:s,name:i,transport:o,type:"walletClient"}).extend(e.walletActions)}return Ew}var Fw={},cj;function W0(){if(cj)return Fw;cj=1,Object.defineProperty(Fw,"__esModule",{value:!0}),Fw.createTransport=r;const t=U7(),e=I7();function r({key:n,methods:s,name:i,request:o,retryCount:a=3,retryDelay:c=150,timeout:u,type:l},d){const f=(0,e.uid)();return{config:{key:n,methods:s,name:i,request:o,retryCount:a,retryDelay:c,timeout:u,type:l},request:(0,t.buildRequest)(o,{methods:s,retryCount:a,retryDelay:c,uid:f}),value:d}}return Fw}var qw={},uj;function Qwe(){if(uj)return qw;uj=1,Object.defineProperty(qw,"__esModule",{value:!0}),qw.custom=e;const t=W0();function e(r,n={}){const{key:s="custom",methods:i,name:o="Custom Provider",retryDelay:a}=n;return({retryCount:c})=>(0,t.createTransport)({key:s,methods:i,name:o,request:r.request.bind(r),retryCount:n.retryCount??c,retryDelay:a,type:"custom"})}return qw}var Hl={},lj;function Xwe(){if(lj)return Hl;lj=1,Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.fallback=s,Hl.shouldThrow=i,Hl.rankTransports=o;const t=ua(),e=dc(),r=HS(),n=W0();function s(a,c={}){const{key:u="fallback",name:l="Fallback",rank:d=!1,shouldThrow:f=i,retryCount:g,retryDelay:p}=c;return(({chain:h,pollingInterval:y=4e3,timeout:b,...E})=>{let w=a,m=()=>{};const _=(0,n.createTransport)({key:u,name:l,async request({method:C,params:I}){let P;const T=async(R=0)=>{const U=w[R]({...E,chain:h,retryCount:0,timeout:b});try{const k=await U.request({method:C,params:I});return m({method:C,params:I,response:k,transport:U,status:"success"}),k}catch(k){if(m({error:k,method:C,params:I,transport:U,status:"error"}),f(k)||R===w.length-1||(P??=w.slice(R+1).some(O=>{const{include:B,exclude:v}=O({chain:h}).config.methods||{};return B?B.includes(C):v?!v.includes(C):!0}),!P))throw k;return T(R+1)}};return T()},retryCount:g,retryDelay:p,type:"fallback"},{onResponse:C=>m=C,transports:w.map(C=>C({chain:h,retryCount:0}))});if(d){const C=typeof d=="object"?d:{};o({chain:h,interval:C.interval??y,onTransports:I=>w=I,ping:C.ping,sampleCount:C.sampleCount,timeout:C.timeout,transports:w,weights:C.weights})}return _})}function i(a){return!!("code"in a&&typeof a.code=="number"&&(a.code===e.TransactionRejectedRpcError.code||a.code===e.UserRejectedRequestError.code||t.ExecutionRevertedError.nodeMessage.test(a.message)||a.code===5e3))}function o({chain:a,interval:c=4e3,onTransports:u,ping:l,sampleCount:d=10,timeout:f=1e3,transports:g,weights:p={}}){const{stability:h=.7,latency:y=.3}=p,b=[],E=async()=>{const w=await Promise.all(g.map(async C=>{const I=C({chain:a,retryCount:0,timeout:f}),P=Date.now();let T,R;try{await(l?l({transport:I}):I.request({method:"net_listening"})),R=1}catch{R=0}finally{T=Date.now()}return{latency:T-P,success:R}}));b.push(w),b.length>d&&b.shift();const m=Math.max(...b.map(C=>Math.max(...C.map(({latency:I})=>I)))),_=g.map((C,I)=>{const P=b.map(O=>O[I].latency),R=1-P.reduce((O,B)=>O+B,0)/P.length/m,U=b.map(O=>O[I].success),k=U.reduce((O,B)=>O+B,0)/U.length;return k===0?[0,I]:[y*R+h*k,I]}).sort((C,I)=>I[0]-C[0]);u(_.map(([,C])=>g[C])),await(0,r.wait)(c),E()};E()}return Hl}var Hw={},Ph={},dj;function mT(){if(dj)return Ph;dj=1,Object.defineProperty(Ph,"__esModule",{value:!0}),Ph.UrlRequiredError=void 0;const t=Ke();class e extends t.BaseError{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}return Ph.UrlRequiredError=e,Ph}var fj;function e1e(){if(fj)return Hw;fj=1,Object.defineProperty(Hw,"__esModule",{value:!0}),Hw.http=i;const t=_i(),e=mT(),r=US(),n=rT(),s=W0();function i(o,a={}){const{batch:c,fetchFn:u,fetchOptions:l,key:d="http",methods:f,name:g="HTTP JSON-RPC",onFetchRequest:p,onFetchResponse:h,retryDelay:y,raw:b}=a;return({chain:E,retryCount:w,timeout:m})=>{const{batchSize:_=1e3,wait:C=0}=typeof c=="object"?c:{},I=a.retryCount??w,P=m??a.timeout??1e4,T=o||E?.rpcUrls.default.http[0];if(!T)throw new e.UrlRequiredError;const R=(0,n.getHttpRpcClient)(T,{fetchFn:u,fetchOptions:l,onRequest:p,onResponse:h,timeout:P});return(0,s.createTransport)({key:d,methods:f,name:g,async request({method:U,params:k}){const O={method:U,params:k},{schedule:B}=(0,r.createBatchScheduler)({id:T,wait:C,shouldSplitBatch(j){return j.length>_},fn:j=>R.request({body:j}),sort:(j,N)=>j.id-N.id}),v=async j=>c?B(j):[await R.request({body:j})],[{error:A,result:S}]=await v(O);if(b)return{error:A,result:S};if(A)throw new t.RpcRequestError({body:O,error:A,url:T});return S},retryCount:I,retryDelay:y,timeout:P,type:"http"},{fetchOptions:l,url:T})}}return Hw}var zw={},hj;function t1e(){if(hj)return zw;hj=1,Object.defineProperty(zw,"__esModule",{value:!0}),zw.webSocket=i;const t=_i(),e=mT(),r=Z7(),n=nT(),s=W0();function i(o,a={}){const{keepAlive:c,key:u="webSocket",methods:l,name:d="WebSocket JSON-RPC",reconnect:f,retryDelay:g}=a;return({chain:p,retryCount:h,timeout:y})=>{const b=a.retryCount??h,E=y??a.timeout??1e4,w=o||p?.rpcUrls.default.webSocket?.[0],m={keepAlive:c,reconnect:f};if(!w)throw new e.UrlRequiredError;return(0,s.createTransport)({key:u,methods:l,name:d,async request({method:_,params:C}){const I={method:_,params:C},P=await(0,n.getWebSocketRpcClient)(w,m),{error:T,result:R}=await P.requestAsync({body:I,timeout:E});if(T)throw new t.RpcRequestError({body:I,error:T,url:w});return R},retryCount:b,retryDelay:g,timeout:E,type:"webSocket"},{getSocket(){return(0,r.getSocket)(w)},getRpcClient(){return(0,n.getWebSocketRpcClient)(w,m)},async subscribe({params:_,onData:C,onError:I}){const P=await(0,n.getWebSocketRpcClient)(w,m),{result:T}=await new Promise((R,U)=>P.request({body:{method:"eth_subscribe",params:_},onError(k){U(k),I?.(k)},onResponse(k){if(k.error){U(k.error),I?.(k.error);return}if(typeof k.id=="number"){R(k);return}k.method==="eth_subscription"&&C(k.params)}}));return{subscriptionId:T,async unsubscribe(){return new Promise(R=>P.request({body:{method:"eth_unsubscribe",params:[T]},onResponse:R}))}}}})}}return zw}var Nh={},pj;function r1e(){if(pj)return Nh;pj=1,Object.defineProperty(Nh,"__esModule",{value:!0}),Nh.ProviderRpcError=void 0;class t extends Error{constructor(r,n){super(n),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r,this.details=n}}return Nh.ProviderRpcError=t,Nh}var $w={},gj;function n1e(){if(gj)return $w;gj=1,Object.defineProperty($w,"__esModule",{value:!0}),$w.decodeDeployData=n;const t=er(),e=uc(),r="/docs/contract/decodeDeployData";function n(s){const{abi:i,bytecode:o,data:a}=s;if(a===o)return{bytecode:o};const c=i.find(l=>"type"in l&&l.type==="constructor");if(!c)throw new t.AbiConstructorNotFoundError({docsPath:r});if(!("inputs"in c))throw new t.AbiConstructorParamsNotFoundError({docsPath:r});if(!c.inputs||c.inputs.length===0)throw new t.AbiConstructorParamsNotFoundError({docsPath:r});return{args:(0,e.decodeAbiParameters)(c.inputs,`0x${a.replace(o,"")}`),bytecode:o}}return $w}var Vw={},mj;function s1e(){if(mj)return Vw;mj=1,Object.defineProperty(Vw,"__esModule",{value:!0}),Vw.fromBlobs=n;const t=I0(),e=Lt(),r=Ae();function n(s){const i=s.to??(typeof s.blobs[0]=="string"?"hex":"bytes"),o=typeof s.blobs[0]=="string"?s.blobs.map(d=>(0,e.hexToBytes)(d)):s.blobs,a=o.reduce((d,f)=>d+f.length,0),c=(0,t.createCursor)(new Uint8Array(a));let u=!0;for(const d of o){const f=(0,t.createCursor)(d);for(;u&&f.position<d.length;){f.incrementPosition(1);let g=31;d.length-f.position<31&&(g=d.length-f.position);for(const p in Array.from({length:g})){const h=f.readByte();if(h===128&&!f.inspectBytes(f.remaining).includes(128)){u=!1;break}c.pushByte(h)}}}const l=c.bytes.slice(0,c.position);return i==="hex"?(0,r.bytesToHex)(l):l}return Vw}var Gw={},yj;function i1e(){if(yj)return Gw;yj=1,Object.defineProperty(Gw,"__esModule",{value:!0}),Gw.sidecarsToVersionedHashes=e;const t=NS();function e(r){const{sidecars:n,version:s}=r,i=r.to??(typeof n[0].blob=="string"?"hex":"bytes"),o=[];for(const{commitment:a}of n)o.push((0,t.commitmentToVersionedHash)({commitment:a,to:i,version:s}));return o}return Gw}var Ww={},bj;function o1e(){if(bj)return Ww;bj=1,Object.defineProperty(Ww,"__esModule",{value:!0}),Ww.toCoinType=r;const t=YS(),e=2147483648;function r(n){if(n===1)return 60n;if(n>=e||n<0)throw new t.EnsInvalidChainIdError({chainId:n});return BigInt((2147483648|n)>>>0)}return Ww}var Kw={},wj;function Cq(){if(wj)return Kw;wj=1,Object.defineProperty(Kw,"__esModule",{value:!0}),Kw.defineKzg=t;function t({blobToKzgCommitment:e,computeBlobKzgProof:r}){return{blobToKzgCommitment:e,computeBlobKzgProof:r}}return Kw}var Zw={},Ej;function a1e(){if(Ej)return Zw;Ej=1,Object.defineProperty(Zw,"__esModule",{value:!0}),Zw.setupKzg=e;const t=Cq();function e(r,n){try{r.loadTrustedSetup(n)}catch(s){const i=s;if(!i.message.includes("trusted setup is already loaded"))throw i}return(0,t.defineKzg)(r)}return Zw}var Yw={},vj;function c1e(){if(vj)return Yw;vj=1,Object.defineProperty(Yw,"__esModule",{value:!0}),Yw.compactSignatureToSignature=r;const t=Lt(),e=Ae();function r({r:n,yParityAndS:s}){const i=(0,t.hexToBytes)(s),o=i[0]&128?1:0,a=i;return o===1&&(a[0]&=127),{r:n,s:(0,e.bytesToHex)(a),yParity:o}}return Yw}var Jw={},_j;function u1e(){if(_j)return Jw;_j=1,Object.defineProperty(Jw,"__esModule",{value:!0}),Jw.parseCompactSignature=r;const t=al(),e=Ae();function r(n){const{r:s,s:i}=t.secp256k1.Signature.fromCompact(n.slice(2,130));return{r:(0,e.numberToHex)(s,{size:32}),yParityAndS:(0,e.numberToHex)(i,{size:32})}}return Jw}var Qw={},Aj;function l1e(){if(Aj)return Qw;Aj=1,Object.defineProperty(Qw,"__esModule",{value:!0}),Qw.parseSignature=r;const t=al(),e=Ae();function r(n){const{r:s,s:i}=t.secp256k1.Signature.fromCompact(n.slice(2,130)),o=+`0x${n.slice(130)}`,[a,c]=(()=>{if(o===0||o===1)return[void 0,o];if(o===27)return[BigInt(o),0];if(o===28)return[BigInt(o),1];throw new Error("Invalid yParityOrV value")})();return typeof a<"u"?{r:(0,e.numberToHex)(s,{size:32}),s:(0,e.numberToHex)(i,{size:32}),v:a,yParity:c}:{r:(0,e.numberToHex)(s,{size:32}),s:(0,e.numberToHex)(i,{size:32}),yParity:c}}return Qw}var Xw={},Cj;function d1e(){if(Cj)return Xw;Cj=1,Object.defineProperty(Xw,"__esModule",{value:!0}),Xw.recoverTransactionAddress=s;const t=Qn(),e=fT(),r=Iv(),n=hc();async function s(i){const{serializedTransaction:o,signature:a}=i,c=(0,e.parseTransaction)(o),u=a??{r:c.r,s:c.s,v:c.v,yParity:c.yParity},l=(0,r.serializeTransaction)({...c,r:void 0,s:void 0,v:void 0,yParity:void 0,sidecars:void 0});return await(0,n.recoverAddress)({hash:(0,t.keccak256)(l),signature:u})}return Xw}var e1={},Ij;function f1e(){if(Ij)return e1;Ij=1,Object.defineProperty(e1,"__esModule",{value:!0}),e1.serializeCompactSignature=r;const t=al(),e=fr();function r({r:n,yParityAndS:s}){return`0x${new t.secp256k1.Signature((0,e.hexToBigInt)(n),(0,e.hexToBigInt)(s)).toCompactHex()}`}return e1}var t1={},Sj;function h1e(){if(Sj)return t1;Sj=1,Object.defineProperty(t1,"__esModule",{value:!0}),t1.signatureToCompactSignature=r;const t=Lt(),e=Ae();function r(n){const{r:s,s:i,v:o,yParity:a}=n,c=Number(a??o-27n);let u=i;if(c===1){const l=(0,t.hexToBytes)(i);l[0]|=128,u=(0,e.bytesToHex)(l)}return{r:s,yParityAndS:u}}return t1}var Tj;function p1e(){return Tj||(Tj=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.maxInt8=t.universalSignatureValidatorByteCode=t.erc6492SignatureValidatorByteCode=t.deploylessCallViaFactoryBytecode=t.deploylessCallViaBytecodeBytecode=t.zeroHash=t.zeroAddress=t.ethAddress=t.multicall3Abi=t.universalSignatureValidatorAbi=t.erc6492SignatureValidatorAbi=t.erc4626Abi=t.erc1155Abi=t.erc721Abi=t.erc20Abi_bytes32=t.erc20Abi=t.webSocket=t.http=t.shouldThrow=t.fallback=t.custom=t.createTransport=t.walletActions=t.testActions=t.publicActions=t.createWalletClient=t.createTestClient=t.createPublicClient=t.rpcSchema=t.createClient=t.WaitForCallsStatusTimeoutError=t.getContract=t.UnknownTypeError=t.UnknownSignatureError=t.SolidityProtectedKeywordError=t.parseAbiParameters=t.parseAbiParameter=t.parseAbiItem=t.parseAbi=t.InvalidStructSignatureError=t.InvalidSignatureError=t.InvalidParenthesisError=t.InvalidParameterError=t.InvalidModifierError=t.InvalidFunctionModifierError=t.InvalidAbiTypeParameterError=t.InvalidAbiParametersError=t.InvalidAbiParameterError=t.InvalidAbiItemError=t.CircularReferenceError=void 0,t.maxUint152=t.maxUint144=t.maxUint136=t.maxUint128=t.maxUint120=t.maxUint112=t.maxUint104=t.maxUint96=t.maxUint88=t.maxUint80=t.maxUint72=t.maxUint64=t.maxUint56=t.maxUint48=t.maxUint40=t.maxUint32=t.maxUint24=t.maxUint16=t.maxUint8=t.maxInt256=t.maxInt248=t.maxInt240=t.maxInt232=t.maxInt224=t.maxInt216=t.maxInt208=t.maxInt200=t.maxInt192=t.maxInt184=t.maxInt176=t.maxInt168=t.maxInt160=t.maxInt152=t.maxInt144=t.maxInt136=t.maxInt128=t.maxInt120=t.maxInt112=t.maxInt104=t.maxInt96=t.maxInt88=t.maxInt80=t.maxInt72=t.maxInt64=t.maxInt56=t.maxInt48=t.maxInt40=t.maxInt32=t.maxInt24=t.maxInt16=void 0,t.AbiConstructorNotFoundError=t.weiUnits=t.gweiUnits=t.etherUnits=t.presignMessagePrefix=t.minInt256=t.minInt248=t.minInt240=t.minInt232=t.minInt224=t.minInt216=t.minInt208=t.minInt200=t.minInt192=t.minInt184=t.minInt176=t.minInt168=t.minInt160=t.minInt152=t.minInt144=t.minInt136=t.minInt128=t.minInt120=t.minInt112=t.minInt104=t.minInt96=t.minInt88=t.minInt80=t.minInt72=t.minInt64=t.minInt56=t.minInt48=t.minInt40=t.minInt32=t.minInt24=t.minInt16=t.minInt8=t.maxUint256=t.maxUint248=t.maxUint240=t.maxUint232=t.maxUint224=t.maxUint216=t.maxUint208=t.maxUint200=t.maxUint192=t.maxUint184=t.maxUint176=t.maxUint168=t.maxUint160=void 0,t.EnsAvatarUriResolutionError=t.EnsAvatarUnsupportedNamespaceError=t.EnsAvatarInvalidNftUriError=t.SizeOverflowError=t.InvalidHexValueError=t.InvalidHexBooleanError=t.InvalidBytesBooleanError=t.IntegerOutOfRangeError=t.SliceOffsetOutOfBoundsError=t.SizeExceedsPaddingSizeError=t.RawContractError=t.CounterfactualDeploymentFailedError=t.ContractFunctionZeroDataError=t.ContractFunctionRevertedError=t.ContractFunctionExecutionError=t.CallExecutionError=t.InvalidChainIdError=t.ClientChainNotConfiguredError=t.ChainNotFoundError=t.ChainMismatchError=t.ChainDoesNotSupportContract=t.BundleFailedError=t.BlockNotFoundError=t.setErrorConfig=t.BaseError=t.InvalidAddressError=t.UnsupportedPackedAbiType=t.InvalidDefinitionTypeError=t.InvalidArrayError=t.InvalidAbiEncodingTypeError=t.InvalidAbiDecodingTypeError=t.DecodeLogTopicsMismatch=t.DecodeLogDataMismatch=t.BytesSizeMismatchError=t.AbiFunctionSignatureNotFoundError=t.AbiFunctionOutputsNotFoundError=t.AbiFunctionNotFoundError=t.AbiEventSignatureNotFoundError=t.AbiEventSignatureEmptyTopicsError=t.AbiEventNotFoundError=t.AbiErrorSignatureNotFoundError=t.AbiErrorNotFoundError=t.AbiErrorInputsNotFoundError=t.AbiEncodingLengthMismatchError=t.AbiEncodingBytesSizeMismatchError=t.AbiEncodingArrayLengthMismatchError=t.AbiDecodingZeroDataError=t.AbiDecodingDataSizeTooSmallError=t.AbiDecodingDataSizeInvalidError=t.AbiConstructorParamsNotFoundError=void 0,t.UnsupportedProviderMethodError=t.UnsupportedNonOptionalCapabilityError=t.UnsupportedChainIdError=t.UnknownRpcError=t.UnknownBundleIdError=t.UnauthorizedProviderError=t.TransactionRejectedRpcError=t.SwitchChainError=t.RpcError=t.ResourceUnavailableRpcError=t.ResourceNotFoundRpcError=t.ProviderRpcError=t.ProviderDisconnectedError=t.ParseRpcError=t.MethodNotSupportedRpcError=t.MethodNotFoundRpcError=t.LimitExceededRpcError=t.JsonRpcVersionUnsupportedError=t.InvalidRequestRpcError=t.InvalidParamsRpcError=t.InvalidInputRpcError=t.InternalRpcError=t.DuplicateIdError=t.ChainDisconnectedError=t.BundleTooLargeError=t.AtomicReadyWalletRejectedUpgradeError=t.AtomicityNotSupportedError=t.WebSocketRequestError=t.TimeoutError=t.SocketClosedError=t.RpcRequestError=t.HttpRequestError=t.UnknownNodeError=t.TransactionTypeNotSupportedError=t.TipAboveFeeCapError=t.NonceTooLowError=t.NonceTooHighError=t.NonceMaxValueError=t.IntrinsicGasTooLowError=t.IntrinsicGasTooHighError=t.InsufficientFundsError=t.FeeCapTooLowError=t.FeeCapTooHighError=t.ExecutionRevertedError=t.FilterTypeNotSupportedError=t.MaxFeePerGasTooLowError=t.Eip1559FeesNotSupportedError=t.BaseFeeScalarError=t.EstimateGasExecutionError=t.EnsInvalidChainIdError=void 0,t.toBlobs=t.toBlobSidecars=t.sidecarsToVersionedHashes=t.fromBlobs=t.commitmentToVersionedHash=t.commitmentsToVersionedHashes=t.blobsToProofs=t.blobsToCommitments=t.isAddressEqual=t.isAddress=t.getCreateAddress=t.getCreate2Address=t.getContractAddress=t.getAddress=t.checksumAddress=t.prepareEncodeFunctionData=t.parseEventLogs=t.getAbiItem=t.encodePacked=t.encodeFunctionResult=t.encodeFunctionData=t.encodeEventTopics=t.encodeErrorResult=t.encodeDeployData=t.encodeAbiParameters=t.decodeFunctionResult=t.decodeFunctionData=t.decodeEventLog=t.decodeErrorResult=t.decodeDeployData=t.decodeAbiParameters=t.EIP1193ProviderRpcError=t.InvalidDecimalNumberError=t.InvalidStructTypeError=t.InvalidPrimaryTypeError=t.InvalidDomainError=t.UrlRequiredError=t.WaitForTransactionReceiptTimeoutError=t.TransactionReceiptNotFoundError=t.TransactionNotFoundError=t.TransactionExecutionError=t.InvalidStorageKeySizeError=t.InvalidSerializedTransactionTypeError=t.InvalidSerializedTransactionError=t.InvalidSerializableTransactionError=t.InvalidLegacyVError=t.FeeConflictError=t.StateAssignmentConflictError=t.AccountStateConflictError=t.UserRejectedRequestError=void 0,t.getContractError=t.toCoinType=t.namehash=t.labelhash=t.toRlp=t.hexToRlp=t.bytesToRlp=t.toHex=t.stringToHex=t.numberToHex=t.bytesToHex=t.boolToHex=t.toBytes=t.stringToBytes=t.numberToBytes=t.hexToBytes=t.boolToBytes=t.fromRlp=t.hexToString=t.hexToNumber=t.hexToBool=t.hexToBigInt=t.fromHex=t.fromBytes=t.bytesToString=t.bytesToNumber=t.bytesToBool=t.bytesToBigInt=t.trim=t.sliceHex=t.sliceBytes=t.slice=t.size=t.padHex=t.padBytes=t.pad=t.isHex=t.isBytes=t.concatHex=t.concatBytes=t.concat=t.getChainContractAddress=t.extractChain=t.defineChain=t.assertCurrentChain=t.offchainLookupSignature=t.offchainLookupAbiItem=t.offchainLookup=t.ccipFetch=t.ccipRequest=void 0,t.recoverTypedDataAddress=t.recoverTransactionAddress=t.recoverPublicKey=t.recoverMessageAddress=t.recoverAddress=t.parseSignature=t.hexToSignature=t.parseErc8010Signature=t.parseErc6492Signature=t.parseCompactSignature=t.hexToCompactSignature=t.isErc8010Signature=t.isErc6492Signature=t.hashTypedData=t.hashStruct=t.hashDomain=t.hashMessage=t.compactSignatureToSignature=t.withTimeout=t.withRetry=t.withCache=t.nonceManager=t.createNonceManager=t.setupKzg=t.defineKzg=t.getFunctionSignature=t.toFunctionSignature=t.getFunctionSelector=t.toFunctionSelector=t.toFunctionHash=t.getEventSignature=t.toEventSignature=t.getEventSelector=t.toEventSelector=t.toEventHash=t.sha256=t.ripemd160=t.keccak256=t.isHash=t.rpcTransactionType=t.formatTransactionRequest=t.defineTransactionRequest=t.formatTransactionReceipt=t.defineTransactionReceipt=t.transactionType=t.formatTransaction=t.defineTransaction=t.formatLog=t.formatBlock=t.defineBlock=void 0,t.parseUnits=t.parseGwei=t.parseEther=t.formatUnits=t.formatGwei=t.formatEther=t.validateTypedData=t.serializeTypedData=t.getTypesForEIP712Domain=t.domainSeparator=t.serializeTransaction=t.serializeAccessList=t.parseTransaction=t.getTransactionType=t.getSerializedTransactionType=t.assertTransactionLegacy=t.assertTransactionEIP2930=t.assertTransactionEIP1559=t.assertRequest=t.stringify=t.verifyTypedData=t.verifyMessage=t.verifyHash=t.toPrefixedMessage=t.signatureToCompactSignature=t.serializeSignature=t.signatureToHex=t.serializeErc8010Signature=t.serializeErc6492Signature=t.serializeCompactSignature=t.compactSignatureToHex=void 0;var e=oc();Object.defineProperty(t,"CircularReferenceError",{enumerable:!0,get:function(){return e.CircularReferenceError}}),Object.defineProperty(t,"InvalidAbiItemError",{enumerable:!0,get:function(){return e.InvalidAbiItemError}}),Object.defineProperty(t,"InvalidAbiParameterError",{enumerable:!0,get:function(){return e.InvalidAbiParameterError}}),Object.defineProperty(t,"InvalidAbiParametersError",{enumerable:!0,get:function(){return e.InvalidAbiParametersError}}),Object.defineProperty(t,"InvalidAbiTypeParameterError",{enumerable:!0,get:function(){return e.InvalidAbiTypeParameterError}}),Object.defineProperty(t,"InvalidFunctionModifierError",{enumerable:!0,get:function(){return e.InvalidFunctionModifierError}}),Object.defineProperty(t,"InvalidModifierError",{enumerable:!0,get:function(){return e.InvalidModifierError}}),Object.defineProperty(t,"InvalidParameterError",{enumerable:!0,get:function(){return e.InvalidParameterError}}),Object.defineProperty(t,"InvalidParenthesisError",{enumerable:!0,get:function(){return e.InvalidParenthesisError}}),Object.defineProperty(t,"InvalidSignatureError",{enumerable:!0,get:function(){return e.InvalidSignatureError}}),Object.defineProperty(t,"InvalidStructSignatureError",{enumerable:!0,get:function(){return e.InvalidStructSignatureError}}),Object.defineProperty(t,"parseAbi",{enumerable:!0,get:function(){return e.parseAbi}}),Object.defineProperty(t,"parseAbiItem",{enumerable:!0,get:function(){return e.parseAbiItem}}),Object.defineProperty(t,"parseAbiParameter",{enumerable:!0,get:function(){return e.parseAbiParameter}}),Object.defineProperty(t,"parseAbiParameters",{enumerable:!0,get:function(){return e.parseAbiParameters}}),Object.defineProperty(t,"SolidityProtectedKeywordError",{enumerable:!0,get:function(){return e.SolidityProtectedKeywordError}}),Object.defineProperty(t,"UnknownSignatureError",{enumerable:!0,get:function(){return e.UnknownSignatureError}}),Object.defineProperty(t,"UnknownTypeError",{enumerable:!0,get:function(){return e.UnknownTypeError}});var r=abe();Object.defineProperty(t,"getContract",{enumerable:!0,get:function(){return r.getContract}});var n=GS();Object.defineProperty(t,"WaitForCallsStatusTimeoutError",{enumerable:!0,get:function(){return n.WaitForCallsStatusTimeoutError}});var s=Av();Object.defineProperty(t,"createClient",{enumerable:!0,get:function(){return s.createClient}}),Object.defineProperty(t,"rpcSchema",{enumerable:!0,get:function(){return s.rpcSchema}});var i=nwe();Object.defineProperty(t,"createPublicClient",{enumerable:!0,get:function(){return i.createPublicClient}});var o=Bwe();Object.defineProperty(t,"createTestClient",{enumerable:!0,get:function(){return o.createTestClient}});var a=Jwe();Object.defineProperty(t,"createWalletClient",{enumerable:!0,get:function(){return a.createWalletClient}});var c=wq();Object.defineProperty(t,"publicActions",{enumerable:!0,get:function(){return c.publicActions}});var u=Eq();Object.defineProperty(t,"testActions",{enumerable:!0,get:function(){return u.testActions}});var l=Aq();Object.defineProperty(t,"walletActions",{enumerable:!0,get:function(){return l.walletActions}});var d=W0();Object.defineProperty(t,"createTransport",{enumerable:!0,get:function(){return d.createTransport}});var f=Qwe();Object.defineProperty(t,"custom",{enumerable:!0,get:function(){return f.custom}});var g=Xwe();Object.defineProperty(t,"fallback",{enumerable:!0,get:function(){return g.fallback}}),Object.defineProperty(t,"shouldThrow",{enumerable:!0,get:function(){return g.shouldThrow}});var p=e1e();Object.defineProperty(t,"http",{enumerable:!0,get:function(){return p.http}});var h=t1e();Object.defineProperty(t,"webSocket",{enumerable:!0,get:function(){return h.webSocket}});var y=mc();Object.defineProperty(t,"erc20Abi",{enumerable:!0,get:function(){return y.erc20Abi}}),Object.defineProperty(t,"erc20Abi_bytes32",{enumerable:!0,get:function(){return y.erc20Abi_bytes32}}),Object.defineProperty(t,"erc721Abi",{enumerable:!0,get:function(){return y.erc721Abi}}),Object.defineProperty(t,"erc1155Abi",{enumerable:!0,get:function(){return y.erc1155Abi}}),Object.defineProperty(t,"erc4626Abi",{enumerable:!0,get:function(){return y.erc4626Abi}}),Object.defineProperty(t,"erc6492SignatureValidatorAbi",{enumerable:!0,get:function(){return y.erc6492SignatureValidatorAbi}}),Object.defineProperty(t,"universalSignatureValidatorAbi",{enumerable:!0,get:function(){return y.erc6492SignatureValidatorAbi}}),Object.defineProperty(t,"multicall3Abi",{enumerable:!0,get:function(){return y.multicall3Abi}});var b=gq();Object.defineProperty(t,"ethAddress",{enumerable:!0,get:function(){return b.ethAddress}}),Object.defineProperty(t,"zeroAddress",{enumerable:!0,get:function(){return b.zeroAddress}});var E=sT();Object.defineProperty(t,"zeroHash",{enumerable:!0,get:function(){return E.zeroHash}});var w=U0();Object.defineProperty(t,"deploylessCallViaBytecodeBytecode",{enumerable:!0,get:function(){return w.deploylessCallViaBytecodeBytecode}}),Object.defineProperty(t,"deploylessCallViaFactoryBytecode",{enumerable:!0,get:function(){return w.deploylessCallViaFactoryBytecode}}),Object.defineProperty(t,"erc6492SignatureValidatorByteCode",{enumerable:!0,get:function(){return w.erc6492SignatureValidatorByteCode}}),Object.defineProperty(t,"universalSignatureValidatorByteCode",{enumerable:!0,get:function(){return w.erc6492SignatureValidatorByteCode}});var m=IS();Object.defineProperty(t,"maxInt8",{enumerable:!0,get:function(){return m.maxInt8}}),Object.defineProperty(t,"maxInt16",{enumerable:!0,get:function(){return m.maxInt16}}),Object.defineProperty(t,"maxInt24",{enumerable:!0,get:function(){return m.maxInt24}}),Object.defineProperty(t,"maxInt32",{enumerable:!0,get:function(){return m.maxInt32}}),Object.defineProperty(t,"maxInt40",{enumerable:!0,get:function(){return m.maxInt40}}),Object.defineProperty(t,"maxInt48",{enumerable:!0,get:function(){return m.maxInt48}}),Object.defineProperty(t,"maxInt56",{enumerable:!0,get:function(){return m.maxInt56}}),Object.defineProperty(t,"maxInt64",{enumerable:!0,get:function(){return m.maxInt64}}),Object.defineProperty(t,"maxInt72",{enumerable:!0,get:function(){return m.maxInt72}}),Object.defineProperty(t,"maxInt80",{enumerable:!0,get:function(){return m.maxInt80}}),Object.defineProperty(t,"maxInt88",{enumerable:!0,get:function(){return m.maxInt88}}),Object.defineProperty(t,"maxInt96",{enumerable:!0,get:function(){return m.maxInt96}}),Object.defineProperty(t,"maxInt104",{enumerable:!0,get:function(){return m.maxInt104}}),Object.defineProperty(t,"maxInt112",{enumerable:!0,get:function(){return m.maxInt112}}),Object.defineProperty(t,"maxInt120",{enumerable:!0,get:function(){return m.maxInt120}}),Object.defineProperty(t,"maxInt128",{enumerable:!0,get:function(){return m.maxInt128}}),Object.defineProperty(t,"maxInt136",{enumerable:!0,get:function(){return m.maxInt136}}),Object.defineProperty(t,"maxInt144",{enumerable:!0,get:function(){return m.maxInt144}}),Object.defineProperty(t,"maxInt152",{enumerable:!0,get:function(){return m.maxInt152}}),Object.defineProperty(t,"maxInt160",{enumerable:!0,get:function(){return m.maxInt160}}),Object.defineProperty(t,"maxInt168",{enumerable:!0,get:function(){return m.maxInt168}}),Object.defineProperty(t,"maxInt176",{enumerable:!0,get:function(){return m.maxInt176}}),Object.defineProperty(t,"maxInt184",{enumerable:!0,get:function(){return m.maxInt184}}),Object.defineProperty(t,"maxInt192",{enumerable:!0,get:function(){return m.maxInt192}}),Object.defineProperty(t,"maxInt200",{enumerable:!0,get:function(){return m.maxInt200}}),Object.defineProperty(t,"maxInt208",{enumerable:!0,get:function(){return m.maxInt208}}),Object.defineProperty(t,"maxInt216",{enumerable:!0,get:function(){return m.maxInt216}}),Object.defineProperty(t,"maxInt224",{enumerable:!0,get:function(){return m.maxInt224}}),Object.defineProperty(t,"maxInt232",{enumerable:!0,get:function(){return m.maxInt232}}),Object.defineProperty(t,"maxInt240",{enumerable:!0,get:function(){return m.maxInt240}}),Object.defineProperty(t,"maxInt248",{enumerable:!0,get:function(){return m.maxInt248}}),Object.defineProperty(t,"maxInt256",{enumerable:!0,get:function(){return m.maxInt256}}),Object.defineProperty(t,"maxUint8",{enumerable:!0,get:function(){return m.maxUint8}}),Object.defineProperty(t,"maxUint16",{enumerable:!0,get:function(){return m.maxUint16}}),Object.defineProperty(t,"maxUint24",{enumerable:!0,get:function(){return m.maxUint24}}),Object.defineProperty(t,"maxUint32",{enumerable:!0,get:function(){return m.maxUint32}}),Object.defineProperty(t,"maxUint40",{enumerable:!0,get:function(){return m.maxUint40}}),Object.defineProperty(t,"maxUint48",{enumerable:!0,get:function(){return m.maxUint48}}),Object.defineProperty(t,"maxUint56",{enumerable:!0,get:function(){return m.maxUint56}}),Object.defineProperty(t,"maxUint64",{enumerable:!0,get:function(){return m.maxUint64}}),Object.defineProperty(t,"maxUint72",{enumerable:!0,get:function(){return m.maxUint72}}),Object.defineProperty(t,"maxUint80",{enumerable:!0,get:function(){return m.maxUint80}}),Object.defineProperty(t,"maxUint88",{enumerable:!0,get:function(){return m.maxUint88}}),Object.defineProperty(t,"maxUint96",{enumerable:!0,get:function(){return m.maxUint96}}),Object.defineProperty(t,"maxUint104",{enumerable:!0,get:function(){return m.maxUint104}}),Object.defineProperty(t,"maxUint112",{enumerable:!0,get:function(){return m.maxUint112}}),Object.defineProperty(t,"maxUint120",{enumerable:!0,get:function(){return m.maxUint120}}),Object.defineProperty(t,"maxUint128",{enumerable:!0,get:function(){return m.maxUint128}}),Object.defineProperty(t,"maxUint136",{enumerable:!0,get:function(){return m.maxUint136}}),Object.defineProperty(t,"maxUint144",{enumerable:!0,get:function(){return m.maxUint144}}),Object.defineProperty(t,"maxUint152",{enumerable:!0,get:function(){return m.maxUint152}}),Object.defineProperty(t,"maxUint160",{enumerable:!0,get:function(){return m.maxUint160}}),Object.defineProperty(t,"maxUint168",{enumerable:!0,get:function(){return m.maxUint168}}),Object.defineProperty(t,"maxUint176",{enumerable:!0,get:function(){return m.maxUint176}}),Object.defineProperty(t,"maxUint184",{enumerable:!0,get:function(){return m.maxUint184}}),Object.defineProperty(t,"maxUint192",{enumerable:!0,get:function(){return m.maxUint192}}),Object.defineProperty(t,"maxUint200",{enumerable:!0,get:function(){return m.maxUint200}}),Object.defineProperty(t,"maxUint208",{enumerable:!0,get:function(){return m.maxUint208}}),Object.defineProperty(t,"maxUint216",{enumerable:!0,get:function(){return m.maxUint216}}),Object.defineProperty(t,"maxUint224",{enumerable:!0,get:function(){return m.maxUint224}}),Object.defineProperty(t,"maxUint232",{enumerable:!0,get:function(){return m.maxUint232}}),Object.defineProperty(t,"maxUint240",{enumerable:!0,get:function(){return m.maxUint240}}),Object.defineProperty(t,"maxUint248",{enumerable:!0,get:function(){return m.maxUint248}}),Object.defineProperty(t,"maxUint256",{enumerable:!0,get:function(){return m.maxUint256}}),Object.defineProperty(t,"minInt8",{enumerable:!0,get:function(){return m.minInt8}}),Object.defineProperty(t,"minInt16",{enumerable:!0,get:function(){return m.minInt16}}),Object.defineProperty(t,"minInt24",{enumerable:!0,get:function(){return m.minInt24}}),Object.defineProperty(t,"minInt32",{enumerable:!0,get:function(){return m.minInt32}}),Object.defineProperty(t,"minInt40",{enumerable:!0,get:function(){return m.minInt40}}),Object.defineProperty(t,"minInt48",{enumerable:!0,get:function(){return m.minInt48}}),Object.defineProperty(t,"minInt56",{enumerable:!0,get:function(){return m.minInt56}}),Object.defineProperty(t,"minInt64",{enumerable:!0,get:function(){return m.minInt64}}),Object.defineProperty(t,"minInt72",{enumerable:!0,get:function(){return m.minInt72}}),Object.defineProperty(t,"minInt80",{enumerable:!0,get:function(){return m.minInt80}}),Object.defineProperty(t,"minInt88",{enumerable:!0,get:function(){return m.minInt88}}),Object.defineProperty(t,"minInt96",{enumerable:!0,get:function(){return m.minInt96}}),Object.defineProperty(t,"minInt104",{enumerable:!0,get:function(){return m.minInt104}}),Object.defineProperty(t,"minInt112",{enumerable:!0,get:function(){return m.minInt112}}),Object.defineProperty(t,"minInt120",{enumerable:!0,get:function(){return m.minInt120}}),Object.defineProperty(t,"minInt128",{enumerable:!0,get:function(){return m.minInt128}}),Object.defineProperty(t,"minInt136",{enumerable:!0,get:function(){return m.minInt136}}),Object.defineProperty(t,"minInt144",{enumerable:!0,get:function(){return m.minInt144}}),Object.defineProperty(t,"minInt152",{enumerable:!0,get:function(){return m.minInt152}}),Object.defineProperty(t,"minInt160",{enumerable:!0,get:function(){return m.minInt160}}),Object.defineProperty(t,"minInt168",{enumerable:!0,get:function(){return m.minInt168}}),Object.defineProperty(t,"minInt176",{enumerable:!0,get:function(){return m.minInt176}}),Object.defineProperty(t,"minInt184",{enumerable:!0,get:function(){return m.minInt184}}),Object.defineProperty(t,"minInt192",{enumerable:!0,get:function(){return m.minInt192}}),Object.defineProperty(t,"minInt200",{enumerable:!0,get:function(){return m.minInt200}}),Object.defineProperty(t,"minInt208",{enumerable:!0,get:function(){return m.minInt208}}),Object.defineProperty(t,"minInt216",{enumerable:!0,get:function(){return m.minInt216}}),Object.defineProperty(t,"minInt224",{enumerable:!0,get:function(){return m.minInt224}}),Object.defineProperty(t,"minInt232",{enumerable:!0,get:function(){return m.minInt232}}),Object.defineProperty(t,"minInt240",{enumerable:!0,get:function(){return m.minInt240}}),Object.defineProperty(t,"minInt248",{enumerable:!0,get:function(){return m.minInt248}}),Object.defineProperty(t,"minInt256",{enumerable:!0,get:function(){return m.minInt256}});var _=Y7();Object.defineProperty(t,"presignMessagePrefix",{enumerable:!0,get:function(){return _.presignMessagePrefix}});var C=S0();Object.defineProperty(t,"etherUnits",{enumerable:!0,get:function(){return C.etherUnits}}),Object.defineProperty(t,"gweiUnits",{enumerable:!0,get:function(){return C.gweiUnits}}),Object.defineProperty(t,"weiUnits",{enumerable:!0,get:function(){return C.weiUnits}});var I=er();Object.defineProperty(t,"AbiConstructorNotFoundError",{enumerable:!0,get:function(){return I.AbiConstructorNotFoundError}}),Object.defineProperty(t,"AbiConstructorParamsNotFoundError",{enumerable:!0,get:function(){return I.AbiConstructorParamsNotFoundError}}),Object.defineProperty(t,"AbiDecodingDataSizeInvalidError",{enumerable:!0,get:function(){return I.AbiDecodingDataSizeInvalidError}}),Object.defineProperty(t,"AbiDecodingDataSizeTooSmallError",{enumerable:!0,get:function(){return I.AbiDecodingDataSizeTooSmallError}}),Object.defineProperty(t,"AbiDecodingZeroDataError",{enumerable:!0,get:function(){return I.AbiDecodingZeroDataError}}),Object.defineProperty(t,"AbiEncodingArrayLengthMismatchError",{enumerable:!0,get:function(){return I.AbiEncodingArrayLengthMismatchError}}),Object.defineProperty(t,"AbiEncodingBytesSizeMismatchError",{enumerable:!0,get:function(){return I.AbiEncodingBytesSizeMismatchError}}),Object.defineProperty(t,"AbiEncodingLengthMismatchError",{enumerable:!0,get:function(){return I.AbiEncodingLengthMismatchError}}),Object.defineProperty(t,"AbiErrorInputsNotFoundError",{enumerable:!0,get:function(){return I.AbiErrorInputsNotFoundError}}),Object.defineProperty(t,"AbiErrorNotFoundError",{enumerable:!0,get:function(){return I.AbiErrorNotFoundError}}),Object.defineProperty(t,"AbiErrorSignatureNotFoundError",{enumerable:!0,get:function(){return I.AbiErrorSignatureNotFoundError}}),Object.defineProperty(t,"AbiEventNotFoundError",{enumerable:!0,get:function(){return I.AbiEventNotFoundError}}),Object.defineProperty(t,"AbiEventSignatureEmptyTopicsError",{enumerable:!0,get:function(){return I.AbiEventSignatureEmptyTopicsError}}),Object.defineProperty(t,"AbiEventSignatureNotFoundError",{enumerable:!0,get:function(){return I.AbiEventSignatureNotFoundError}}),Object.defineProperty(t,"AbiFunctionNotFoundError",{enumerable:!0,get:function(){return I.AbiFunctionNotFoundError}}),Object.defineProperty(t,"AbiFunctionOutputsNotFoundError",{enumerable:!0,get:function(){return I.AbiFunctionOutputsNotFoundError}}),Object.defineProperty(t,"AbiFunctionSignatureNotFoundError",{enumerable:!0,get:function(){return I.AbiFunctionSignatureNotFoundError}}),Object.defineProperty(t,"BytesSizeMismatchError",{enumerable:!0,get:function(){return I.BytesSizeMismatchError}}),Object.defineProperty(t,"DecodeLogDataMismatch",{enumerable:!0,get:function(){return I.DecodeLogDataMismatch}}),Object.defineProperty(t,"DecodeLogTopicsMismatch",{enumerable:!0,get:function(){return I.DecodeLogTopicsMismatch}}),Object.defineProperty(t,"InvalidAbiDecodingTypeError",{enumerable:!0,get:function(){return I.InvalidAbiDecodingTypeError}}),Object.defineProperty(t,"InvalidAbiEncodingTypeError",{enumerable:!0,get:function(){return I.InvalidAbiEncodingTypeError}}),Object.defineProperty(t,"InvalidArrayError",{enumerable:!0,get:function(){return I.InvalidArrayError}}),Object.defineProperty(t,"InvalidDefinitionTypeError",{enumerable:!0,get:function(){return I.InvalidDefinitionTypeError}}),Object.defineProperty(t,"UnsupportedPackedAbiType",{enumerable:!0,get:function(){return I.UnsupportedPackedAbiType}});var P=Ei();Object.defineProperty(t,"InvalidAddressError",{enumerable:!0,get:function(){return P.InvalidAddressError}});var T=Ke();Object.defineProperty(t,"BaseError",{enumerable:!0,get:function(){return T.BaseError}}),Object.defineProperty(t,"setErrorConfig",{enumerable:!0,get:function(){return T.setErrorConfig}});var R=SS();Object.defineProperty(t,"BlockNotFoundError",{enumerable:!0,get:function(){return R.BlockNotFoundError}});var U=A7();Object.defineProperty(t,"BundleFailedError",{enumerable:!0,get:function(){return U.BundleFailedError}});var k=M0();Object.defineProperty(t,"ChainDoesNotSupportContract",{enumerable:!0,get:function(){return k.ChainDoesNotSupportContract}}),Object.defineProperty(t,"ChainMismatchError",{enumerable:!0,get:function(){return k.ChainMismatchError}}),Object.defineProperty(t,"ChainNotFoundError",{enumerable:!0,get:function(){return k.ChainNotFoundError}}),Object.defineProperty(t,"ClientChainNotConfiguredError",{enumerable:!0,get:function(){return k.ClientChainNotConfiguredError}}),Object.defineProperty(t,"InvalidChainIdError",{enumerable:!0,get:function(){return k.InvalidChainIdError}});var O=lc();Object.defineProperty(t,"CallExecutionError",{enumerable:!0,get:function(){return O.CallExecutionError}}),Object.defineProperty(t,"ContractFunctionExecutionError",{enumerable:!0,get:function(){return O.ContractFunctionExecutionError}}),Object.defineProperty(t,"ContractFunctionRevertedError",{enumerable:!0,get:function(){return O.ContractFunctionRevertedError}}),Object.defineProperty(t,"ContractFunctionZeroDataError",{enumerable:!0,get:function(){return O.ContractFunctionZeroDataError}}),Object.defineProperty(t,"CounterfactualDeploymentFailedError",{enumerable:!0,get:function(){return O.CounterfactualDeploymentFailedError}}),Object.defineProperty(t,"RawContractError",{enumerable:!0,get:function(){return O.RawContractError}});var B=sv();Object.defineProperty(t,"SizeExceedsPaddingSizeError",{enumerable:!0,get:function(){return B.SizeExceedsPaddingSizeError}}),Object.defineProperty(t,"SliceOffsetOutOfBoundsError",{enumerable:!0,get:function(){return B.SliceOffsetOutOfBoundsError}});var v=Wd();Object.defineProperty(t,"IntegerOutOfRangeError",{enumerable:!0,get:function(){return v.IntegerOutOfRangeError}}),Object.defineProperty(t,"InvalidBytesBooleanError",{enumerable:!0,get:function(){return v.InvalidBytesBooleanError}}),Object.defineProperty(t,"InvalidHexBooleanError",{enumerable:!0,get:function(){return v.InvalidHexBooleanError}}),Object.defineProperty(t,"InvalidHexValueError",{enumerable:!0,get:function(){return v.InvalidHexValueError}}),Object.defineProperty(t,"SizeOverflowError",{enumerable:!0,get:function(){return v.SizeOverflowError}});var A=YS();Object.defineProperty(t,"EnsAvatarInvalidNftUriError",{enumerable:!0,get:function(){return A.EnsAvatarInvalidNftUriError}}),Object.defineProperty(t,"EnsAvatarUnsupportedNamespaceError",{enumerable:!0,get:function(){return A.EnsAvatarUnsupportedNamespaceError}}),Object.defineProperty(t,"EnsAvatarUriResolutionError",{enumerable:!0,get:function(){return A.EnsAvatarUriResolutionError}}),Object.defineProperty(t,"EnsInvalidChainIdError",{enumerable:!0,get:function(){return A.EnsInvalidChainIdError}});var S=c7();Object.defineProperty(t,"EstimateGasExecutionError",{enumerable:!0,get:function(){return S.EstimateGasExecutionError}});var j=x0();Object.defineProperty(t,"BaseFeeScalarError",{enumerable:!0,get:function(){return j.BaseFeeScalarError}}),Object.defineProperty(t,"Eip1559FeesNotSupportedError",{enumerable:!0,get:function(){return j.Eip1559FeesNotSupportedError}}),Object.defineProperty(t,"MaxFeePerGasTooLowError",{enumerable:!0,get:function(){return j.MaxFeePerGasTooLowError}});var N=JF();Object.defineProperty(t,"FilterTypeNotSupportedError",{enumerable:!0,get:function(){return N.FilterTypeNotSupportedError}});var x=ua();Object.defineProperty(t,"ExecutionRevertedError",{enumerable:!0,get:function(){return x.ExecutionRevertedError}}),Object.defineProperty(t,"FeeCapTooHighError",{enumerable:!0,get:function(){return x.FeeCapTooHighError}}),Object.defineProperty(t,"FeeCapTooLowError",{enumerable:!0,get:function(){return x.FeeCapTooLowError}}),Object.defineProperty(t,"InsufficientFundsError",{enumerable:!0,get:function(){return x.InsufficientFundsError}}),Object.defineProperty(t,"IntrinsicGasTooHighError",{enumerable:!0,get:function(){return x.IntrinsicGasTooHighError}}),Object.defineProperty(t,"IntrinsicGasTooLowError",{enumerable:!0,get:function(){return x.IntrinsicGasTooLowError}}),Object.defineProperty(t,"NonceMaxValueError",{enumerable:!0,get:function(){return x.NonceMaxValueError}}),Object.defineProperty(t,"NonceTooHighError",{enumerable:!0,get:function(){return x.NonceTooHighError}}),Object.defineProperty(t,"NonceTooLowError",{enumerable:!0,get:function(){return x.NonceTooLowError}}),Object.defineProperty(t,"TipAboveFeeCapError",{enumerable:!0,get:function(){return x.TipAboveFeeCapError}}),Object.defineProperty(t,"TransactionTypeNotSupportedError",{enumerable:!0,get:function(){return x.TransactionTypeNotSupportedError}}),Object.defineProperty(t,"UnknownNodeError",{enumerable:!0,get:function(){return x.UnknownNodeError}});var D=_i();Object.defineProperty(t,"HttpRequestError",{enumerable:!0,get:function(){return D.HttpRequestError}}),Object.defineProperty(t,"RpcRequestError",{enumerable:!0,get:function(){return D.RpcRequestError}}),Object.defineProperty(t,"SocketClosedError",{enumerable:!0,get:function(){return D.SocketClosedError}}),Object.defineProperty(t,"TimeoutError",{enumerable:!0,get:function(){return D.TimeoutError}}),Object.defineProperty(t,"WebSocketRequestError",{enumerable:!0,get:function(){return D.WebSocketRequestError}});var M=dc();Object.defineProperty(t,"AtomicityNotSupportedError",{enumerable:!0,get:function(){return M.AtomicityNotSupportedError}}),Object.defineProperty(t,"AtomicReadyWalletRejectedUpgradeError",{enumerable:!0,get:function(){return M.AtomicReadyWalletRejectedUpgradeError}}),Object.defineProperty(t,"BundleTooLargeError",{enumerable:!0,get:function(){return M.BundleTooLargeError}}),Object.defineProperty(t,"ChainDisconnectedError",{enumerable:!0,get:function(){return M.ChainDisconnectedError}}),Object.defineProperty(t,"DuplicateIdError",{enumerable:!0,get:function(){return M.DuplicateIdError}}),Object.defineProperty(t,"InternalRpcError",{enumerable:!0,get:function(){return M.InternalRpcError}}),Object.defineProperty(t,"InvalidInputRpcError",{enumerable:!0,get:function(){return M.InvalidInputRpcError}}),Object.defineProperty(t,"InvalidParamsRpcError",{enumerable:!0,get:function(){return M.InvalidParamsRpcError}}),Object.defineProperty(t,"InvalidRequestRpcError",{enumerable:!0,get:function(){return M.InvalidRequestRpcError}}),Object.defineProperty(t,"JsonRpcVersionUnsupportedError",{enumerable:!0,get:function(){return M.JsonRpcVersionUnsupportedError}}),Object.defineProperty(t,"LimitExceededRpcError",{enumerable:!0,get:function(){return M.LimitExceededRpcError}}),Object.defineProperty(t,"MethodNotFoundRpcError",{enumerable:!0,get:function(){return M.MethodNotFoundRpcError}}),Object.defineProperty(t,"MethodNotSupportedRpcError",{enumerable:!0,get:function(){return M.MethodNotSupportedRpcError}}),Object.defineProperty(t,"ParseRpcError",{enumerable:!0,get:function(){return M.ParseRpcError}}),Object.defineProperty(t,"ProviderDisconnectedError",{enumerable:!0,get:function(){return M.ProviderDisconnectedError}}),Object.defineProperty(t,"ProviderRpcError",{enumerable:!0,get:function(){return M.ProviderRpcError}}),Object.defineProperty(t,"ResourceNotFoundRpcError",{enumerable:!0,get:function(){return M.ResourceNotFoundRpcError}}),Object.defineProperty(t,"ResourceUnavailableRpcError",{enumerable:!0,get:function(){return M.ResourceUnavailableRpcError}}),Object.defineProperty(t,"RpcError",{enumerable:!0,get:function(){return M.RpcError}}),Object.defineProperty(t,"SwitchChainError",{enumerable:!0,get:function(){return M.SwitchChainError}}),Object.defineProperty(t,"TransactionRejectedRpcError",{enumerable:!0,get:function(){return M.TransactionRejectedRpcError}}),Object.defineProperty(t,"UnauthorizedProviderError",{enumerable:!0,get:function(){return M.UnauthorizedProviderError}}),Object.defineProperty(t,"UnknownBundleIdError",{enumerable:!0,get:function(){return M.UnknownBundleIdError}}),Object.defineProperty(t,"UnknownRpcError",{enumerable:!0,get:function(){return M.UnknownRpcError}}),Object.defineProperty(t,"UnsupportedChainIdError",{enumerable:!0,get:function(){return M.UnsupportedChainIdError}}),Object.defineProperty(t,"UnsupportedNonOptionalCapabilityError",{enumerable:!0,get:function(){return M.UnsupportedNonOptionalCapabilityError}}),Object.defineProperty(t,"UnsupportedProviderMethodError",{enumerable:!0,get:function(){return M.UnsupportedProviderMethodError}}),Object.defineProperty(t,"UserRejectedRequestError",{enumerable:!0,get:function(){return M.UserRejectedRequestError}});var L=vS();Object.defineProperty(t,"AccountStateConflictError",{enumerable:!0,get:function(){return L.AccountStateConflictError}}),Object.defineProperty(t,"StateAssignmentConflictError",{enumerable:!0,get:function(){return L.StateAssignmentConflictError}});var F=ts();Object.defineProperty(t,"FeeConflictError",{enumerable:!0,get:function(){return F.FeeConflictError}}),Object.defineProperty(t,"InvalidLegacyVError",{enumerable:!0,get:function(){return F.InvalidLegacyVError}}),Object.defineProperty(t,"InvalidSerializableTransactionError",{enumerable:!0,get:function(){return F.InvalidSerializableTransactionError}}),Object.defineProperty(t,"InvalidSerializedTransactionError",{enumerable:!0,get:function(){return F.InvalidSerializedTransactionError}}),Object.defineProperty(t,"InvalidSerializedTransactionTypeError",{enumerable:!0,get:function(){return F.InvalidSerializedTransactionTypeError}}),Object.defineProperty(t,"InvalidStorageKeySizeError",{enumerable:!0,get:function(){return F.InvalidStorageKeySizeError}}),Object.defineProperty(t,"TransactionExecutionError",{enumerable:!0,get:function(){return F.TransactionExecutionError}}),Object.defineProperty(t,"TransactionNotFoundError",{enumerable:!0,get:function(){return F.TransactionNotFoundError}}),Object.defineProperty(t,"TransactionReceiptNotFoundError",{enumerable:!0,get:function(){return F.TransactionReceiptNotFoundError}}),Object.defineProperty(t,"WaitForTransactionReceiptTimeoutError",{enumerable:!0,get:function(){return F.WaitForTransactionReceiptTimeoutError}});var q=mT();Object.defineProperty(t,"UrlRequiredError",{enumerable:!0,get:function(){return q.UrlRequiredError}});var $=Q7();Object.defineProperty(t,"InvalidDomainError",{enumerable:!0,get:function(){return $.InvalidDomainError}}),Object.defineProperty(t,"InvalidPrimaryTypeError",{enumerable:!0,get:function(){return $.InvalidPrimaryTypeError}}),Object.defineProperty(t,"InvalidStructTypeError",{enumerable:!0,get:function(){return $.InvalidStructTypeError}});var V=uq();Object.defineProperty(t,"InvalidDecimalNumberError",{enumerable:!0,get:function(){return V.InvalidDecimalNumberError}});var J=r1e();Object.defineProperty(t,"EIP1193ProviderRpcError",{enumerable:!0,get:function(){return J.ProviderRpcError}});var Y=uc();Object.defineProperty(t,"decodeAbiParameters",{enumerable:!0,get:function(){return Y.decodeAbiParameters}});var Z=n1e();Object.defineProperty(t,"decodeDeployData",{enumerable:!0,get:function(){return Z.decodeDeployData}});var ee=cv();Object.defineProperty(t,"decodeErrorResult",{enumerable:!0,get:function(){return ee.decodeErrorResult}});var le=j0();Object.defineProperty(t,"decodeEventLog",{enumerable:!0,get:function(){return le.decodeEventLog}});var X=MS();Object.defineProperty(t,"decodeFunctionData",{enumerable:!0,get:function(){return X.decodeFunctionData}});var se=da();Object.defineProperty(t,"decodeFunctionResult",{enumerable:!0,get:function(){return se.decodeFunctionResult}});var fe=vi();Object.defineProperty(t,"encodeAbiParameters",{enumerable:!0,get:function(){return fe.encodeAbiParameters}});var Oe=L0();Object.defineProperty(t,"encodeDeployData",{enumerable:!0,get:function(){return Oe.encodeDeployData}});var Re=LS();Object.defineProperty(t,"encodeErrorResult",{enumerable:!0,get:function(){return Re.encodeErrorResult}});var Me=sl();Object.defineProperty(t,"encodeEventTopics",{enumerable:!0,get:function(){return Me.encodeEventTopics}});var Ze=es();Object.defineProperty(t,"encodeFunctionData",{enumerable:!0,get:function(){return Ze.encodeFunctionData}});var de=FS();Object.defineProperty(t,"encodeFunctionResult",{enumerable:!0,get:function(){return de.encodeFunctionResult}});var te=k7();Object.defineProperty(t,"encodePacked",{enumerable:!0,get:function(){return te.encodePacked}});var Pt=ca();Object.defineProperty(t,"getAbiItem",{enumerable:!0,get:function(){return Pt.getAbiItem}});var Ft=D0();Object.defineProperty(t,"parseEventLogs",{enumerable:!0,get:function(){return Ft.parseEventLogs}});var en=e7();Object.defineProperty(t,"prepareEncodeFunctionData",{enumerable:!0,get:function(){return en.prepareEncodeFunctionData}});var re=_s();Object.defineProperty(t,"checksumAddress",{enumerable:!0,get:function(){return re.checksumAddress}}),Object.defineProperty(t,"getAddress",{enumerable:!0,get:function(){return re.getAddress}});var ce=B7();Object.defineProperty(t,"getContractAddress",{enumerable:!0,get:function(){return ce.getContractAddress}}),Object.defineProperty(t,"getCreate2Address",{enumerable:!0,get:function(){return ce.getCreate2Address}}),Object.defineProperty(t,"getCreateAddress",{enumerable:!0,get:function(){return ce.getCreateAddress}});var ye=Xn();Object.defineProperty(t,"isAddress",{enumerable:!0,get:function(){return ye.isAddress}});var De=Ii();Object.defineProperty(t,"isAddressEqual",{enumerable:!0,get:function(){return De.isAddressEqual}});var tr=hv();Object.defineProperty(t,"blobsToCommitments",{enumerable:!0,get:function(){return tr.blobsToCommitments}});var tn=pv();Object.defineProperty(t,"blobsToProofs",{enumerable:!0,get:function(){return tn.blobsToProofs}});var zs=OS();Object.defineProperty(t,"commitmentsToVersionedHashes",{enumerable:!0,get:function(){return zs.commitmentsToVersionedHashes}});var Si=NS();Object.defineProperty(t,"commitmentToVersionedHash",{enumerable:!0,get:function(){return Si.commitmentToVersionedHash}});var $s=s1e();Object.defineProperty(t,"fromBlobs",{enumerable:!0,get:function(){return $s.fromBlobs}});var Ec=i1e();Object.defineProperty(t,"sidecarsToVersionedHashes",{enumerable:!0,get:function(){return Ec.sidecarsToVersionedHashes}});var Jd=gv();Object.defineProperty(t,"toBlobSidecars",{enumerable:!0,get:function(){return Jd.toBlobSidecars}});var K0=g7();Object.defineProperty(t,"toBlobs",{enumerable:!0,get:function(){return K0.toBlobs}});var vc=qS();Object.defineProperty(t,"ccipRequest",{enumerable:!0,get:function(){return vc.ccipRequest}}),Object.defineProperty(t,"ccipFetch",{enumerable:!0,get:function(){return vc.ccipRequest}}),Object.defineProperty(t,"offchainLookup",{enumerable:!0,get:function(){return vc.offchainLookup}}),Object.defineProperty(t,"offchainLookupAbiItem",{enumerable:!0,get:function(){return vc.offchainLookupAbiItem}}),Object.defineProperty(t,"offchainLookupSignature",{enumerable:!0,get:function(){return vc.offchainLookupSignature}});var Z0=H0();Object.defineProperty(t,"assertCurrentChain",{enumerable:!0,get:function(){return Z0.assertCurrentChain}});var xv=M7();Object.defineProperty(t,"defineChain",{enumerable:!0,get:function(){return xv.defineChain}});var kv=L7();Object.defineProperty(t,"extractChain",{enumerable:!0,get:function(){return kv.extractChain}});var Y0=yc();Object.defineProperty(t,"getChainContractAddress",{enumerable:!0,get:function(){return Y0.getChainContractAddress}});var Qd=Mr();Object.defineProperty(t,"concat",{enumerable:!0,get:function(){return Qd.concat}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return Qd.concatBytes}}),Object.defineProperty(t,"concatHex",{enumerable:!0,get:function(){return Qd.concatHex}});var Bv=JS();Object.defineProperty(t,"isBytes",{enumerable:!0,get:function(){return Bv.isBytes}});var jv=Pn();Object.defineProperty(t,"isHex",{enumerable:!0,get:function(){return jv.isHex}});var Xd=ac();Object.defineProperty(t,"pad",{enumerable:!0,get:function(){return Xd.pad}}),Object.defineProperty(t,"padBytes",{enumerable:!0,get:function(){return Xd.padBytes}}),Object.defineProperty(t,"padHex",{enumerable:!0,get:function(){return Xd.padHex}});var Dv=Jn();Object.defineProperty(t,"size",{enumerable:!0,get:function(){return Dv.size}});var ef=Hs();Object.defineProperty(t,"slice",{enumerable:!0,get:function(){return ef.slice}}),Object.defineProperty(t,"sliceBytes",{enumerable:!0,get:function(){return ef.sliceBytes}}),Object.defineProperty(t,"sliceHex",{enumerable:!0,get:function(){return ef.sliceHex}});var Uv=aa();Object.defineProperty(t,"trim",{enumerable:!0,get:function(){return Uv.trim}});var _c=ES();Object.defineProperty(t,"bytesToBigInt",{enumerable:!0,get:function(){return _c.bytesToBigInt}}),Object.defineProperty(t,"bytesToBool",{enumerable:!0,get:function(){return _c.bytesToBool}}),Object.defineProperty(t,"bytesToNumber",{enumerable:!0,get:function(){return _c.bytesToNumber}}),Object.defineProperty(t,"bytesToString",{enumerable:!0,get:function(){return _c.bytesToString}}),Object.defineProperty(t,"fromBytes",{enumerable:!0,get:function(){return _c.fromBytes}});var Ac=fr();Object.defineProperty(t,"fromHex",{enumerable:!0,get:function(){return Ac.fromHex}}),Object.defineProperty(t,"hexToBigInt",{enumerable:!0,get:function(){return Ac.hexToBigInt}}),Object.defineProperty(t,"hexToBool",{enumerable:!0,get:function(){return Ac.hexToBool}}),Object.defineProperty(t,"hexToNumber",{enumerable:!0,get:function(){return Ac.hexToNumber}}),Object.defineProperty(t,"hexToString",{enumerable:!0,get:function(){return Ac.hexToString}});var Mv=XS();Object.defineProperty(t,"fromRlp",{enumerable:!0,get:function(){return Mv.fromRlp}});var Cc=Lt();Object.defineProperty(t,"boolToBytes",{enumerable:!0,get:function(){return Cc.boolToBytes}}),Object.defineProperty(t,"hexToBytes",{enumerable:!0,get:function(){return Cc.hexToBytes}}),Object.defineProperty(t,"numberToBytes",{enumerable:!0,get:function(){return Cc.numberToBytes}}),Object.defineProperty(t,"stringToBytes",{enumerable:!0,get:function(){return Cc.stringToBytes}}),Object.defineProperty(t,"toBytes",{enumerable:!0,get:function(){return Cc.toBytes}});var Ic=Ae();Object.defineProperty(t,"boolToHex",{enumerable:!0,get:function(){return Ic.boolToHex}}),Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return Ic.bytesToHex}}),Object.defineProperty(t,"numberToHex",{enumerable:!0,get:function(){return Ic.numberToHex}}),Object.defineProperty(t,"stringToHex",{enumerable:!0,get:function(){return Ic.stringToHex}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return Ic.toHex}});var tf=P0();Object.defineProperty(t,"bytesToRlp",{enumerable:!0,get:function(){return tf.bytesToRlp}}),Object.defineProperty(t,"hexToRlp",{enumerable:!0,get:function(){return tf.hexToRlp}}),Object.defineProperty(t,"toRlp",{enumerable:!0,get:function(){return tf.toRlp}});var Lv=T7();Object.defineProperty(t,"labelhash",{enumerable:!0,get:function(){return Lv.labelhash}});var Fv=KS();Object.defineProperty(t,"namehash",{enumerable:!0,get:function(){return Fv.namehash}});var rf=o1e();Object.defineProperty(t,"toCoinType",{enumerable:!0,get:function(){return rf.toCoinType}});var qv=fc();Object.defineProperty(t,"getContractError",{enumerable:!0,get:function(){return qv.getContractError}});var J0=dv();Object.defineProperty(t,"defineBlock",{enumerable:!0,get:function(){return J0.defineBlock}}),Object.defineProperty(t,"formatBlock",{enumerable:!0,get:function(){return J0.formatBlock}});var Hv=la();Object.defineProperty(t,"formatLog",{enumerable:!0,get:function(){return Hv.formatLog}});var nf=Zd();Object.defineProperty(t,"defineTransaction",{enumerable:!0,get:function(){return nf.defineTransaction}}),Object.defineProperty(t,"formatTransaction",{enumerable:!0,get:function(){return nf.formatTransaction}}),Object.defineProperty(t,"transactionType",{enumerable:!0,get:function(){return nf.transactionType}});var Q0=z0();Object.defineProperty(t,"defineTransactionReceipt",{enumerable:!0,get:function(){return Q0.defineTransactionReceipt}}),Object.defineProperty(t,"formatTransactionReceipt",{enumerable:!0,get:function(){return Q0.formatTransactionReceipt}});var ll=Ai();Object.defineProperty(t,"defineTransactionRequest",{enumerable:!0,get:function(){return ll.defineTransactionRequest}}),Object.defineProperty(t,"formatTransactionRequest",{enumerable:!0,get:function(){return ll.formatTransactionRequest}}),Object.defineProperty(t,"rpcTransactionType",{enumerable:!0,get:function(){return ll.rpcTransactionType}});var zv=eT();Object.defineProperty(t,"isHash",{enumerable:!0,get:function(){return zv.isHash}});var $v=Qn();Object.defineProperty(t,"keccak256",{enumerable:!0,get:function(){return $v.keccak256}});var Vv=q7();Object.defineProperty(t,"ripemd160",{enumerable:!0,get:function(){return Vv.ripemd160}});var Gv=PS();Object.defineProperty(t,"sha256",{enumerable:!0,get:function(){return Gv.sha256}});var Wv=H7();Object.defineProperty(t,"toEventHash",{enumerable:!0,get:function(){return Wv.toEventHash}});var X0=Kd();Object.defineProperty(t,"toEventSelector",{enumerable:!0,get:function(){return X0.toEventSelector}}),Object.defineProperty(t,"getEventSelector",{enumerable:!0,get:function(){return X0.toEventSelector}});var yT=z7();Object.defineProperty(t,"toEventSignature",{enumerable:!0,get:function(){return yT.toEventSignature}}),Object.defineProperty(t,"getEventSignature",{enumerable:!0,get:function(){return yT.toEventSignature}});var Tq=$7();Object.defineProperty(t,"toFunctionHash",{enumerable:!0,get:function(){return Tq.toFunctionHash}});var bT=nl();Object.defineProperty(t,"toFunctionSelector",{enumerable:!0,get:function(){return bT.toFunctionSelector}}),Object.defineProperty(t,"getFunctionSelector",{enumerable:!0,get:function(){return bT.toFunctionSelector}});var wT=V7();Object.defineProperty(t,"toFunctionSignature",{enumerable:!0,get:function(){return wT.toFunctionSignature}}),Object.defineProperty(t,"getFunctionSignature",{enumerable:!0,get:function(){return wT.toFunctionSignature}});var Pq=Cq();Object.defineProperty(t,"defineKzg",{enumerable:!0,get:function(){return Pq.defineKzg}});var Nq=a1e();Object.defineProperty(t,"setupKzg",{enumerable:!0,get:function(){return Nq.setupKzg}});var ET=G7();Object.defineProperty(t,"createNonceManager",{enumerable:!0,get:function(){return ET.createNonceManager}}),Object.defineProperty(t,"nonceManager",{enumerable:!0,get:function(){return ET.nonceManager}});var Oq=v7();Object.defineProperty(t,"withCache",{enumerable:!0,get:function(){return Oq.withCache}});var Rq=_v();Object.defineProperty(t,"withRetry",{enumerable:!0,get:function(){return Rq.withRetry}});var xq=tT();Object.defineProperty(t,"withTimeout",{enumerable:!0,get:function(){return xq.withTimeout}});var kq=c1e();Object.defineProperty(t,"compactSignatureToSignature",{enumerable:!0,get:function(){return kq.compactSignatureToSignature}});var Bq=$0();Object.defineProperty(t,"hashMessage",{enumerable:!0,get:function(){return Bq.hashMessage}});var Kv=V0();Object.defineProperty(t,"hashDomain",{enumerable:!0,get:function(){return Kv.hashDomain}}),Object.defineProperty(t,"hashStruct",{enumerable:!0,get:function(){return Kv.hashStruct}}),Object.defineProperty(t,"hashTypedData",{enumerable:!0,get:function(){return Kv.hashTypedData}});var jq=iT();Object.defineProperty(t,"isErc6492Signature",{enumerable:!0,get:function(){return jq.isErc6492Signature}});var Dq=cT();Object.defineProperty(t,"isErc8010Signature",{enumerable:!0,get:function(){return Dq.isErc8010Signature}});var vT=u1e();Object.defineProperty(t,"hexToCompactSignature",{enumerable:!0,get:function(){return vT.parseCompactSignature}}),Object.defineProperty(t,"parseCompactSignature",{enumerable:!0,get:function(){return vT.parseCompactSignature}});var Uq=rq();Object.defineProperty(t,"parseErc6492Signature",{enumerable:!0,get:function(){return Uq.parseErc6492Signature}});var Mq=nq();Object.defineProperty(t,"parseErc8010Signature",{enumerable:!0,get:function(){return Mq.parseErc8010Signature}});var _T=l1e();Object.defineProperty(t,"hexToSignature",{enumerable:!0,get:function(){return _T.parseSignature}}),Object.defineProperty(t,"parseSignature",{enumerable:!0,get:function(){return _T.parseSignature}});var Lq=hc();Object.defineProperty(t,"recoverAddress",{enumerable:!0,get:function(){return Lq.recoverAddress}});var Fq=uT();Object.defineProperty(t,"recoverMessageAddress",{enumerable:!0,get:function(){return Fq.recoverMessageAddress}});var qq=AS();Object.defineProperty(t,"recoverPublicKey",{enumerable:!0,get:function(){return qq.recoverPublicKey}});var Hq=d1e();Object.defineProperty(t,"recoverTransactionAddress",{enumerable:!0,get:function(){return Hq.recoverTransactionAddress}});var zq=lT();Object.defineProperty(t,"recoverTypedDataAddress",{enumerable:!0,get:function(){return zq.recoverTypedDataAddress}});var AT=f1e();Object.defineProperty(t,"compactSignatureToHex",{enumerable:!0,get:function(){return AT.serializeCompactSignature}}),Object.defineProperty(t,"serializeCompactSignature",{enumerable:!0,get:function(){return AT.serializeCompactSignature}});var $q=sq();Object.defineProperty(t,"serializeErc6492Signature",{enumerable:!0,get:function(){return $q.serializeErc6492Signature}});var Vq=iq();Object.defineProperty(t,"serializeErc8010Signature",{enumerable:!0,get:function(){return Vq.serializeErc8010Signature}});var CT=mq();Object.defineProperty(t,"signatureToHex",{enumerable:!0,get:function(){return CT.serializeSignature}}),Object.defineProperty(t,"serializeSignature",{enumerable:!0,get:function(){return CT.serializeSignature}});var Gq=h1e();Object.defineProperty(t,"signatureToCompactSignature",{enumerable:!0,get:function(){return Gq.signatureToCompactSignature}});var Wq=J7();Object.defineProperty(t,"toPrefixedMessage",{enumerable:!0,get:function(){return Wq.toPrefixedMessage}});var Kq=oq();Object.defineProperty(t,"verifyHash",{enumerable:!0,get:function(){return Kq.verifyHash}});var Zq=aq();Object.defineProperty(t,"verifyMessage",{enumerable:!0,get:function(){return Zq.verifyMessage}});var Yq=cq();Object.defineProperty(t,"verifyTypedData",{enumerable:!0,get:function(){return Yq.verifyTypedData}});var Jq=Qr();Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return Jq.stringify}});var Qq=Ci();Object.defineProperty(t,"assertRequest",{enumerable:!0,get:function(){return Qq.assertRequest}});var Zv=Cv();Object.defineProperty(t,"assertTransactionEIP1559",{enumerable:!0,get:function(){return Zv.assertTransactionEIP1559}}),Object.defineProperty(t,"assertTransactionEIP2930",{enumerable:!0,get:function(){return Zv.assertTransactionEIP2930}}),Object.defineProperty(t,"assertTransactionLegacy",{enumerable:!0,get:function(){return Zv.assertTransactionLegacy}});var Xq=dT();Object.defineProperty(t,"getSerializedTransactionType",{enumerable:!0,get:function(){return Xq.getSerializedTransactionType}});var eH=mv();Object.defineProperty(t,"getTransactionType",{enumerable:!0,get:function(){return eH.getTransactionType}});var tH=fT();Object.defineProperty(t,"parseTransaction",{enumerable:!0,get:function(){return tH.parseTransaction}});var rH=QS();Object.defineProperty(t,"serializeAccessList",{enumerable:!0,get:function(){return rH.serializeAccessList}});var nH=Iv();Object.defineProperty(t,"serializeTransaction",{enumerable:!0,get:function(){return nH.serializeTransaction}});var eg=Sv();Object.defineProperty(t,"domainSeparator",{enumerable:!0,get:function(){return eg.domainSeparator}}),Object.defineProperty(t,"getTypesForEIP712Domain",{enumerable:!0,get:function(){return eg.getTypesForEIP712Domain}}),Object.defineProperty(t,"serializeTypedData",{enumerable:!0,get:function(){return eg.serializeTypedData}}),Object.defineProperty(t,"validateTypedData",{enumerable:!0,get:function(){return eg.validateTypedData}});var sH=T0();Object.defineProperty(t,"formatEther",{enumerable:!0,get:function(){return sH.formatEther}});var iH=il();Object.defineProperty(t,"formatGwei",{enumerable:!0,get:function(){return iH.formatGwei}});var oH=uv();Object.defineProperty(t,"formatUnits",{enumerable:!0,get:function(){return oH.formatUnits}});var aH=lq();Object.defineProperty(t,"parseEther",{enumerable:!0,get:function(){return aH.parseEther}});var cH=dq();Object.defineProperty(t,"parseGwei",{enumerable:!0,get:function(){return cH.parseGwei}});var uH=Nv();Object.defineProperty(t,"parseUnits",{enumerable:!0,get:function(){return uH.parseUnits}})})(FA)),FA}var eu={},Pj;function g1e(){if(Pj)return eu;Pj=1,Object.defineProperty(eu,"__esModule",{value:!0}),eu.MAGIC_VALUE_BYTES=eu.MAGIC_VALUE=void 0;const t="0x1626ba7e";eu.MAGIC_VALUE=t;const e="0x20c13b0b";return eu.MAGIC_VALUE_BYTES=e,eu}var r1={},Oh={},tu={},Nj;function Iq(){if(Nj)return tu;Nj=1,Object.defineProperty(tu,"__esModule",{value:!0}),tu.PermissionsError=tu.PERMISSIONS_REQUEST_REJECTED=void 0,tu.PERMISSIONS_REQUEST_REJECTED=4001;class t extends Error{constructor(r,n,s){super(r),this.code=n,this.data=s,Object.setPrototypeOf(this,t.prototype)}}return tu.PermissionsError=t,tu}var Oj;function Sq(){if(Oj)return Oh;Oj=1,Object.defineProperty(Oh,"__esModule",{value:!0}),Oh.Wallet=void 0;const t=tl(),e=Iq();class r{constructor(s){this.communicator=s}async getPermissions(){return(await this.communicator.send(t.Methods.wallet_getPermissions,void 0)).data}async requestPermissions(s){if(!this.isPermissionRequestValid(s))throw new e.PermissionsError("Permissions request is invalid",e.PERMISSIONS_REQUEST_REJECTED);try{return(await this.communicator.send(t.Methods.wallet_requestPermissions,s)).data}catch{throw new e.PermissionsError("Permissions rejected",e.PERMISSIONS_REQUEST_REJECTED)}}isPermissionRequestValid(s){return s.every(i=>typeof i=="object"?Object.keys(i).every(o=>!!Object.values(t.RestrictedMethods).includes(o)):!1)}}return Oh.Wallet=r,Oh}var Rj;function m1e(){if(Rj)return r1;Rj=1,Object.defineProperty(r1,"__esModule",{value:!0});const t=Sq(),e=Iq(),r=(s,i)=>i.some(o=>o.parentCapability===s),n=()=>(s,i,o)=>{const a=o.value;return o.value=async function(){const c=new t.Wallet(this.communicator);let u=await c.getPermissions();if(r(i,u)||(u=await c.requestPermissions([{[i]:{}}])),!r(i,u))throw new e.PermissionsError("Permissions rejected",e.PERMISSIONS_REQUEST_REJECTED);return a.apply(this)},o};return r1.default=n,r1}var xj;function y1e(){if(xj)return yo;xj=1;var t=yo&&yo.__decorate||function(u,l,d,f){var g=arguments.length,p=g<3?l:f===null?f=Object.getOwnPropertyDescriptor(l,d):f,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(u,l,d,f);else for(var y=u.length-1;y>=0;y--)(h=u[y])&&(p=(g<3?h(p):g>3?h(l,d,p):h(l,d))||p);return g>3&&p&&Object.defineProperty(l,d,p),p},e=yo&&yo.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(yo,"__esModule",{value:!0}),yo.Safe=void 0;const r=p1e(),n=g1e(),s=tl(),i=gS(),o=pS(),a=e(m1e());class c{constructor(l){this.communicator=l}async getChainInfo(){return(await this.communicator.send(s.Methods.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(s.Methods.getSafeInfo,void 0)).data}async experimental_getBalances({currency:l="usd"}={}){return(await this.communicator.send(s.Methods.getSafeBalances,{currency:l})).data}async check1271Signature(l,d="0x"){const f=await this.getInfo(),g=(0,r.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[l,d]}),p={call:i.RPC_CALLS.eth_call,params:[{to:f.safeAddress,data:g},"latest"]};try{return(await this.communicator.send(s.Methods.rpcCall,p)).data.slice(0,10).toLowerCase()===n.MAGIC_VALUE}catch{return!1}}async check1271SignatureBytes(l,d="0x"){const f=await this.getInfo(),g=(0,r.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[l,d]}),p={call:i.RPC_CALLS.eth_call,params:[{to:f.safeAddress,data:g},"latest"]};try{return(await this.communicator.send(s.Methods.rpcCall,p)).data.slice(0,10).toLowerCase()===n.MAGIC_VALUE_BYTES}catch{return!1}}calculateMessageHash(l){return(0,r.hashMessage)(l)}calculateTypedMessageHash(l){const d=typeof l.domain.chainId=="object"?l.domain.chainId.toNumber():Number(l.domain.chainId);let f=l.primaryType;if(!f){const g=Object.values(l.types),p=Object.keys(l.types).filter(h=>g.every(y=>y.every(({type:b})=>b.replace("[","").replace("]","")!==h)));if(p.length===0||p.length>1)throw new Error("Please specify primaryType");f=p[0]}return(0,r.hashTypedData)({message:l.message,domain:{...l.domain,chainId:d,verifyingContract:l.domain.verifyingContract,salt:l.domain.salt},types:l.types,primaryType:f})}async getOffChainSignature(l){return(await this.communicator.send(s.Methods.getOffChainSignature,l)).data}async isMessageSigned(l,d="0x"){let f;if(typeof l=="string"&&(f=async()=>{const g=this.calculateMessageHash(l);return await this.isMessageHashSigned(g,d)}),(0,o.isObjectEIP712TypedData)(l)&&(f=async()=>{const g=this.calculateTypedMessageHash(l);return await this.isMessageHashSigned(g,d)}),f)return await f();throw new Error("Invalid message type")}async isMessageHashSigned(l,d="0x"){const f=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const g of f)if(await g(l,d))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(s.Methods.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(s.Methods.requestAddressBook,void 0)).data}}return yo.Safe=c,t([(0,a.default)()],c.prototype,"requestAddressBook",null),yo}var kj;function Bj(){if(kj)return Al;kj=1;var t=Al&&Al.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Al,"__esModule",{value:!0});const e=t(bye()),r=Uye(),n=Mye(),s=y1e(),i=Sq();class o{constructor(c={}){const{allowedDomains:u=null,debug:l=!1}=c;this.communicator=new e.default(u,l),this.eth=new n.Eth(this.communicator),this.txs=new r.TXs(this.communicator),this.safe=new s.Safe(this.communicator),this.wallet=new i.Wallet(this.communicator)}}return Al.default=o,Al}var jj;function b1e(){return jj||(jj=1,(function(t){var e=ho&&ho.__createBinding||(Object.create?(function(o,a,c,u){u===void 0&&(u=c);var l=Object.getOwnPropertyDescriptor(a,c);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(o,u,l)}):(function(o,a,c,u){u===void 0&&(u=c),o[u]=a[c]})),r=ho&&ho.__exportStar||function(o,a){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&e(a,o,c)},n=ho&&ho.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.getSDKVersion=void 0;const s=n(Bj());t.default=s.default,r(Bj(),t),r(pS(),t),r(tl(),t),r(VF(),t);var i=$F();Object.defineProperty(t,"getSDKVersion",{enumerable:!0,get:function(){return i.getSDKVersion}}),r(gS(),t)})(ho)),ho}var ru={},Dj;function w1e(){if(Dj)return ru;Dj=1,Object.defineProperty(ru,"__esModule",{value:!0}),ru.numberToHex=ru.getLowerCase=void 0;function t(r){return r&&r.toLowerCase()}ru.getLowerCase=t;function e(r){return`0x${r.toString(16)}`}return ru.numberToHex=e,ru}var Uj;function E1e(){if(Uj)return Tf;Uj=1,Object.defineProperty(Tf,"__esModule",{value:!0}),Tf.SafeAppProvider=void 0;const t=b1e(),e=ED(),r=w1e();class n extends e.EventEmitter{constructor(i,o){super(),this.submittedTxs=new Map,this.safe=i,this.sdk=o}async connect(){this.emit("connect",{chainId:this.chainId})}async disconnect(){}get chainId(){return this.safe.chainId}async request(i){const{method:o,params:a=[]}=i;switch(o){case"eth_accounts":return[this.safe.safeAddress];case"net_version":case"eth_chainId":return(0,r.numberToHex)(this.chainId);case"personal_sign":{const[f,g]=a;if(this.safe.safeAddress.toLowerCase()!==g.toLowerCase())throw new Error("The address or message hash is invalid");const p=await this.sdk.txs.signMessage(f);return("signature"in p?p.signature:void 0)||"0x"}case"eth_sign":{const[f,g]=a;if(this.safe.safeAddress.toLowerCase()!==f.toLowerCase()||!g.startsWith("0x"))throw new Error("The address or message hash is invalid");const p=await this.sdk.txs.signMessage(g);return("signature"in p?p.signature:void 0)||"0x"}case"eth_signTypedData":case"eth_signTypedData_v4":{const[f,g]=a,p=typeof g=="string"?JSON.parse(g):g;if(this.safe.safeAddress.toLowerCase()!==f.toLowerCase())throw new Error("The address is invalid");const h=await this.sdk.txs.signTypedMessage(p);return("signature"in h?h.signature:void 0)||"0x"}case"eth_sendTransaction":const c={...a[0],value:a[0].value||"0",data:a[0].data||"0x"};typeof c.gas=="string"&&c.gas.startsWith("0x")&&(c.gas=parseInt(c.gas,16));const u=await this.sdk.txs.send({txs:[c],params:{safeTxGas:c.gas}});return this.submittedTxs.set(u.safeTxHash,{from:this.safe.safeAddress,hash:u.safeTxHash,gas:0,gasPrice:"0x00",nonce:0,input:c.data,value:c.value,to:c.to,blockHash:null,blockNumber:null,transactionIndex:null}),u.safeTxHash;case"eth_blockNumber":return(await this.sdk.eth.getBlockByNumber(["latest"])).number;case"eth_getBalance":return this.sdk.eth.getBalance([(0,r.getLowerCase)(a[0]),a[1]]);case"eth_getCode":return this.sdk.eth.getCode([(0,r.getLowerCase)(a[0]),a[1]]);case"eth_getTransactionCount":return this.sdk.eth.getTransactionCount([(0,r.getLowerCase)(a[0]),a[1]]);case"eth_getStorageAt":return this.sdk.eth.getStorageAt([(0,r.getLowerCase)(a[0]),a[1],a[2]]);case"eth_getBlockByNumber":return this.sdk.eth.getBlockByNumber([a[0],a[1]]);case"eth_getBlockByHash":return this.sdk.eth.getBlockByHash([a[0],a[1]]);case"eth_getTransactionByHash":let d=a[0];try{d=(await this.sdk.txs.getBySafeTxHash(d)).txHash||d}catch{}return this.submittedTxs.has(d)?this.submittedTxs.get(d):this.sdk.eth.getTransactionByHash([d]).then(f=>(f&&(f.hash=a[0]),f));case"eth_getTransactionReceipt":{let f=a[0];try{f=(await this.sdk.txs.getBySafeTxHash(f)).txHash||f}catch{}return this.sdk.eth.getTransactionReceipt([f]).then(g=>(g&&(g.transactionHash=a[0]),g))}case"eth_estimateGas":return this.sdk.eth.getEstimateGas(a[0]);case"eth_call":return this.sdk.eth.call([a[0],a[1]]);case"eth_getLogs":return this.sdk.eth.getPastLogs([a[0]]);case"eth_gasPrice":return this.sdk.eth.getGasPrice();case"wallet_getPermissions":return this.sdk.wallet.getPermissions();case"wallet_requestPermissions":return this.sdk.wallet.requestPermissions(a[0]);case"safe_setSettings":return this.sdk.eth.setSafeSettings([a[0]]);case"wallet_sendCalls":{const{from:f,calls:g,chainId:p}=a[0];if(p!==(0,r.numberToHex)(this.chainId))throw new Error(`Safe is not on chain ${p}`);if(f!==this.safe.safeAddress)throw Error("Invalid from address");const h=g.map((E,w)=>{if(!E.to)throw new Error(`Invalid call #${w}: missing "to" field`);return{to:E.to,data:E.data??"0x",value:E.value??(0,r.numberToHex)(0)}}),{safeTxHash:y}=await this.sdk.txs.send({txs:h});return{id:y}}case"wallet_getCallsStatus":{const f=a[0],g={[t.TransactionStatus.AWAITING_CONFIRMATIONS]:100,[t.TransactionStatus.AWAITING_EXECUTION]:100,[t.TransactionStatus.SUCCESS]:200,[t.TransactionStatus.CANCELLED]:400,[t.TransactionStatus.FAILED]:500},p=await this.sdk.txs.getBySafeTxHash(f),h={version:"1.0",id:f,chainId:(0,r.numberToHex)(this.chainId),status:g[p.txStatus]};if(!p.txHash)return h;const y=await this.sdk.eth.getTransactionReceipt([p.txHash]);if(!y)return h;const b=p.txData?.dataDecoded?.method!=="multiSend"?1:p.txData.dataDecoded.parameters?.[0].valueDecoded?.length??1,E=Number(y.blockNumber),w=Number(y.gasUsed);return h.receipts=Array(b).fill({logs:y.logs,status:(0,r.numberToHex)(p.txStatus===t.TransactionStatus.SUCCESS?1:0),blockHash:y.blockHash,blockNumber:(0,r.numberToHex)(E),gasUsed:(0,r.numberToHex)(w),transactionHash:p.txHash}),h}case"wallet_showCallsStatus":throw new Error(`"${i.method}" not supported`);case"wallet_getCapabilities":return{[(0,r.numberToHex)(this.chainId)]:{atomicBatch:{supported:!0}}};default:throw Error(`"${i.method}" not implemented`)}}send(i,o){i||o("Undefined request"),this.request(i).then(a=>o(null,{jsonrpc:"2.0",id:i.id,result:a})).catch(a=>o(a,null))}}return Tf.SafeAppProvider=n,Tf}var Mj;function v1e(){return Mj||(Mj=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SafeAppProvider=void 0;var e=E1e();Object.defineProperty(t,"SafeAppProvider",{enumerable:!0,get:function(){return e.SafeAppProvider}})})(BA)),BA}var _1e=v1e();class A1e extends _1e.SafeAppProvider{request(e){return e.method==="eth_requestAccounts"?this.request({method:"eth_accounts",params:[]}):super.request(e)}}class C1e extends hS{async initialize(){const{default:e}=await $r(async()=>{const{default:i}=await import("./index-BS2PzT61.js");return{default:i}},__vite__mapDeps([54,2])),r=new e,n=await r.safe.getInfo(),s=new A1e(n,r);await s.connect().catch(i=>{console.info("Failed to auto-connect to Safe:",i)}),this.provider=s,this.initialized=!0}async getProvider(){return Promise.resolve(this.provider)}}class I1e extends hS{async initialize(){if(!(typeof window>"u")&&window.ethereum)return this.provider=window.ethereum,this.initialized=!0,Promise.resolve()}}const zl={signMessage:async(t,e,r)=>{if(!e)throw new Error("signMessage - provider is undefined");const n=Mt(t)?t:Ee(Yi(t));return await e.request({method:"personal_sign",params:[n,r]})},estimateGas:async(t,e,r,n)=>{if(!e)throw new Error("estimateGas - provider is undefined");if(!r)throw new Error("estimateGas - address is undefined");if(t.chainNamespace&&t.chainNamespace!=="eip155")throw new Error("estimateGas - chainNamespace is not eip155");const s={from:t.address,to:t.to,data:t.data,type:0},i=new zo(e,n);return await new gd(i,r).estimateGas(s)},sendTransaction:async(t,e,r,n)=>{if(!e)throw new Error("sendTransaction - provider is undefined");if(!r)throw new Error("sendTransaction - address is undefined");if(t.chainNamespace&&t.chainNamespace!=="eip155")throw new Error("sendTransaction - chainNamespace is not eip155");const s={to:t.to,value:t.value,gasLimit:t.gas,gasPrice:t.gasPrice,data:t.data,type:0},i=new zo(e,n);return(await(await new gd(i,r).sendTransaction(s)).wait())?.hash||null},writeContract:async(t,e,r,n)=>{if(!e)throw new Error("writeContract - provider is undefined");if(!r)throw new Error("writeContract - address is undefined");const s=new zo(e,n),i=new gd(s,r),o=new hd(t.tokenAddress,t.abi,i);if(!o||!t.method)throw new Error("Contract method is undefined");const a=o[t.method];if(a)return await a(...t.args);throw new Error("Contract method is undefined")},parseWalletCapabilities:t=>{try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}},parseUnits:Xhe,formatUnits:d9};class S1e extends qL{constructor(){super({adapterType:Q.ADAPTER_TYPES.ETHERS,namespace:Q.CHAIN.EVM}),this.balancePromises={},this.ethersProviders={}}async createEthersConfig(){const{metadata:e,enableCoinbase:r,enableInjected:n,enableEIP6963:s}=ne.state;if(e){if(n!==!1){const i=new I1e;await i.initialize(),this.ethersProviders.injected=i}if(r!==!1&&(this.ethersProviders.baseAccount=new mye),be.isSafeApp()){const i=new C1e;await i.initialize(),this.ethersProviders.safe=i}return{...this.ethersProviders,EIP6963:s!==!1,metadata:e}}}async signMessage(e){const{message:r,address:n,provider:s}=e;if(!s)throw new Error("Provider is undefined");try{return{signature:await zl.signMessage(r,s,n)}}catch{throw new Error("EthersAdapter:signMessage - Sign message failed")}}async sendTransaction(e){if(!e.provider)throw new Error("Provider is undefined");const r=z.getAccountData(Q.CHAIN.EVM)?.address;if(!r)throw new Error("Address is undefined");return{hash:await zl.sendTransaction({value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),to:e.to,data:e.data?e.data:"0x",gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,address:r},e.provider,r,Number(e.caipNetwork?.id))}}async writeContract(e){if(!e.provider)throw new Error("Provider is undefined");const{address:r}=_r.parseCaipAddress(e.caipAddress);return{hash:await zl.writeContract(e,e.provider,r,Number(e.caipNetwork?.id))}}async estimateGas(e){const{provider:r,caipNetwork:n,address:s}=e;if(!r)throw new Error("Provider is undefined");try{return{gas:await zl.estimateGas({data:e.data,to:e.to,address:s},r,s,Number(n?.id))}}catch{throw new Error("EthersAdapter:estimateGas - Estimate gas failed")}}parseUnits(e){return zl.parseUnits(e.value,e.decimals)}formatUnits(e){return zl.formatUnits(e.value,e.decimals)}async syncConnection(e){const{id:r,chainId:n}=e,s=this.connectors.find(c=>c.id===r),i=s?.provider;if(!i)throw new Error("Provider not found");const o=await i.request({method:"eth_requestAccounts"}),a=await i.request({method:"eth_chainId"});if(this.listenProviderEvents(r,i),!o[0])throw new Error("No accounts found");if(!s?.type)throw new Error("Connector type not found");return{address:this.toChecksummedAddress(o[0]),chainId:Number(a)||Number(n),provider:i,type:s.type,id:r}}async syncConnectors(){this.ethersConfig=await this.createEthersConfig(),this.ethersConfig?.EIP6963&&this.listenInjectedConnector(!0);const r=Object.keys(this.ethersConfig||{}).filter(n=>n!=="metadata"&&n!=="EIP6963").map(async n=>{const s=n===Q.CONNECTOR_ID.INJECTED;if(this.namespace){const i=this.ethersProviders[n];this.addConnector({id:n,explorerId:bs.ConnectorExplorerIds[n],imageUrl:ms.state.connectorImages?.[n],name:bs.ConnectorNamesMap[n]||"Unknown",imageId:bs.ConnectorImageIds[n],type:bs.ConnectorTypesMap[n]??"EXTERNAL",info:s?void 0:{rdns:n},chain:this.namespace,chains:[],provider:await i?.getProvider()})}});await Promise.all(r)}async disconnectAll(){return{connections:await Promise.all(this.connections.map(async r=>{const n=this.connectors.find(s=>hi.isLowerCaseMatch(s.id,r.connectorId));if(!n)throw new Error("Connector not found");return await this.disconnect({id:n.id}),r}))}}async syncConnections({connectToFirstConnector:e}){const r=this.getCaipNetworks();await Promise.all(this.connectors.filter(n=>{const{hasDisconnected:s,hasConnected:i}=hi.getConnectorStorageInfo(n.id,this.namespace);return!s&&i}).map(async n=>{if(n.id===Q.CONNECTOR_ID.WALLET_CONNECT){const s=Zi.getWalletConnectAccounts(this.universalProvider,this.namespace),i=r.find(o=>o.chainNamespace===this.namespace&&o.id.toString()===s[0]?.chainId?.toString());s.length>0&&this.addConnection({connectorId:n.id,accounts:s.map(o=>({address:o.address})),caipNetwork:i})}else{const{accounts:s,chainId:i}=await p1.fetchProviderData(n);if(s.length>0&&i){const o=r.find(a=>a.chainNamespace===this.namespace&&a.id.toString()===i.toString());this.addConnection({connectorId:n.id,accounts:s.map(a=>({address:a})),caipNetwork:o}),n.provider&&n.id!==Q.CONNECTOR_ID.AUTH&&n.id!==Q.CONNECTOR_ID.WALLET_CONNECT&&this.listenProviderEvents(n.id,n.provider)}}})),e&&this.emitFirstAvailableConnection()}async setUniversalProvider(e){this.universalProvider=e;const r=Q.CONNECTOR_ID.WALLET_CONNECT;return Zi.listenWcProvider({universalProvider:e,namespace:Q.CHAIN.EVM,onConnect:n=>this.onConnect(n,r),onDisconnect:()=>this.onDisconnect(r),onAccountsChanged:n=>this.onAccountsChanged(n,r,!1),onChainChanged:n=>this.onChainChanged(n,r)}),this.addConnector(new HL({provider:e,caipNetworks:this.getCaipNetworks(),namespace:Q.CHAIN.EVM})),Promise.resolve()}eip6963EventHandler(e){if(e.detail){const{info:r,provider:n}=e.detail;if(!this.connectors?.find(i=>i.name===r?.name)){const i=bs.ConnectorTypesMap[Q.CONNECTOR_ID.EIP6963],o=r?.rdns||r?.name||r?.uuid;this.namespace&&o&&this.addConnector({id:o,type:i,imageUrl:r?.icon,name:r?.name||"Unknown",provider:n,info:r,chain:this.namespace,chains:[]})}}}listenInjectedConnector(e){if(typeof window<"u"&&e){const r=this.eip6963EventHandler.bind(this);window.addEventListener(it.EIP6963_ANNOUNCE_EVENT,r),window.dispatchEvent(new Event(it.EIP6963_REQUEST_EVENT))}}async connect({id:e,address:r,type:n,chainId:s,socialUri:i}){try{const o=this.connectors.find(f=>hi.isLowerCaseMatch(f.id,e));if(!o)throw new Error("Connector not found");const a=this.getConnection({address:r,connectorId:e,connections:this.connections,connectors:this.connectors});if(a){const f=a.caipNetwork;if(!f)throw new Error("EthersAdapter:connect - could not find the caipNetwork to connect");if(a.account)return this.emit("accountChanged",{address:this.toChecksummedAddress(a.account.address),chainId:f.id,connector:o}),{address:this.toChecksummedAddress(a.account.address),chainId:f.id,provider:o.provider,type:o.type,id:e}}let c=o?.provider;const u=this.ethersProviders[o.id];if(u&&(await u.initialize(),c=await u.getProvider()),!c)throw new Error("Provider not found");o.provider=c;let l=[],d;if(n===it.CONNECTOR_TYPE_AUTH){const{address:f,accounts:g}=await qn.authConnectorAuthenticate({authConnector:c,chainNamespace:Q.CHAIN.EVM,chainId:s,socialUri:i,preferredAccountType:En("eip155")}),p=this.getCaipNetworks().find(h=>h.id.toString()===s?.toString());l=[f],this.addConnection({connectorId:e,accounts:g?g.map(h=>({address:h.address})):l.map(h=>({address:h})),caipNetwork:p,auth:{name:ie.getConnectedSocialProvider(),username:ie.getConnectedSocialUsername()}}),this.emit("accountChanged",{address:this.toChecksummedAddress(l[0]),chainId:Number(s),connector:o})}else{l=await c.request({method:"eth_requestAccounts"}),d=await c.request({method:"eth_chainId"});const f=this.getCaipNetworks().find(g=>g.id.toString()===s?.toString());if(d!==s){if(!f)throw new Error("EthersAdapter:connect - could not find the caipNetwork to switch");try{await c?.request({method:"wallet_switchEthereumChain",params:[{chainId:md.numberToHexString(f.id)}]})}catch{throw new Error("EthersAdapter:connect - Switch network failed")}}this.emit("accountChanged",{address:this.toChecksummedAddress(l[0]),chainId:Number(s),connector:o}),this.addConnection({connectorId:e,accounts:l.map(g=>({address:g})),caipNetwork:f}),o.id!==Q.CONNECTOR_ID.WALLET_CONNECT&&this.listenProviderEvents(e,c)}return{address:this.toChecksummedAddress(l[0]),chainId:Number(s),provider:c,type:n,id:e}}catch(o){throw Fi.isUserRejectedRequestError(o)?new KC(o):o}}async reconnect(e){const{id:r,chainId:n}=e,s=this.connectors.find(i=>i.id===r);s&&s.type==="AUTH"&&n&&await qn.authConnectorAuthenticate({authConnector:s.provider,chainNamespace:Q.CHAIN.EVM,chainId:n,preferredAccountType:En("eip155")})}async getAccounts(e){const r=this.connectors.find(o=>o.id===e.id),n=r?.provider;if(!n||!r)throw new Error("Provider not found");const s=this.getConnection({connectorId:e.id,connections:this.connections,connectors:this.connectors});if(s)return{accounts:s.accounts.map(({address:o})=>be.createAccount(Q.CHAIN.EVM,o,"eoa"))};if(e.id===Q.CONNECTOR_ID.AUTH){const o=r.provider;if(!o.user)return{accounts:[]};const{accounts:a,address:c}=o.user;return Promise.resolve({accounts:(a||[{address:c,type:"eoa"}]).map(u=>be.createAccount(Q.CHAIN.EVM,u.address,u.type))})}return{accounts:(await n.request({method:"eth_requestAccounts"})).map(o=>be.createAccount(Q.CHAIN.EVM,o,"eoa"))}}async disconnect(e){if(e.id){const r=this.connectors.find(s=>hi.isLowerCaseMatch(s.id,e.id));if(!r)throw new Error("Connector not found");const n=this.getConnection({connectorId:e.id,connections:this.connections,connectors:this.connectors});switch(r.type){case it.CONNECTOR_TYPE_WALLET_CONNECT:r.provider.session&&r.provider.disconnect();break;case it.CONNECTOR_TYPE_AUTH:await r.provider?.disconnect();break;case it.CONNECTOR_TYPE_ANNOUNCED:case it.CONNECTOR_TYPE_EXTERNAL:await this.revokeProviderPermissions(r.provider);break;default:throw new Error("Unsupported provider type")}return r.id&&(this.removeProviderListeners(r.id),this.deleteConnection(r.id)),this.connections.length===0?this.emit("disconnect"):this.emitFirstAvailableConnection(),{connections:n?[n]:[]}}return this.disconnectAll()}async getBalance(e){const r=e.address,n=this.getCaipNetworks().find(s=>s.id.toString()===e.chainId?.toString());if(!r)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(n&&n.chainNamespace===Q.CHAIN.EVM){const s=`${n.caipNetworkId}:${r}`,i=this.balancePromises[s];if(i)return i;const o=ie.getNativeBalanceCacheForCaipAddress(s);if(o)return{balance:o.balance,symbol:o.symbol};const a=new pye(n.rpcUrls.default.http[0],{chainId:n.id,name:n.name});if(a)try{return this.balancePromises[s]=new Promise(async c=>{try{const u=await a.getBalance(r),l=epe(u);ie.updateNativeBalanceCache({caipAddress:s,balance:l,symbol:n.nativeCurrency.symbol,timestamp:Date.now()}),c({balance:l,symbol:n.nativeCurrency.symbol})}catch{c({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"}}catch{return{balance:"0.00",symbol:"ETH"}}}return{balance:"0.00",symbol:"ETH"}}async switchNetwork(e){const{caipNetwork:r}=e,n=yt.getProviderId(r.chainNamespace),s=yt.getProvider(r.chainNamespace);if(n==="AUTH"||n==="WALLET_CONNECT"){await super.switchNetwork(e);return}if(!s)throw new Error("Provider not found");try{await s?.request({method:"wallet_switchEthereumChain",params:[{chainId:md.numberToHexString(r.id)}]})}catch(i){if(i.code===Ga.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||i.code===Ga.ERROR_INVALID_CHAIN_ID||i.code===Ga.ERROR_CODE_DEFAULT||i?.data?.originalError?.code===Ga.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)await md.addEthereumChain(s,r);else if(n==="ANNOUNCED"||n==="EXTERNAL"||n==="INJECTED")throw new Error("Chain is not supported")}}getWalletConnectProvider(){return this.connectors.find(e=>e.type==="WALLET_CONNECT")?.provider}async revokeProviderPermissions(e){try{(await e.request({method:"wallet_getPermissions"})).find(s=>s.parentCapability==="eth_accounts")&&await e.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]})}catch(r){console.info("Could not revoke permissions from wallet. Disconnecting...",r)}}async getCapabilities(e){const r=yt.getProvider(Q.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");return await r.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){const r=yt.getProvider(Q.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");return await r.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){const r=yt.getProvider(Q.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");return await r.request({method:"wallet_revokePermissions",params:[e]})}async walletGetAssets(e){const r=yt.getProvider(Q.CHAIN.EVM);if(!r)throw new Error("Provider is undefined");return await r.request({method:"wallet_getAssets",params:[e]})}toChecksummedAddress(e){try{return St(e.toLowerCase())}catch{return e}}}const T1e=fD({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockTime:250,rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),P1e=fD({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockTime:12e3,rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:23085558},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function wc(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}wc({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"});wc({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});wc({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});wc({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});wc({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});wc({id:"00000008819873e925422c1ff0f99f7c",caipNetworkId:"bip122:00000008819873e925422c1ff0f99f7c",chainNamespace:"bip122",name:"Bitcoin Signet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});wc({id:"-239",name:"TON",network:"ton-mainnet",nativeCurrency:{name:"TON",symbol:"TON",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Tonscan",url:"https://tonscan.org"}},testnet:!1,chainNamespace:"ton",caipNetworkId:"ton:-239"});wc({id:"-3",name:"TON Testnet",network:"ton-testnet",nativeCurrency:{name:"TON",symbol:"TON",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Tonscan",url:"https://testnet.tonscan.org"}},testnet:!0,chainNamespace:"ton",caipNetworkId:"ton:-3"});const N1e="9ae9b4de3d3181b8ea8fda287858f35e",O1e={name:"AppKit",description:"AppKit Example",url:"https://nol.pages.dev",icons:["https://avatars.githubusercontent.com/u/179229932"]},Rv=Nhe({adapters:[new S1e],networks:[P1e,T1e],metadata:O1e,projectId:N1e,features:{analytics:!0}}),R1e=document.getElementById("open-connect-modal"),x1e=document.getElementById("open-network-modal");R1e.addEventListener("click",()=>Rv.open());x1e.addEventListener("click",()=>Rv.open({view:"Networks"}));await Rv.subscribeProviders(t=>t.eip155);await Rv.subscribeAccount(t=>t);export{Tr as $,cn as A,He as B,z as C,$fe as D,Ye as E,gD as F,ep as G,ie as H,ave as I,ys as J,xe as K,Be as L,ot as M,RH as N,ne as O,it as P,ke as Q,Fe as R,zi as S,Un as T,jV as U,un as V,yr as W,_r as X,yt as Y,jH as Z,tp as _,be as a,nG as a$,rt as a0,Wh as a1,I2 as a2,ms as a3,Bye as a4,Du as a5,Fi as a6,qn as a7,uve as a8,bD as a9,YG as aA,qV as aB,fD as aC,Md as aD,k1 as aE,T1e as aF,P1e as aG,cg as aH,CD as aI,ZW as aJ,YW as aK,fP as aL,JC as aM,i1 as aN,Z1e as aO,K1e as aP,rc as aQ,V1e as aR,QC as aS,Q1e as aT,X1e as aU,Ed as aV,bp as aW,uD as aX,eI as aY,tG as aZ,rG as a_,WC as aa,o1 as ab,Vt as ac,qT as ad,Y1e as ae,rD as af,HT as ag,ZV as ah,KV as ai,F1e as aj,aD as ak,DV as al,zV as am,MV as an,cD as ao,oD as ap,Su as aq,GL as ar,vC as as,$r as at,Td as au,p1 as av,B1 as aw,hi as ax,Dh as ay,Gl as az,eve as b,UV as b$,sG as b0,iG as b1,oG as b2,aG as b3,cG as b4,uG as b5,lG as b6,eEe as b7,z1e as b8,fG as b9,kp as bA,xp as bB,Rp as bC,Ip as bD,Np as bE,yp as bF,gp as bG,vp as bH,_d as bI,mp as bJ,hu as bK,pp as bL,Cp as bM,vs as bN,wp as bO,Ep as bP,Yn as bQ,Sp as bR,vd as bS,_p as bT,Op as bU,QV as bV,Pp as bW,Tp as bX,Ap as bY,Tu as bZ,AG as b_,tEe as ba,dD as bb,dG as bc,hG as bd,pG as be,rEe as bf,oEe as bg,nEe as bh,iEe as bi,sEe as bj,aEe as bk,cEe as bl,W1e as bm,qj as bn,xh as bo,XC as bp,Lh as bq,hD as br,WT as bs,vG as bt,sg as bu,YV as bv,iD as bw,LV as bx,FV as by,$T as bz,XEe as c,GV as c0,WV as c1,bG as c2,ft as d,yD as e,rve as f,tve as g,nve as h,Wr as i,jr as j,cve as k,dve as l,m1 as m,za as n,me as o,Kt as p,Q as q,lve as r,Kr as s,En as t,KG as u,vhe as v,Fs as w,ove as x,tI as y,ue as z};
