// Replace assets/nola-wallet/index.min.js with this improved wrapper
(function(window, document){
  if (window.WalletConnect || window.WalletConnectEthereumProvider || window.WalletConnectProvider || window.EthereumProvider) {
    console.log('WalletConnect UMD appears present');
    return;
  }
  var vendor = 'https://cdn.jsdelivr.net/npm/@walletconnect/ethereum-provider@2.6.0/dist/umd/index.min.js';
  var s = document.createElement('script'); s.src = vendor; s.async = true;
  s.onload = function(){
    // wait up to 6s for the vendor to define expected globals
    var found = false, start = Date.now();
    (function poll(){
      if (window.WalletConnect || window.WalletConnectEthereumProvider || window.WalletConnectProvider || window.EthereumProvider) { found = true; console.log('WalletConnect vendor ready'); return; }
      if (Date.now() - start < 6000) return setTimeout(poll, 200);
      console.warn('WalletConnect vendor loaded but globals not found');
    })();
  };
  s.onerror = function(){ console.error('Failed to load WalletConnect vendor'); };
  document.head.appendChild(s);
})(window, document);
