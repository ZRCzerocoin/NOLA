<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Universal Wallet Connect</title>

<style>
  body, html {
    height: 100%;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #0d1117;
    font-family: Arial, sans-serif;
  }

  #connectWallet {
    padding: 22px 50px;
    font-size: 1.7rem;
    font-weight: bold;
    color: white;
    border: none;
    border-radius: 20px;
    cursor: pointer;
    background: linear-gradient(145deg, #7a41ff, #4b1bb1);
    box-shadow: 0 10px 25px rgba(0,0,0,0.4);
    transition: 0.3s;
  }

  #connectWallet:hover {
    transform: scale(1.1) rotateX(12deg) rotateY(12deg);
  }
</style>
</head>

<body>

<button id="connectWallet">Connect Wallet</button>

<script type="module">
import { WalletConnectModal } from "https://esm.sh/@walletconnect/modal@3";
import { EthereumProvider } from "https://esm.sh/@walletconnect/ethereum-provider@3";

// YOUR PROJECT ID ✔
const projectId = "6557a92e3698182727669d41cbeb95a1";

// WalletConnect universal modal
const wcModal = new WalletConnectModal({
  projectId: projectId,
  themeMode: "dark",
});

// Create Ethereum universal provider
let provider = await EthereumProvider.init({
  projectId: projectId,
  showQrModal: true,
  optionalChains: [137],    // Polygon
});

// Connect function — works on ALL wallets
async function connect() {
  try {
    await provider.connect();  // <-- THIS triggers apps on mobile automatically!

    const accounts = provider.accounts;
    const address = accounts[0];

    alert("Connected: " + address);
    document.getElementById("connectWallet").innerText = "Connected ✔";
  } catch (err) {
    console.error(err);
    alert("Connection failed: " + err.message);
  }
}

document.getElementById("connectWallet").addEventListener("click", connect);
</script>

</body>
</html>
